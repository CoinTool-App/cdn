(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a3021e0"],{"189a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"container "+(e.tableData.length>0?"miniContainer":"")},[a("HistoryRecordDialog",{ref:"HistoryRecordDialog",attrs:{list:e.historyRecordDialogList}}),e.isPc?a("Chrome"):e._e(),a("div",{staticClass:"createBox"},[a("div",{staticClass:"bgIcon"},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"certified"}})],1),a("div",{staticClass:"boxCenter"},[a("div",{staticClass:"coinIcon"},[a("svg-icon",{style:"color:"+e.$coinInfo[e.form.coin].color,attrs:{"icon-class":e.$coinInfo[e.form.coin].icon}}),a("span",{staticClass:"title",style:"color:"+e.$coinInfo[e.form.coin].color},[e._v(" "+e._s(this.$coinInfo[e.form.coin].chainName+" "+e.$t("route.approve"))+" ")])],1),e._m(0),a("div",{staticClass:"switchBox"},[a("el-select",{staticStyle:{width:"100%"},attrs:{value:e.form.coin,size:"large"},on:{change:e.onChangeChain}},e._l(e.chainList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"16px"}},[a("svg-icon",{staticClass:"icon",style:"color:"+e.$coinInfo[t.value].color,attrs:{"icon-class":e.$coinInfo[t.value].icon}})],1)])})),1)],1),a("div",{staticClass:"inputBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address,expression:"form.address"}],staticClass:"input",attrs:{type:"text",placeholder:e.$t("approve.inputPlaceholder")},domProps:{value:e.form.address},on:{input:function(t){t.target.composing||e.$set(e.form,"address",t.target.value)}}}),a("div",{staticClass:"icon",on:{click:e.onStartCheck}},[a("i",{class:e.loading?"el-icon-loading":"el-icon-right"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.tableData.length,expression:"tableData.length === 0"}],staticClass:"desc"},[a("el-alert",{attrs:{title:e.$t("approve.desc"),type:"success",closable:!1}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTP,expression:"!isTP"}],staticClass:"dialogBtn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onCustomApprove}},[e._v(e._s(e.$t("approve.approve_contract")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRunning,expression:"isRunning"}],staticClass:"stopBtn"},[a("el-button",{attrs:{size:e.isPc?"small":"mini",type:"success",icon:"el-icon-video-pause"},on:{click:function(t){e.isStopScan=!0}}},[e._v(e._s(e.$t("approve.stopScan")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRunning&&e.tableData.length>0,expression:"!isRunning && tableData.length > 0"}],staticClass:"stopBtn"},[a("el-button",{attrs:{size:e.isPc?"small":"mini",type:"danger"},on:{click:e.onShowHistoryRecord}},[e._v(e._s(e.$t("approve.history_record")))])],1)])]),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],attrs:{"text-inside":!0,"stroke-width":12,percentage:e.percentage}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],staticClass:"scrollBox"},[a("div",{staticClass:"tips"},[a("p",{staticClass:"alertText"},[e._v(e._s(e.$t("approve.alert_text")))]),(""!==e.account&&e.isTP,e._e()),"trx"===e.form.coin||e.isTP||e.account?e._e():a("div",{staticClass:"btnBox",staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"success"},on:{click:e.onConnectWallet}},[e._v(e._s(e.$t("common.connect")))])],1),e.form.web3Address.toLowerCase()===e.form.address.toLowerCase()&&""!==e.form.web3Address?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRunning,expression:"!isRunning"}],staticClass:"btnBox"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isTP||!0,expression:"isTP || true"}],attrs:{type:"success"},on:{click:e.onDonationTP}},[e._v(e._s(e.$t("common.donation_confirm")))]),a("el-button",{attrs:{type:"success"},on:{click:e.onBatchCancel}},[e._v(e._s(e.$t("approve.batchCancel")))])],1):e._e()]),a("div",{staticClass:"cardList"},e._l(e.tableData,(function(t,r){return a("div",{key:r,staticClass:"card"},[a("div",{staticClass:"index"},[e._v(e._s(r+1))]),a("div",{staticClass:"coinInfo"},[a("div",{staticClass:"left"},[a("div",{staticClass:"imgBox"},[a("el-image",{staticClass:"img img1",attrs:{src:e.debankChainList.includes(e.form.coin)?t.logo_url:e.getLogoLink(e.form.coin,t.token_address)}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn@main/pic/unknown-token.png"}})])])],1),a("div",{staticClass:"sybmol"},[a("a",{staticStyle:{"margin-left":"6px"},attrs:{href:e.getBrowserLink({chainName:e.form.coin,token:t.token_address,address:e.form.address,type:"token"}),target:"_blank"}},[a("span",[e._v(e._s(t.symbol))]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:"nft"===t.tokenType,expression:"item.tokenType ==='nft'"}],staticClass:"tag",attrs:{size:"mini"}},[e._v("NFT")])],1)])]),a("div",{staticClass:"right"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isPc,expression:"isPc"}]},[e._v(e._s(e.$t("approve.dangerLevel"))+":")]),a("span",{class:"flag "+(1!==t.type||e.isSafeAddress(t.c_address)?"greenBg":"redBg")},[e._v(" "+e._s(1!==t.type||e.isSafeAddress(t.c_address)?e.$t("approve.low"):e.$t("approve.high"))+" ")])])]),a("ul",[t.privat_address&&!e.isPc?a("li",[a("span",{staticClass:"key"},[e._v(e._s("Tips")+":")]),a("div",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("approve.privareaddress")))])]):e._e(),a("li",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.smart_contract"))+":")]),a("div",{staticClass:"value"},[a("a",{attrs:{href:e.getBrowserLink({chainName:e.form.coin,address:t.c_address,type:"contract"}),target:"_blank"}},[e._v(" "+e._s(e._f("autoCheckName")(t.c_address))),t.privat_address&&e.isPc?a("span",{staticStyle:{"margin-left":"10px",color:"red"}},[e._v(e._s(e.$t("approve.privareaddress")))]):e._e()]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx_hash,expression:"item.tx_hash",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy"},[a("svg-icon",{staticClass:"copyIcon",attrs:{"icon-class":"copy"}})],1)])]),a("li",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.token"))+":")]),a("div",{staticClass:"value"},[a("a",{attrs:{href:e.getBrowserLink({chainName:e.form.coin,token:t.token_address,address:e.form.address,type:"token"}),target:"_blank"}},[e._v(" "+e._s(e._f("miniAddress")(t.token_address))+" ")]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.token_address,expression:"item.token_address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy"},[a("svg-icon",{staticClass:"copyIcon",attrs:{"icon-class":"copy"}})],1)])]),t.approve_time?a("li",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.approve_date"))+":")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e.$moment(1e3*t.approve_time).format("YYYY-MM-DD HH:mm:ss"))+"(UTC) ")])]):e._e(),t.tx_hash?a("li",[a("span",{staticClass:"key"},[e._v(e._s("TX")+":")]),a("div",{staticClass:"value"},[a("a",{attrs:{href:e.getBrowserLink({chainName:e.form.coin,tx:t.tx_hash,type:"tx"}),target:"_blank"}},[e._v(" "+e._s(e._f("miniAddress")(t.tx_hash))+" ")]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx_hash,expression:"item.tx_hash",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy"},[a("svg-icon",{staticClass:"copyIcon",attrs:{"icon-class":"copy"}})],1)])]):e._e(),a("li",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.amount"))+":")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.amount)+" "),a("i",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"item.type===1"}],staticClass:"el-icon-warning",staticStyle:{color:"red"}})])])]),a("div",{staticClass:"unlockBtn"},[e.form.web3Address.toLowerCase()===e.form.address.toLowerCase()&&""!==e.form.web3Address?a("el-button",{attrs:{loading:1===t.status,type:"danger",size:"mini"},on:{click:function(a){return e.onCloseApprove(r,t)}}},[e._v(e._s(e.$t("approve.decline")))]):a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("approve.unlock")))])],1)])})),0)])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"typeBox"},[a("li",[a("i",{staticClass:"el-icon-success icon"}),a("span",{staticClass:"label"},[e._v("Token")])]),a("li",[a("i",{staticClass:"el-icon-success icon"}),a("span",{staticClass:"label"},[e._v("NFT")])])])}],n=a("5af6"),o=a("a892"),i=a("4833"),c=a("efe2"),d=(a("6a61"),a("37de"),a("1e34"),a("a9b5"),a("7479"),a("9bdd"),a("8b79"),a("96e6"),a("403f"),a("297b"),a("05d6"),a("65f0"),a("7fe9"),a("dfe9"),a("c9b2"),{zh:{approve:{desc:"工具说明：检查您的钱包地址授权过哪些合约，请及时取消不信任的合约授权，保证你钱包的安全性！",smart_contract:"授权智能合约",token:"被授权Token",amount:"授权数量",donation:"请{appName} 喝一杯 ☕️ 咖啡({amount}{sybmol})",alert_text:"当您向某项合约授权无限额度的权限，该项目有权支配您所有的资产，此类授权危险系数极大，建议您及时收回授权.",action:"操作",decline:"取消授权",decline_ok:"成功取消授权",addressError:"查询地址错误",unlock:"取消授权请先解锁钱包",privareaddress:"注意:这是私人钱包，请立即取消授权!",addressZero:"你没有授权代币给任何合约，很安全!",unlimited:"无限",sleep:"查询过程缓慢，请耐心等待!",inputPlaceholder:"请输入你要检查的地址",dangerLevel:"危险等级",high:"高",low:"低",search_error:"当前查询频率高峰，请10秒后尝试",timeout_tips:"RPC查询超时，请重试",batchCancel:"取消所有授权",stopScan:"取消扫描",history_record:"历史授权记录",approve_contract:"自定义授权合约",nft_address:"NFT合约地址",approval:"授信",cancel_approval:"取消授信",approve_date:"授权日期",metasafe_desc:"Cointool - MetaSafe 是一款 WEB3.0 防范恶意授权转账的浏览器插件，为用户提供资产安全保护！"}},en:{approve:{desc:"Tips: check your wallet address authorized those contracts, please cancel the authorization of the contracts do not trust, to ensure the security of your wallet!",smart_contract:"Contract",token:"Token",amount:"Allowance",sleep:"The query process is slow, please be patient!",donation:"please {appName}  Have a cup of coffee ({amount}{sybmol})",alert_text:"When you authorize an unlimited amount of access to a contract, the program has the right to control all of your assets, this type of authorization is extremely dangerous and you are advised to withdraw it in time.",action:"Action",decline:"Revoke",decline_ok:"Successfully Decline",addressError:"Address Error",addressZero:"You don't authorize tokens to any contracts. It's safe",unlimited:"unlimited",unlock:"Please unlock wallet",privareaddress:"Attention:This is a private wallet, please cancel authorization now!",inputPlaceholder:"Please enter the address you want to check",dangerLevel:"Danger level",high:"High",low:"Low",search_error:"Current query peak, please try 10 seconds later",timeout_tips:"RPC query timed out. Please try again",batchCancel:"All Revoke",stopScan:"Stop Scan",history_record:"Historical record",approve_contract:"Custom Approve",nft_address:" NFT address",approval:"Approval",cancel_approval:"Cancel Approval",approve_date:"Approve Date",metasafe_desc:"CoinTool - MetaSafe is a WEB 3.0 browser plugin against malicious approve and transfers, providing users with asset security!"}}}),u=a("a835"),l=a("85d4"),p=a("5088"),f=a.n(p),m=a("8feb"),h=a.n(m),b=a("7921"),v=a.n(b),x=a("e6ce"),g={heco:"https://api.hecoinfo.com/api?module=account&action=txlist&startblock=0&endblock=999999999999999&&address=#address#&apiKey=5UZHH6GSYYPRXSI1DRS29KAE3NQP64UXRZ",ftm:"https://api.ftmscan.com/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["ftm"].apiKey),matic:"https://api.polygonscan.com/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["matic"].apiKey),bsc:"https://api.bscscan.com/api?module=account&action=txlist&address=#address#&apiKey=J9AWK46R68H8S4KNPE3VXDJK788JDV9TCY",eth:"https://api.etherscan.io/api?module=account&action=txlist&address=#address#&apiKey=NTBHBJKFU6G8H9RSIGDD24XBIRK3YJ3C64",op:"https://api-optimistic.etherscan.io/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["op"].apiKey),avax:"https://api.snowtrace.io/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["avax"].apiKey),arb:"https://api.arbiscan.io/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["arb"].apiKey),cro:"https://api.cronoscan.com/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["cro"].apiKey),movr:"https://api-moonriver.moonscan.io/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["movr"].apiKey),glmr:"https://api-moonbeam.moonscan.io/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["glmr"].apiKey),"polygon-zkevm":"https://api-zkevm.polygonscan.com/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["glmr"].apiKey),celo:"https://explorer.celo.org/mainnet/api?module=account&action=txlist&address=#address#&sort=desc",fuse:"https://explorer.fuse.io/api?module=account&action=txlist&address=#address#&sort=desc",xdai:"".concat(x["a"]["xdai"].blockBrowserApi,"/api/v2/addresses/#address#/transactions?filter=from"),trx:"https://api.trongrid.io/v1/accounts/#address#/transactions/trc20?limit=200",one:"https://explorer.harmony.one/api?module=account&action=txlist&address=#address#&sort=desc",brise:"https://brisescan.com/api?module=account&action=txlist&address=#address#&sort=desc",dogechain:"https://explorer.dogechain.dog/api?module=account&action=txlist&address=#address#&sort=desc",etc:"".concat(x["a"]["etc"].blockBrowserApi,"/api/v2/addresses/#address#/transactions?filter=from"),syscoin:"https://explorer.syscoin.org/api?module=account&action=txlist&address=#address#&sort=desc",canto:"".concat(x["a"]["canto"].blockBrowserApi,"/api/v2/addresses/#address#/transactions?filter=from"),onus:"https://explorer.onuschain.io/api?module=account&action=txlist&address=#address#&sort=desc",vlx:"https://evmexplorer.velas.com/api?module=account&action=txlist&address=#address#&sort=desc",pls:"".concat(x["a"]["pls"].blockBrowserApi,"/api/v2/addresses/#address#/transactions?filter=from"),base:"https://api.basescan.org/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["base"].apiKey),linea:"https://api.lineascan.build/api?module=account&action=txlist&address=#address#&apiKey=".concat(x["a"]["linea"].apiKey),scroll:"https://blockscout.scroll.io/api?module=account&action=txlist&address=#address#&sort=desc",shibarium:"".concat(x["a"]["shibarium"].blockBrowserApi,"/api/v2/addresses/#address#/transactions?filter=from")},k=a("ae11"),_=a("ed08"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog",attrs:{width:e.isPc?"600px":"90%",height:"800px",visible:e.isShowDialog,modal:!0,title:e.$t("approve.history_record")},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("div",{staticClass:"dialogBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"symbol",label:"symbol",width:"180"}}),a("el-table-column",{attrs:{prop:"token_address",label:"Token Address"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("autoAddress")(r.token_address)))]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:r.token_address,expression:"row.token_address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy",attrs:{type:"text"}},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"copy"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"c_address",label:"Contract Address"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("autoAddress")(r.c_address)))]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:r.c_address,expression:"row.c_address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy",attrs:{type:"text"}},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"copy"}})],1)]}}])})],1)],1)])},y=[],C=a("52c1"),$={inject:["onCopySuccess"],components:{},props:{list:{require:!0,type:Array}},data:function(){return{loading:!0,isShowDialog:!1}},computed:Object(c["a"])({},Object(C["b"])(["isPc"])),watch:{},created:function(){},mounted:function(){},methods:{show:function(){this.isShowDialog=!this.isShowDialog}}},N=$,L=a("5d22"),D=Object(L["a"])(N,w,y,!1,null,"5ee21ea8",null),S=D.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShowChrome?a("div",{staticClass:"chrome"},[a("i",{staticClass:"el-icon-close closeIcon",on:{click:function(t){e.isShowChrome=!1}}}),a("svg-icon",{staticClass:"chromeIcon",attrs:{"icon-class":"chrome"}}),a("p",{staticClass:"title"},[e._v("Google extended - MetaSafe")]),a("p",{staticClass:"desc"},[e._v(e._s(e.$t("approve.metasafe_desc")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onDownload}},[e._v("Download")])],1):e._e()},j=[],T={props:{},data:function(){return{isShowChrome:!0}},created:function(){},mounted:function(){},methods:{onDownload:function(){window.open("https://chrome.google.com/webstore/detail/cointool-metasafe/adoeinlolcjogennbgahohnjeckanaeb","_blank")}}},A=T,B=(a("ebf1"),Object(L["a"])(A,R,j,!1,null,"d3ee1b56",null)),I=B.exports,O=a("986e"),P="approve",K=Object(c["a"])(Object(c["a"])({name:P,inject:["tronwalletStateTest","onCanCoffee","onDonation","onCopySuccess"],components:{HistoryRecordDialog:S,Chrome:I},props:{}},Object(C["b"])(["isPc"])),{},{data:function(){return{debankChainList:["okt","sbch","cfx"],loading:!1,donationChecked:!0,isGiveCoffet:!1,isBatchCancel:!1,checkApiMap:{},form:{coin:"eth",address:"",web3Address:"",approveType:"token"},tableData:[],percentage:0,isStopScan:!1,isRunning:!1,historyRecordDialogList:[],securityContract:[],donationTo:"0x400D0158bF59394949443a37F34C83Ed06579e16"}},computed:Object(c["a"])(Object(c["a"])({},Object(C["b"])(["isPc","isTP","account","navShowChain"])),{},{chainList:function(){return Object(_["q"])(P,this.navShowChain)}}),watch:{account:{handler:function(e){"trx"!==this.form.coin&&(this.form.address=e.toLowerCase(),this.form.web3Address=e.toLowerCase())},immediate:!0},$route:{immediate:!0,handler:function(e){}}},created:function(){this.$i18n.getLocaleMessage("en")[P]||(this.$i18n.mergeLocaleMessage("en",d.en),this.$i18n.mergeLocaleMessage("zh",d.zh)),this.securityContract=u["a"].getCoinToolContract();var e=this.$route.meta.chainName;"trx"===e&&(this.tronwalletStateTest(),this.donationTo="TMkFMaLJ5gA4QN1mnHSxUY4fURhavsXW9o"),this.form.coin=e},mounted:function(){var e=this;this.checkApiMap=g;var t=this.$route.query.address;setTimeout((function(){if("trx"===e.form.coin)try{var a,r;e.form.web3Address=(null===(a=window.tronWeb)||void 0===a?void 0:a.defaultAddress.base58)||"",e.form.address=(null===(r=window.tronWeb)||void 0===r?void 0:r.defaultAddress.base58)||"",t&&0!==t.length&&(e.form.address=t)}catch(s){console.log(s)}else t&&0!==t.length&&(e.form.address=t.toLowerCase())}),3e3)},methods:{getLogoLink:function(e,t){return"trx"===e?this.$coinInfo[e].logoLink.replace("#address#",t):this.$coinInfo[e].logoLink.replace("#address#",t.toLowerCase()).replace("#addressT#",Object(l["toChecksumAddress"])(t))},isSafeAddress:function(e){return u["a"].isSafeAddress(e)},getDeBankList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.percentage=0,e.loading=!0,t.prev=2,t.next=5,e.$ajax({url:"https://openapi.debank.com/v1/user/token_authorized_list",data:{id:e.form.address,chain_id:e.form.coin},isProxy:!0,method:"get",timeout:2e4});case 5:a=t.sent,r=a.map((function(t){var a;t.spenders.length>0&&(a=t.spenders[0]);var r=t.sum_exposure_usd>=t.price*t.balance?1:2,s={tokenType:"erc20",privat_address:!1,type:r,status:0,symbol:t.symbol,token_address:t.id,c_address:a.id,amount:e.$t("approve.unlimited"),approve_time:"",block_height:"",logo_url:t.logo_url,tx_hash:""};return s})),e.tableData=r,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:return t.prev=13,e.percentage=100,e.loading=!1,0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.finish(13);case 18:case"end":return t.stop()}}),t,null,[[2,10,13,18]])})))()},onCustomApprove:function(){this.$router.push({path:"/customApprove/".concat(this.chainName)})},onShowHistoryRecord:function(){this.$refs.HistoryRecordDialog.show()},onBatchCancel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.onCheckNetwork()){t.next=2;break}return t.abrupt("return");case 2:e.isBatchCancel=!0,a=Object(o["a"])(e.tableData.entries()),t.prev=4,a.s();case 6:if((r=a.n()).done){t.next=12;break}return s=Object(n["a"])(r.value,2),i=s[0],c=s[1],t.next=10,e.onCloseApprove(i,c);case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),a.e(t.t0);case 17:return t.prev=17,a.f(),t.finish(17);case 20:e.isBatchCancel=!1,e.onCanCoffee({from:e.form.web3Address,to:e.donationTo,chain:e.form.coin,title:e.$t("common.donation_alert")});case 22:case"end":return t.stop()}}),t,null,[[4,14,17,20]])})))()},onConnectWallet:function(){O["h"].$emit(O["c"])},getBrowserLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chainName:"eth",token:"",address:"",tx:"",type:"token"};return"token"===e.type?"trx"!==e.chainName?"".concat(this.$coinInfo[e.chainName].blockBrowser,"/token/").concat(e.token,"?a=").concat(e.address):"".concat(this.$coinInfo[e.chainName].blockBrowser,"/#/token20/").concat(e.token,"?a=").concat(e.address):"contract"===e.type?"trx"!==e.chainName?"".concat(this.$coinInfo[this.form.coin].blockBrowser,"/address/").concat(e.address):"".concat(this.$coinInfo[this.form.coin].blockBrowser,"/#/address/").concat(e.address):"tx"===e.type?"trx"!==e.chainName?"".concat(this.$coinInfo[this.form.coin].blockBrowser,"/tx/").concat(e.tx):"".concat(this.$coinInfo[this.form.coin].blockBrowser,"/#/tx/").concat(e.tx):void 0},onChangeChain:function(e){this.tableData=[],this.percentage=0,this.$router.replace({path:"/".concat(P,"/").concat(e),query:this.$route.query})},onStartCheck:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.form.address){t.next=3;break}return e.$message.error(e.$t("approve.inputPlaceholder")),t.abrupt("return");case 3:if(e.form.address=e.form.address.trim(),a="trx"===e.form.coin?"trx":"eth",f.a.validate(e.form.address,a)){t.next=8;break}return e.$message.error(e.$t("approve.addressError")),t.abrupt("return");case 8:if(e.isRunning=!0,"trx"!==e.form.coin){t.next=14;break}return t.next=12,e.trxCheckList();case 12:t.next=21;break;case 14:if(!e.debankChainList.includes(e.form.coin)){t.next=19;break}return t.next=17,e.getDeBankList();case 17:t.next=21;break;case 19:return t.next=21,e.commonCheckList();case 21:e.isRunning=!1;case 22:case"end":return t.stop()}}),t)})))()},commonCheckList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o,i,c,d,u,l,p,f,m,h,b,x,g,w,y,C,$,N,L,D,S,R,j,T,A,B,I,O,P,K,z,H,M,E,F,W,Z,U,Y,q,J,X,G,V,Q,ee,te,ae,re,se,ne,oe,ie,ce,de,ue,le,pe,fe,me,he,be,ve,xe,ge,ke,_e,we,ye,Ce,$e,Ne,Le,De,Se,Re,je,Te,Ae,Be,Ie,Oe,Pe,Ke,ze,He,Me,Ee,Fe,We,Ze,Ue,Ye,qe,Je,Xe,Ge,Ve,Qe,et,tt,at,rt,st,nt,ot,it,ct,dt,ut,lt,pt,ft,mt,ht,bt,vt,xt,gt,kt,_t,wt,yt,Ct,$t,Nt,Lt,Dt,St,Rt,jt,Tt,At,Bt,It;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableData=[],e.percentage=0,e.loading=!0,a=[],r=[],t.prev=5,s=[1,250,137,56,43114,30,42161,11297108109,1285,8217,42,43113,80001,1284,97,31,42161,256,71393,336,16666e5,9001,7700,42170,10,321,59144,8453,1101,25,40,534352,204],n=["heco","bsc","ftm","matic","vlx","eth","avax","arb","movr","cro","glmr","celo","fuse","op","brise","dogechain","syscoin","canto","onus","polygon-zkevm","base","linea","scroll"],o=["shibarium","xdai","etc","pls","canto"],"opbnb"!==e.form.coin){t.next=57;break}return t.next=12,e.$ajax({url:"https://op-bnb-mainnet-explorer-api.nodereal.io/api/tx/getAssetTransferByAddress?address=".concat(e.form.address,"&type=transaction&pageSize=100&page=1"),method:"get"});case 12:i=t.sent,t.prev=13,c=i.data.list,t.t0=regeneratorRuntime.keys(c);case 16:if((t.t1=t.t0()).done){t.next=50;break}if(d=t.t1.value,c[d].input&&"0x095ea7b3"===c[d].input.substr(0,10)){t.next=20;break}return t.abrupt("continue",16);case 20:if(u="0x"+c[d].input.substring(34,74),c[d].to!==c[d].from&&"0x0000000000000000000000000000000000000000"!==u){t.next=23;break}return t.abrupt("continue",16);case 23:if(l=(c[d].to+u).toLowerCase(),!a[l]){t.next=26;break}return t.abrupt("continue",16);case 26:if(a[l]=!0,p=!1,r[c[d].to]){t.next=37;break}return t.next=31,e.getTokenInfo(c[d].to);case 31:if(f=t.sent,!f){t.next=36;break}r[c[d].to]=f,t.next=37;break;case 36:return t.abrupt("continue",16);case 37:if(m=r[c[d].to],h=m.symbol,b=m.decimal,x=e.$t("approve.unlimited"),g=1,w="0x"+c[d].input.substring(74,200),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==w&&(x=new v.a(w).div(Math.pow(10,b)).toFixed(4),g=2,x>4951760157141521e12&&(x=e.$t("approve.unlimited"),g=1)),y={tokenType:"erc20",privat_address:p,type:g,status:0,symbol:h,token_address:c[d].to,c_address:u,amount:x,approve_time:Number(c[d].blockTimeStamp),block_height:Number(c[d].blockNum),tx_hash:c[d].hash},0!==x&&"0.0000"!==x&&"NaN"!==x){t.next=46;break}return e.historyRecordDialogList.push(y),t.abrupt("continue",16);case 46:e.percentage=100,e.tableData.push(y),t.next=16;break;case 50:t.next=54;break;case 52:t.prev=52,t.t2=t["catch"](13);case 54:return e.loading=!1,0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.abrupt("return");case 57:if("ethw"!==e.form.coin){t.next=104;break}return t.next=60,e.$ajax({url:"https://www.oklink.com/api/explorer/v1/ethw/addresses/".concat(e.form.address,"/transactionsByClassfy/condition?t=").concat((new Date).getTime(),"&offset=0&address=").concat(e.form.address,"&limit=100&nonzeroValue=false&method=approve&type=2"),headers:{"x-apikey":e.$ethUtils.getOklinkKey()},method:"get"});case 60:C=t.sent,t.prev=61,$=C.data.hits,t.t3=regeneratorRuntime.keys($);case 64:if((t.t4=t.t3()).done){t.next=97;break}if(N=t.t4.value,L="0x"+$[N].inputHex.substring(34,74),$[N].to!==$[N].from&&"0x0000000000000000000000000000000000000000"!==L){t.next=69;break}return t.abrupt("continue",64);case 69:if(D=($[N].to+L).toLowerCase(),!a[D]){t.next=72;break}return t.abrupt("continue",64);case 72:if(a[D]=!0,S=!1,$[N].isToContract||(S=!0),r[$[N].to]){t.next=84;break}return t.next=78,e.getTokenInfo($[N].to);case 78:if(R=t.sent,!R){t.next=83;break}r[$[N].to]=R,t.next=84;break;case 83:return t.abrupt("continue",64);case 84:if(j=r[$[N].to],T=j.symbol,A=j.decimal,B=e.$t("approve.unlimited"),I=1,O="0x"+$[N].inputHex.substring(74,200),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==O&&(B=new v.a(O).div(Math.pow(10,A)).toFixed(4),I=2,B>4951760157141521e12&&(B=e.$t("approve.unlimited"),I=1)),P={tokenType:"erc20",privat_address:S,type:I,status:0,symbol:T,token_address:$[N].to,c_address:L,amount:B,approve_time:Number($[N].blocktime),block_height:Number($[N].blockHeight),tx_hash:$[N].hash},0!==B&&"0.0000"!==B&&"NaN"!==B){t.next=93;break}return e.historyRecordDialogList.push(P),t.abrupt("continue",64);case 93:e.percentage=100,e.tableData.push(P),t.next=64;break;case 97:t.next=101;break;case 99:t.prev=99,t.t5=t["catch"](61);case 101:return e.loading=!1,0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.abrupt("return");case 104:if("one"!==e.form.coin){t.next=193;break}return t.next=107,e.checkONE(e.form.address);case 107:K=t.sent,z=1,H=K.transactions.length-1;case 110:if(!(H>=0)){t.next=188;break}if(!e.isStopScan){t.next=115;break}return e.loading=!1,e.isStopScan=!1,t.abrupt("return");case 115:if(z++,!(K.transactions[H].input.indexOf("0x095ea7b3")>-1)){t.next=151;break}if(M="0x"+K.transactions[H].input.substring(34,74),"0x0000000000000000000000000000000000000000"!==M&&M.toLowerCase()!==e.form.address.toLowerCase()&&Object(k["fromBech32"])(K.transactions[H].to).toLowerCase()!==e.form.address.toLowerCase()){t.next=120;break}return t.abrupt("continue",185);case 120:if(E=(Object(k["fromBech32"])(K.transactions[H].to).toLowerCase()+M.toLowerCase()).toLowerCase(),!a[E]){t.next=123;break}return t.abrupt("continue",185);case 123:if(a[E]=!0,F=!1,r[Object(k["fromBech32"])(K.transactions[H].to)]){t.next=134;break}return t.next=128,e.getTokenInfo(Object(k["fromBech32"])(K.transactions[H].to));case 128:if(W=t.sent,!W){t.next=133;break}r[Object(k["fromBech32"])(K.transactions[H].to)]=W,t.next=134;break;case 133:return t.abrupt("continue",185);case 134:if(r[M]){t.next=140;break}return t.next=137,e.getCode(M);case 137:Z=t.sent,Z||(F=!0),r[M]=!0;case 140:if(U=r[Object(k["fromBech32"])(K.transactions[H].to)],Y=U.symbol,q=U.decimal,J=e.$t("approve.unlimited"),X=1,G="0x"+K.transactions[H].input.substring(74,200),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==G&&(J=new v.a(G).div(Math.pow(10,q)).toFixed(4),X=2,J>4951760157141521e12&&(J=e.$t("approve.unlimited"),X=1)),V={tokenType:"erc20",privat_address:F,type:X,status:0,symbol:Y,token_address:Object(k["fromBech32"])(K.transactions[H].to),c_address:M,amount:J,approve_time:Number(K.transactions[H].timestamp),block_height:Number(K.transactions[H].blockNumber),tx_hash:K.transactions[H].hash},0!==J&&"0.0000"!==J){t.next=149;break}return e.historyRecordDialogList.push(V),t.abrupt("continue",185);case 149:e.percentage=parseInt(z/K.transactions.length*100),e.tableData.push(V);case 151:if(!(K.transactions[H].input.indexOf("0xa22cb465")>-1)){t.next=185;break}if(Q="0x"+K.transactions[H].input.substring(34,74),"0x0000000000000000000000000000000000000000"!==Q){t.next=155;break}return t.abrupt("continue",185);case 155:if(ee=(Object(k["fromBech32"])(K.transactions[H].to).toLowerCase()+Q.toLowerCase()).toLowerCase(),!a[ee]){t.next=158;break}return t.abrupt("continue",185);case 158:if(a[ee]=!0,te=!1,r[Object(k["fromBech32"])(K.transactions[H].to)]){t.next=169;break}return t.next=163,e.getTokenNftInfo(Object(k["fromBech32"])(K.transactions[H].to));case 163:if(ae=t.sent,!ae){t.next=168;break}r[Object(k["fromBech32"])(K.transactions[H].to)]=ae,t.next=169;break;case 168:return t.abrupt("continue",185);case 169:if(r[Q]){t.next=175;break}return t.next=172,e.getCode(Q);case 172:re=t.sent,re||(te=!0),r[Q]=!0;case 175:if(se=r[Object(k["fromBech32"])(K.transactions[H].to)].symbol,ne=e.$t("approve.unlimited"),oe=1,ie="0x"+K.transactions[H].input.substring(74,200),ce={tokenType:"nft",privat_address:te,type:oe,status:0,symbol:se,token_address:Object(k["fromBech32"])(K.transactions[H].to),c_address:Q,amount:ne,approve_time:Number(K.transactions[H].timestamp),block_height:Number(K.transactions[H].blockNumber),tx_hash:K.result[H].hash},"0x0000000000000000000000000000000000000000000000000000000000000001"===ie){t.next=183;break}return e.historyRecordDialogList.push(ce),t.abrupt("continue",185);case 183:e.percentage=parseInt(z/K.transactions.length*100),e.tableData.push(ce);case 185:H--,t.next=110;break;case 188:return e.percentage=100,e.loading=!1,e.tableData=e.tableData.sort(Object(_["B"])("block_height",1)),0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.abrupt("return");case 193:if(!o.includes(e.form.coin)){t.next=283;break}return t.next=196,Promise.any([e.checkApi(e.form.address),e.checkApiProxy(e.form.address)]);case 196:if(de=t.sent,null===de||void 0===de||!de.items){t.next=283;break}ue=1,le=de.items.length-1;case 200:if(!(le>=0)){t.next=278;break}if(!e.isStopScan){t.next=205;break}return e.loading=!1,e.isStopScan=!1,t.abrupt("return");case 205:if(ue++,!(de.items[le].raw_input.indexOf("0x095ea7b3")>-1)){t.next=241;break}if(pe="0x"+de.items[le].raw_input.substring(34,74),"0x0000000000000000000000000000000000000000"!==pe&&pe.toLowerCase()!==e.form.address.toLowerCase()&&de.items[le].to.hash.toLowerCase()!==e.form.address.toLowerCase()){t.next=210;break}return t.abrupt("continue",275);case 210:if(fe=(de.items[le].to.hash.toLowerCase()+pe.toLowerCase()).toLowerCase(),!a[fe]){t.next=213;break}return t.abrupt("continue",275);case 213:if(a[fe]=!0,me=!1,r[de.items[le].to.hash]){t.next=224;break}return t.next=218,e.getTokenInfo(de.items[le].to.hash);case 218:if(he=t.sent,!he){t.next=223;break}r[de.items[le].to.hash]=he,t.next=224;break;case 223:return t.abrupt("continue",275);case 224:if(r[pe]){t.next=230;break}return t.next=227,e.getCode(pe);case 227:be=t.sent,be||(me=!0),r[pe]=!0;case 230:if(ve=r[de.items[le].to.hash],xe=ve.symbol,ge=ve.decimal,ke=e.$t("approve.unlimited"),_e=1,we="0x"+de.items[le].raw_input.substring(74,200),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==we&&(ke=new v.a(we).div(Math.pow(10,ge)).toFixed(4),_e=2,ke>4951760157141521e12&&(ke=e.$t("approve.unlimited"),_e=1)),ye={tokenType:"erc20",privat_address:me,type:_e,status:0,symbol:xe,token_address:de.items[le].to.hash,c_address:pe,amount:ke,approve_time:Number(de.items[le].timestamp),block_height:Number(de.items[le].block),tx_hash:de.items[le].hash},0!==ke&&"0.0000"!==ke&&"NaN"!==ke){t.next=239;break}return e.historyRecordDialogList.push(ye),t.abrupt("continue",275);case 239:e.percentage=parseInt(ue/de.items.length*100),e.tableData.push(ye);case 241:if(!(de.items[le].raw_input.indexOf("0xa22cb465")>-1)){t.next=275;break}if(Ce="0x"+de.items[le].raw_input.substring(34,74),"0x0000000000000000000000000000000000000000"!==Ce){t.next=245;break}return t.abrupt("continue",275);case 245:if($e=(de.items[le].to.hash.toLowerCase()+Ce.toLowerCase()).toLowerCase(),!a[$e]){t.next=248;break}return t.abrupt("continue",275);case 248:if(a[$e]=!0,Ne=!1,r[de.items[le].to.hash]){t.next=259;break}return t.next=253,e.getTokenNftInfo(de.items[le].to.hash);case 253:if(Le=t.sent,!Le){t.next=258;break}r[de.items[le].to.hash]=Le,t.next=259;break;case 258:return t.abrupt("continue",275);case 259:if(r[Ce]){t.next=265;break}return t.next=262,e.getCode(Ce);case 262:De=t.sent,De||(Ne=!0),r[Ce]=!0;case 265:if(Se=r[de.items[le].to.hash].symbol,Re=e.$t("approve.unlimited"),je=1,Te="0x"+de.items[le].raw_input.substring(74,200),Ae={tokenType:"nft",privat_address:Ne,type:je,status:0,symbol:Se,token_address:de.items[le].to.hash,c_address:Ce,amount:Re,approve_time:Number(de.items[le].timestamp),block_height:Number(de.items[le].block),tx_hash:de.items[le].hash},"0x0000000000000000000000000000000000000000000000000000000000000001"===Te){t.next=273;break}return e.historyRecordDialogList.push(Ae),t.abrupt("continue",275);case 273:e.percentage=parseInt(ue/de.items.length*100),e.tableData.push(Ae);case 275:le--,t.next=200;break;case 278:return e.percentage=100,e.loading=!1,e.tableData=e.tableData.sort(Object(_["B"])("block_height",1)),0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.abrupt("return");case 283:if(!n.includes(e.form.coin)){t.next=378;break}return t.next=286,Promise.any([e.checkApi(e.form.address),e.checkApiProxy(e.form.address)]);case 286:if(Be=t.sent,t.prev=287,null===Be||void 0===Be||!Be.result){t.next=374;break}Ie=1,Oe=Be.result.length-1;case 291:if(!(Oe>=0)){t.next=369;break}if(!e.isStopScan){t.next=296;break}return e.loading=!1,e.isStopScan=!1,t.abrupt("return");case 296:if(Ie++,!(Be.result[Oe].input.indexOf("0x095ea7b3")>-1)){t.next=332;break}if(Pe="0x"+Be.result[Oe].input.substring(34,74),"0x0000000000000000000000000000000000000000"!==Pe&&Pe.toLowerCase()!==e.form.address.toLowerCase()&&Be.result[Oe].to.toLowerCase()!==e.form.address.toLowerCase()){t.next=301;break}return t.abrupt("continue",366);case 301:if(Ke=(Be.result[Oe].to.toLowerCase()+Pe.toLowerCase()).toLowerCase(),!a[Ke]){t.next=304;break}return t.abrupt("continue",366);case 304:if(a[Ke]=!0,ze=!1,r[Be.result[Oe].to]){t.next=315;break}return t.next=309,e.getTokenInfo(Be.result[Oe].to);case 309:if(He=t.sent,!He){t.next=314;break}r[Be.result[Oe].to]=He,t.next=315;break;case 314:return t.abrupt("continue",366);case 315:if(r[Pe]){t.next=321;break}return t.next=318,e.getCode(Pe);case 318:Me=t.sent,Me||(ze=!0),r[Pe]=!0;case 321:if(Ee=r[Be.result[Oe].to],Fe=Ee.symbol,We=Ee.decimal,Ze=e.$t("approve.unlimited"),Ue=1,Ye="0x"+Be.result[Oe].input.substring(74,200),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==Ye&&(Ze=new v.a(Ye).div(Math.pow(10,We)).toFixed(4),Ue=2,Ze>4951760157141521e12&&(Ze=e.$t("approve.unlimited"),Ue=1)),qe={tokenType:"erc20",privat_address:ze,type:Ue,status:0,symbol:Fe,token_address:Be.result[Oe].to,c_address:Pe,amount:Ze,approve_time:Number(Be.result[Oe].timeStamp),block_height:Number(Be.result[Oe].blockNumber),tx_hash:Be.result[Oe].hash},0!==Ze&&"0.0000"!==Ze&&"NaN"!==Ze){t.next=330;break}return e.historyRecordDialogList.push(qe),t.abrupt("continue",366);case 330:e.percentage=parseInt(Ie/Be.result.length*100),e.tableData.push(qe);case 332:if(!(Be.result[Oe].input.indexOf("0xa22cb465")>-1)){t.next=366;break}if(Je="0x"+Be.result[Oe].input.substring(34,74),"0x0000000000000000000000000000000000000000"!==Je){t.next=336;break}return t.abrupt("continue",366);case 336:if(Xe=(Be.result[Oe].to.toLowerCase()+Je.toLowerCase()).toLowerCase(),!a[Xe]){t.next=339;break}return t.abrupt("continue",366);case 339:if(a[Xe]=!0,Ge=!1,r[Be.result[Oe].to]){t.next=350;break}return t.next=344,e.getTokenNftInfo(Be.result[Oe].to);case 344:if(Ve=t.sent,!Ve){t.next=349;break}r[Be.result[Oe].to]=Ve,t.next=350;break;case 349:return t.abrupt("continue",366);case 350:if(r[Je]){t.next=356;break}return t.next=353,e.getCode(Je);case 353:Qe=t.sent,Qe||(Ge=!0),r[Je]=!0;case 356:if(et=r[Be.result[Oe].to].symbol,tt=e.$t("approve.unlimited"),at=1,rt="0x"+Be.result[Oe].input.substring(74,200),st={tokenType:"nft",privat_address:Ge,type:at,status:0,symbol:et,token_address:Be.result[Oe].to,c_address:Je,amount:tt,approve_time:Number(Be.result[Oe].timeStamp),block_height:Number(Be.result[Oe].blockNumber),tx_hash:Be.result[Oe].hash},"0x0000000000000000000000000000000000000000000000000000000000000001"===rt){t.next=364;break}return e.historyRecordDialogList.push(st),t.abrupt("continue",366);case 364:e.percentage=parseInt(Ie/Be.result.length*100),e.tableData.push(st);case 366:Oe--,t.next=291;break;case 369:return e.percentage=100,e.loading=!1,e.tableData=e.tableData.sort(Object(_["B"])("block_height",1)),0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.abrupt("return");case 374:t.next=378;break;case 376:t.prev=376,t.t6=t["catch"](287);case 378:if(!s.includes(e.$coinInfo[e.form.coin].chainId)){t.next=450;break}return t.prev=379,t.next=382,e.$ajax({url:"https://cointool-airdorp.glitch.me/api/tokenApi/",timeout:1e5,method:"get",data:{type:"2",chainid:e.$coinInfo[e.form.coin].chainId,address:e.form.address}});case 382:nt=t.sent,ot=nt.data.items,it=1,t.t7=regeneratorRuntime.keys(ot);case 386:if((t.t8=t.t7()).done){t.next=441;break}if(ct=t.t8.value,it++,t.prev=389,!ot[ct].log_events){t.next=435;break}if(ot[ct].from_address.toLowerCase()===e.form.address.toLowerCase()){t.next=393;break}return t.abrupt("continue",386);case 393:t.t9=regeneratorRuntime.keys(ot[ct].log_events);case 394:if((t.t10=t.t9()).done){t.next=435;break}if(dt=t.t10.value,"Approval"!==ot[ct].log_events[dt].decoded.name){t.next=415;break}if("0x0000000000000000000000000000000000000000"!==ot[ct].log_events[dt].decoded.params[1].value&&ot[ct].log_events[dt].decoded.params[1].value.toLowerCase()!==e.form.address.toLowerCase()&&ot[ct].log_events[dt].sender_address.toLowerCase()!==e.form.address.toLowerCase()){t.next=399;break}return t.abrupt("continue",394);case 399:if(ut=(ot[ct].log_events[dt].sender_address.toLowerCase()+ot[ct].log_events[dt].decoded.params[1].value.toLowerCase()).toLowerCase(),!a[ut]){t.next=402;break}return t.abrupt("continue",394);case 402:if(a[ut]=!0,lt=!1,pt=e.$t("approve.unlimited"),ft=1,mt=ot[ct].log_events[dt].decoded.params[2].value,("0"===mt||"115792089237316195423570985008687907853269984665640564039457584007913129639935"!==mt&&ot[ct].log_events[dt].sender_contract_decimals&&ot[ct].log_events[dt].sender_contract_decimals>0)&&(pt=new v.a(mt).div(Math.pow(10,ot[ct].log_events[dt].sender_contract_decimals)).toFixed(4),ft=2,pt>4951760157141521e12&&(pt=e.$t("approve.unlimited"),ft=1)),ht="empty",ot[ct].log_events[dt].sender_contract_decimals&&0!==ot[ct].log_events[dt].sender_contract_decimals&&(ht=ot[ct].log_events[dt].sender_name),bt={tokenType:"erc20",privat_address:lt,type:ft,status:0,symbol:ht,token_address:ot[ct].log_events[dt].sender_address,c_address:ot[ct].log_events[dt].decoded.params[1].value,amount:pt,approve_time:e.$moment(ot[ct].log_events[dt].block_signed_at).unix(),block_height:Number(ot[ct].log_events[dt].block_height),tx_hash:ot[ct].log_events[dt].tx_hash},0!==pt&&"0.0000"!==pt&&"NaN"!==pt){t.next=414;break}return e.historyRecordDialogList.push(bt),t.abrupt("continue",394);case 414:e.tableData.push(bt);case 415:if("ApprovalForAll"!==ot[ct].log_events[dt].decoded.name){t.next=433;break}if("0x0000000000000000000000000000000000000000"!==ot[ct].log_events[dt].decoded.params[1].value){t.next=418;break}return t.abrupt("continue",394);case 418:if(vt=(ot[ct].log_events[dt].sender_address.toLowerCase()+ot[ct].log_events[dt].decoded.params[1].value.toLowerCase()).toLowerCase(),!a[vt]){t.next=421;break}return t.abrupt("continue",394);case 421:if(a[vt]=!0,xt=!1,gt=e.$t("approve.unlimited"),kt=1,_t=ot[ct].log_events[dt].decoded.params[2].value,wt=ot[ct].log_events[dt].sender_name,yt={tokenType:"nft",privat_address:xt,type:kt,status:0,symbol:wt,token_address:ot[ct].log_events[dt].sender_address,c_address:ot[ct].log_events[dt].decoded.params[1].value,amount:gt,approve_time:e.$moment(ot[ct].log_events[dt].block_signed_at).unix(),block_height:Number(ot[ct].log_events[dt].block_height),tx_hash:ot[ct].log_events[dt].tx_hash},_t){t.next=431;break}return e.historyRecordDialogList.push(yt),t.abrupt("continue",394);case 431:e.percentage=parseInt(it/ot[ct].length*100),e.tableData.push(yt);case 433:t.next=394;break;case 435:t.next=439;break;case 437:t.prev=437,t.t11=t["catch"](389);case 439:t.next=386;break;case 441:e.percentage=100,e.loading=!1,0===e.tableData.length&&e.$message.success(e.$t("approve.addressZero")),t.next=449;break;case 446:t.prev=446,t.t12=t["catch"](379),console.log(t.t12,"e111");case 449:return t.abrupt("return");case 450:t.next=458;break;case 452:return t.prev=452,t.t13=t["catch"](5),e.loading=!1,e.$message.error(e.$t("common.network_error_try_again")),console.log(t.t13),t.abrupt("return");case 458:return t.next=460,e.onCheckEth(e.form.address);case 460:if(Ct=t.sent,!Ct.error){t.next=466;break}return $t=-1!==Ct.error.indexOf("timeout")?e.$t("approve.timeout_tips"):Ct.error,e.$message.error($t),e.loading=!1,t.abrupt("return");case 466:if(0!==Ct.result.length){t.next=470;break}return e.$message({message:e.$t("approve.addressZero"),duration:1e4,showClose:!0,type:"success"}),e.loading=!1,t.abrupt("return");case 470:Nt=1,Lt=Ct.result.length-1;case 472:if(!(Lt>=0)){t.next=505;break}if(!e.isStopScan){t.next=477;break}return e.loading=!1,e.isStopScan=!1,t.abrupt("return");case 477:if(Nt++,Dt=Ct.result[Lt].topics[2].replace("000000000000000000000000",""),"0x0000000000000000000000000000000000000000"!==Dt){t.next=481;break}return t.abrupt("continue",502);case 481:if(St=Ct.result[Lt].address+Dt,!a[St]){t.next=484;break}return t.abrupt("continue",502);case 484:if(a[St]=!0,r[Ct.result[Lt].address]){t.next=494;break}return t.next=488,e.getTokenInfo(Ct.result[Lt].address);case 488:if(Rt=t.sent,!Rt){t.next=493;break}r[Ct.result[Lt].address]=Rt,t.next=494;break;case 493:return t.abrupt("continue",502);case 494:if(jt=r[Ct.result[Lt].address],Tt=jt.symbol,At=jt.decimal,Bt=e.$t("approve.unlimited"),It=1,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==Ct.result[Lt].data&&(Bt=new v.a(parseInt(Ct.result[Lt].data)).div(Math.pow(10,At)).toFixed(4),It=2,Bt>4951760157141521e12&&(Bt=e.$t("approve.unlimited"),It=1)),0!==Bt&&"0.0000"!==Bt){t.next=500;break}return t.abrupt("continue",502);case 500:e.percentage=parseInt(Nt/Ct.result.length*100),e.tableData.push({type:It,status:0,symbol:Tt,token_address:Ct.result[Lt].address,c_address:Dt,amount:Bt});case 502:Lt--,t.next=472;break;case 505:e.percentage=100,e.loading=!1;case 507:case"end":return t.stop()}}),t,null,[[5,452],[13,52],[61,99],[287,376],[379,446],[389,437]])})))()},trxCheckList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o,i,c,d,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableData=[],e.percentage=0,e.loading=!0,a=[],r=!1,s=!0,t.prev=6,t.next=9,Promise.any([e.checkApi(e.form.address),e.checkApiProxy(e.form.address)]);case 9:n=t.sent;case 10:if(!s){t.next=47;break}n&&n.meta.fingerprint||(s=!1),t.t0=regeneratorRuntime.keys(n.data);case 13:if((t.t1=t.t0()).done){t.next=45;break}if(o=t.t1.value,!e.isStopScan){t.next=19;break}return e.loading=!1,e.isStopScan=!1,t.abrupt("return");case 19:if("Approval"!==n.data[o].type){t.next=33;break}if(i=n.data[o].to,c=n.data[o].from+i,!a[c]){t.next=24;break}return t.abrupt("continue",13);case 24:if(a[c]=!0,d=e.$t("approve.unlimited"),u=1,l=n.data[o].value,"115792089237316195423570985008687907853269984665640564039457584007913129639935"!==n.data[o].value&&(d=new v.a(parseInt(l)).div(Math.pow(10,n.data[o].token_info.decimals)).toFixed(4),u=2,d>4951760157141521e12&&(d=e.$t("approve.unlimited"),u=1)),0!==d&&"0.0000"!==d){t.next=31;break}return t.abrupt("continue",13);case 31:r=!0,e.tableData.push({type:u,status:0,symbol:n.data[o].token_info.symbol,token_address:n.data[o].token_info.address,c_address:i,amount:d});case 33:if(parseInt(o)!==n.data.length-1){t.next=43;break}if(!n.meta.fingerprint){t.next=42;break}return t.next=37,new Promise((function(e){return setTimeout(e,1e3)}));case 37:return t.next=39,Promise.any([e.checkApi(e.form.address,n.meta.fingerprint),e.checkApiProxy(e.form.address,n.meta.fingerprint)]);case 39:n=t.sent,t.next=43;break;case 42:s=!1;case 43:t.next=13;break;case 45:t.next=10;break;case 47:t.next=52;break;case 49:t.prev=49,t.t2=t["catch"](6),console.log(t.t2);case 52:if(r){t.next=56;break}return e.$message({message:e.$t("approve.addressZero"),type:"success"}),e.loading=!1,t.abrupt("return");case 56:e.percentage=100,e.loading=!1;case 58:case"end":return t.stop()}}),t,null,[[6,49]])})))()},onCloseApprove:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("trx"!==a.form.coin){r.next=5;break}return r.next=3,a.onCloseTrxApprove(e,t);case 3:r.next=7;break;case 5:return r.next=7,a.onCloseCommonApprove(e,t);case 7:case"end":return r.stop()}}),r)})))()},onCloseTrxApprove:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.tableData[e].status=1,r.prev=1,s=[{type:"address",value:t.c_address},{type:"uint256",value:0}],r.next=5,window.tronWeb.transactionBuilder.triggerSmartContract(t.token_address,"approve(address,uint256)",{feeLimit:4e7},s);case 5:return n=r.sent,r.next=8,window.tronWeb.trx.sign(n.transaction);case 8:o=r.sent,window.tronWeb.trx.sendRawTransaction(o).then((function(t){a.tableData.splice(e,1),a.$message.success(a.$t("approve.decline_ok")),a.onDonation({chain:a.form.coin,title:a.$t("common.donation_alert")})})).catch((function(e){console.log(e)})),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),a.tableData[e].status=0;case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},onCheckNetwork:function(){var e;return"trx"===this.form.coin?this.form.address.toUpperCase()===(null===(e=window.tronWeb)||void 0===e?void 0:e.defaultAddress.base58.toUpperCase())||(this.$message({message:this.$t("common.network_error_switch_network",{chainName:"trx"}),type:"error"}),!1):this.$coinInfo[this.form.coin].chainId===u["a"].getChainId()||(this.$message({message:this.$t("common.network_error_switch_network",{chainName:u["a"].resolveChainNameT()}),type:"error"}),!1)},onCloseCommonApprove:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.onCheckNetwork()){r.next=2;break}return r.abrupt("return");case 2:return s="0x095ea7b3000000000000000000000000"+t.c_address.replace("0x","").toLowerCase()+"0000000000000000000000000000000000000000000000000000000000000000","nft"===t.tokenType&&(s="0xa22cb465000000000000000000000000"+t.c_address.replace("0x","").toLowerCase()+"0000000000000000000000000000000000000000000000000000000000000000"),a.tableData[e].status=1,r.prev=5,n={from:a.form.web3Address,to:t.token_address,value:"0x0",data:s},r.next=9,u["a"].sendTransaction(n);case 9:return o=r.sent,r.next=12,u["a"].getTransactionSuccess(o);case 12:i=r.sent,200===i.code?(a.tableData.splice(e,1),a.$message.success(a.$t("approve.decline_ok")),a.donationChecked&&!1===a.isBatchCancel&&a.onCanCoffee({from:a.form.web3Address,to:a.donationTo,chain:a.form.coin,title:a.$t("common.donation_alert")})):(a.tableData[e].status=0,a.$message({message:"Error：".concat(i.message),type:"error"})),r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](5),a.tableData[e].status=0;case 19:case"end":return r.stop()}}),r,null,[[5,16]])})))()},onDonationTP:function(){this.onDonation({from:this.form.web3Address,to:this.donationTo,chain:this.form.coin,title:this.$t("common.donation_alert")})},onCheckEth:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.$coinInfo[t.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_getLogs",params:[{address:[],topics:["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x000000000000000000000000"+e.replace("0x","")],fromBlock:"earliest",toBlock:"latest"}]}});case 3:if(r=a.sent,!r.error){a.next=8;break}return a.abrupt("return",{result:[]});case 8:return a.abrupt("return",r);case 9:a.next=14;break;case 11:return a.prev=11,a.t0=a["catch"](0),a.abrupt("return",{error:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},checkApi:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.length>1&&void 0!==t[1]?t[1]:"",n=a.checkApiMap[a.form.coin].replace("#address#",e),s&&"trx"===a.form.coin&&(s="&fingerprint="+s),r.prev=3,r.next=6,a.$ajax({url:n+s,method:"get",timeout:2e4});case 6:return r.abrupt("return",r.sent);case 9:return r.prev=9,r.t0=r["catch"](3),r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r,null,[[3,9]])})))()},checkApiProxy:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.length>1&&void 0!==t[1]?t[1]:"",n=a.checkApiMap[a.form.coin].replace("#address#",e),s&&"trx"===a.form.coin&&(s="&fingerprint="+s),n+=s,r.prev=4,r.next=7,a.$ajax({url:"https://proxy.cointool.workers.dev/?url=".concat(encodeURIComponent(n)),method:"get",timeout:2e4});case 7:return r.abrupt("return",r.sent);case 10:return r.prev=10,r.t0=r["catch"](4),r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r,null,[[4,10]])})))()},checkONE:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$ajax({url:"https://a.api.s0.t.hmny.io/",method:"post",data:{jsonrpc:"2.0",method:"hmyv2_getTransactionsHistory",id:1,params:[{fullTx:!0,txType:"SENT",order:"DESC",address:e,pageIndex:0,pageSize:1e3}]}});case 2:return r=a.sent,a.abrupt("return",null===r||void 0===r?void 0:r.result);case 4:case"end":return a.stop()}}),a)})))()},checkHeco:function(e,t,a){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,r.$ajax({url:r.$coinInfo[r.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_getLogs",params:[{address:[],topics:["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x000000000000000000000000"+a.replace("0x","")],fromBlock:Object(l["toHex"])(e),toBlock:Object(l["toHex"])(t)}]}});case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()},blockNumber:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$ajax({url:e.$coinInfo[e.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:83}});case 2:return a=t.sent,t.abrupt("return",parseInt(a.result));case 4:case"end":return t.stop()}}),t)})))()},getallowance:function(e,t,a){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n="0xdd62ed3e000000000000000000000000".concat(e.substring(2,50),"000000000000000000000000").concat(a.substring(2,50)),s.next=3,r.$ajax({url:r.$coinInfo[r.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:t,data:n},"latest"]}});case 3:return o=s.sent,s.abrupt("return",o.result);case 5:case"end":return s.stop()}}),s)})))()},getTokenInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.$coinInfo[t.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:e,data:"0x95d89b41"},"latest"]}});case 3:return r=a.sent,a.next=6,t.$ajax({url:t.$coinInfo[t.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:e,data:"0x313ce567"},"latest"]}});case 6:return s=a.sent,a.abrupt("return",{symbol:h.a.abi.decodeParams(["string"],r.result)[0],decimal:parseInt(s.result)});case 10:return a.prev=10,a.t0=a["catch"](0),a.abrupt("return",!1);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},getTokenNftInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.$coinInfo[t.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:e,data:"0x06fdde03"},"latest"]}});case 3:return r=a.sent,a.abrupt("return",{symbol:h.a.abi.decodeParams(["string"],r.result)[0]});case 7:return a.prev=7,a.t0=a["catch"](0),a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},getCode:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.$coinInfo[t.form.coin].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_getCode",params:[e,"latest"]}});case 3:if(r=a.sent,"0x"!==r.result){a.next=8;break}return a.abrupt("return",!1);case 8:return a.abrupt("return",!0);case 9:a.next=14;break;case 11:return a.prev=11,a.t0=a["catch"](0),a.abrupt("return",!1);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}}),z=K,H=(a("be6e"),Object(L["a"])(z,r,s,!1,null,"11b500a0",null));t["default"]=H.exports},"51cd":function(e,t,a){},"92a28":function(e,t,a){},be6e:function(e,t,a){"use strict";a("92a28")},ebf1:function(e,t,a){"use strict";a("51cd")}}]);