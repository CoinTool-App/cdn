(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33492bc9"],{"0d56":function(e,t,o){"use strict";o("828c")},3857:function(e,t,o){"use strict";o.r(t);o("99af");var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"container"},[t("CreateSuccessDialog",{ref:"CreateSuccessDialog",attrs:{"view-name":e.viewName,market_id:e.market_id}}),t("div",{class:"flexBox"},[t("div",{staticClass:"header"},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"solana"}}),t("span",{staticClass:"headerTitle"},[e._v(" "+e._s("Solana Token "+e.$t("route.sol-create-liquidity"))+" ")])],1),e.isPc?t("div",{staticClass:"otherLink"},[t("el-link",{staticClass:"linka",attrs:{type:"success",href:"".concat(e.$origin,"/multiSender/").concat(e.chainName),target:"_blank"}},[t("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"hot4"}}),e._v(" "+e._s(e.$t("route.multiSenderSymbol",{symbol:e.$coinInfo[e.chainName].symbol}))+" ")],1),e.isZh?e._e():t("el-link",{staticClass:"linka",attrs:{type:"success",href:"".concat(e.$origin,"/createToken/").concat(e.chainName),target:"_blank"}},[t("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"hot4"}}),e._v(" "+e._s(e.$t("route.createTokenSymbol",{symbol:e.$coinInfo[e.chainName].symbol}))+" ")],1),t("el-link",{staticClass:"linka",attrs:{type:"success",href:"".concat(e.$origin,"/batchCollection/").concat(e.chainName),target:"_blank"}},[e._v(" "+e._s(e.$t("route.batchCollectionSymbol",{symbol:e.$coinInfo[e.chainName].symbol}))+" ")]),t("el-link",{staticClass:"linka",attrs:{type:"success",href:"".concat(e.$origin,"/createWallet/").concat(e.chainName),target:"_blank"}},[e._v(" "+e._s(e.$coinInfo[e.chainName].symbol)+" "+e._s(e.$t("route.createWallet"))+" ")])],1):e._e(),t("div",{staticClass:"content"},[t("div",{staticClass:"listTitle"},[t("span",{staticClass:"left"},[t("svg-icon",{attrs:{"icon-class":"tools"}}),e._v(" "+e._s("CoinTool.App")+" ")],1)]),t("div",{staticClass:"checkAll",on:{click:e.onShare}},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"share"}})],1),t("el-form",{ref:"form",attrs:{rules:e.formRules,model:e.form,"label-position":"top"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12,xs:{span:24}}},[t("el-form-item",{staticClass:"item",attrs:{props:"baseToken"}},[t("div",{staticClass:"labelBox",attrs:{slot:"label"},slot:"label"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("".concat(e.viewName,".baseToken")))+" "),t("el-tooltip",{staticClass:"tipsIcon",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("The token you have created and has no value yet.")},slot:"content"}),t("i",{staticClass:"el-icon-question icon"})])],1)]),t("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.loading_address,clearable:"",filterable:!0},model:{value:e.form.baseToken,callback:function(t){e.$set(e.form,"baseToken",t)},expression:"form.baseToken"}},e._l(e.addressOptions,(function(o,n){return t("el-option",{key:n,attrs:{label:"".concat(o.label?"".concat(o.label," - "):"").concat(e.getMiniAddress(o.value)),value:o.value}},[t("span",{staticStyle:{float:"left"}},[o.label&&"SOL"!==o.value?[e._v(" "+e._s(o.label)+" - ")]:e._e(),e._v(e._s(e._f("autoAddress")(o.value)))],2),"SOL"!==o.value?t("span",{staticStyle:{float:"right","margin-left":"20px",color:"#8492a6","font-size":"13px"}},[o.is2022?t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("SPL 2022")]):e._e(),e._v(" Balance : "+e._s(o.tokenBalance))],1):e._e()])})),1)],1)],1),t("el-col",{attrs:{span:12,xs:{span:24}}},[t("el-form-item",{staticClass:"item",attrs:{props:"quoteToken"}},[t("div",{staticClass:"labelBox",attrs:{slot:"label"},slot:"label"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("".concat(e.viewName,".quoteToken")))+" "),t("el-tooltip",{staticClass:"tipsIcon",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("A token with market value. Usually SOL or USDC.")},slot:"content"}),t("i",{staticClass:"el-icon-question icon"})])],1)]),t("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.loading_address,clearable:"",filterable:!0},model:{value:e.form.quoteToken,callback:function(t){e.$set(e.form,"quoteToken",t)},expression:"form.quoteToken"}},e._l(e.quoteTokenList,(function(o,n){return t("el-option",{key:n,attrs:{label:"".concat(o.label?"".concat(o.label," - "):"").concat(e.getMiniAddress(o.value)),value:o.value}},[t("span",{staticStyle:{float:"left"}},[o.label&&"SOL"!==o.value?[e._v(" "+e._s(o.label)+" - ")]:e._e(),e._v(e._s(e._f("autoAddress")(o.value)))],2),"SOL"!==o.value?t("span",{staticStyle:{float:"right","margin-left":"20px",color:"#8492a6","font-size":"13px"}},[o.is2022?t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("SPL 2022")]):e._e(),e._v(" Balance : "+e._s(o.tokenBalance))],1):e._e()])})),1)],1)],1),t("el-col",{attrs:{span:12,xs:{span:24}}},[t("el-form-item",{staticClass:"item",attrs:{props:"baseTokenInitialLiquidity"}},[t("div",{staticClass:"labelBox",attrs:{slot:"label"},slot:"label"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("".concat(e.viewName,".baseTokenInitialLiquidity")))),t("el-tag",{directives:[{name:"show",rawName:"v-show",value:""!==e.form.baseTokenName,expression:"form.baseTokenName!==''"}],staticStyle:{margin:"0 4px"},attrs:{size:"mini"}},[e._v(e._s(e.form.baseTokenName))]),t("el-tooltip",{staticClass:"tipsIcon",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("tips???")},slot:"content"}),t("i",{staticClass:"el-icon-question icon"})])],1)]),t("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,clearable:""},model:{value:e.form.baseTokenInitialLiquidity,callback:function(t){e.$set(e.form,"baseTokenInitialLiquidity",t)},expression:"form.baseTokenInitialLiquidity"}}),t("div",{staticClass:"tokenInfoBox"},[t("div",{staticClass:"leftBox"},[t("span",[e._v("Balance: "+e._s(e.form.baseTokenBalance))])]),t("div",{staticClass:"rightBox"},[t("el-tag",{staticClass:"tags",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.onSetBalance("baseToken",50)}}},[e._v("HALF")]),t("el-tag",{staticClass:"tags",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.onSetBalance("baseToken",100)}}},[e._v("MAX")])],1)])],1)],1),t("el-col",{attrs:{span:12,xs:{span:24}}},[t("el-form-item",{staticClass:"item",attrs:{props:"quoteTokenInitialLiquidity"}},[t("div",{staticClass:"labelBox",attrs:{slot:"label"},slot:"label"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("".concat(e.viewName,".quoteTokenInitialLiquidity")))),t("el-tag",{directives:[{name:"show",rawName:"v-show",value:""!==e.form.quoteTokenName,expression:"form.quoteTokenName!==''"}],staticStyle:{margin:"0 4px"},attrs:{size:"mini"}},[e._v(e._s(e.form.quoteTokenName))]),t("el-tooltip",{staticClass:"tipsIcon",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("1111")},slot:"content"}),t("i",{staticClass:"el-icon-question icon"})])],1)]),t("el-input-number",{staticStyle:{width:"100%"},attrs:{step:1,clearable:""},model:{value:e.form.quoteTokenInitialLiquidity,callback:function(t){e.$set(e.form,"quoteTokenInitialLiquidity",t)},expression:"form.quoteTokenInitialLiquidity"}}),t("div",{staticClass:"tokenInfoBox"},[t("div",{staticClass:"leftBox"},[t("span",[e._v("Balance: "+e._s(e.form.quoteTokenBalance))])]),t("div",{staticClass:"rightBox"},[t("el-tag",{staticClass:"tags",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.onSetBalance("quoteToken",50)}}},[e._v("HALF")]),t("el-tag",{staticClass:"tags",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.onSetBalance("quoteToken",100)}}},[e._v("MAX")])],1)])],1)],1),t("el-tag",[e._v("Price : 1 "+e._s(e.form.quoteTokenName)+" = "+e._s(e.quoteBuybasePrice)+" "+e._s(e.form.baseTokenName)+" 1 "+e._s(e.form.baseTokenName)+" = "+e._s(e.baseBuyquotePrice)+" "+e._s(e.form.quoteTokenName))]),t("el-col",{attrs:{span:12,xs:{span:24}}},[t("el-form-item",{staticClass:"item",attrs:{props:"startTime"}},[t("div",{staticClass:"labelBox",attrs:{slot:"label"},slot:"label"},[t("span",{staticClass:"label"},[e._v(e._s("Start time (Optional):")+" ")])]),t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1)],1)],1),t("div",{staticClass:"tipsBox"},[t("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"Need to create a market ID here and then add liquidity.",type:"info"}},[t("div",{staticClass:"linkBox"},[t("a",{attrs:{href:"https://raydium.io/liquidity/create/",target:"_black"}},[e._v("Create pool "),t("i",{staticClass:"el-icon-link linkIcon"})])])]),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.form.baseTokenIs2022||e.form.quoteTokenIs2022,expression:"form.baseTokenIs2022 || form.quoteTokenIs2022"}],staticStyle:{"margin-bottom":"20px"},attrs:{title:"Token 2022 Add liquidity pool:Raydium does not support Amm pools, only CLMM pools",type:"info"}},[t("div",{staticClass:"linkBox"},[t("a",{attrs:{href:"https://docs.raydium.io/raydium/updates/token-2022-support",target:"_black"}},[e._v("raydium token2022 "),t("i",{staticClass:"el-icon-link linkIcon"})]),t("a",{attrs:{href:"https://docs.raydium.io/raydium/pool-creation/creating-a-clmm-pool-and-farm",target:"_black"}},[e._v("Create clmm pool doc "),t("i",{staticClass:"el-icon-link linkIcon"})]),t("a",{attrs:{href:"https://raydium.io/clmm/create-pool/",target:"_black"}},[e._v("Create clmm pool "),t("i",{staticClass:"el-icon-link linkIcon"})])])]),t("el-alert",{attrs:{title:e.$t("".concat(e.viewName,".editTips")),type:"error"}},[t("a",{attrs:{href:"https://telegra.ph/HOW-TO-CREATE-AN-OPENBOOK-MARKET-IN-SOLANA-03-01",target:"_black"}},[e._v(" How the OpenBook works. "),t("i",{staticClass:"el-icon-link linkIcon"})])])],1),t("div",{staticClass:"btnBox"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"btn",attrs:{type:"danger"},on:{click:e.onStop}},[e._v("STOP")]),t("el-button",{staticClass:"btn",attrs:{type:"success",loading:e.isLoading},on:{click:e.onConfirm}},[e._v(e._s(e.$t("".concat(e.viewName,".create"))))]),e.createFee>0?t("p",{staticClass:"feeTips"},[e._v("Fees = Tool "+e._s(e.createFee)+" SOL + Market creation cost")]):e._e()],1),e._m(0)],1)])],1)},a=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"fqaBox"},[t("h4",[e._v(" Pool creation requires the creation of a market ID and a base token to have freeze authority disabled. ")])])}],i=o("c7eb"),s=o("1da1"),c=o("2909"),r=o("5530"),l=(o("a434"),o("b680"),o("7db0"),o("d3b7"),o("a9e3"),o("159b"),o("14d9"),o("d81d"),o("25f0"),o("ed08")),u=o("2f62"),d=o("ab9c"),b={zh:{"sol-create-liquidity":{baseTokenInitialLiquidity:"Base Token Initial Liquidity:",quoteTokenInitialLiquidity:"Quote Token Initial Liquidity:",baseToken:"Base Token",quoteToken:"Quote Token",minOrderSize:"Min Order Size (Minimum Buy)",tickSize:"Tick Size (Minimum Price Change)",advancedOptions:"Advanced Options",eventQueueLength:"Event Queue Length",requestQueueLength:"Request Queue Length",orderbookLength:"Orderbook Length",editTips:"Please don’t modify these lenghts if you don’t know",howWorks:"how the OpenBook works.",create:"Create Liquidity Pool",create_liquidity:"Create liquidity",market_tips:"请保存好你创建的 MARKET ID 这非常重要，CoinTool 不存储信息，请去 https://raydium.io/liquidity/create/ 创建流动性",amm_id_tips:"amm_id_tips"}},en:{"sol-create-liquidity":{baseTokenInitialLiquidity:"Base Token Initial Liquidity:",quoteTokenInitialLiquidity:"Quote Token Initial Liquidity:",baseToken:"Base Token",quoteToken:"Quote Token",minOrderSize:"Min Order Size (Minimum Buy)",tickSize:"Tick Size (Minimum Price Change)",advancedOptions:"Advanced Options",eventQueueLength:"Event Queue Length",requestQueueLength:"Request Queue Length",orderbookLength:"Orderbook Length",editTips:"Please don’t modify these lenghts if you don’t know",howWorks:"how the OpenBook works.",create:"Create liquidity",create_liquidity:"Create liquidity",market_tips:"Please save the MARKET ID you created, this is very important, CoinTool does not store the information, go to https://raydium.io/liquidity/create/ to create liquidity",amm_id_tips:"amm_id_tips"}}},m=o("901e"),p=o.n(m),f=o("399f"),k=o.n(f),h=o("901ed"),O=o("e1c5"),y=o("64b9"),T=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,width:e.isPc?"600px":"90%",title:"AMM ID Create Success",visible:e.isShowDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(t){e.isShowDialog=t}}},[t("div",{staticClass:"dialogBox"},[t("el-alert",{staticClass:"smaillBox",attrs:{title:"AMM ID",type:"success",closable:!1,"show-icon":""}},[t("el-tag",[e._v(e._s(e.market_id))])],1)],1),t("el-alert",{staticStyle:{"margin-top":"20px"},attrs:{title:e.$t("".concat(e.viewName,".amm_id_tips")),type:"error"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.market_id,expression:"market_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"button",attrs:{icon:"el-icon-copy-document",type:"primary"}},[e._v(" "+e._s(e.$t("common.copy"))+" AMM ID ")])],1)],1)},v=[],g={inject:["onCopySuccess","onOpenNewTab"],components:{},props:{market_id:{require:!0,type:[String,Number]},viewName:{require:!0,type:String}},data:function(){return{isShowDialog:!1,newForm:null}},computed:Object(r["a"])({},Object(u["b"])(["isPc","language"])),deactivated:function(){this.isShowDialog=!1},destroyed:function(){this.isShowDialog=!1},created:function(){},methods:{show:function(){this.isShowDialog=!this.isShowDialog},onSetting:function(){this.show()}}},w=g,q=(o("aafe"),o("2877")),_=Object(q["a"])(w,T,v,!1,null,"e13cfee8",null),j=_.exports,I=o("5e3c");console.log("",I["ENDPOINT"]+I["RAYDIUM_MAINNET"].poolInfo);var L="sol-create-liquidity",C={name:L,inject:["onCheckConnect","onCopySuccess","onShare","onOpenNewTab"],components:{CreateSuccessDialog:j},props:{},data:function(){return{lpToken:null,tokenAccount:null,poolKeys:null,walletVersionArr:[],viewName:L,chainName:"sol",formRules:{},isLoading:!1,market_id:"123123",baseSolBalance:0,quoteBuybasePrice:0,baseBuyquotePrice:0,form:{baseTokenDecimals:6,baseTokenBalance:"11",baseTokenIs2022:!1,quoteTokenIs2022:!1,quoteTokenDecimals:6,quoteTokenBalance:"22",baseTokenName:"",baseToken:"",quoteTokenName:"",quoteToken:"",quoteTokenInitialLiquidity:"",baseTokenInitialLiquidity:"",startTime:""},loading_address:!1,addressOptions:[],addressOptionsQuoteToken:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(u["b"])(["isPc","account","chainId","solNetwork","solAccount","isZh","navShowChain","language"])),{},{createFee:function(){return Object(d["k"])("CREATE_OPENBOOK_MARKET")},quoteTokenList:function(){var e=[{value:"So11111111111111111111111111111111111111112",label:"WSOL",is2022:!1,mintAddress:new y["PublicKey"]("So11111111111111111111111111111111111111112"),tokenBalance:this.baseSolBalance,tokenName:"WSOL",symbol:"WSOL",decimals:9}];for(var t in this.addressOptions)for(var o in e)this.addressOptions[t].value.toLowerCase()===e[o].value.toLowerCase()&&(e[o].tokenBalance=this.addressOptions[t].tokenBalance,this.addressOptions.splice(t,1));return this.addressOptionsQuoteToken=[].concat(e,Object(c["a"])(this.addressOptions)),this.addressOptionsQuoteToken}}),watch:{"form.baseTokenInitialLiquidity":function(e){this.quoteBuybasePrice=new p.a(e).div(this.form.quoteTokenInitialLiquidity).toFixed(this.form.baseTokenDecimals),this.baseBuyquotePrice=new p.a(this.form.quoteTokenInitialLiquidity).div(e).toFixed(this.form.quoteTokenDecimals)},"form.quoteTokenInitialLiquidity":function(e){this.quoteBuybasePrice=new p.a(this.form.baseTokenInitialLiquidity).div(e).toFixed(this.form.baseTokenDecimals),this.baseBuyquotePrice=new p.a(e).div(this.form.baseTokenInitialLiquidity).toFixed(this.form.quoteTokenDecimals)},"form.selectConfig":function(e){var t=this.solConfigArr.find((function(t){return t.value===e}));t&&(this.form.eventQueueLength=t.eventQueueLength,this.form.requestQueueLength=t.requestQueueLength,this.form.orderbookLength=t.orderbookLength)},"form.baseToken":function(e){var t=this.addressOptions.find((function(t){return t.value.toLowerCase()===e.toLowerCase()}));console.log(t,"coinInfo"),this.form.baseTokenName=t.symbol,this.form.baseTokenIs2022=t.is2022,this.form.baseTokenDecimals=Number(t.decimals),this.form.baseTokenBalance=t.tokenBalance},"form.quoteToken":function(e){var t=this.addressOptionsQuoteToken.find((function(t){return t.value.toLowerCase()===e.toLowerCase()}));console.log(t,"coinInfo"),this.form.quoteTokenName=t.symbol,this.form.quoteTokenIs2022=t.is2022,this.form.quoteTokenDecimals=Number(t.decimals),this.form.quoteTokenBalance=t.tokenBalance},solAccount:function(e){""!==e&&this.init()}},beforeDestroy:function(){},created:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$i18n.getLocaleMessage("en")[L]||(e.$i18n.mergeLocaleMessage("en",b.en),e.$i18n.mergeLocaleMessage("zh",b.zh)),e.formRules={baseToken:[{required:!0,message:e.$t("common.not_empty"),trigger:"blur"}],quoteToken:[{required:!0,message:e.$t("common.not_empty"),trigger:"blur"}],minOrderSize:[{required:!0,message:e.$t("common.not_empty"),trigger:"blur"}],tickSize:[{required:!0,message:e.$t("common.not_empty"),trigger:"blur"}]};case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{getMiniAddress:l["m"],onSetBalance:function(e,t){this.form["".concat(e,"InitialLiquidity")]=this.form["".concat(e,"Balance")]*(t/100)},init:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("init"),e.initData=!0,o=d["d"][e.solNetwork],window.solConnection=new y["Connection"](o,"confirmed"),t.next=6,window.solConnection.getBalance(new y["PublicKey"](e.solAccount));case 6:return n=t.sent,e.baseSolBalance=new p.a(n).div(Math.pow(10,9)).toNumber(),t.next=10,e.getAllSolTokenInfo(e.solAccount);case 10:e.addressOptions=t.sent,console.log(e.addressOptions,"this.addressOptions"),e.loading_address=!1;case 13:case"end":return t.stop()}}),t)})))()},getAllSolTokenInfo:function(e){return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=[],t.next=3,Object(d["l"])(e);case 3:return n=t.sent,n.forEach((function(e){o.push(Object(r["a"])(Object(r["a"])({is2022:e.is2022,value:e.token,label:e.symbol},e),{},{mintAddress:new y["PublicKey"](e.mintAddress)}))})),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},onStop:function(){this.isStop=!0,this.isLoading=!1,clearInterval(this.t1)},onConfirm:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n,a,s,r,l,u,b,m,f,h,O,T,v,g,w,q,_,j,L;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="Mainnet"!==e.solNetwork,a=n?I["DEVNET_PROGRAM_ID"]:I["MAINNET_PROGRAM_ID"],!e.form.baseTokenIs2022&&!e.form.quoteTokenIs2022){t.next=6;break}return e.$message.error("Token2022 does not support the creation of Amm pools, please see the page for details."),e.isStop=!1,t.abrupt("return");case 6:if(e.isLoading=!0,s={baseMint:e.form.baseToken,quoteMint:e.form.quoteToken,baseTokenInitialLiquidity:e.form.baseTokenInitialLiquidity,quoteTokenInitialLiquidity:e.form.quoteTokenInitialLiquidity},!(Number(e.form.baseTokenInitialLiquidity)<=0)){t.next=10;break}return t.abrupt("return");case 10:if(!(Number(e.form.quoteTokenInitialLiquidity)<=0)){t.next=12;break}return t.abrupt("return");case 12:return r=new y["PublicKey"](e.solAccount),t.next=15,window.solConnection.getProgramAccounts(a.OPENBOOK_MARKET,{commitment:"confirmed",filters:e.findMarketFilters(a.OPENBOOK_MARKET,new y["PublicKey"](s.baseMint),new y["PublicKey"](s.quoteMint))});case 15:if(l=t.sent,0!==l.length){t.next=19;break}return console.log("没有创建"),t.abrupt("return");case 19:return u=l[0].pubkey,b=""===e.form.startTime?Math.floor(Date.now()/1e3):new Date(e.form.startTime).getTime()/1e3,m=new k.a(new p.a(s.baseTokenInitialLiquidity).times(Math.pow(10,Number(e.form.baseTokenDecimals))).toFixed(0)),f=new k.a(new p.a(s.quoteTokenInitialLiquidity).times(Math.pow(10,Number(e.form.quoteTokenDecimals))).toFixed(0)),console.log(b),console.log(l),console.log("onConfirm"),h=new I["Token"](I["TOKEN_PROGRAM_ID"],s.baseMint,Number(e.form.baseTokenDecimals)),O=new I["Token"](I["TOKEN_PROGRAM_ID"],s.quoteMint,Number(e.form.quoteTokenDecimals)),t.next=30,window.solConnection.getTokenAccountsByOwner(r,{programId:I["TOKEN_PROGRAM_ID"]});case 30:return T=t.sent,v=T.value.map((function(e){return{pubkey:e.pubkey,programId:e.account.owner,accountInfo:I["SPL_ACCOUNT_LAYOUT"].decode(e.account.data)}})),g=I["TxVersion"].V0,t.next=35,I["Liquidity"].makeCreatePoolV4InstructionV2Simple({connection:window.solConnection,programId:a.AmmV4,marketInfo:{marketId:u,programId:a.OPENBOOK_MARKET},baseMintInfo:h,quoteMintInfo:O,baseAmount:m,quoteAmount:f,startTime:new k.a(b),ownerInfo:{feePayer:r,wallet:r,tokenAccounts:v,useSOLBalance:!0},associatedOnly:!1,checkCreateATAOwner:!0,makeTxVersion:g,feeDestinationId:n?new y["PublicKey"]("3XMrhbv989VxAMi3DErLV9eJht1pHppW5LbKxe9fkEFR"):new y["PublicKey"]("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5")});case 35:return w=t.sent,q=w.innerTransactions,_=w.address,j=(o=new y["Transaction"]).add.apply(o,Object(c["a"])(q)),console.log("AMM ID:",_.ammId.toBase58()),t.prev=40,t.next=43,Object(d["n"])(Object(d["k"])("CREATE_LIQUIDITY"),j,[]);case 43:L=t.sent,console.log(L),e.market_id=_.ammId.toBase58(),e.$refs.CreateSuccessDialog.show(),t.next=52;break;case 49:t.prev=49,t.t0=t["catch"](40),console.log("error",t.t0);case 52:return t.prev=52,e.isStop=!1,e.isLoading=!1,t.finish(52);case 56:console.log(e.form,"this.form");case 57:case"end":return t.stop()}}),t,null,[[40,49,52,56]])})))()},findLp:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n,a,s,c,r,l,u;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o="Mainnet"!==e.solNetwork,n=o?I["DEVNET_PROGRAM_ID"]:I["MAINNET_PROGRAM_ID"],a={baseMint:e.form.baseToken,quoteMint:e.form.quoteToken,baseTokenInitialLiquidity:e.form.baseTokenInitialLiquidity,quoteTokenInitialLiquidity:e.form.quoteTokenInitialLiquidity},s=new I["Token"](I["TOKEN_PROGRAM_ID"],a.baseMint,Number(e.form.baseTokenDecimals)),c=new I["Token"](I["TOKEN_PROGRAM_ID"],a.quoteMint,Number(e.form.quoteTokenDecimals)),t.next=7,window.solConnection.getProgramAccounts(n.OPENBOOK_MARKET,{commitment:"confirmed",filters:e.findMarketFilters(n.OPENBOOK_MARKET,new y["PublicKey"](a.baseMint),new y["PublicKey"](a.quoteMint))});case 7:if(r=t.sent,0!==r.length){t.next=10;break}return t.abrupt("return");case 10:return l=Object(h["struct"])([Object(h["blob"])(5),Object(O["a"])("accountFlags"),Object(O["b"])("ownAddress"),Object(O["c"])("vaultSignerNonce"),Object(O["b"])("baseMint"),Object(O["b"])("quoteMint"),Object(O["b"])("baseVault"),Object(O["c"])("baseDepositsTotal"),Object(O["c"])("baseFeesAccrued"),Object(O["b"])("quoteVault"),Object(O["c"])("quoteDepositsTotal"),Object(O["c"])("quoteFeesAccrued"),Object(O["c"])("quoteDustThreshold"),Object(O["b"])("requestQueue"),Object(O["b"])("eventQueue"),Object(O["b"])("bids"),Object(O["b"])("asks"),Object(O["c"])("baseLotSize"),Object(O["c"])("quoteLotSize"),Object(O["c"])("feeRateBps"),Object(O["c"])("referrerRebatesAccrued"),Object(O["b"])("authority"),Object(O["b"])("pruneAuthority"),Object(O["b"])("consumeEventsAuthority"),Object(h["blob"])(992),Object(h["blob"])(7)]),u=l.decode(r[0].accountInfo.data),e.poolKeys=I["Liquidity"].getAssociatedPoolKeys({version:4,marketVersion:4,baseMint:s.mint,quoteMint:c.mint,baseDecimals:s.decimals,quoteDecimals:c.decimals,marketId:r[0].publicKey,programId:n.AmmV4,marketProgramId:n.OPENBOOK_MARKET}),e.poolKeys.marketBaseVault=u.baseVault,e.poolKeys.marketQuoteVault=u.quoteVault,e.poolKeys.marketBids=u.bids,e.poolKeys.marketAsks=u.asks,e.poolKeys.marketEventQueue=u.eventQueue,e.lpToken=new I["Token"](I["TOKEN_PROGRAM_ID"],poolKeys.lpMint,poolKeys.lpDecimals),t.next=21,getOrCreateAssociatedTokenAccount(connection,payer,poolKeys.lpMint,payer.publicKey);case 21:e.tokenAccount=t.sent,console.log("查找成功 LP Amount:",e.tokenAccount.amount);case 23:case"end":return t.stop()}}),t)})))()},removeLp:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n,a,s,r,l,u,b,m,p;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=I["TxVersion"].V0,a=new y["PublicKey"](e.solAccount),t.next=4,window.solConnection.getTokenAccountsByOwner(a,{programId:I["TOKEN_PROGRAM_ID"]});case 4:return s=t.sent,r=s.value.map((function(e){return{pubkey:e.pubkey,programId:e.account.owner,accountInfo:I["SPL_ACCOUNT_LAYOUT"].decode(e.account.data)}})),l=new I["TokenAmount"](e.lpToken,e.tokenAccount.amount),t.next=9,I["Liquidity"].makeRemoveLiquidityInstructionSimple({connection:window.solConnection,poolKeys:e.poolKeys,userKeys:{owner:a,payer:a,tokenAccounts:r},amountIn:l,makeTxVersion:n});case 9:return u=t.sent,b=u.innerTransactions,m=(o=new y["Transaction"]).add.apply(o,Object(c["a"])(b)),t.prev=12,t.next=15,Object(d["n"])(Object(d["k"])("CREATE_LIQUIDITY"),m,[]);case 15:p=t.sent,console.log(p),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](12),console.log("error",t.t0);case 22:return t.prev=22,e.isStop=!1,e.isLoading=!1,t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[12,19,22,26]])})))()},addLP:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var o,n,a,s,l,u,b,m,f,k,h,O,T,v,g,w,q,_,j,L,C;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=I["TxVersion"].V0,a={baseMint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",quoteMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",baseTokenInitialLiquidity:e.form.baseTokenInitialLiquidity,quoteTokenInitialLiquidity:e.form.quoteTokenInitialLiquidity},s=new I["Token"](I["TOKEN_PROGRAM_ID"],a.baseMint,Number(e.form.baseTokenDecimals)),l=new I["Token"](I["TOKEN_PROGRAM_ID"],a.quoteMint,Number(e.form.quoteTokenDecimals)),u=new I["TokenAmount"](s,1*Math.pow(10,6)),b=new I["Percent"](1,100),t.next=8,fetch(I["ENDPOINT"]+I["RAYDIUM_MAINNET"].poolInfo).then((function(e){return e.json()}));case 8:return m=t.sent,f=[].concat(Object(c["a"])(m.official),Object(c["a"])(m.unOfficial)).find((function(e){return e.baseMint.toLowerCase()===a.baseMint.toLowerCase()&&e.quoteMint.toLowerCase()===a.quoteMint.toLowerCase()})),k=Object(I["jsonInfo2PoolKeys"])(f),console.log(k),t.next=14,I["Liquidity"].fetchInfo({connection:window.solConnection,poolKeys:k});case 14:return h=t.sent,O=I["Liquidity"].computeAnotherAmount({poolKeys:k,poolInfo:Object(r["a"])(Object(r["a"])({},f),h),amount:u,anotherCurrency:l,slippage:b}),T=O.maxAnotherAmount,v=O.anotherAmount,g=O.liquidity,console.log("报价货币要添加多少",new p.a(v.numerator).toString()),console.log("will add liquidity info",{liquidity:g.toString(),liquidityD:new p.a(g.toString()).div(Math.pow(10,h.lpDecimals)).toString()}),w=new y["PublicKey"](e.solAccount),t.next=21,window.solConnection.getTokenAccountsByOwner(w,{programId:I["TOKEN_PROGRAM_ID"]});case 21:return q=t.sent,_=q.value.map((function(e){return{pubkey:e.pubkey,programId:e.account.owner,accountInfo:I["SPL_ACCOUNT_LAYOUT"].decode(e.account.data)}})),t.next=25,I["Liquidity"].makeAddLiquidityInstructionSimple({connection:window.solConnection,poolKeys:k,userKeys:{owner:w,payer:w,tokenAccounts:_},amountInA:u,amountInB:T,fixedSide:"a",makeTxVersion:n});case 25:return j=t.sent,L=(o=new y["Transaction"]).add.apply(o,Object(c["a"])(j.innerTransactions)),t.prev=27,t.next=30,Object(d["n"])(Object(d["k"])("CREATE_LIQUIDITY"),L,[]);case 30:C=t.sent,console.log(C),t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](27),console.log("error",t.t0);case 37:return t.prev=37,e.isStop=!1,e.isLoading=!1,t.finish(37);case 41:console.log(m);case 42:case"end":return t.stop()}}),t,null,[[27,34,37,41]])})))()},findMarketFilters:function(e,t,o){var n=Object(h["struct"])([Object(h["blob"])(5),Object(O["a"])("accountFlags"),Object(O["b"])("ownAddress"),Object(O["c"])("vaultSignerNonce"),Object(O["b"])("baseMint"),Object(O["b"])("quoteMint"),Object(O["b"])("baseVault"),Object(O["c"])("baseDepositsTotal"),Object(O["c"])("baseFeesAccrued"),Object(O["b"])("quoteVault"),Object(O["c"])("quoteDepositsTotal"),Object(O["c"])("quoteFeesAccrued"),Object(O["c"])("quoteDustThreshold"),Object(O["b"])("requestQueue"),Object(O["b"])("eventQueue"),Object(O["b"])("bids"),Object(O["b"])("asks"),Object(O["c"])("baseLotSize"),Object(O["c"])("quoteLotSize"),Object(O["c"])("feeRateBps"),Object(h["blob"])(7)]),a=Object(h["struct"])([Object(h["blob"])(5),Object(O["a"])("accountFlags"),Object(O["b"])("ownAddress"),Object(O["c"])("vaultSignerNonce"),Object(O["b"])("baseMint"),Object(O["b"])("quoteMint"),Object(O["b"])("baseVault"),Object(O["c"])("baseDepositsTotal"),Object(O["c"])("baseFeesAccrued"),Object(O["b"])("quoteVault"),Object(O["c"])("quoteDepositsTotal"),Object(O["c"])("quoteFeesAccrued"),Object(O["c"])("quoteDustThreshold"),Object(O["b"])("requestQueue"),Object(O["b"])("eventQueue"),Object(O["b"])("bids"),Object(O["b"])("asks"),Object(O["c"])("baseLotSize"),Object(O["c"])("quoteLotSize"),Object(O["c"])("feeRateBps"),Object(O["c"])("referrerRebatesAccrued"),Object(h["blob"])(7)]),i={"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn":1,BJ3jrUzddfuSrZHXSCxMUUQsjKEyLmuuyZebkcaFp2fg:1,EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o:2,"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin":3},s=function(e){return i[e.toString()]||3},c=function(e){return 1===s(e)?n:a},r=[{memcmp:{offset:c(e).offsetOf("baseMint"),bytes:t.toBase58()}},{memcmp:{offset:c(e).offsetOf("quoteMint"),bytes:o.toBase58()}}];return r}}},A=C,S=(o("0d56"),Object(q["a"])(A,n,a,!1,null,"67aee46a",null));t["default"]=S.exports},"828c":function(e,t,o){},aafe:function(e,t,o){"use strict";o("b796")},b796:function(e,t,o){},e1c5:function(e,t,o){"use strict";(function(e){o.d(t,"b",(function(){return k})),o.d(t,"c",(function(){return O})),o.d(t,"a",(function(){return v}));var n=o("3835"),a=o("5530"),i=o("d4ec"),s=o("bee2"),c=o("45eb"),r=o("7e84"),l=o("262e"),u=o("2caf"),d=(o("d3b7"),o("d9e2"),o("ddb0"),o("7db0"),o("4fad"),o("901ed")),b=o("64b9"),m=o("399f"),p=o.n(m);d["Blob"];var f=function(e){Object(l["a"])(o,e);var t=Object(u["a"])(o);function o(e){return Object(i["a"])(this,o),t.call(this,32,e)}return Object(s["a"])(o,[{key:"decode",value:function(e,t){return new b["PublicKey"](Object(c["a"])(Object(r["a"])(o.prototype),"decode",this).call(this,e,t))}},{key:"encode",value:function(e,t,n){return Object(c["a"])(Object(r["a"])(o.prototype),"encode",this).call(this,e.toBuffer(),t,n)}}]),o}(d["Blob"]);function k(e){return new f(e)}var h=function(t){Object(l["a"])(n,t);var o=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),o.apply(this,arguments)}return Object(s["a"])(n,[{key:"decode",value:function(e,t){return new p.a(Object(c["a"])(Object(r["a"])(n.prototype),"decode",this).call(this,e,t),10,"le")}},{key:"encode",value:function(t,o,a){return Object(c["a"])(Object(r["a"])(n.prototype),"encode",this).call(this,t.toArrayLike(e,"le",this.span),o,a)}}]),n}(d["Blob"]);function O(e){return new h(8,e)}var y=function(e){Object(l["a"])(o,e);var t=Object(u["a"])(o);function o(e){var n;return Object(i["a"])(this,o),n=t.call(this,8,e),n._lower=Object(d["bits"])(Object(d["u32"])(),!1),n._upper=Object(d["bits"])(Object(d["u32"])(),!1),n}return Object(s["a"])(o,[{key:"addBoolean",value:function(e){this._lower.fields.length<32?this._lower.addBoolean(e):this._upper.addBoolean(e)}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this._lower.decode(e,t),n=this._upper.decode(e,t+this._lower.span);return Object(a["a"])(Object(a["a"])({},o),n)}},{key:"encode",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._lower.encode(e,t,o)+this._upper.encode(e,t,o+this._lower.span)}}]),o}(d["Layout"]);d["Layout"],d["UInt"];var T=new y;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"accountFlags";return T.replicate(e)}T.addBoolean("initialized"),T.addBoolean("market"),T.addBoolean("openOrders"),T.addBoolean("requestQueue"),T.addBoolean("eventQueue"),T.addBoolean("bids"),T.addBoolean("asks")}).call(this,o("1c35").Buffer)}}]);