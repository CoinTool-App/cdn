(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ccd47e0"],{"06d0":function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return w})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return v})),r.d(e,"e",(function(){return R})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return j})),r.d(e,"h",(function(){return O})),r.d(e,"i",(function(){return S})),r.d(e,"j",(function(){return _})),r.d(e,"k",(function(){return E})),r.d(e,"l",(function(){return A})),r.d(e,"m",(function(){return I})),r.d(e,"n",(function(){return x})),r.d(e,"o",(function(){return B})),r.d(e,"p",(function(){return P})),r.d(e,"q",(function(){return T}));class n extends TypeError{constructor(t,e){let r;const{message:n,...o}=t,{path:i}=t,s=0===i.length?n:"At path: "+i.join(".")+" -- "+n;super(s),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function o(t){return i(t)&&"function"===typeof t[Symbol.iterator]}function i(t){return"object"===typeof t&&null!=t}function s(t){return"string"===typeof t?JSON.stringify(t):""+t}function a(t){const{done:e,value:r}=t.next();return e?void 0:r}function c(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"===typeof t&&(t={message:t});const{path:o,branch:i}=e,{type:a}=r,{refinement:c,message:u="Expected a value of type `"+a+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+s(n)+"`"}=t;return{value:n,type:a,refinement:c,key:o[o.length-1],path:o,branch:i,...t,message:u}}function*u(t,e,r,n){o(t)||(t=[t]);for(const o of t){const t=c(o,e,r,n);t&&(yield t)}}function*l(t,e,r={}){const{path:n=[],branch:o=[t],coerce:s=!1,mask:a=!1}=r,c={path:n,branch:o};if(s&&(t=e.coercer(t,c),a&&"type"!==e.type&&i(e.schema)&&i(t)&&!Array.isArray(t)))for(const i in t)void 0===e.schema[i]&&delete t[i];let u=!0;for(const i of e.validator(t,c))u=!1,yield[i,void 0];for(let[f,h,d]of e.entries(t,c)){const e=l(h,d,{path:void 0===f?n:[...n,f],branch:void 0===f?o:[...o,h],coerce:s,mask:a});for(const r of e)r[0]?(u=!1,yield[r[0],void 0]):s&&(h=r[1],void 0===f?t=h:t instanceof Map?t.set(f,h):t instanceof Set?t.add(h):i(t)&&(t[f]=h))}if(u)for(const i of e.refiner(t,c))u=!1,yield[i,void 0];u&&(yield[void 0,t])}class f{constructor(t){const{type:e,schema:r,validator:n,refiner:o,coercer:i=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=i,this.validator=n?(t,e)=>{const r=n(t,e);return u(r,e,this,t)}:()=>[],this.refiner=o?(t,e)=>{const r=o(t,e);return u(r,e,this,t)}:()=>[]}assert(t){return h(t,this)}create(t){return d(t,this)}is(t){return b(t,this)}mask(t){return p(t,this)}validate(t,e={}){return y(t,this,e)}}function h(t,e){const r=y(t,e);if(r[0])throw r[0]}function d(t,e){const r=y(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function p(t,e){const r=y(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function b(t,e){const r=y(t,e);return!r[0]}function y(t,e,r={}){const o=l(t,e,r),i=a(o);if(i[0]){const t=new n(i[0],(function*(){for(const t of o)t[0]&&(yield t[0])}));return[t,void 0]}{const t=i[1];return[void 0,t]}}function g(t,e){return new f({type:t,schema:null,validator:e})}function m(){return g("any",()=>!0)}function w(t){return new f({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+s(t)}})}function v(){return g("boolean",t=>"boolean"===typeof t)}function j(t){return g("instance",e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+s(e))}function O(t){const e=s(t),r=typeof t;return new f({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator(r){return r===t||"Expected the literal `"+e+"`, but received: "+s(r)}})}function k(){return g("never",()=>!1)}function S(t){return new f({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function _(){return g("number",t=>"number"===typeof t&&!isNaN(t)||"Expected a number, but received: "+s(t))}function E(t){return new f({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function A(t,e){return new f({type:"record",schema:null,*entries(r){if(i(r))for(const n in r){const o=r[n];yield[n,n,t],yield[n,o,e]}},validator(t){return i(t)||"Expected an object, but received: "+s(t)}})}function I(){return g("string",t=>"string"===typeof t||"Expected a string, but received: "+s(t))}function x(t){const e=k();return new f({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let o=0;o<n;o++)yield[o,r[o],t[o]||e]}},validator(t){return Array.isArray(t)||"Expected an array, but received: "+s(t)}})}function B(t){const e=Object.keys(t);return new f({type:"type",schema:t,*entries(r){if(i(r))for(const n of e)yield[n,r[n],t[n]]},validator(t){return i(t)||"Expected an object, but received: "+s(t)}})}function P(t){const e=t.map(t=>t.type).join(" | ");return new f({type:"union",schema:null,validator(r,n){const o=[];for(const e of t){const[...t]=l(r,e,n),[i]=t;if(!i[0])return[];for(const[e]of t)e&&o.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+s(r),...o]}})}function T(){return g("unknown",()=>!0)}function R(t,e,r){return new f({...t,coercer:(n,o)=>b(n,e)?t.coercer(r(n,o),o):t.coercer(n,o)})}},"06ef":function(t,e){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},1807:function(t,e){const r={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function n(t,e){if(!t)throw new Error(e)}function o(t,e,r){if(n(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),void 0!==r)if(Array.isArray(r)){const o=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${o}]`;n(r.includes(e.length),i)}else{const o=`Expected ${t} to be an Uint8Array with length ${r}`;n(e.length===r,o)}}function i(t){n("Boolean"===a(t),"Expected compressed to be a Boolean")}function s(t=(t=>new Uint8Array(t)),e){return"function"===typeof t&&(t=t(e)),o("output",t,e),t}function a(t){return Object.prototype.toString.call(t).slice(8,-1)}t.exports=t=>({contextRandomize(e){switch(n(null===e||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==e&&o("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(r.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return o("private key",e,32),0===t.privateKeyVerify(e)},privateKeyNegate(e){switch(o("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(r.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,n){switch(o("private key",e,32),o("tweak",n,32),t.privateKeyTweakAdd(e,n)){case 0:return e;case 1:throw new Error(r.TWEAK_ADD)}},privateKeyTweakMul(e,n){switch(o("private key",e,32),o("tweak",n,32),t.privateKeyTweakMul(e,n)){case 0:return e;case 1:throw new Error(r.TWEAK_MUL)}},publicKeyVerify(e){return o("public key",e,[33,65]),0===t.publicKeyVerify(e)},publicKeyCreate(e,n=!0,a){switch(o("private key",e,32),i(n),a=s(a,n?33:65),t.publicKeyCreate(a,e)){case 0:return a;case 1:throw new Error(r.SECKEY_INVALID);case 2:throw new Error(r.PUBKEY_SERIALIZE)}},publicKeyConvert(e,n=!0,a){switch(o("public key",e,[33,65]),i(n),a=s(a,n?33:65),t.publicKeyConvert(a,e)){case 0:return a;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.PUBKEY_SERIALIZE)}},publicKeyNegate(e,n=!0,a){switch(o("public key",e,[33,65]),i(n),a=s(a,n?33:65),t.publicKeyNegate(a,e)){case 0:return a;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.IMPOSSIBLE_CASE);case 3:throw new Error(r.PUBKEY_SERIALIZE)}},publicKeyCombine(e,a=!0,c){n(Array.isArray(e),"Expected public keys to be an Array"),n(e.length>0,"Expected public keys array will have more than zero items");for(const t of e)o("public key",t,[33,65]);switch(i(a),c=s(c,a?33:65),t.publicKeyCombine(c,e)){case 0:return c;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.PUBKEY_COMBINE);case 3:throw new Error(r.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,n,a=!0,c){switch(o("public key",e,[33,65]),o("tweak",n,32),i(a),c=s(c,a?33:65),t.publicKeyTweakAdd(c,e,n)){case 0:return c;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.TWEAK_ADD)}},publicKeyTweakMul(e,n,a=!0,c){switch(o("public key",e,[33,65]),o("tweak",n,32),i(a),c=s(c,a?33:65),t.publicKeyTweakMul(c,e,n)){case 0:return c;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.TWEAK_MUL)}},signatureNormalize(e){switch(o("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(r.SIG_PARSE)}},signatureExport(e,n){o("signature",e,64),n=s(n,72);const i={output:n,outputlen:72};switch(t.signatureExport(i,e)){case 0:return n.slice(0,i.outputlen);case 1:throw new Error(r.SIG_PARSE);case 2:throw new Error(r.IMPOSSIBLE_CASE)}},signatureImport(e,n){switch(o("signature",e),n=s(n,64),t.signatureImport(n,e)){case 0:return n;case 1:throw new Error(r.SIG_PARSE);case 2:throw new Error(r.IMPOSSIBLE_CASE)}},ecdsaSign(e,i,c={},u){o("message",e,32),o("private key",i,32),n("Object"===a(c),"Expected options to be an Object"),void 0!==c.data&&o("options.data",c.data),void 0!==c.noncefn&&n("Function"===a(c.noncefn),"Expected options.noncefn to be a Function"),u=s(u,64);const l={signature:u,recid:null};switch(t.ecdsaSign(l,e,i,c.data,c.noncefn)){case 0:return l;case 1:throw new Error(r.SIGN);case 2:throw new Error(r.IMPOSSIBLE_CASE)}},ecdsaVerify(e,n,i){switch(o("signature",e,64),o("message",n,32),o("public key",i,[33,65]),t.ecdsaVerify(e,n,i)){case 0:return!0;case 3:return!1;case 1:throw new Error(r.SIG_PARSE);case 2:throw new Error(r.PUBKEY_PARSE)}},ecdsaRecover(e,c,u,l=!0,f){switch(o("signature",e,64),n("Number"===a(c)&&c>=0&&c<=3,"Expected recovery id to be a Number within interval [0, 3]"),o("message",u,32),i(l),f=s(f,l?33:65),t.ecdsaRecover(f,e,c,u)){case 0:return f;case 1:throw new Error(r.SIG_PARSE);case 2:throw new Error(r.RECOVER);case 3:throw new Error(r.IMPOSSIBLE_CASE)}},ecdh(e,i,c={},u){switch(o("public key",e,[33,65]),o("private key",i,32),n("Object"===a(c),"Expected options to be an Object"),void 0!==c.data&&o("options.data",c.data),void 0!==c.hashfn?(n("Function"===a(c.hashfn),"Expected options.hashfn to be a Function"),void 0!==c.xbuf&&o("options.xbuf",c.xbuf,32),void 0!==c.ybuf&&o("options.ybuf",c.ybuf,32),o("output",u)):u=s(u,32),t.ecdh(u,e,i,c.data,c.hashfn,c.xbuf,c.ybuf)){case 0:return u;case 1:throw new Error(r.PUBKEY_PARSE);case 2:throw new Error(r.ECDH)}}})},"1d62":function(t,e,r){var n=r("c194"),o=r("f8f6");n({target:"Object",stat:!0},{setPrototypeOf:o})},"25bb":function(t,e,r){t.exports=r("e186")},3270:function(t,e,r){t.exports=r("1807")(r("d052"))},"4ed6":function(t,e,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}r("1d62"),r("ac7a"),t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},5274:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return R})),r.d(e,"b",(function(){return Je})),r.d(e,"c",(function(){return Xe})),r.d(e,"d",(function(){return A})),r.d(e,"e",(function(){return at})),r.d(e,"f",(function(){return H})),r.d(e,"g",(function(){return G})),r.d(e,"h",(function(){return gr}));var n=r("ff5d"),o=r.n(n),i=r("2c95"),s=r.n(i),a=r("fd40"),c=r("53a7"),u=r.n(c),l=r("5dec"),f=r.n(l),h=r("e085"),d=r("b577"),p=r("a7f4"),b=r("06d0"),y=r("b85b"),g=r("6817"),m=r.n(g),w=r("3270"),v=r.n(w),j=r("7b31");const O=t=>a["Buffer"].isBuffer(t)?t:t instanceof Uint8Array?a["Buffer"].from(t.buffer,t.byteOffset,t.byteLength):a["Buffer"].from(t);class k{constructor(t){Object.assign(this,t)}encode(){return a["Buffer"].from(Object(d["serialize"])(S,this))}static decode(t){return Object(d["deserialize"])(S,this,t)}static decodeUnchecked(t){return Object(d["deserializeUnchecked"])(S,this,t)}}const S=new Map,_=32;function E(t){return void 0!==t._bn}class A extends k{constructor(t){if(super({}),o()(this,"_bn",void 0),E(t))this._bn=t._bn;else{if("string"===typeof t){const e=f.a.decode(t);if(32!=e.length)throw new Error("Invalid public key input");this._bn=new u.a(e)}else this._bn=new u.a(t);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(t){return this._bn.eq(t._bn)}toBase58(){return f.a.encode(this.toBytes())}toBytes(){return this.toBuffer()}toBuffer(){const t=this._bn.toArrayLike(a["Buffer"]);if(32===t.length)return t;const e=a["Buffer"].alloc(32);return t.copy(e,32-t.length),e}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const n=a["Buffer"].concat([t.toBuffer(),a["Buffer"].from(e),r.toBuffer()]),o=await Object(h["sha256"])(new Uint8Array(n));return new A(a["Buffer"].from(o,"hex"))}static async createProgramAddress(t,e){let r=a["Buffer"].alloc(0);t.forEach((function(t){if(t.length>_)throw new TypeError("Max seed length exceeded");r=a["Buffer"].concat([r,O(t)])})),r=a["Buffer"].concat([r,e.toBuffer(),a["Buffer"].from("ProgramDerivedAddress")]);let n=await Object(h["sha256"])(new Uint8Array(r)),o=new u.a(n,16).toArray(void 0,32);if(x(o))throw new Error("Invalid seeds, address must fall off the curve");return new A(o)}static async findProgramAddress(t,e){let r,n=255;while(0!=n){try{const o=t.concat(a["Buffer"].from([n]));r=await this.createProgramAddress(o,e)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static isOnCurve(t){return 1==x(t)}}o()(A,"default",new A("11111111111111111111111111111111")),S.set(A,{kind:"struct",fields:[["_bn","u256"]]});let I=s.a.lowlevel;function x(t){var e=[I.gf(),I.gf(),I.gf(),I.gf()],r=I.gf(),n=I.gf(),o=I.gf(),i=I.gf(),s=I.gf(),a=I.gf(),c=I.gf();return I.set25519(e[2],B),I.unpack25519(e[1],t),I.S(o,e[1]),I.M(i,o,I.D),I.Z(o,o,e[2]),I.A(i,e[2],i),I.S(s,i),I.S(a,s),I.M(c,a,s),I.M(r,c,o),I.M(r,r,i),I.pow2523(r,r),I.M(r,r,o),I.M(r,r,i),I.M(r,r,i),I.M(e[0],r,i),I.S(n,e[0]),I.M(n,n,i),T(n,o)&&I.M(e[0],e[0],P),I.S(n,e[0]),I.M(n,n,i),T(n,o)?0:1}let B=I.gf([1]),P=I.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return I.pack25519(r,t),I.pack25519(n,e),I.crypto_verify_32(r,0,n,0)}class R{constructor(t){o()(this,"_keypair",void 0),this._keypair=t?i["sign"].keyPair.fromSecretKey(O(t)):i["sign"].keyPair()}get publicKey(){return new A(this._keypair.publicKey)}get secretKey(){return O(this._keypair.secretKey)}}new A("BPFLoader1111111111111111111111111111111111");const C=(t="publicKey")=>p["blob"](32,t),U=(t="string")=>{const e=p["struct"]([p["u32"]("length"),p["u32"]("lengthPadding"),p["blob"](p["offset"](p["u32"](),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e);return e.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString("utf8")},e.encode=(t,e,r)=>{const o={chars:a["Buffer"].from(t,"utf8")};return n(o,e,r)},e.alloc=t=>p["u32"]().span+p["u32"]().span+a["Buffer"].from(t,"utf8").length,e},L=(t="authorized")=>p["struct"]([C("staker"),C("withdrawer")],t),W=(t="lockup")=>p["struct"]([p["ns64"]("unixTimestamp"),p["ns64"]("epoch"),C("custodian")],t);function K(t,e){let r=0;return t.layout.fields.forEach(t=>{t.span>=0?r+=t.span:"function"===typeof t.alloc&&(r+=t.alloc(e[t.property]))}),r}function N(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function z(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}const q=32;class M{constructor(t){o()(this,"header",void 0),o()(this,"accountKeys",void 0),o()(this,"recentBlockhash",void 0),o()(this,"instructions",void 0),o()(this,"indexToProgramIds",new Map),this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new A(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){return t<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||t>=this.header.numRequiredSignatures&&t<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];z(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,n=f.a.decode(t.data);let o=[];z(o,e.length);let i=[];return z(i,n.length),{programIdIndex:r,keyIndicesCount:a["Buffer"].from(o),keyIndices:a["Buffer"].from(e),dataLength:a["Buffer"].from(i),data:n}});let n=[];z(n,r.length);let o=a["Buffer"].alloc($);a["Buffer"].from(n).copy(o);let i=n.length;r.forEach(t=>{const e=p["struct"]([p["u8"]("programIdIndex"),p["blob"](t.keyIndicesCount.length,"keyIndicesCount"),p["seq"](p["u8"]("keyIndex"),t.keyIndices.length,"keyIndices"),p["blob"](t.dataLength.length,"dataLength"),p["seq"](p["u8"]("userdatum"),t.data.length,"data")]),r=e.encode(t,o,i);i+=r}),o=o.slice(0,i);const s=p["struct"]([p["blob"](1,"numRequiredSignatures"),p["blob"](1,"numReadonlySignedAccounts"),p["blob"](1,"numReadonlyUnsignedAccounts"),p["blob"](e.length,"keyCount"),p["seq"](C("key"),t,"keys"),C("recentBlockhash")]),c={numRequiredSignatures:a["Buffer"].from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:a["Buffer"].from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:a["Buffer"].from([this.header.numReadonlyUnsignedAccounts]),keyCount:a["Buffer"].from(e),keys:this.accountKeys.map(t=>O(t.toBytes())),recentBlockhash:f.a.decode(this.recentBlockhash)};let u=a["Buffer"].alloc(2048);const l=s.encode(c,u);return o.copy(u,l),u.slice(0,l+o.length)}static from(t){let e=[...t];const r=e.shift(),n=e.shift(),o=e.shift(),i=N(e);let s=[];for(let d=0;d<i;d++){const t=e.slice(0,q);e=e.slice(q),s.push(f.a.encode(a["Buffer"].from(t)))}const c=e.slice(0,q);e=e.slice(q);const u=N(e);let l=[];for(let d=0;d<u;d++){const t=e.shift(),r=N(e),n=e.slice(0,r);e=e.slice(r);const o=N(e),i=e.slice(0,o),s=f.a.encode(a["Buffer"].from(i));e=e.slice(o),l.push({programIdIndex:t,accounts:n,data:s})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:f.a.encode(a["Buffer"].from(c)),accountKeys:s,instructions:l};return new M(h)}}function D(t,e){if(!t)throw new Error(e||"Assertion failed")}const F=a["Buffer"].alloc(64).fill(0),$=1232,V=64;class G{constructor(t){o()(this,"keys",void 0),o()(this,"programId",void 0),o()(this,"data",a["Buffer"].alloc(0)),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}}class H{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){o()(this,"signatures",[]),o()(this,"feePayer",void 0),o()(this,"instructions",[]),o()(this,"recentBlockhash",void 0),o()(this,"nonceInfo",void 0),t&&Object.assign(this,t)}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new G(t))}),this}compileMessage(){const{nonceInfo:t}=this;t&&this.instructions[0]!=t.nonceInstruction&&(this.recentBlockhash=t.nonce,this.instructions.unshift(t.nonceInstruction));const{recentBlockhash:e}=this;if(!e)throw new Error("Transaction recentBlockhash required");let r;if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let f=0;f<this.instructions.length;f++)if(void 0===this.instructions[f].programId)throw new Error(`Transaction instruction index ${f} has undefined program id`);const n=[],o=[];this.instructions.forEach(t=>{t.keys.forEach(t=>{o.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{o.push({pubkey:new A(t),isSigner:!1,isWritable:!1})}),o.sort((function(t,e){const r=t.isSigner===e.isSigner?0:t.isSigner?-1:1,n=t.isWritable===e.isWritable?0:t.isWritable?-1:1;return r||n}));const i=[];o.forEach(t=>{const e=t.pubkey.toString(),r=i.findIndex(t=>t.pubkey.toString()===e);r>-1?i[r].isWritable=i[r].isWritable||t.isWritable:i.push(t)});const s=i.findIndex(t=>t.pubkey.equals(r));if(s>-1){const[t]=i.splice(s,1);t.isSigner=!0,t.isWritable=!0,i.unshift(t)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const f of this.signatures){const t=i.findIndex(t=>t.pubkey.equals(f.publicKey));if(!(t>-1))throw new Error("unknown signer: "+f.publicKey.toString());i[t].isSigner||(i[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,u=0;const l=[],h=[];i.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(c+=1)):(h.push(t.toString()),r||(u+=1))});const d=l.concat(h),p=this.instructions.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:f.a.encode(e)}});return p.forEach(t=>{D(t.programIdIndex>=0),t.accounts.forEach(t=>D(t>=0))}),new M({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:e,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const o of t){const t=o.publicKey.toString();e.has(t)||(e.add(t),r.push(o))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r),this._verifySignatures(n.serialize(),!0)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const o of t){const t=o.publicKey.toString();e.has(t)||(e.add(t),r.push(o))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=s.a.sign.detached(r,t.secretKey);this._addSignature(t.publicKey,O(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){D(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=a["Buffer"].from(e)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(t,e){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(e)return!1}else if(!s.a.sign.detached.verify(t,r,n.toBuffer()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];z(r,e.length);const n=r.length+64*e.length+t.length,o=a["Buffer"].alloc(n);return D(e.length<256),a["Buffer"].from(r).copy(o,0),e.forEach(({signature:t},e)=>{null!==t&&(D(64===t.length,"signature has invalid length"),a["Buffer"].from(t).copy(o,r.length+64*e))}),t.copy(o,r.length+64*e.length),D(o.length<=$,`Transaction too large: ${o.length} > ${$}`),o}get keys(){return D(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return D(1===this.instructions.length),this.instructions[0].programId}get data(){return D(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=N(e);let n=[];for(let o=0;o<r;o++){const t=e.slice(0,V);e=e.slice(V),n.push(f.a.encode(a["Buffer"].from(t)))}return H.populate(M.from(e),n)}static populate(t,e=[]){const r=new H;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const o={signature:e==f.a.encode(F)?null:f.a.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(o)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new G({keys:n,programId:t.accountKeys[e.programIdIndex],data:f.a.decode(e.data)}))}),r}}const Y=new A("SysvarC1ock11111111111111111111111111111111"),Z=new A("SysvarRecentB1ockHashes11111111111111111111"),J=new A("SysvarRent111111111111111111111111111111111"),X=(new A("SysvarRewards111111111111111111111111111111"),new A("SysvarStakeHistory1111111111111111111111111"));new A("Sysvar1nstructions1111111111111111111111111");async function Q(t,e,r,n){const o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},i=await t.sendTransaction(e,r,o),s=(await t.confirmTransaction(i,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${i} failed (${JSON.stringify(s)})`);return i}function tt(t){return new Promise(e=>setTimeout(e,t))}function et(t,e){const r=t.layout.span>=0?t.layout.span:K(t,e),n=a["Buffer"].alloc(r),o=Object.assign({instruction:t.index},e);return t.layout.encode(o,n),n}const rt=p["nu64"]("lamportsPerSignature"),nt=p["struct"]([p["u32"]("version"),p["u32"]("state"),C("authorizedPubkey"),C("nonce"),p["struct"]([rt],"feeCalculator")]),ot=nt.span;class it{constructor(t){o()(this,"authorizedPubkey",void 0),o()(this,"nonce",void 0),o()(this,"feeCalculator",void 0),this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=nt.decode(O(t),0);return new it({authorizedPubkey:new A(e.authorizedPubkey),nonce:new A(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const st=Object.freeze({Create:{index:0,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports"),p["ns64"]("space"),C("programId")])},Assign:{index:1,layout:p["struct"]([p["u32"]("instruction"),C("programId")])},Transfer:{index:2,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports")])},CreateWithSeed:{index:3,layout:p["struct"]([p["u32"]("instruction"),C("base"),U("seed"),p["ns64"]("lamports"),p["ns64"]("space"),C("programId")])},AdvanceNonceAccount:{index:4,layout:p["struct"]([p["u32"]("instruction")])},WithdrawNonceAccount:{index:5,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports")])},InitializeNonceAccount:{index:6,layout:p["struct"]([p["u32"]("instruction"),C("authorized")])},AuthorizeNonceAccount:{index:7,layout:p["struct"]([p["u32"]("instruction"),C("authorized")])},Allocate:{index:8,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("space")])},AllocateWithSeed:{index:9,layout:p["struct"]([p["u32"]("instruction"),C("base"),U("seed"),p["ns64"]("space"),C("programId")])},AssignWithSeed:{index:10,layout:p["struct"]([p["u32"]("instruction"),C("base"),U("seed"),C("programId")])},TransferWithSeed:{index:11,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports"),U("seed"),C("programId")])}});class at{constructor(){}static createAccount(t){const e=st.Create,r=et(e,{lamports:t.lamports,space:t.space,programId:O(t.programId.toBuffer())});return new G({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=st.TransferWithSeed;e=et(n,{lamports:t.lamports,seed:t.seed,programId:O(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=st.Transfer;e=et(n,{lamports:t.lamports}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new G({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=st.AssignWithSeed;e=et(n,{base:O(t.basePubkey.toBuffer()),seed:t.seed,programId:O(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=st.Assign;e=et(n,{programId:O(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new G({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=st.CreateWithSeed,r=et(e,{base:O(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:O(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new G({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new H;"basePubkey"in t&&"seed"in t?e.add(at.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ot,programId:this.programId})):e.add(at.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ot,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=st.InitializeNonceAccount,r=et(e,{authorized:O(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:J,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new G(n)}static nonceAdvance(t){const e=st.AdvanceNonceAccount,r=et(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new G(n)}static nonceWithdraw(t){const e=st.WithdrawNonceAccount,r=et(e,{lamports:t.lamports});return new G({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:J,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=st.AuthorizeNonceAccount,r=et(e,{authorized:O(t.newAuthorizedPubkey.toBuffer())});return new G({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=st.AllocateWithSeed;e=et(n,{base:O(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:O(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=st.Allocate;e=et(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new G({keys:r,programId:this.programId,data:e})}}o()(at,"programId",new A("11111111111111111111111111111111"));const ct=$-300;class ut{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/ut.chunkSize)+1+1)}static async load(t,e,r,n,o){{const i=await t.getMinimumBalanceForRentExemption(o.length),s=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==o.length&&(a=a||new H,a.add(at.allocate({accountPubkey:r.publicKey,space:o.length}))),s.owner.equals(n)||(a=a||new H,a.add(at.assign({accountPubkey:r.publicKey,programId:n}))),s.lamports<i&&(a=a||new H,a.add(at.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:i-s.lamports})))}else a=(new H).add(at.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:i>0?i:1,space:o.length,programId:n}));null!==a&&await Q(t,a,[e,r],{commitment:"confirmed"})}const i=p["struct"]([p["u32"]("instruction"),p["u32"]("offset"),p["u32"]("bytesLength"),p["u32"]("bytesLengthPadding"),p["seq"](p["u8"]("byte"),p["offset"](p["u32"](),-8),"bytes")]),s=ut.chunkSize;let c=0,u=o,l=[];while(u.length>0){const o=u.slice(0,s),f=a["Buffer"].alloc(s+16);i.encode({instruction:0,offset:c,bytes:o},f);const h=(new H).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:f});if(l.push(Q(t,h,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await tt(1e3/t)}c+=s,u=u.slice(s)}await Promise.all(l);{const o=p["struct"]([p["u32"]("instruction")]),i=a["Buffer"].alloc(o.span);o.encode({instruction:1},i);const s=(new H).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:J,isSigner:!1,isWritable:!1}],programId:n,data:i});await Q(t,s,[e,r],{commitment:"confirmed"})}return!0}}o()(ut,"chunkSize",ct);new A("BPFLoader2111111111111111111111111111111111");var lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var ht={exports:{}};(function(t,e){var r="undefined"!==typeof self?self:lt,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!==typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function h(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}function p(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=s(t),e=a(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},u.prototype["delete"]=function(t){delete this.map[s(t)]},u.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},u.prototype.set=function(t,e){this.map[s(t)]=a(e)},u.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},u.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),c(t)},u.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),c(t)},u.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),c(t)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t){var e=t.toUpperCase();return g.indexOf(e)>-1?e:t}function w(t,e){e=e||{};var r=e.body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=m(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function j(t){var e=new u,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e}function O(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];O.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(_){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(t,n){return new Promise((function(o,i){var s=new w(t,n);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:j(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;o(new O(e,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=u,t.Request=w,t.Response=O),e.Headers=u,e.Request=w,e.Response=O,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e})(ht,ht.exports);var dt=ft(ht.exports);const pt=32;function bt(t){let e=0;while(t>1)t/=2,e++;return e}function yt(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class gt{constructor(t,e,r,n,i){o()(this,"slotsPerEpoch",void 0),o()(this,"leaderScheduleSlotOffset",void 0),o()(this,"warmup",void 0),o()(this,"firstNormalEpoch",void 0),o()(this,"firstNormalSlot",void 0),this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=bt(yt(t+pt+1))-bt(pt)-1,r=this.getSlotsInEpoch(e),n=t-(r-pt);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,o=e%this.slotsPerEpoch;return[n,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*pt:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+bt(pt)):this.slotsPerEpoch}}class mt extends Error{constructor(t,e){super(t),o()(this,"logs",void 0),this.logs=e}}const wt=160,vt=64,jt=wt/vt,Ot=1e3/jt;function kt(t,e){let r;const n=new Promise(t=>{r=setTimeout(()=>t(null),e)});return Promise.race([t,n]).then(t=>(clearTimeout(r),t))}function St(t){let e=new URL(t);const r="https:"===e.protocol;return e.protocol=r?"wss:":"ws:",e.host="",""!==e.port&&(e.port=String(Number(e.port)+1)),e.toString()}const _t=Object(b["e"])(Object(b["g"])(A),Object(b["m"])(),t=>new A(t)),Et=Object(b["n"])([Object(b["m"])(),Object(b["h"])("base64")]),At=Object(b["e"])(Object(b["g"])(a["Buffer"]),Et,t=>a["Buffer"].from(t[0],"base64")),It=3e4;function xt(t){return Object(b["p"])([Object(b["o"])({jsonrpc:Object(b["h"])("2.0"),id:Object(b["m"])(),result:t}),Object(b["o"])({jsonrpc:Object(b["h"])("2.0"),id:Object(b["m"])(),error:Object(b["o"])({code:Object(b["q"])(),message:Object(b["m"])(),data:Object(b["k"])(Object(b["a"])())})})])}const Bt=xt(Object(b["q"])());function Pt(t){return Object(b["e"])(xt(t),Bt,e=>"error"in e?e:{...e,result:Object(b["f"])(e.result,t)})}function Tt(t){return Pt(Object(b["o"])({context:Object(b["o"])({slot:Object(b["j"])()}),value:t}))}function Rt(t){return Object(b["o"])({context:Object(b["o"])({slot:Object(b["j"])()}),value:t})}const Ct=Object(b["o"])({foundation:Object(b["j"])(),foundationTerm:Object(b["j"])(),initial:Object(b["j"])(),taper:Object(b["j"])(),terminal:Object(b["j"])()}),Ut=Pt(Object(b["b"])(Object(b["i"])(Object(b["o"])({epoch:Object(b["j"])(),effectiveSlot:Object(b["j"])(),amount:Object(b["j"])(),postBalance:Object(b["j"])()})))),Lt=Object(b["o"])({epoch:Object(b["j"])(),slotIndex:Object(b["j"])(),slotsInEpoch:Object(b["j"])(),absoluteSlot:Object(b["j"])(),blockHeight:Object(b["k"])(Object(b["j"])()),transactionCount:Object(b["k"])(Object(b["j"])())}),Wt=Object(b["o"])({slotsPerEpoch:Object(b["j"])(),leaderScheduleSlotOffset:Object(b["j"])(),warmup:Object(b["d"])(),firstNormalEpoch:Object(b["j"])(),firstNormalSlot:Object(b["j"])()}),Kt=Object(b["l"])(Object(b["m"])(),Object(b["b"])(Object(b["j"])())),Nt=Object(b["i"])(Object(b["p"])([Object(b["o"])({}),Object(b["m"])()])),zt=Object(b["o"])({err:Nt}),qt=Object(b["h"])("receivedSignature"),Mt=Object(b["o"])({"solana-core":Object(b["m"])(),"feature-set":Object(b["k"])(Object(b["j"])())}),Dt=Tt(Object(b["o"])({err:Object(b["i"])(Object(b["p"])([Object(b["o"])({}),Object(b["m"])()])),logs:Object(b["i"])(Object(b["b"])(Object(b["m"])())),accounts:Object(b["k"])(Object(b["i"])(Object(b["b"])(Object(b["o"])({executable:Object(b["d"])(),owner:Object(b["m"])(),lamports:Object(b["j"])(),data:Object(b["b"])(Object(b["m"])()),rentEpoch:Object(b["k"])(Object(b["j"])())})))),unitsConsumed:Object(b["k"])(Object(b["j"])())}));function Ft(t,e,r,n,o){let i;n&&(i=(t,e)=>new Promise((r,o)=>{n(t,e,async(t,e)=>{try{r(await dt(t,e))}catch(n){o(n)}})}));const s=new m.a(async(e,n)=>{const s=void 0,a={method:"POST",body:e,agent:s,headers:Object.assign({"Content-Type":"application/json"},r||{})};try{let e,r=5,s=500;for(;;){if(e=i?await i(t,a):await dt(t,a),429!==e.status)break;if(!0===o)break;if(r-=1,0===r)break;console.log(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${s}ms delay...`),await tt(s),s*=2}const c=await e.text();e.ok?n(null,c):n(new Error(`${e.status} ${e.statusText}: ${c}`))}catch(c){c instanceof Error&&n(c)}},{});return s}function $t(t){return(e,r)=>new Promise((n,o)=>{t.request(e,r,(t,e)=>{t?o(t):n(e)})})}function Vt(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const o=e.map(e=>t.request(e.methodName,e.args));t.request(o,(t,e)=>{t?n(t):r(e)})})}const Gt=Pt(Ct),Ht=Pt(Lt),Yt=Pt(Wt),Zt=Pt(Kt),Jt=Pt(Object(b["j"])()),Xt=Tt(Object(b["o"])({total:Object(b["j"])(),circulating:Object(b["j"])(),nonCirculating:Object(b["j"])(),nonCirculatingAccounts:Object(b["b"])(_t)})),Qt=Object(b["o"])({amount:Object(b["m"])(),uiAmount:Object(b["i"])(Object(b["j"])()),decimals:Object(b["j"])(),uiAmountString:Object(b["k"])(Object(b["m"])())}),te=Tt(Object(b["b"])(Object(b["o"])({address:_t,amount:Object(b["m"])(),uiAmount:Object(b["i"])(Object(b["j"])()),decimals:Object(b["j"])(),uiAmountString:Object(b["k"])(Object(b["m"])())}))),ee=Tt(Object(b["b"])(Object(b["o"])({pubkey:_t,account:Object(b["o"])({executable:Object(b["d"])(),owner:_t,lamports:Object(b["j"])(),data:At,rentEpoch:Object(b["j"])()})}))),re=Object(b["o"])({program:Object(b["m"])(),parsed:Object(b["q"])(),space:Object(b["j"])()}),ne=Tt(Object(b["b"])(Object(b["o"])({pubkey:_t,account:Object(b["o"])({executable:Object(b["d"])(),owner:_t,lamports:Object(b["j"])(),data:re,rentEpoch:Object(b["j"])()})}))),oe=Tt(Object(b["b"])(Object(b["o"])({lamports:Object(b["j"])(),address:_t}))),ie=Object(b["o"])({executable:Object(b["d"])(),owner:_t,lamports:Object(b["j"])(),data:At,rentEpoch:Object(b["j"])()}),se=Object(b["o"])({pubkey:_t,account:ie}),ae=Object(b["e"])(Object(b["p"])([Object(b["g"])(a["Buffer"]),re]),Object(b["p"])([Et,re]),t=>Array.isArray(t)?Object(b["f"])(t,At):t),ce=Object(b["o"])({executable:Object(b["d"])(),owner:_t,lamports:Object(b["j"])(),data:ae,rentEpoch:Object(b["j"])()}),ue=Object(b["o"])({pubkey:_t,account:ce}),le=Object(b["o"])({state:Object(b["p"])([Object(b["h"])("active"),Object(b["h"])("inactive"),Object(b["h"])("activating"),Object(b["h"])("deactivating")]),active:Object(b["j"])(),inactive:Object(b["j"])()}),fe=Pt(Object(b["b"])(Object(b["o"])({signature:Object(b["m"])(),slot:Object(b["j"])(),err:Nt,memo:Object(b["i"])(Object(b["m"])()),blockTime:Object(b["k"])(Object(b["i"])(Object(b["j"])()))}))),he=Pt(Object(b["b"])(Object(b["o"])({signature:Object(b["m"])(),slot:Object(b["j"])(),err:Nt,memo:Object(b["i"])(Object(b["m"])()),blockTime:Object(b["k"])(Object(b["i"])(Object(b["j"])()))}))),de=Object(b["o"])({subscription:Object(b["j"])(),result:Rt(ie)}),pe=Object(b["o"])({pubkey:_t,account:ie}),be=Object(b["o"])({subscription:Object(b["j"])(),result:Rt(pe)}),ye=Object(b["o"])({parent:Object(b["j"])(),slot:Object(b["j"])(),root:Object(b["j"])()}),ge=Object(b["o"])({subscription:Object(b["j"])(),result:ye}),me=Object(b["p"])([Object(b["o"])({type:Object(b["p"])([Object(b["h"])("firstShredReceived"),Object(b["h"])("completed"),Object(b["h"])("optimisticConfirmation"),Object(b["h"])("root")]),slot:Object(b["j"])(),timestamp:Object(b["j"])()}),Object(b["o"])({type:Object(b["h"])("createdBank"),parent:Object(b["j"])(),slot:Object(b["j"])(),timestamp:Object(b["j"])()}),Object(b["o"])({type:Object(b["h"])("frozen"),slot:Object(b["j"])(),timestamp:Object(b["j"])(),stats:Object(b["o"])({numTransactionEntries:Object(b["j"])(),numSuccessfulTransactions:Object(b["j"])(),numFailedTransactions:Object(b["j"])(),maxTransactionsPerEntry:Object(b["j"])()})}),Object(b["o"])({type:Object(b["h"])("dead"),slot:Object(b["j"])(),timestamp:Object(b["j"])(),err:Object(b["m"])()})]),we=Object(b["o"])({subscription:Object(b["j"])(),result:me}),ve=Object(b["o"])({subscription:Object(b["j"])(),result:Rt(Object(b["p"])([zt,qt]))}),je=Object(b["o"])({subscription:Object(b["j"])(),result:Object(b["j"])()}),Oe=Object(b["o"])({pubkey:Object(b["m"])(),gossip:Object(b["i"])(Object(b["m"])()),tpu:Object(b["i"])(Object(b["m"])()),rpc:Object(b["i"])(Object(b["m"])()),version:Object(b["i"])(Object(b["m"])())}),ke=Object(b["o"])({votePubkey:Object(b["m"])(),nodePubkey:Object(b["m"])(),activatedStake:Object(b["j"])(),epochVoteAccount:Object(b["d"])(),epochCredits:Object(b["b"])(Object(b["n"])([Object(b["j"])(),Object(b["j"])(),Object(b["j"])()])),commission:Object(b["j"])(),lastVote:Object(b["j"])(),rootSlot:Object(b["i"])(Object(b["j"])())}),Se=Pt(Object(b["o"])({current:Object(b["b"])(ke),delinquent:Object(b["b"])(ke)})),_e=Object(b["p"])([Object(b["h"])("processed"),Object(b["h"])("confirmed"),Object(b["h"])("finalized")]),Ee=Object(b["o"])({slot:Object(b["j"])(),confirmations:Object(b["i"])(Object(b["j"])()),err:Nt,confirmationStatus:Object(b["k"])(_e)}),Ae=Tt(Object(b["b"])(Object(b["i"])(Ee))),Ie=Pt(Object(b["j"])()),xe=Object(b["o"])({signatures:Object(b["b"])(Object(b["m"])()),message:Object(b["o"])({accountKeys:Object(b["b"])(Object(b["m"])()),header:Object(b["o"])({numRequiredSignatures:Object(b["j"])(),numReadonlySignedAccounts:Object(b["j"])(),numReadonlyUnsignedAccounts:Object(b["j"])()}),instructions:Object(b["b"])(Object(b["o"])({accounts:Object(b["b"])(Object(b["j"])()),data:Object(b["m"])(),programIdIndex:Object(b["j"])()})),recentBlockhash:Object(b["m"])()})}),Be=Object(b["o"])({parsed:Object(b["q"])(),program:Object(b["m"])(),programId:_t}),Pe=Object(b["o"])({accounts:Object(b["b"])(_t),data:Object(b["m"])(),programId:_t}),Te=Object(b["p"])([Pe,Be]),Re=Object(b["p"])([Object(b["o"])({parsed:Object(b["q"])(),program:Object(b["m"])(),programId:Object(b["m"])()}),Object(b["o"])({accounts:Object(b["b"])(Object(b["m"])()),data:Object(b["m"])(),programId:Object(b["m"])()})]),Ce=Object(b["e"])(Te,Re,t=>"accounts"in t?Object(b["f"])(t,Pe):Object(b["f"])(t,Be)),Ue=Object(b["o"])({signatures:Object(b["b"])(Object(b["m"])()),message:Object(b["o"])({accountKeys:Object(b["b"])(Object(b["o"])({pubkey:_t,signer:Object(b["d"])(),writable:Object(b["d"])()})),instructions:Object(b["b"])(Ce),recentBlockhash:Object(b["m"])()})}),Le=Object(b["o"])({accountIndex:Object(b["j"])(),mint:Object(b["m"])(),uiTokenAmount:Qt}),We=Object(b["o"])({err:Nt,fee:Object(b["j"])(),innerInstructions:Object(b["k"])(Object(b["i"])(Object(b["b"])(Object(b["o"])({index:Object(b["j"])(),instructions:Object(b["b"])(Object(b["o"])({accounts:Object(b["b"])(Object(b["j"])()),data:Object(b["m"])(),programIdIndex:Object(b["j"])()}))})))),preBalances:Object(b["b"])(Object(b["j"])()),postBalances:Object(b["b"])(Object(b["j"])()),logMessages:Object(b["k"])(Object(b["i"])(Object(b["b"])(Object(b["m"])()))),preTokenBalances:Object(b["k"])(Object(b["i"])(Object(b["b"])(Le))),postTokenBalances:Object(b["k"])(Object(b["i"])(Object(b["b"])(Le)))}),Ke=Object(b["o"])({err:Nt,fee:Object(b["j"])(),innerInstructions:Object(b["k"])(Object(b["i"])(Object(b["b"])(Object(b["o"])({index:Object(b["j"])(),instructions:Object(b["b"])(Ce)})))),preBalances:Object(b["b"])(Object(b["j"])()),postBalances:Object(b["b"])(Object(b["j"])()),logMessages:Object(b["k"])(Object(b["i"])(Object(b["b"])(Object(b["m"])()))),preTokenBalances:Object(b["k"])(Object(b["i"])(Object(b["b"])(Le))),postTokenBalances:Object(b["k"])(Object(b["i"])(Object(b["b"])(Le)))}),Ne=Pt(Object(b["i"])(Object(b["o"])({blockhash:Object(b["m"])(),previousBlockhash:Object(b["m"])(),parentSlot:Object(b["j"])(),transactions:Object(b["b"])(Object(b["o"])({transaction:xe,meta:Object(b["i"])(We)})),rewards:Object(b["k"])(Object(b["b"])(Object(b["o"])({pubkey:Object(b["m"])(),lamports:Object(b["j"])(),postBalance:Object(b["i"])(Object(b["j"])()),rewardType:Object(b["i"])(Object(b["m"])())}))),blockTime:Object(b["i"])(Object(b["j"])())}))),ze=Pt(Object(b["i"])(Object(b["o"])({blockhash:Object(b["m"])(),previousBlockhash:Object(b["m"])(),parentSlot:Object(b["j"])(),signatures:Object(b["b"])(Object(b["m"])()),blockTime:Object(b["i"])(Object(b["j"])())}))),qe=Pt(Object(b["i"])(Object(b["o"])({slot:Object(b["j"])(),meta:We,blockTime:Object(b["k"])(Object(b["i"])(Object(b["j"])())),transaction:xe}))),Me=Pt(Object(b["i"])(Object(b["o"])({slot:Object(b["j"])(),transaction:Ue,meta:Object(b["i"])(Ke),blockTime:Object(b["k"])(Object(b["i"])(Object(b["j"])()))}))),De=Tt(Object(b["o"])({blockhash:Object(b["m"])(),feeCalculator:Object(b["o"])({lamportsPerSignature:Object(b["j"])()})})),Fe=Object(b["o"])({slot:Object(b["j"])(),numTransactions:Object(b["j"])(),numSlots:Object(b["j"])(),samplePeriodSecs:Object(b["j"])()}),$e=Pt(Object(b["b"])(Fe)),Ve=Tt(Object(b["i"])(Object(b["o"])({feeCalculator:Object(b["o"])({lamportsPerSignature:Object(b["j"])()})}))),Ge=Pt(Object(b["m"])()),He=Pt(Object(b["m"])()),Ye=Object(b["o"])({err:Nt,logs:Object(b["b"])(Object(b["m"])()),signature:Object(b["m"])()}),Ze=Object(b["o"])({result:Rt(Ye),subscription:Object(b["j"])()});class Je{constructor(t,e){o()(this,"_commitment",void 0),o()(this,"_confirmTransactionInitialTimeout",void 0),o()(this,"_rpcEndpoint",void 0),o()(this,"_rpcWsEndpoint",void 0),o()(this,"_rpcClient",void 0),o()(this,"_rpcRequest",void 0),o()(this,"_rpcBatchRequest",void 0),o()(this,"_rpcWebSocket",void 0),o()(this,"_rpcWebSocketConnected",!1),o()(this,"_rpcWebSocketHeartbeat",null),o()(this,"_rpcWebSocketIdleTimeout",null),o()(this,"_disableBlockhashCaching",!1),o()(this,"_pollingBlockhash",!1),o()(this,"_blockhashInfo",{recentBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]}),o()(this,"_accountChangeSubscriptionCounter",0),o()(this,"_accountChangeSubscriptions",{}),o()(this,"_programAccountChangeSubscriptionCounter",0),o()(this,"_programAccountChangeSubscriptions",{}),o()(this,"_rootSubscriptionCounter",0),o()(this,"_rootSubscriptions",{}),o()(this,"_signatureSubscriptionCounter",0),o()(this,"_signatureSubscriptions",{}),o()(this,"_slotSubscriptionCounter",0),o()(this,"_slotSubscriptions",{}),o()(this,"_logsSubscriptionCounter",0),o()(this,"_logsSubscriptions",{}),o()(this,"_slotUpdateSubscriptionCounter",0),o()(this,"_slotUpdateSubscriptions",{});let r=new URL(t);const n="https:"===r.protocol;let i,s,a,c;e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,i=e.wsEndpoint,s=e.httpHeaders,a=e.fetchMiddleware,c=e.disableRetryOnRateLimit),this._rpcEndpoint=t,this._rpcWsEndpoint=i||St(t),this._rpcClient=Ft(r.toString(),n,s,a,c),this._rpcRequest=$t(this._rpcClient),this._rpcBatchRequest=Vt(this._rpcClient),this._rpcWebSocket=new y["Client"](this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}async getBalanceAndContext(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getBalance",r),o=Object(b["f"])(n,Tt(Object(b["j"])()));if("error"in o)throw new Error("failed to get balance for "+t.toBase58()+": "+o.error.message);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Object(b["f"])(e,Pt(Object(b["i"])(Object(b["j"])())));if("error"in r)throw new Error("failed to get block time for slot "+t+": "+r.error.message);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Object(b["f"])(t,Pt(Object(b["j"])()));if("error"in e)throw new Error("failed to get minimum ledger slot: "+e.error.message);return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Object(b["f"])(t,Jt);if("error"in e)throw new Error("failed to get first available block: "+e.error.message);return e.result}async getSupply(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSupply",e),n=Object(b["f"])(r,Xt);if("error"in n)throw new Error("failed to get supply: "+n.error.message);return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),o=Object(b["f"])(n,Tt(Qt));if("error"in o)throw new Error("failed to get token supply: "+o.error.message);return o.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),o=Object(b["f"])(n,Tt(Qt));if("error"in o)throw new Error("failed to get token account balance: "+o.error.message);return o.result}async getTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const o=this._buildArgs(n,r,"base64"),i=await this._rpcRequest("getTokenAccountsByOwner",o),s=Object(b["f"])(i,ee);if("error"in s)throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+s.error.message);return s.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const o=this._buildArgs(n,r,"jsonParsed"),i=await this._rpcRequest("getTokenAccountsByOwner",o),s=Object(b["f"])(i,ne);if("error"in s)throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+s.error.message);return s.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),o=Object(b["f"])(n,oe);if("error"in o)throw new Error("failed to get largest accounts: "+o.error.message);return o.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),o=Object(b["f"])(n,te);if("error"in o)throw new Error("failed to get token largest accounts: "+o.error.message);return o.result}async getAccountInfoAndContext(t,e){const r=this._buildArgs([t.toBase58()],e,"base64"),n=await this._rpcRequest("getAccountInfo",r),o=Object(b["f"])(n,Tt(Object(b["i"])(ie)));if("error"in o)throw new Error("failed to get info about account "+t.toBase58()+": "+o.error.message);return o.result}async getParsedAccountInfo(t,e){const r=this._buildArgs([t.toBase58()],e,"jsonParsed"),n=await this._rpcRequest("getAccountInfo",r),o=Object(b["f"])(n,Tt(Object(b["i"])(ce)));if("error"in o)throw new Error("failed to get info about account "+t.toBase58()+": "+o.error.message);return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleAccountsInfo(t,e){const r=t.map(t=>t.toBase58()),n=this._buildArgs([r],e,"base64"),o=await this._rpcRequest("getMultipleAccounts",n),i=Object(b["f"])(o,Tt(Object(b["b"])(Object(b["i"])(ie))));if("error"in i)throw new Error("failed to get info for accounts "+r+": "+i.error.message);return i.result.value}async getStakeActivation(t,e,r){const n=this._buildArgs([t.toBase58()],e,void 0,void 0!==r?{epoch:r}:void 0),o=await this._rpcRequest("getStakeActivation",n),i=Object(b["f"])(o,Pt(le));if("error"in i)throw new Error(`failed to get Stake Activation ${t.toBase58()}: ${i.error.message}`);return i.result}async getProgramAccounts(t,e){const r={};let n,o;e&&("string"===typeof e?n=e:(n=e.commitment,o=e.encoding,e.dataSlice&&(r.dataSlice=e.dataSlice),e.filters&&(r.filters=e.filters)));const i=this._buildArgs([t.toBase58()],n,o||"base64",r),s=await this._rpcRequest("getProgramAccounts",i),a=Object(b["f"])(s,Pt(Object(b["b"])(se)));if("error"in a)throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+a.error.message);return a.result}async getParsedProgramAccounts(t,e){const r={};let n;e&&("string"===typeof e?n=e:(n=e.commitment,e.filters&&(r.filters=e.filters)));const o=this._buildArgs([t.toBase58()],n,"jsonParsed",r),i=await this._rpcRequest("getProgramAccounts",o),s=Object(b["f"])(i,Pt(Object(b["b"])(ue)));if("error"in s)throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+s.error.message);return s.result}async confirmTransaction(t,e){let r;try{r=f.a.decode(t)}catch(u){throw new Error("signature must be base58 encoded: "+t)}D(64===r.length,"signature has invalid length");const n=Date.now(),o=e||this.commitment;let i,s=null;const a=new Promise((e,r)=>{try{i=this.onSignature(t,(t,r)=>{i=void 0,s={context:r,value:t},e(null)},o)}catch(u){r(u)}});let c=this._confirmTransactionInitialTimeout||6e4;switch(o){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":c=this._confirmTransactionInitialTimeout||3e4;break}try{await kt(a,c)}finally{i&&this.removeSignatureListener(i)}if(null===s){const e=(Date.now()-n)/1e3;throw new Error(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`)}return s}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Object(b["f"])(t,Pt(Object(b["b"])(Oe)));if("error"in e)throw new Error("failed to get cluster nodes: "+e.error.message);return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=Object(b["f"])(r,Se);if("error"in n)throw new Error("failed to get vote accounts: "+n.error.message);return n.result}async getSlot(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSlot",e),n=Object(b["f"])(r,Pt(Object(b["j"])()));if("error"in n)throw new Error("failed to get slot: "+n.error.message);return n.result}async getSlotLeader(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSlotLeader",e),n=Object(b["f"])(r,Pt(Object(b["m"])()));if("error"in n)throw new Error("failed to get slot leader: "+n.error.message);return n.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),o=Object(b["f"])(n,Pt(Object(b["b"])(_t)));if("error"in o)throw new Error("failed to get slot leaders: "+o.error.message);return o.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);D(1===n.length);const o=n[0];return{context:r,value:o}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),o=Object(b["f"])(n,Ae);if("error"in o)throw new Error("failed to get signature status: "+o.error.message);return o.result}async getTransactionCount(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getTransactionCount",e),n=Object(b["f"])(r,Pt(Object(b["j"])()));if("error"in n)throw new Error("failed to get transaction count: "+n.error.message);return n.result}async getTotalSupply(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getSupply",e),n=Object(b["f"])(r,Xt);if("error"in n)throw new Error("failed to get total supply: "+n.error.message);return n.result.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=Object(b["f"])(r,Gt);if("error"in n)throw new Error("failed to get inflation: "+n.error.message);return n.result}async getInflationReward(t,e,r){const n=this._buildArgs([t.map(t=>t.toBase58())],r,void 0,{epoch:e}),o=await this._rpcRequest("getInflationReward",n),i=Object(b["f"])(o,Ut);if("error"in i)throw new Error("failed to get inflation reward: "+i.error.message);return i.result}async getEpochInfo(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getEpochInfo",e),n=Object(b["f"])(r,Ht);if("error"in n)throw new Error("failed to get epoch info: "+n.error.message);return n.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Object(b["f"])(t,Yt);if("error"in e)throw new Error("failed to get epoch schedule: "+e.error.message);const r=e.result;return new gt(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Object(b["f"])(t,Zt);if("error"in e)throw new Error("failed to get leader schedule: "+e.error.message);return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=Object(b["f"])(n,Ie);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=Object(b["f"])(r,De);if("error"in n)throw new Error("failed to get recent blockhash: "+n.error.message);return n.result}async getRecentPerformanceSamples(t){const e=this._buildArgs(t?[t]:[]),r=await this._rpcRequest("getRecentPerformanceSamples",e),n=Object(b["f"])(r,$e);if("error"in n)throw new Error("failed to get recent performance samples: "+n.error.message);return n.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=Object(b["f"])(n,Ve);if("error"in o)throw new Error("failed to get fee calculator: "+o.error.message);const{context:i,value:s}=o.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Object(b["f"])(t,Pt(Mt));if("error"in e)throw new Error("failed to get version: "+e.error.message);return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Object(b["f"])(t,Pt(Object(b["m"])()));if("error"in e)throw new Error("failed to get genesis hash: "+e.error.message);return e.result}async getBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e&&e.commitment),n=await this._rpcRequest("getConfirmedBlock",r),o=Object(b["f"])(n,Ne);if("error"in o)throw new Error("failed to get confirmed block: "+o.error.message);const i=o.result;return i?{...i,transactions:i.transactions.map(({transaction:t,meta:e})=>{const r=new M(t.message);return{meta:e,transaction:{...t,message:r}}})}:i}async getTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e&&e.commitment),n=await this._rpcRequest("getConfirmedTransaction",r),o=Object(b["f"])(n,qe);if("error"in o)throw new Error("failed to get confirmed transaction: "+o.error.message);const i=o.result;return i?{...i,transaction:{...i.transaction,message:new M(i.transaction.message)}}:i}async getConfirmedBlock(t,e){const r=await this.getBlock(t,{commitment:e});if(!r)throw new Error("Confirmed block "+t+" not found");return{...r,transactions:r.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:H.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),o=await this._rpcRequest("getConfirmedBlocks",n),i=Object(b["f"])(o,Pt(Object(b["b"])(Object(b["j"])())));if("error"in i)throw new Error("failed to get blocks: "+i.error.message);return i.result}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),o=Object(b["f"])(n,ze);if("error"in o)throw new Error("failed to get confirmed block: "+o.error.message);const i=o.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const r=await this.getTransaction(t,{commitment:e});if(!r)return r;const{message:n,signatures:o}=r.transaction;return{...r,transaction:H.populate(n,o)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),o=Object(b["f"])(n,Me);if("error"in o)throw new Error("failed to get confirmed transaction: "+o.error.message);return o.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),o=n.map(t=>{const e=Object(b["f"])(t,Me);if("error"in e)throw new Error("failed to get confirmed transactions: "+e.error.message);return e.result});return o}async getConfirmedSignaturesForAddress(t,e,r){let n={},o=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<o)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let i=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>i)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const s=await this.getConfirmedSignaturesForAddress2(t,n);return s.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),i=Object(b["f"])(o,fe);if("error"in i)throw new Error("failed to get confirmed signatures for address: "+i.error.message);return i.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),o=await this._rpcRequest("getSignaturesForAddress",n),i=Object(b["f"])(o,he);if("error"in i)throw new Error("failed to get signatures for address: "+i.error.message);return i.result}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let o=null;return null!==n&&(o=it.fromAccountData(n.data)),{context:r,value:o}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=Object(b["f"])(r,Ge);if("error"in n)throw new Error("airdrop to "+t.toBase58()+" failed: "+n.error.message);return n.result}async _recentBlockhash(t){if(!t){while(this._pollingBlockhash)await tt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=It;if(null!==this._blockhashInfo.recentBlockhash&&!e)return this._blockhashInfo.recentBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now();for(let e=0;e<50;e++){const{blockhash:t}=await this.getRecentBlockhash("finalized");if(this._blockhashInfo.recentBlockhash!=t)return this._blockhashInfo={recentBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await tt(Ot/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async simulateTransaction(t,e,r){let n;if(n=t instanceof H?t:H.populate(t),n.nonceInfo&&e)n.sign(...e);else{let t=this._disableBlockhashCaching;for(;;){if(n.recentBlockhash=await this._recentBlockhash(t),!e)break;if(n.sign(...e),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=n._compile(),i=o.serialize(),s=n._serialize(i),a=s.toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());c["accounts"]={encoding:"base64",addresses:t}}e&&(c.sigVerify=!0);const u=[a,c],l=await this._rpcRequest("simulateTransaction",u),f=Object(b["f"])(l,Dt);if("error"in f){let t;if("data"in f.error&&(t=f.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(f.error.message,r)}throw new mt("failed to simulate transaction: "+f.error.message,t)}return f.result}async sendTransaction(t,e,r){if(t.nonceInfo)t.sign(...e);else{let r=this._disableBlockhashCaching;for(;;){if(t.recentBlockhash=await this._recentBlockhash(r),t.sign(...e),!t.signature)throw new Error("!signature");const n=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.transactionSignatures.push(n);break}r=!0}}const n=t.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(t,e){const r=O(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,o=e&&e.preflightCommitment||this.commitment;n&&(r.skipPreflight=n),o&&(r.preflightCommitment=o);const i=[t,r],s=await this._rpcRequest("sendTransaction",i),a=Object(b["f"])(s,He);if("error"in a){let t;if("data"in a.error&&(t=a.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(a.error.message,r)}throw new mt("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){console.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?this._resetSubscriptions():this._updateSubscriptions()}async _subscribe(t,e,r){if(null==t.subscriptionId){t.subscriptionId="subscribing";try{const n=await this._rpcWebSocket.call(e,r);"number"===typeof n&&"subscribing"===t.subscriptionId&&(t.subscriptionId=n)}catch(n){"subscribing"===t.subscriptionId&&(t.subscriptionId=null),n instanceof Error&&console.error(e+" error for argument",r,n.message)}}}async _unsubscribe(t,e){const r=t.subscriptionId;if(null!=r&&"string"!=typeof r){const t=r;try{await this._rpcWebSocket.call(e,[t])}catch(n){n instanceof Error&&console.error(e+" error:",n.message)}}}_resetSubscriptions(){Object.values(this._accountChangeSubscriptions).forEach(t=>t.subscriptionId=null),Object.values(this._programAccountChangeSubscriptions).forEach(t=>t.subscriptionId=null),Object.values(this._rootSubscriptions).forEach(t=>t.subscriptionId=null),Object.values(this._signatureSubscriptions).forEach(t=>t.subscriptionId=null),Object.values(this._slotSubscriptions).forEach(t=>t.subscriptionId=null),Object.values(this._slotUpdateSubscriptions).forEach(t=>t.subscriptionId=null)}_updateSubscriptions(){const t=Object.keys(this._accountChangeSubscriptions).map(Number),e=Object.keys(this._programAccountChangeSubscriptions).map(Number),r=Object.keys(this._slotSubscriptions).map(Number),n=Object.keys(this._slotUpdateSubscriptions).map(Number),o=Object.keys(this._signatureSubscriptions).map(Number),i=Object.keys(this._rootSubscriptions).map(Number),s=Object.keys(this._logsSubscriptions).map(Number);if(0!==t.length||0!==e.length||0!==r.length||0!==n.length||0!==o.length||0!==i.length||0!==s.length)if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){for(let e of t){const t=this._accountChangeSubscriptions[e];this._subscribe(t,"accountSubscribe",this._buildArgs([t.publicKey],t.commitment,"base64"))}for(let t of e){const e=this._programAccountChangeSubscriptions[t];this._subscribe(e,"programSubscribe",this._buildArgs([e.programId],e.commitment,"base64",{filters:e.filters}))}for(let t of r){const e=this._slotSubscriptions[t];this._subscribe(e,"slotSubscribe",[])}for(let t of n){const e=this._slotUpdateSubscriptions[t];this._subscribe(e,"slotsUpdatesSubscribe",[])}for(let t of o){const e=this._signatureSubscriptions[t],r=[e.signature];e.options&&r.push(e.options),this._subscribe(e,"signatureSubscribe",r)}for(let t of i){const e=this._rootSubscriptions[t];this._subscribe(e,"rootSubscribe",[])}for(let t of s){const e=this._logsSubscriptions[t];let r;r="object"===typeof e.filter?{mentions:[e.filter.toString()]}:e.filter,this._subscribe(e,"logsSubscribe",this._buildArgs([r],e.commitment))}}else this._rpcWebSocket.connect();else this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null,this._rpcWebSocket.close()},500))}_wsOnAccountNotification(t){const e=Object(b["f"])(t,de);for(const r of Object.values(this._accountChangeSubscriptions))if(r.subscriptionId===e.subscription)return void r.callback(e.result.value,e.result.context)}onAccountChange(t,e,r){const n=++this._accountChangeSubscriptionCounter;return this._accountChangeSubscriptions[n]={publicKey:t.toBase58(),callback:e,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}async removeAccountChangeListener(t){if(!this._accountChangeSubscriptions[t])throw new Error("Unknown account change id: "+t);{const e=this._accountChangeSubscriptions[t];delete this._accountChangeSubscriptions[t],await this._unsubscribe(e,"accountUnsubscribe"),this._updateSubscriptions()}}_wsOnProgramAccountNotification(t){const e=Object(b["f"])(t,be);for(const r of Object.values(this._programAccountChangeSubscriptions))if(r.subscriptionId===e.subscription){const{value:t,context:n}=e.result;return void r.callback({accountId:t.pubkey,accountInfo:t.account},n)}}onProgramAccountChange(t,e,r,n){const o=++this._programAccountChangeSubscriptionCounter;return this._programAccountChangeSubscriptions[o]={programId:t.toBase58(),callback:e,commitment:r,subscriptionId:null,filters:n},this._updateSubscriptions(),o}async removeProgramAccountChangeListener(t){if(!this._programAccountChangeSubscriptions[t])throw new Error("Unknown program account change id: "+t);{const e=this._programAccountChangeSubscriptions[t];delete this._programAccountChangeSubscriptions[t],await this._unsubscribe(e,"programUnsubscribe"),this._updateSubscriptions()}}onLogs(t,e,r){const n=++this._logsSubscriptionCounter;return this._logsSubscriptions[n]={filter:t,callback:e,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}async removeOnLogsListener(t){if(!this._logsSubscriptions[t])throw new Error("Unknown logs id: "+t);const e=this._logsSubscriptions[t];delete this._logsSubscriptions[t],await this._unsubscribe(e,"logsUnsubscribe"),this._updateSubscriptions()}_wsOnLogsNotification(t){const e=Object(b["f"])(t,Ze),r=Object.keys(this._logsSubscriptions).map(Number);for(let n of r){const t=this._logsSubscriptions[n];if(t.subscriptionId===e.subscription)return void t.callback(e.result.value,e.result.context)}}_wsOnSlotNotification(t){const e=Object(b["f"])(t,ge);for(const r of Object.values(this._slotSubscriptions))if(r.subscriptionId===e.subscription)return void r.callback(e.result)}onSlotChange(t){const e=++this._slotSubscriptionCounter;return this._slotSubscriptions[e]={callback:t,subscriptionId:null},this._updateSubscriptions(),e}async removeSlotChangeListener(t){if(!this._slotSubscriptions[t])throw new Error("Unknown slot change id: "+t);{const e=this._slotSubscriptions[t];delete this._slotSubscriptions[t],await this._unsubscribe(e,"slotUnsubscribe"),this._updateSubscriptions()}}_wsOnSlotUpdatesNotification(t){const e=Object(b["f"])(t,we);for(const r of Object.values(this._slotUpdateSubscriptions))if(r.subscriptionId===e.subscription)return void r.callback(e.result)}onSlotUpdate(t){const e=++this._slotUpdateSubscriptionCounter;return this._slotUpdateSubscriptions[e]={callback:t,subscriptionId:null},this._updateSubscriptions(),e}async removeSlotUpdateListener(t){if(!this._slotUpdateSubscriptions[t])throw new Error("Unknown slot update id: "+t);{const e=this._slotUpdateSubscriptions[t];delete this._slotUpdateSubscriptions[t],await this._unsubscribe(e,"slotsUpdatesUnsubscribe"),this._updateSubscriptions()}}_buildArgs(t,e,r,n){const o=e||this._commitment;if(o||r||n){let e={};r&&(e.encoding=r),o&&(e.commitment=o),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const o=e||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const e=Object(b["f"])(t,ve);for(const[r,n]of Object.entries(this._signatureSubscriptions))if(n.subscriptionId===e.subscription)return void("receivedSignature"===e.result.value?n.callback({type:"received"},e.result.context):(delete this._signatureSubscriptions[Number(r)],this._updateSubscriptions(),n.callback({type:"status",result:e.result.value},e.result.context)))}onSignature(t,e,r){const n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:t,callback:(t,r)=>{"status"===t.type&&e(t.result,r)},options:{commitment:r},subscriptionId:null},this._updateSubscriptions(),n}onSignatureWithOptions(t,e,r){const n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:t,callback:e,options:r,subscriptionId:null},this._updateSubscriptions(),n}async removeSignatureListener(t){if(!this._signatureSubscriptions[t])throw new Error("Unknown signature result id: "+t);{const e=this._signatureSubscriptions[t];delete this._signatureSubscriptions[t],await this._unsubscribe(e,"signatureUnsubscribe"),this._updateSubscriptions()}}_wsOnRootNotification(t){const e=Object(b["f"])(t,je);for(const r of Object.values(this._rootSubscriptions))if(r.subscriptionId===e.subscription)return void r.callback(e.result)}onRootChange(t){const e=++this._rootSubscriptionCounter;return this._rootSubscriptions[e]={callback:t,subscriptionId:null},this._updateSubscriptions(),e}async removeRootChangeListener(t){if(!this._rootSubscriptions[t])throw new Error("Unknown root change id: "+t);{const e=this._rootSubscriptions[t];delete this._rootSubscriptions[t],await this._unsubscribe(e,"rootUnsubscribe"),this._updateSubscriptions()}}}class Xe{constructor(t){o()(this,"_keypair",void 0),this._keypair=t||i["sign"].keyPair()}static generate(){return new Xe(i["sign"].keyPair())}static fromSecretKey(t,e){const r=i["sign"].keyPair.fromSecretKey(t);if(!e||!e.skipValidation){const t=new TextEncoder,e=t.encode("@solana/web3.js-validation-v1"),n=i["sign"].detached(e,r.secretKey);if(!i["sign"].detached.verify(e,n,r.publicKey))throw new Error("provided secretKey is invalid")}return new Xe(r)}static fromSeed(t){return new Xe(i["sign"].keyPair.fromSeed(t))}get publicKey(){return new A(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const Qe=64,tr=32,er=64,rr=p["struct"]([p["u8"]("numSignatures"),p["u8"]("padding"),p["u16"]("signatureOffset"),p["u16"]("signatureInstructionIndex"),p["u16"]("publicKeyOffset"),p["u16"]("publicKeyInstructionIndex"),p["u16"]("messageDataOffset"),p["u16"]("messageDataSize"),p["u16"]("messageInstructionIndex")]);class nr{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,instructionIndex:o}=t;D(e.length===tr,`Public Key must be ${tr} bytes but received ${e.length} bytes`),D(n.length===er,`Signature must be ${er} bytes but received ${n.length} bytes`);const i=rr.span,s=i+e.length,c=s+n.length,u=1,l=a["Buffer"].alloc(c+r.length);return rr.encode({numSignatures:u,padding:0,signatureOffset:s,signatureInstructionIndex:o,publicKeyOffset:i,publicKeyInstructionIndex:o,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:o},l),l.fill(e,i),l.fill(n,s),l.fill(r,c),new G({keys:[],programId:nr.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;D(e.length===Qe,`Private key must be ${Qe} bytes but received ${e.length} bytes`);try{const t=Xe.fromSecretKey(e),o=t.publicKey.toBytes(),i=s.a.sign.detached(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:i,instructionIndex:n})}catch(o){throw new Error("Error creating instruction; "+o)}}}o()(nr,"programId",new A("Ed25519SigVerify111111111111111111111111111"));const or=new A("StakeConfig11111111111111111111111111111111");class ir{constructor(t,e,r){o()(this,"unixTimestamp",void 0),o()(this,"epoch",void 0),o()(this,"custodian",void 0),this.unixTimestamp=t,this.epoch=e,this.custodian=r}}o()(ir,"default",new ir(0,0,A.default));const sr=Object.freeze({Initialize:{index:0,layout:p["struct"]([p["u32"]("instruction"),L(),W()])},Authorize:{index:1,layout:p["struct"]([p["u32"]("instruction"),C("newAuthorized"),p["u32"]("stakeAuthorizationType")])},Delegate:{index:2,layout:p["struct"]([p["u32"]("instruction")])},Split:{index:3,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports")])},Withdraw:{index:4,layout:p["struct"]([p["u32"]("instruction"),p["ns64"]("lamports")])},Deactivate:{index:5,layout:p["struct"]([p["u32"]("instruction")])},Merge:{index:7,layout:p["struct"]([p["u32"]("instruction")])},AuthorizeWithSeed:{index:8,layout:p["struct"]([p["u32"]("instruction"),C("newAuthorized"),p["u32"]("stakeAuthorizationType"),U("authoritySeed"),C("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ar{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,o=n||ir.default,i=sr.Initialize,s=et(i,{authorized:{staker:O(r.staker.toBuffer()),withdrawer:O(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:O(o.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:J,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new G(a)}static createAccountWithSeed(t){const e=new H;e.add(at.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static createAccount(t){const e=new H;e.add(at.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:o}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,o=sr.Delegate,i=et(o);return(new H).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:i}=t,s=sr.Authorize,a=et(s,{newAuthorized:O(n.toBuffer()),stakeAuthorizationType:o.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&c.push({pubkey:i,isSigner:!1,isWritable:!1}),(new H).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:o,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:a}=t,c=sr.AuthorizeWithSeed,u=et(c,{newAuthorized:O(i.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:O(o.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!1,isWritable:!1}),(new H).add({keys:l,programId:this.programId,data:u})}static split(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:o}=t,i=new H;i.add(at.createAccount({fromPubkey:r,newAccountPubkey:n,lamports:0,space:this.space,programId:this.programId}));const s=sr.Split,a=et(s,{lamports:o});return i.add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,o=sr.Merge,i=et(o);return(new H).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:o,custodianPubkey:i}=t,s=sr.Withdraw,a=et(s,{lamports:o}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&c.push({pubkey:i,isSigner:!1,isWritable:!1}),(new H).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=sr.Deactivate,o=et(n);return(new H).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}}o()(ar,"programId",new A("Stake11111111111111111111111111111111111111")),o()(ar,"space",200);const{publicKeyCreate:cr,ecdsaSign:ur}=v.a,lr=32,fr=20,hr=64,dr=11,pr=p["struct"]([p["u8"]("numSignatures"),p["u16"]("signatureOffset"),p["u8"]("signatureInstructionIndex"),p["u16"]("ethAddressOffset"),p["u8"]("ethAddressInstructionIndex"),p["u16"]("messageDataOffset"),p["u16"]("messageDataSize"),p["u8"]("messageInstructionIndex"),p["blob"](20,"ethAddress"),p["blob"](64,"signature"),p["u8"]("recoveryId")]);class br{constructor(){}static publicKeyToEthAddress(t){D(t.length===hr,`Public key must be ${hr} bytes but received ${t.length} bytes`);try{return a["Buffer"].from(j["keccak_256"].update(O(t)).digest()).slice(-fr)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:o,instructionIndex:i}=t;return br.createInstructionWithEthAddress({ethAddress:br.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:o,instructionIndex:i})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:n,recoveryId:o,instructionIndex:i=0}=t;let s;s="string"===typeof e?e.startsWith("0x")?a["Buffer"].from(e.substr(2),"hex"):a["Buffer"].from(e,"hex"):e,D(s.length===fr,`Address must be ${fr} bytes but received ${s.length} bytes`);const c=1+dr,u=c,l=c+s.length,f=l+n.length+1,h=1,d=a["Buffer"].alloc(pr.span+r.length);return pr.encode({numSignatures:h,signatureOffset:l,signatureInstructionIndex:i,ethAddressOffset:u,ethAddressInstructionIndex:i,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:i,signature:O(n),ethAddress:O(s),recoveryId:o},d),d.fill(O(r),pr.span),new G({keys:[],programId:br.programId,data:d})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;D(e.length===lr,`Private key must be ${lr} bytes but received ${e.length} bytes`);try{const t=O(e),o=cr(t,!1).slice(1),i=a["Buffer"].from(j["keccak_256"].update(O(r)).digest()),{signature:s,recid:c}=ur(i,t);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:s,recoveryId:c,instructionIndex:n})}catch(o){throw new Error("Error creating instruction; "+o)}}}o()(br,"programId",new A("KeccakSecp256k11111111111111111111111111111"));new A("Va1idator1nfo111111111111111111111111111111"),Object(b["o"])({name:Object(b["m"])(),website:Object(b["k"])(Object(b["m"])()),details:Object(b["k"])(Object(b["m"])()),keybaseUsername:Object(b["k"])(Object(b["m"])())});new A("Vote111111111111111111111111111111111111111"),p["struct"]([C("nodePubkey"),C("authorizedVoterPubkey"),C("authorizedWithdrawerPubkey"),p["u8"]("commission"),p["nu64"](),p["seq"](p["struct"]([p["nu64"]("slot"),p["u32"]("confirmationCount")]),p["offset"](p["u32"](),-8),"votes"),p["u8"]("rootSlotValid"),p["nu64"]("rootSlot"),p["nu64"]("epoch"),p["nu64"]("credits"),p["nu64"]("lastEpochCredits"),p["nu64"](),p["seq"](p["struct"]([p["nu64"]("epoch"),p["nu64"]("credits"),p["nu64"]("prevCredits")]),p["offset"](p["u32"](),-8),"epochCredits")]);const yr={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com"}};function gr(t,e){const r=!1===e?"http":"https";if(!t)return yr[r]["devnet"];const n=yr[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}}).call(this,r("2409"))},"5b25":function(t,e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},6341:function(t,e,r){"use strict";const n=r("5c45").v4,o=function(t,e,r,o){if("string"!==typeof t)throw new TypeError(t+" must be a string");o=o||{};const i="number"===typeof o.version?o.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(2===i&&(s.jsonrpc="2.0"),e){if("object"!==typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if("undefined"===typeof r){const t="function"===typeof o.generator?o.generator:function(){return n()};s.id=t(s,o)}else 2===i&&null===r?o.notificationIdNull&&(s.id=null):s.id=r;return s};t.exports=o},6344:function(t,e,r){function n(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(u){return void r(u)}a.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var s=t.apply(e,r);function a(t){n(s,o,i,a,c,"next",t)}function c(t){n(s,o,i,a,c,"throw",t)}a(void 0)}))}}r("7479"),t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},6817:function(t,e,r){"use strict";const n=r("5c45").v4,o=r("6341"),i=function(t,e){if(!(this instanceof i))return new i(t,e);e||(e={}),this.options={reviver:"undefined"!==typeof e.reviver?e.reviver:null,replacer:"undefined"!==typeof e.replacer?e.replacer:null,generator:"undefined"!==typeof e.generator?e.generator:function(){return n()},version:"undefined"!==typeof e.version?e.version:2,notificationIdNull:"boolean"===typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};t.exports=i,i.prototype.request=function(t,e,r,n){const i=this;let s=null;const a=Array.isArray(t)&&"function"===typeof e;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");const c=!a&&t&&"object"===typeof t&&"function"===typeof e;if(a||c)n=e,s=t;else{"function"===typeof r&&(n=r,r=void 0);const i="function"===typeof n;try{s=o(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(i)return n(l);throw l}if(!i)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(l){return n(l)}return this.callServer(u,(function(t,e){i._parseResponse(t,e,n)})),s},i.prototype._parseResponse=function(t,e,r){if(t)return void r(t);if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(Array.isArray(n)){const t=function(t){return"undefined"!==typeof t.error},e=function(e){return!t(e)};return r(null,n.filter(t),n.filter(e))}return r(null,n.error,n.result)}r(null,n)}},"6e22":function(t,e,r){"use strict";var n=r("ebe3");Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=d;var o=n(r("5b25")),i=n(r("f1df")),s=n(r("c5fb")),a=n(r("9e0c")),c=n(r("4ed6")),u=r("da91");function l(t){var e=f();return function(){var r,n=(0,c["default"])(t);if(e){var o=(0,c["default"])(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a["default"])(this,r)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var h=function(t){(0,s["default"])(r,t);var e=l(r);function r(t,n,i){var s;return(0,o["default"])(this,r),s=e.call(this),s.socket=new window.WebSocket(t,i),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(t){return s.emit("message",t.data)},s.socket.onerror=function(t){return s.emit("error",t)},s.socket.onclose=function(t){s.emit("close",t.code,t.reason)},s}return(0,i["default"])(r,[{key:"send",value:function(t,e,r){var n=r||e;try{this.socket.send(t),n()}catch(o){n(o)}}},{key:"close",value:function(t,e){this.socket.close(t,e)}},{key:"addEventListener",value:function(t,e,r){this.socket.addEventListener(t,e,r)}}]),r}(u.EventEmitter);function d(t,e){return new h(t,e)}},"7f44":function(t,e,r){"use strict";(function(t){var n=r("ebe3");Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n(r("25bb")),i=n(r("6344")),s=n(r("f036")),a=n(r("5b25")),c=n(r("f1df")),u=n(r("c5fb")),l=n(r("9e0c")),f=n(r("4ed6")),h=r("da91"),d=n(r("a336"));function p(t){var e=b();return function(){var r,n=(0,f["default"])(t);if(e){var o=(0,f["default"])(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l["default"])(this,r)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var y=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},g=function(e){(0,u["default"])(n,e);var r=p(n);function n(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;(0,a["default"])(this,n);var c=i.autoconnect,u=void 0===c||c,l=i.reconnect,f=void 0===l||l,h=i.reconnect_interval,d=void 0===h?1e3:h,p=i.max_reconnects,b=void 0===p?5:p,g=y(i,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return e=r.call(this),e.webSocketFactory=t,e.queue={},e.rpc_id=0,e.address=o,e.autoconnect=u,e.ready=!1,e.reconnect=f,e.reconnect_interval=d,e.max_reconnects=b,e.rest_options=g,e.current_reconnects=0,e.generate_request_id=s||function(){return++e.rpc_id},e.autoconnect&&e._connect(e.address,Object.assign({autoconnect:e.autoconnect,reconnect:e.reconnect,reconnect_interval:e.reconnect_interval,max_reconnects:e.max_reconnects},e.rest_options)),e}return(0,c["default"])(n,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(t,e,r,n){var o=this;return n||"object"!==(0,s["default"])(r)||(n=r,r=null),new Promise((function(i,s){if(!o.ready)return s(new Error("socket not ready"));var a=o.generate_request_id(t,e),c={jsonrpc:"2.0",method:t,params:e||null,id:a};o.socket.send(JSON.stringify(c),n,(function(t){if(t)return s(t);o.queue[a]={promise:[i,s]},r&&(o.queue[a].timeout=setTimeout((function(){delete o.queue[a],s(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:function(){var t=(0,i["default"])(o["default"].mark((function t(e){var r;return o["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.call("rpc.login",e);case 2:if(r=t.sent,r){t.next=5;break}throw new Error("authentication failed");case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listMethods",value:function(){var t=(0,i["default"])(o["default"].mark((function t(){return o["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.call("__listMethods");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"notify",value:function(t,e){var r=this;return new Promise((function(n,o){if(!r.ready)return o(new Error("socket not ready"));var i={jsonrpc:"2.0",method:t,params:e||null};r.socket.send(JSON.stringify(i),(function(t){if(t)return o(t);n()}))}))}},{key:"subscribe",value:function(){var t=(0,i["default"])(o["default"].mark((function t(e){var r;return o["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"string"===typeof e&&(e=[e]),t.next=3,this.call("rpc.on",e);case 3:if(r=t.sent,"string"!==typeof e||"ok"===r[e]){t.next=6;break}throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"unsubscribe",value:function(){var t=(0,i["default"])(o["default"].mark((function t(e){var r;return o["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"string"===typeof e&&(e=[e]),t.next=3,this.call("rpc.off",e);case 3:if(r=t.sent,"string"!==typeof e||"ok"===r[e]){t.next=6;break}throw new Error("Failed unsubscribing from an event with: "+r);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"close",value:function(t,e){this.socket.close(t||1e3,e)}},{key:"_connect",value:function(e,r){var n=this;this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",(function(){n.ready=!0,n.emit("open"),n.current_reconnects=0})),this.socket.addEventListener("message",(function(e){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r).toString());try{r=d["default"].parse(r)}catch(s){return}if(r.notification&&n.listeners(r.notification).length){if(!Object.keys(r.params).length)return n.emit(r.notification);var o=[r.notification];if(r.params.constructor===Object)o.push(r.params);else for(var i=0;i<r.params.length;i++)o.push(r.params[i]);return Promise.resolve().then((function(){n.emit.apply(n,o)}))}if(!n.queue[r.id])return r.method&&r.params?Promise.resolve().then((function(){n.emit(r.method,r.params)})):void 0;"error"in r==="result"in r&&n.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),n.queue[r.id].timeout&&clearTimeout(n.queue[r.id].timeout),r.error?n.queue[r.id].promise[1](r.error):n.queue[r.id].promise[0](r.result),delete n.queue[r.id]})),this.socket.addEventListener("error",(function(t){return n.emit("error",t)})),this.socket.addEventListener("close",(function(t){var o=t.code,i=t.reason;n.ready&&setTimeout((function(){return n.emit("close",o,i)}),0),n.ready=!1,n.socket=void 0,1e3!==o&&(n.current_reconnects++,n.reconnect&&(n.max_reconnects>n.current_reconnects||0===n.max_reconnects)&&setTimeout((function(){return n._connect(e,r)}),n.reconnect_interval))}))}}]),n}(h.EventEmitter);e["default"]=g}).call(this,r("fd40").Buffer)},"9e0c":function(t,e,r){var n=r("f036")["default"],o=r("06ef");function i(t,e){if(e&&("object"===n(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},a336:function(t,e){
/*!
Copyright (C) 2013-2017 by Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var r="~",n="\\x"+("0"+r.charCodeAt(0).toString(16)).slice(-2),o="\\"+n,i=new RegExp(n,"g"),s=new RegExp(o,"g"),a=new RegExp("(?:^|([^\\\\]))"+o),c=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},u=String;function l(t,e,s){var a,u,l=!1,f=!!e,h=[],d=[t],p=[t],b=[s?r:"[Circular]"],y=t,g=1;return f&&(u="object"===typeof e?function(t,r){return""!==t&&e.indexOf(t)<0?void 0:r}:e),function(t,e){return f&&(e=u.call(this,t,e)),l?(y!==this&&(a=g-c.call(d,this)-1,g-=a,d.splice(g,d.length),h.splice(g-1,h.length),y=this),"object"===typeof e&&e?(c.call(d,e)<0&&d.push(y=e),g=d.length,a=c.call(p,e),a<0?(a=p.push(e)-1,s?(h.push((""+t).replace(i,n)),b[a]=r+h.join(r)):b[a]=b[0]):e=b[a]):"string"===typeof e&&s&&(e=e.replace(n,o).replace(r,n))):l=!0,e}}function f(t,e){for(var n=0,o=e.length;n<o;t=t[e[n++].replace(s,r)]);return t}function h(t){return function(e,i){var s="string"===typeof i;return s&&i.charAt(0)===r?new u(i.slice(1)):(""===e&&(i=b(i,i,{})),s&&(i=i.replace(a,"$1"+r).replace(o,n)),t?t.call(this,e,i):i)}}function d(t,e,r){for(var n=0,o=e.length;n<o;n++)e[n]=b(t,e[n],r);return e}function p(t,e,r){for(var n in e)e.hasOwnProperty(n)&&(e[n]=b(t,e[n],r));return e}function b(t,e,n){return e instanceof Array?d(t,e,n):e instanceof u?e.length?n.hasOwnProperty(e)?n[e]:n[e]=f(t,e.split(r)):t:e instanceof Object?p(t,e,n):e}var y={stringify:function(t,e,r,n){return y.parser.stringify(t,l(t,e,!n),r)},parse:function(t,e){return y.parser.parse(t,h(e))},parser:JSON};t.exports=y},a7f4:function(t,e,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0,e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;var o=r("fd40");function i(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(t){return i(t),o.Buffer.from(t.buffer,t.byteOffset,t.length)}e.checkUint8Array=i,e.uint8ArrayToBuffer=s;var a=function(){function t(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}return t.prototype.makeDestinationObject=function(){return{}},t.prototype.decode=function(t,e){throw new Error("Layout is abstract")},t.prototype.encode=function(t,e,r){throw new Error("Layout is abstract")},t.prototype.getSpan=function(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span},t.prototype.replicate=function(t){var e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e},t.prototype.fromArray=function(t){},t}();function c(t,e){return e.property?t+"["+e.property+"]":t}function u(t,e){if("function"!==typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof a))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=function(){return new t},Object.defineProperty(t.prototype,"encode",{value:function(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:function(t,r){return e.decode(t,r)},writable:!0})}e.Layout=a,e.nameWithProperty=c,e.bindConstructorLayout=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.isCount=function(){throw new Error("ExternalLayout is abstract")},e}(a);e.ExternalLayout=l;var f=function(t){function e(e,r){var n=this;if(void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return n=t.call(this,-1,r)||this,n.elementSpan=e,n}return n(e,t),e.prototype.isCount=function(){return!0},e.prototype.decode=function(t,e){i(t),void 0===e&&(e=0);var r=t.length-e;return Math.floor(r/this.elementSpan)},e.prototype.encode=function(t,e,r){return 0},e}(l);e.GreedyCount=f;var h=function(t){function e(e,r,n){var o=this;if(!(e instanceof a))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return o=t.call(this,e.span,n||e.property)||this,o.layout=e,o.offset=r,o}return n(e,t),e.prototype.isCount=function(){return this.layout instanceof d||this.layout instanceof p},e.prototype.decode=function(t,e){return void 0===e&&(e=0),this.layout.decode(t,e+this.offset)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),this.layout.encode(t,e,r+this.offset)},e}(l);e.OffsetLayout=h;var d=function(t){function e(e,r){var n=t.call(this,e,r)||this;if(6<n.span)throw new RangeError("span must not exceed 6 bytes");return n}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readUIntLE(e,this.span)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeUIntLE(t,r,this.span),this.span},e}(a);e.UInt=d;var p=function(t){function e(e,r){var n=t.call(this,e,r)||this;if(6<n.span)throw new RangeError("span must not exceed 6 bytes");return n}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readUIntBE(e,this.span)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeUIntBE(t,r,this.span),this.span},e}(a);e.UIntBE=p;var b=function(t){function e(e,r){var n=t.call(this,e,r)||this;if(6<n.span)throw new RangeError("span must not exceed 6 bytes");return n}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readIntLE(e,this.span)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeIntLE(t,r,this.span),this.span},e}(a);e.Int=b;var y=function(t){function e(e,r){var n=t.call(this,e,r)||this;if(6<n.span)throw new RangeError("span must not exceed 6 bytes");return n}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readIntBE(e,this.span)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeIntBE(t,r,this.span),this.span},e}(a);e.IntBE=y;var g=Math.pow(2,32);function m(t){var e=Math.floor(t/g),r=t-e*g;return{hi32:e,lo32:r}}function w(t,e){return t*g+e}var v=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=s(t),n=r.readUInt32LE(e),o=r.readUInt32LE(e+4);return w(o,n)},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=m(t),o=s(e);return o.writeUInt32LE(n.lo32,r),o.writeUInt32LE(n.hi32,r+4),8},e}(a);e.NearUInt64=v;var j=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=s(t),n=r.readUInt32BE(e),o=r.readUInt32BE(e+4);return w(n,o)},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=m(t),o=s(e);return o.writeUInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8},e}(a);e.NearUInt64BE=j;var O=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=s(t),n=r.readUInt32LE(e),o=r.readInt32LE(e+4);return w(o,n)},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=m(t),o=s(e);return o.writeUInt32LE(n.lo32,r),o.writeInt32LE(n.hi32,r+4),8},e}(a);e.NearInt64=O;var k=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=s(t),n=r.readInt32BE(e),o=r.readUInt32BE(e+4);return w(n,o)},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=m(t),o=s(e);return o.writeInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8},e}(a);e.NearInt64BE=k;var S=function(t){function e(e){return t.call(this,4,e)||this}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readFloatLE(e)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeFloatLE(t,r),4},e}(a);e.Float=S;var _=function(t){function e(e){return t.call(this,4,e)||this}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readFloatBE(e)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeFloatBE(t,r),4},e}(a);e.FloatBE=_;var E=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readDoubleLE(e)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeDoubleLE(t,r),8},e}(a);e.Double=E;var A=function(t){function e(e){return t.call(this,8,e)||this}return n(e,t),e.prototype.decode=function(t,e){return void 0===e&&(e=0),s(t).readDoubleBE(e)},e.prototype.encode=function(t,e,r){return void 0===r&&(r=0),s(e).writeDoubleBE(t,r),8},e}(a);e.DoubleBE=A;var I=function(t){function e(e,r,n){var o=this;if(!(e instanceof a))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof l&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var i=-1;return!(r instanceof l)&&0<e.span&&(i=r*e.span),o=t.call(this,i,n)||this,o.elementLayout=e,o.count=r,o}return n(e,t),e.prototype.getSpan=function(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);var r=0,n=this.count;if(n instanceof l&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{var o=0;while(o<n)r+=this.elementLayout.getSpan(t,e+r),++o}return r},e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=[],n=0,o=this.count;o instanceof l&&(o=o.decode(t,e));while(n<o)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=this.elementLayout,o=t.reduce((function(t,o){return t+n.encode(o,e,r+t)}),0);return this.count instanceof l&&this.count.encode(t.length,e,r),o},e}(a);e.Sequence=I;var x=function(t){function e(e,r,n){var o=this;if(!Array.isArray(e)||!e.reduce((function(t,e){return t&&e instanceof a}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===n&&(n=r,r=void 0);for(var i=0,s=e;i<s.length;i++){var c=s[i];if(0>c.span&&void 0===c.property)throw new Error("fields cannot contain unnamed variable-length layout")}var u=-1;try{u=e.reduce((function(t,e){return t+e.getSpan()}),0)}catch(l){}return o=t.call(this,u,r)||this,o.fields=e,o.decodePrefixes=!!n,o}return n(e,t),e.prototype.getSpan=function(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);var r=0;try{r=this.fields.reduce((function(r,n){var o=n.getSpan(t,e);return e+=o,r+o}),0)}catch(n){throw new RangeError("indeterminate span")}return r},e.prototype.decode=function(t,e){i(t),void 0===e&&(e=0);for(var r=this.makeDestinationObject(),n=0,o=this.fields;n<o.length;n++){var s=o[n];if(void 0!==s.property&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break}return r},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);for(var n=r,o=0,i=0,s=0,a=this.fields;s<a.length;s++){var c=a[s],u=c.span;if(i=0<u?u:0,void 0!==c.property){var l=t[c.property];void 0!==l&&(i=c.encode(l,e,r),0>u&&(u=c.getSpan(e,r)))}o=r,r+=u}return o+i-n},e.prototype.fromArray=function(t){for(var e=this.makeDestinationObject(),r=0,n=this.fields;r<n.length;r++){var o=n[r];void 0!==o.property&&0<t.length&&(e[o.property]=t.shift())}return e},e.prototype.layoutFor=function(t){if("string"!==typeof t)throw new TypeError("property must be string");for(var e=0,r=this.fields;e<r.length;e++){var n=r[e];if(n.property===t)return n}},e.prototype.offsetOf=function(t){if("string"!==typeof t)throw new TypeError("property must be string");for(var e=0,r=0,n=this.fields;r<n.length;r++){var o=n[r];if(o.property===t)return e;0>o.span?e=-1:0<=e&&(e+=o.span)}},e}(a);e.Structure=x;var B=function(){function t(t){this.property=t}return t.prototype.decode=function(t,e){throw new Error("UnionDiscriminator is abstract")},t.prototype.encode=function(t,e,r){throw new Error("UnionDiscriminator is abstract")},t}();e.UnionDiscriminator=B;var P=function(t){function e(e,r){var n=this;if(!(e instanceof l&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return n=t.call(this,r||e.property||"variant")||this,n.layout=e,n}return n(e,t),e.prototype.decode=function(t,e){return this.layout.decode(t,e)},e.prototype.encode=function(t,e,r){return this.layout.encode(t,e,r)},e}(B);e.UnionLayoutDiscriminator=P;var T=function(t){function e(e,r,n){var o,i=this,s=e instanceof d||e instanceof p;if(s)o=new P(new h(e));else if(e instanceof l&&e.isCount())o=new P(e);else{if(!(e instanceof B))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");o=e}if(void 0===r&&(r=null),!(null===r||r instanceof a))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var c=-1;r&&(c=r.span,0<=c&&s&&(c+=o.layout.span)),i=t.call(this,c,n)||this,i.discriminator=o,i.usesPrefixDiscriminator=s,i.defaultLayout=r,i.registry={};var u=i.defaultGetSourceVariant.bind(i);return i.getSourceVariant=function(t){return u(t)},i.configGetSourceVariant=function(t){u=t.bind(this)},i}return n(e,t),e.prototype.getSpan=function(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);var r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)},e.prototype.defaultGetSourceVariant=function(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;var e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(var r in this.registry){e=this.registry[r];if(e.property&&Object.prototype.hasOwnProperty.call(t,e.property))return e}throw new Error("unable to infer src variant")},e.prototype.decode=function(t,e){var r;void 0===e&&(e=0);var n=this.discriminator,o=n.decode(t,e),i=this.registry[o];if(void 0===i){var s=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[s.property]=s.decode(t,e+a)}else r=i.decode(t,e);return r},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=this.getSourceVariant(t);if(void 0===n){var o=this.discriminator,i=this.defaultLayout,s=0;return this.usesPrefixDiscriminator&&(s=o.layout.span),o.encode(t[o.property],e,r),s+i.encode(t[i.property],e,r+s)}return n.encode(t,e,r)},e.prototype.addVariant=function(t,e,r){var n=new R(this,t,e,r);return this.registry[t]=n,n},e.prototype.getVariant=function(t,e){var r;return t instanceof Uint8Array?(void 0===e&&(e=0),r=this.discriminator.decode(t,e)):r=t,this.registry[r]},e}(a);e.Union=T;var R=function(t){function e(e,r,n,o){var i=this;if(!(e instanceof T))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof n&&void 0===o&&(o=n,n=null),n){if(!(n instanceof a))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),i=t.call(this,s,o)||this,i.union=e,i.variant=r,i.layout=n||null,i}return n(e,t),e.prototype.getSpan=function(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);var r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);var n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n},e.prototype.decode=function(t,e){var r=this.makeDestinationObject();if(void 0===e&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");var n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);var o=this.property;return this.layout?r[o]=this.layout.decode(t,e+n):o?r[o]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);var o=this.property;if(this.layout&&!Object.prototype.hasOwnProperty.call(t,o))throw new TypeError("variant lacks property "+o);this.union.discriminator.encode(this.variant,e,r);var i=n;if(this.layout&&(this.layout.encode(t[o],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i},e.prototype.fromArray=function(t){if(this.layout)return this.layout.fromArray(t)},e}(a);function C(t){return 0>t&&(t+=4294967296),t}e.VariantLayout=R;var U=function(t){function e(e,r,n){var o=this;if(!(e instanceof d||e instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===n&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");o=t.call(this,e.span,n)||this,o.word=e,o.msb=!!r,o.fields=[];var i=0;return o._packedSetValue=function(t){return i=C(t),this},o._packedGetValue=function(){return i},o}return n(e,t),e.prototype.decode=function(t,e){var r=this.makeDestinationObject();void 0===e&&(e=0);var n=this.word.decode(t,e);this._packedSetValue(n);for(var o=0,i=this.fields;o<i.length;o++){var s=i[o];void 0!==s.property&&(r[s.property]=s.decode(n))}return r},e.prototype.encode=function(t,e,r){void 0===r&&(r=0);var n=this.word.decode(e,r);this._packedSetValue(n);for(var o=0,i=this.fields;o<i.length;o++){var s=i[o];if(void 0!==s.property){var a=t[s.property];void 0!==a&&s.encode(a)}}return this.word.encode(this._packedGetValue(),e,r)},e.prototype.addField=function(t,e){var r=new L(this,t,e);return this.fields.push(r),r},e.prototype.addBoolean=function(t){var e=new W(this,t);return this.fields.push(e),e},e.prototype.fieldFor=function(t){if("string"!==typeof t)throw new TypeError("property must be string");for(var e=0,r=this.fields;e<r.length;e++){var n=r[e];if(n.property===t)return n}},e}(a);e.BitStructure=U;var L=function(){function t(t,e,r){if(!(t instanceof U))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");var n=8*t.span,o=t.fields.reduce((function(t,e){return t+e.bits}),0);if(e+o>n)throw new Error("bits too long for span remainder ("+(n-o)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=n-o-e),this.wordMask=C(this.valueMask<<this.start),this.property=r}return t.prototype.decode=function(t,e){var r=this.container._packedGetValue(),n=C(r&this.wordMask),o=n>>>this.start;return o},t.prototype.encode=function(t){if(!Number.isInteger(t)||t!==C(t&this.valueMask))throw new TypeError(c("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var e=this.container._packedGetValue(),r=C(t<<this.start);this.container._packedSetValue(C(e&~this.wordMask)|r)},t}();e.BitField=L;var W=function(t){function e(e,r){return t.call(this,e,1,r)||this}return n(e,t),e.prototype.decode=function(t,e){return!!L.prototype.decode.call(this,t,e)},e.prototype.encode=function(t){return"boolean"===typeof t&&(t=+t),L.prototype.encode.call(this,t)},e}(L);e.Boolean=W;var K=function(t){function e(e,r){var n=this;if(!(e instanceof l&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof l||(o=e),n=t.call(this,o,r)||this,n.length=e,n}return n(e,t),e.prototype.getSpan=function(t,e){var r=this.span;return 0>r&&(r=this.length.decode(t,e)),r},e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=this.span;return 0>r&&(r=this.length.decode(t,e)),s(t).slice(e,e+r)},e.prototype.encode=function(t,e,r){var n=this.length;if(this.length instanceof l&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(c("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");var o=s(t);return s(e).write(o.toString("hex"),r,n,"hex"),this.length instanceof l&&this.length.encode(n,e,r),n},e}(a);e.Blob=K;var N=function(t){function e(e){return t.call(this,-1,e)||this}return n(e,t),e.prototype.getSpan=function(t,e){i(t),void 0===e&&(e=0);var r=e;while(r<t.length&&0!==t[r])r+=1;return 1+r-e},e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=this.getSpan(t,e);return s(t).slice(e,e+r-1).toString("utf-8")},e.prototype.encode=function(t,e,r){void 0===r&&(r=0),"string"!==typeof t&&(t=t.toString());var n=o.Buffer.from(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");var a=s(e);return n.copy(a,r),a[r+i]=0,i+1},e}(a);e.CString=N;var z=function(t){function e(e,r){var n=this;if("string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return n=t.call(this,-1,r)||this,n.maxSpan=e,n}return n(e,t),e.prototype.getSpan=function(t,e){return i(t),void 0===e&&(e=0),t.length-e},e.prototype.decode=function(t,e){void 0===e&&(e=0);var r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return s(t).slice(e,e+r).toString("utf-8")},e.prototype.encode=function(t,e,r){void 0===r&&(r=0),"string"!==typeof t&&(t=t.toString());var n=o.Buffer.from(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(s(e),r),i},e}(a);e.UTF8=z;var q=function(t){function e(e,r){var n=t.call(this,0,r)||this;return n.value=e,n}return n(e,t),e.prototype.decode=function(t,e){return this.value},e.prototype.encode=function(t,e,r){return 0},e}(a);e.Constant=q,e.greedy=function(t,e){return new f(t,e)},e.offset=function(t,e,r){return new h(t,e,r)},e.u8=function(t){return new d(1,t)},e.u16=function(t){return new d(2,t)},e.u24=function(t){return new d(3,t)},e.u32=function(t){return new d(4,t)},e.u40=function(t){return new d(5,t)},e.u48=function(t){return new d(6,t)},e.nu64=function(t){return new v(t)},e.u16be=function(t){return new p(2,t)},e.u24be=function(t){return new p(3,t)},e.u32be=function(t){return new p(4,t)},e.u40be=function(t){return new p(5,t)},e.u48be=function(t){return new p(6,t)},e.nu64be=function(t){return new j(t)},e.s8=function(t){return new b(1,t)},e.s16=function(t){return new b(2,t)},e.s24=function(t){return new b(3,t)},e.s32=function(t){return new b(4,t)},e.s40=function(t){return new b(5,t)},e.s48=function(t){return new b(6,t)},e.ns64=function(t){return new O(t)},e.s16be=function(t){return new y(2,t)},e.s24be=function(t){return new y(3,t)},e.s32be=function(t){return new y(4,t)},e.s40be=function(t){return new y(5,t)},e.s48be=function(t){return new y(6,t)},e.ns64be=function(t){return new k(t)},e.f32=function(t){return new S(t)},e.f32be=function(t){return new _(t)},e.f64=function(t){return new E(t)},e.f64be=function(t){return new A(t)},e.struct=function(t,e,r){return new x(t,e,r)},e.bits=function(t,e,r){return new U(t,e,r)},e.seq=function(t,e,r){return new I(t,e,r)},e.union=function(t,e,r){return new T(t,e,r)},e.unionLayoutDiscriminator=function(t,e){return new P(t,e)},e.blob=function(t,e){return new K(t,e)},e.cstr=function(t){return new N(t)},e.utf8=function(t,e){return new z(t,e)},e.constant=function(t,e){return new q(t,e)}},ac7a:function(t,e,r){var n=r("c194"),o=r("ae56"),i=r("cb38"),s=r("72f5"),a=r("cd2e"),c=o((function(){s(1)}));n({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(t){return s(i(t))}})},b577:function(t,e,r){"use strict";(function(t,n){var o=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),s=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&o(e,t,r);return i(e,t),e},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeUnchecked=e.deserialize=e.serialize=e.BinaryReader=e.BinaryWriter=e.BorshError=e.baseDecode=e.baseEncode=void 0;const u=c(r("53a7")),l=c(r("5dec")),f=a(r("e444")),h="function"!==typeof t.TextDecoder?f.TextDecoder:t.TextDecoder,d=new h("utf-8",{fatal:!0});function p(t){return"string"===typeof t&&(t=n.from(t,"utf8")),l.default.encode(n.from(t))}function b(t){return n.from(l.default.decode(t))}e.baseEncode=p,e.baseDecode=b;const y=1024;class g extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}e.BorshError=g;class m{constructor(){this.buf=n.alloc(y),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=n.concat([this.buf,n.alloc(y)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(n.from(new u.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(n.from(new u.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(n.from(new u.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(n.from(new u.default(t).toArray("le",64)))}writeBuffer(t){this.buf=n.concat([n.from(this.buf.subarray(0,this.length)),t,n.alloc(y)]),this.length+=t.length}writeString(t){this.maybeResize();const e=n.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(n.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function w(t,e,r){const n=r.value;r.value=function(...t){try{return n.apply(this,t)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new g("Reached the end of buffer when deserializing")}throw e}}}e.BinaryWriter=m;class v{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new u.default(t,"le")}readU128(){const t=this.readBuffer(16);return new u.default(t,"le")}readU256(){const t=this.readBuffer(32);return new u.default(t,"le")}readU512(){const t=this.readBuffer(64);return new u.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new g(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return d.decode(e)}catch(r){throw new g("Error decoding UTF-8 string: "+r)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let n=0;n<e;++n)r.push(t());return r}}function j(t){return t.charAt(0).toUpperCase()+t.slice(1)}function O(t,e,r,n,o){try{if("string"===typeof n)o["write"+j(n)](r);else if(n instanceof Array)if("number"===typeof n[0]){if(r.length!==n[0])throw new g(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);o.writeFixedArray(r)}else o.writeArray(r,r=>{O(t,e,r,n[0],o)});else if(void 0!==n.kind)switch(n.kind){case"option":null===r||void 0===r?o.writeU8(0):(o.writeU8(1),O(t,e,r,n.type,o));break;default:throw new g(`FieldType ${n} unrecognized`)}else k(t,r,o)}catch(i){throw i instanceof g&&i.addToFieldPath(e),i}}function k(t,e,r){const n=t.get(e.constructor);if(!n)throw new g(`Class ${e.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,o])=>{O(t,n,e[n],o,r)});else{if("enum"!==n.kind)throw new g(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`);{const o=e[n.field];for(let i=0;i<n.values.length;++i){const[s,a]=n.values[i];if(s===o){r.writeU8(i),O(t,s,e[s],a,r);break}}}}}function S(t,e){const r=new m;return k(t,e,r),r.toArray()}function _(t,e,r,n){try{if("string"===typeof r)return n["read"+j(r)]();if(r instanceof Array)return"number"===typeof r[0]?n.readFixedArray(r[0]):n.readArray(()=>_(t,e,r[0],n));if("option"===r.kind){const o=n.readU8();return o?_(t,e,r.type,n):void 0}return E(t,r,n)}catch(o){throw o instanceof g&&o.addToFieldPath(e),o}}function E(t,e,r){const n=t.get(e);if(!n)throw new g(`Class ${e.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[o,i]of t.get(e).fields)n[o]=_(t,o,i,r);return new e(n)}if("enum"===n.kind){const o=r.readU8();if(o>=n.values.length)throw new g(`Enum index: ${o} is out of range`);const[i,s]=n.values[o],a=_(t,i,s,r);return new e({[i]:a})}throw new g(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function A(t,e,r){const n=new v(r),o=E(t,e,n);if(n.offset<r.length)throw new g(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return o}function I(t,e,r){const n=new v(r);return E(t,e,n)}s([w],v.prototype,"readU8",null),s([w],v.prototype,"readU16",null),s([w],v.prototype,"readU32",null),s([w],v.prototype,"readU64",null),s([w],v.prototype,"readU128",null),s([w],v.prototype,"readU256",null),s([w],v.prototype,"readU512",null),s([w],v.prototype,"readString",null),s([w],v.prototype,"readFixedArray",null),s([w],v.prototype,"readArray",null),e.BinaryReader=v,e.serialize=S,e.deserialize=A,e.deserializeUnchecked=I}).call(this,r("2409"),r("fd40").Buffer)},b85b:function(t,e,r){"use strict";var n=r("ebe3");Object.defineProperty(e,"__esModule",{value:!0}),e.Client=void 0;var o=n(r("5b25")),i=n(r("c5fb")),s=n(r("9e0c")),a=n(r("4ed6")),c=n(r("6e22")),u=n(r("7f44"));function l(t){var e=f();return function(){var r,n=(0,a["default"])(t);if(e){var o=(0,a["default"])(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s["default"])(this,r)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var h=function(t){(0,i["default"])(r,t);var e=l(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8080",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoconnect,s=void 0===i||i,a=n.reconnect,u=void 0===a||a,l=n.reconnect_interval,f=void 0===l?1e3:l,h=n.max_reconnects,d=void 0===h?5:h,p=arguments.length>2?arguments[2]:void 0;return(0,o["default"])(this,r),e.call(this,c["default"],t,{autoconnect:s,reconnect:u,reconnect_interval:f,max_reconnects:d},p)}return r}(u["default"]);e.Client=h},c5fb:function(t,e,r){var n=r("d59b");function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},d052:function(t,e,r){const n=r("63b5").ec,o=new n("secp256k1"),i=o.curve,s=i.n.constructor;function a(t,e){let r=new s(e);if(r.cmp(i.p)>=0)return null;r=r.toRed(i.red);let n=r.redSqr().redIMul(r).redIAdd(i.b).redSqrt();return 3===t!==n.isOdd()&&(n=n.redNeg()),o.keyPair({pub:{x:r,y:n}})}function c(t,e,r){let n=new s(e),a=new s(r);if(n.cmp(i.p)>=0||a.cmp(i.p)>=0)return null;if(n=n.toRed(i.red),a=a.toRed(i.red),(6===t||7===t)&&a.isOdd()!==(7===t))return null;const c=n.redSqr().redIMul(n);return a.redSqr().redISub(c.redIAdd(i.b)).isZero()?o.keyPair({pub:{x:n,y:a}}):null}function u(t){const e=t[0];switch(e){case 2:case 3:return 33!==t.length?null:a(e,t.subarray(1,33));case 4:case 6:case 7:return 65!==t.length?null:c(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function l(t,e){const r=e.encode(null,33===t.length);for(let n=0;n<t.length;++n)t[n]=r[n]}t.exports={contextRandomize(){return 0},privateKeyVerify(t){const e=new s(t);return e.cmp(i.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new s(t),r=i.n.sub(e).umod(i.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new s(e);if(r.cmp(i.n)>=0)return 1;if(r.iadd(new s(t)),r.cmp(i.n)>=0&&r.isub(i.n),r.isZero())return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new s(e);if(r.cmp(i.n)>=0||r.isZero())return 1;r.imul(new s(t)),r.cmp(i.n)>=0&&(r=r.umod(i.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){const e=u(t);return null===e?1:0},publicKeyCreate(t,e){const r=new s(e);if(r.cmp(i.n)>=0||r.isZero())return 1;const n=o.keyFromPrivate(e).getPublic();return l(t,n),0},publicKeyConvert(t,e){const r=u(e);if(null===r)return 1;const n=r.getPublic();return l(t,n),0},publicKeyNegate(t,e){const r=u(e);if(null===r)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),l(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let o=0;o<e.length;++o)if(r[o]=u(e[o]),null===r[o])return 1;let n=r[0].getPublic();for(let o=1;o<r.length;++o)n=n.add(r[o].pub);return n.isInfinity()?2:(l(t,n),0)},publicKeyTweakAdd(t,e,r){const n=u(e);if(null===n)return 1;if(r=new s(r),r.cmp(i.n)>=0)return 2;const o=n.getPublic().add(i.g.mul(r));return o.isInfinity()?2:(l(t,o),0)},publicKeyTweakMul(t,e,r){const n=u(e);if(null===n)return 1;if(r=new s(r),r.cmp(i.n)>=0||r.isZero())return 2;const o=n.getPublic().mul(r);return l(t,o),0},signatureNormalize(t){const e=new s(t.subarray(0,32)),r=new s(t.subarray(32,64));return e.cmp(i.n)>=0||r.cmp(i.n)>=0?1:(1===r.cmp(o.nh)&&t.set(i.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new s(r).cmp(i.n)>=0)return 1;if(new s(n).cmp(i.n)>=0)return 1;const{output:o}=t;let a=o.subarray(4,37);a[0]=0,a.set(r,1);let c=33,u=0;for(;c>1&&0===a[u]&&!(128&a[u+1]);--c,++u);if(a=a.subarray(u),128&a[0])return 1;if(c>1&&0===a[0]&&!(128&a[1]))return 1;let l=o.subarray(39,72);l[0]=0,l.set(n,1);let f=33,h=0;for(;f>1&&0===l[h]&&!(128&l[h+1]);--f,++h);return l=l.subarray(h),128&l[0]||f>1&&0===l[0]&&!(128&l[1])?1:(t.outputlen=6+c+f,o[0]=48,o[1]=t.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+c]=2,o[5+c]=l.length,o.set(l,6+c),0)},signatureImport(t,e){if(e.length<8)return 1;if(e.length>72)return 1;if(48!==e[0])return 1;if(e[1]!==e.length-2)return 1;if(2!==e[2])return 1;const r=e[3];if(0===r)return 1;if(5+r>=e.length)return 1;if(2!==e[4+r])return 1;const n=e[5+r];if(0===n)return 1;if(6+r+n!==e.length)return 1;if(128&e[4])return 1;if(r>1&&0===e[4]&&!(128&e[5]))return 1;if(128&e[r+6])return 1;if(n>1&&0===e[r+6]&&!(128&e[r+7]))return 1;let o=e.subarray(4,4+r);if(33===o.length&&0===o[0]&&(o=o.subarray(1)),o.length>32)return 1;let a=e.subarray(6+r);if(33===a.length&&0===a[0]&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let c=new s(o);c.cmp(i.n)>=0&&(c=new s(0));let u=new s(e.subarray(6+r));return u.cmp(i.n)>=0&&(u=new s(0)),t.set(c.toArrayLike(Uint8Array,"be",32),0),t.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,a){if(a){const t=a;a=o=>{const i=t(e,r,null,n,o),a=i instanceof Uint8Array&&32===i.length;if(!a)throw new Error("This is the way");return new s(i)}}const c=new s(r);if(c.cmp(i.n)>=0||c.isZero())return 1;let u;try{u=o.sign(e,r,{canonical:!0,k:a,pers:n})}catch(l){return 1}return t.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),t.recid=u.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},a=new s(n.r),c=new s(n.s);if(a.cmp(i.n)>=0||c.cmp(i.n)>=0)return 1;if(1===c.cmp(o.nh)||a.isZero()||c.isZero())return 3;const l=u(r);if(null===l)return 2;const f=l.getPublic(),h=o.verify(e,n,f);return h?0:3},ecdsaRecover(t,e,r,n){const a={r:e.slice(0,32),s:e.slice(32,64)},c=new s(a.r),u=new s(a.s);if(c.cmp(i.n)>=0||u.cmp(i.n)>=0)return 1;if(c.isZero()||u.isZero())return 2;let f;try{f=o.recoverPubKey(n,a,r)}catch(h){return 2}return l(t,f),0},ecdh(t,e,r,n,a,c,l){const f=u(e);if(null===f)return 1;const h=new s(r);if(h.cmp(i.n)>=0||h.isZero())return 2;const d=f.getPublic().mul(h);if(void 0===a){const e=d.encode(null,!0),r=o.hash().update(e).digest();for(let n=0;n<32;++n)t[n]=r[n]}else{c||(c=new Uint8Array(32));const e=d.getX().toArray("be",32);for(let t=0;t<32;++t)c[t]=e[t];l||(l=new Uint8Array(32));const r=d.getY().toArray("be",32);for(let t=0;t<32;++t)l[t]=r[t];const o=a(c,l,n),i=o instanceof Uint8Array&&o.length===t.length;if(!i)return 2;t.set(o)}return 0}}},d59b:function(t,e,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e,r)}r("1d62"),t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},e085:function(t,e,r){"use strict";(function(t){const r=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:void 0)(),n=t=>{const e=new DataView(t);let r="";for(let n=0;n<e.byteLength;n+=4)r+=e.getUint32(n).toString(16).padStart(8,"0");return r},o=t=>async(e,o)=>{"string"===typeof e&&(e=(new r.TextEncoder).encode(e)),o={outputFormat:"hex",...o};const i=await r.crypto.subtle.digest(t,e);return"hex"===o.outputFormat?n(i):i};e.sha1=o("SHA-1"),e.sha256=o("SHA-256"),e.sha384=o("SHA-384"),e.sha512=o("SHA-512")}).call(this,r("2409"))},e186:function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(T){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),s=new x(n||[]);return i._invoke=_(t,r,s),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(T){return{type:"throw",arg:T}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",b={};function y(){}function g(){}function m(){}var w={};c(w,i,(function(){return this}));var v=Object.getPrototypeOf,j=v&&v(v(B([])));j&&j!==r&&n.call(j,i)&&(w=j);var O=m.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,s,a){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}var o;function i(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function _(t,e,r){var n=f;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return P()}r.method=o,r.arg=i;while(1){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===b)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=l(t,e,r);if("normal"===c.type){if(n=r.done?p:h,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}function E(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method))return b;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function B(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){while(++o<t.length)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:P}}function P(){return{value:e,done:!0}}return g.prototype=m,c(O,"constructor",m),c(m,"constructor",g),g.displayName=c(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,a,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},k(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new S(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(O),c(O,a,"Generator"),c(O,i,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=B,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}(t.exports);try{regeneratorRuntime=n}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},e444:function(t,e,r){"use strict";function n(t,e,r){return e<=t&&t<=r}function o(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function i(t){var e=String(t),r=e.length,n=0,o=[];while(n<r){var i=e.charCodeAt(n);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)o.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&i,c=1023&s;o.push(65536+(a<<10)+c),n+=1}else o.push(65533)}n+=1}return o}function s(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}r.r(e),r.d(e,"TextEncoder",(function(){return b})),r.d(e,"TextDecoder",(function(){return p}));var a=-1;function c(t){this.tokens=[].slice.call(t)}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a},prepend:function(t){if(Array.isArray(t)){var e=t;while(e.length)this.tokens.unshift(e.pop())}else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t)){var e=t;while(e.length)this.tokens.push(e.shift())}else this.tokens.push(t)}};var u=-1;function l(t,e){if(t)throw TypeError("Decoder error");return e||65533}function f(){}function h(){}f.prototype={handler:function(t,e){}},h.prototype={handler:function(t,e){}};var d="utf-8";function p(t,e){if(!(this instanceof p))return new p(t,e);if(t=void 0!==t?String(t).toLowerCase():d,t!==d)throw new Error("Encoding not supported. Only utf-8 is supported");e=o(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e["fatal"]),this._ignoreBOM=Boolean(e["ignoreBOM"]),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function b(t,e){if(!(this instanceof b))return new b(t,e);if(t=void 0!==t?String(t).toLowerCase():d,t!==d)throw new Error("Encoding not supported. Only utf-8 is supported");e=o(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e["fatal"])},Object.defineProperty(this,"encoding",{value:"utf-8"})}function y(t){var e=t.fatal,r=0,o=0,i=0,s=128,c=191;this.handler=function(t,f){if(f===a&&0!==i)return i=0,l(e);if(f===a)return u;if(0===i){if(n(f,0,127))return f;if(n(f,194,223))i=1,r=f-192;else if(n(f,224,239))224===f&&(s=160),237===f&&(c=159),i=2,r=f-224;else{if(!n(f,240,244))return l(e);240===f&&(s=144),244===f&&(c=143),i=3,r=f-240}return r<<=6*i,null}if(!n(f,s,c))return r=i=o=0,s=128,c=191,t.prepend(f),l(e);if(s=128,c=191,o+=1,r+=f-128<<6*(i-o),o!==i)return null;var h=r;return r=i=o=0,h}}function g(t){t.fatal;this.handler=function(t,e){if(e===a)return u;if(n(e,0,127))return e;var r,o;n(e,128,2047)?(r=1,o=192):n(e,2048,65535)?(r=2,o=224):n(e,65536,1114111)&&(r=3,o=240);var i=[(e>>6*r)+o];while(r>0){var s=e>>6*(r-1);i.push(128|63&s),r-=1}return i}}p.prototype={decode:function(t,e){var r;r="object"===typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"===typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=o(e),this._streaming||(this._decoder=new y({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e["stream"]);var n,i=new c(r),a=[];while(!i.endOfStream()){if(n=this._decoder.handler(i,i.read()),n===u)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._streaming){do{if(n=this._decoder.handler(i,i.read()),n===u)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!i.endOfStream());this._decoder=null}return a.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0)),s(a)}},b.prototype={encode:function(t,e){t=t?String(t):"",e=o(e),this._streaming||(this._encoder=new g(this._options)),this._streaming=Boolean(e["stream"]);var r,n=[],s=new c(i(t));while(!s.endOfStream()){if(r=this._encoder.handler(s,s.read()),r===u)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}if(!this._streaming){while(1){if(r=this._encoder.handler(s,s.read()),r===u)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}this._encoder=null}return new Uint8Array(n)}}},ebe3:function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},f036:function(t,e,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}r("29ed"),r("5d80"),r("7479"),r("6359"),r("7fe9"),r("9bdd"),t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},f1df:function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},ff5d:function(t,e){function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports}}]);