(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c3032e"],{"014f":function(e,t,n){"use strict";(function(e){var a=n("bee2"),r=n("d4ec"),s=n("2909"),c=n("c7eb"),o=n("b85c"),i=n("1da1"),u=n("5530"),p=n("668b"),l=(n("caad"),n("2532"),n("d3b7"),n("14d9"),n("13d5"),n("d9e2"),n("4c53"),n("99af"),n("c740"),n("a9e3"),n("159b"),n("b680"),n("4de4"),n("d81d"),n("b0c0"),n("4ec9"),n("3ca3"),n("ddb0"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("5319"),n("2f62")),d=n("d208"),f=n("3e44"),m=n("64b9"),b=n("fa13"),y=n("0774"),h=n.n(y),w=n("df00"),v=n("ce84"),x=n("0abe"),k=n("016a"),g=n("59da"),j=n("408b3"),O=n.n(j),A=n("901e"),M=n.n(A),P=n("eb1c"),U="demo";t["a"]={name:U,inject:[],components:{},data:function(){return{}},computed:Object(u["a"])({},Object(l["b"])(["isConnect","account","chainId","isPc","language","ckbNetwork","ckbAccount"])),created:function(){this.$i18n.getLocaleMessage("en")[U]||(this.$i18n.mergeLocaleMessage("en",d["a"].en),this.$i18n.mergeLocaleMessage("zh",d["a"].zh))},mounted:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function n(){var u,l,d,y,j,A,U,q,S,B,z,T,E,H,R,C,I,F,_,N,L,V,D,K,W,J,$,Q,G,Y,X,Z,ee,te,ne,ae,re,se,ce,oe,ie,ue,pe,le,de,fe,me,be,ye,he,we,ve,xe,ke,ge,je,Oe,Ae,Me,Pe,Ue,qe,Se,Be,ze,Te,Ee,He,Re,Ce,Ie,Fe,_e,Ne,Le,Ve,De,Ke,We,Je,$e,Qe,Ge,Ye,Xe,Ze,et,tt,nt;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Xe=function(){return Xe=Object(i["a"])(Object(c["a"])().mark((function t(n){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qe([e.from(Je),Ge(We).toBuffer(),Ge(n).toBuffer()],Ge(We));case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)}))),Xe.apply(this,arguments)},Ye=function(e){return Xe.apply(this,arguments)},u="testnet",!1,l=k["a"][u].predefined,v["config"].initializeConfig(l),d=new v["RPC"](k["a"][u].RPC_URL),y=new v["Indexer"](k["a"][u].INDEXER_URL,k["a"][u].RPC_URL),Object(P["initConfig"])({name:"CoinTool",logo:t.$logo,joyidAppURL:k["a"][u].joyidAppURL,network:u}),n.prev=9,n.next=12,Object(P["connect"])();case 12:j=n.sent,console.log("JoyID user info:",j),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](9),console.error(n.t0);case 19:A={from:j.address,amount:0,to:[{to:"ckt1qrfrwcdnvssswdwpn3s9v8fp87emat306ctjwsm3nmlkjg8qyza2cqgqqxv9ftnp95e60cc4wvv7ppqafep8luy2qcah2rhv",value:100*Math.pow(10,8)},{to:"ckt1qrfrwcdnvssswdwpn3s9v8fp87emat306ctjwsm3nmlkjg8qyza2cqgqq9j0k99ez69nzu6dkejufxuf2fsn4dnrdgkf7vzr",value:100*Math.pow(10,8)}]},U=[],q=function(e){var t,n=Object(o["a"])(k["a"][u].HASH_DATA);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.codeHashes.includes(e)){var r,s=Object(o["a"])(a.txHashes);try{var c=function(){var e=r.value,t=e.split("-")[0];U.some((function(e){return e.outPoint.txHash===t}))||U.push({outPoint:{txHash:t,index:"0x0"},depType:a.depType})};for(s.s();!(r=s.n()).done;)c()}catch(i){s.e(i)}finally{s.f()}}}}catch(i){n.e(i)}finally{n.f()}},S=A.to.reduce((function(e,t){return v["BI"].from(e).add(t.value)}),0),A.amount=S,B=v["helpers"].TransactionSkeleton({}),z=v["helpers"].parseAddress(A.from,{config:l}),q(z.codeHash),T=v["BI"].from(A.amount).add(1e5),E=v["BI"].from(0),H=[],R=y.collector({lock:z,type:"empty"}),C=!1,I=!1,n.prev=33,_=Object(p["a"])(R.collect());case 35:return n.next=37,_.next();case 37:if(!(C=!(N=n.sent).done)){n.next=47;break}if(L=N.value,E=E.add(L.cellOutput.capacity),q(L.cellOutput.lock.codeHash),H.push(L),!(E>=T)){n.next=44;break}return n.abrupt("break",47);case 44:C=!1,n.next=35;break;case 47:n.next=53;break;case 49:n.prev=49,n.t1=n["catch"](33),I=!0,F=n.t1;case 53:if(n.prev=53,n.prev=54,!C||null==_.return){n.next=58;break}return n.next=58,_.return();case 58:if(n.prev=58,!I){n.next=61;break}throw F;case 61:return n.finish(58);case 62:return n.finish(53);case 63:if(console.log(E.toBigInt(),T.toBigInt()),!E.lt(T)){n.next=66;break}throw new Error("CKB 余额不足");case 66:V=[],D=Object(o["a"])(A.to);try{for(D.s();!(K=D.n()).done;)W=K.value,J=v["helpers"].parseAddress(W.to,{config:l}),q(J.codeHash),$={cellOutput:{capacity:v["BI"].from(W.value).toHexString(),lock:J},data:"0x"},V.push($)}catch(at){D.e(at)}finally{D.f()}if(Q={cellOutput:{capacity:E.sub(T).toHexString(),lock:z},data:"0x"},B=B.update("inputs",(function(e){return e.push.apply(e,H)})),B=B.update("outputs",(function(e){return e.push.apply(e,V.concat([Q]))})),console.log(U),B=B.update("cellDeps",(function(e){return e.push.apply(e,U)})),G=B.get("inputs").findIndex((function(e){return x["bytes"].equal(x["blockchain"].Script.pack(e.cellOutput.lock),x["blockchain"].Script.pack(z))})),-1===G){n.next=90;break}while(G>=B.get("witnesses").size)B=B.update("witnesses",(function(e){return e.push("0x")}));if(Y=B.get("witnesses").get(G),X={lock:"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},"0x"===Y){n.next=88;break}if(Z=x["blockchain"].WitnessArgs.unpack(x["bytes"].bytify(Y)),ee=Z.lock,!ee||!X.lock||x["bytes"].equal(ee,X.lock)){n.next=84;break}throw new Error("Lock field in first witness is set aside for signature!");case 84:te=Z.inputType,te&&(X.inputType=te),ne=Z.outputType,ne&&(X.outputType=ne);case 88:Y=x["bytes"].hexify(x["blockchain"].WitnessArgs.pack(X)),B=B.update("witnesses",(function(e){return e.set(G,Y)}));case 90:return B=v["commons"].common.prepareSigningEntries(B),console.log(B),ae=v["helpers"].createTransactionFromSkeleton(B),console.log(ae),n.next=96,Object(P["signRawTransaction"])(ae,j.address);case 96:return re=n.sent,n.next=99,d.sendTransaction(re,"passthrough");case 99:return se=n.sent,console.log(se),n.abrupt("return");case 106:ce=n.sent,console.log("connect success",ce),n.next=113;break;case 110:n.prev=110,n.t2=n["catch"](103),console.log("connect failed");case 113:return n.prev=113,n.next=116,window.unisat.getAccounts();case 116:ie=n.sent,oe=ie[0],console.log(ie),n.next=124;break;case 121:n.prev=121,n.t3=n["catch"](113),console.log(n.t3);case 124:return ue=[{address:"tb1qtg2nw5pmud0fkzsjsndyfrxf6nuk7vpsqhyv63",value:O.a.toSatoshi(Number(1e-6))},{address:"tb1q66jturfwej9uyzsnwhsrsg58epne5nnuusfccd",value:O.a.toSatoshi(Number(1e-6))},{address:"tb1qecj4nwecl54t82ywcxz8k4ugywnjjqsn7alttt",value:O.a.toSatoshi(Number(1e-6))}],pe=0,le=0,ue.forEach((function(e){pe=new M.a(pe).plus(e.value).toNumber(),le++})),n.next=130,t.$ajax({url:"https://mempool.space/testnet/api/address/".concat(oe,"/utxo"),method:"get"});case 130:de=n.sent,fe=new g["Psbt"]({network:g["networks"].testnet}),fe.setVersion(1),fe.setLocktime(0),me=0,be=0,ye=Object(o["a"])(de),n.prev=137,ye.s();case 139:if((he=ye.n()).done){n.next=153;break}if(ve=he.value,null!==ve&&void 0!==ve&&null!==(we=ve.status)&&void 0!==we&&we.confirmed){n.next=143;break}return n.abrupt("continue",151);case 143:return me=new M.a(me).plus(ve.value).toNumber(),n.next=146,t.$ajax({url:"https://mempool.space/testnet/api/tx/".concat(ve.txid,"/hex"),method:"get"});case 146:if(xe=n.sent,fe.addInput({hash:ve.txid,index:ve.vout,nonWitnessUtxo:e.from(xe,"hex")}),be++,!(me>pe)){n.next=151;break}return n.abrupt("continue",151);case 151:n.next=139;break;case 153:n.next=158;break;case 155:n.prev=155,n.t4=n["catch"](137),ye.e(n.t4);case 158:return n.prev=158,ye.f(),n.finish(158);case 161:if(ue.forEach((function(e){fe.addOutput({address:e.address,value:e.value})})),!(me<pe)){n.next=165;break}return console.log("输入总额不足以支付输出总额"),n.abrupt("return");case 165:return ke=1,fe.setMaximumFeeRate(ke),ge=146*be+33*(le+1)+10,console.log(ge),je=new M.a(ge).times(ke).toFixed(0),console.log(je),fe.addOutput({address:oe,value:new M.a(me).minus(pe).minus(je).toNumber()}),n.prev=172,n.next=175,window.unisat.signPsbt(fe.toHex());case 175:return Oe=n.sent,console.log(Oe),n.next=179,window.unisat.pushPsbt(Oe);case 179:Ae=n.sent,console.log(Ae),n.next=186;break;case 183:n.prev=183,n.t5=n["catch"](172),console.log(n.t5);case 186:return n.abrupt("return");case 192:return Me=n.sent,console.log(Me),n.abrupt("return");case 199:return Ue=n.sent,console.log(Ue),console.log(Ue.account.execute),Ue.enable(),qe="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",Se=new w["c"](Pe,qe,Ue.account),n.next=207,Se.balanceOf(Ue.selectedAddress);case 207:return Be=n.sent,n.next=210,Se.decimals();case 210:return ze=n.sent,console.log(Be,ze),Te=new w["b"]([{name:"Uint256",size:2,type:"struct",members:[{name:"low",type:"felt",offset:0},{name:"high",type:"felt",offset:1}]},{data:[{name:"from_",type:"felt"},{name:"to",type:"felt"},{name:"value",type:"Uint256"}],keys:[],name:"Transfer",type:"event"},{data:[{name:"owner",type:"felt"},{name:"spender",type:"felt"},{name:"value",type:"Uint256"}],keys:[],name:"Approval",type:"event"},{data:[{name:"previousOwner",type:"felt"},{name:"newOwner",type:"felt"}],keys:[],name:"OwnershipTransferred",type:"event"},{name:"constructor",type:"constructor",inputs:[{name:"name",type:"felt"},{name:"symbol",type:"felt"},{name:"decimals",type:"felt"},{name:"initial_supply",type:"Uint256"},{name:"recipient",type:"felt"},{name:"owner",type:"felt"}],outputs:[]},{name:"name",type:"function",inputs:[],outputs:[{name:"name",type:"felt"}],stateMutability:"view"},{name:"symbol",type:"function",inputs:[],outputs:[{name:"symbol",type:"felt"}],stateMutability:"view"},{name:"totalSupply",type:"function",inputs:[],outputs:[{name:"totalSupply",type:"Uint256"}],stateMutability:"view"},{name:"decimals",type:"function",inputs:[],outputs:[{name:"decimals",type:"felt"}],stateMutability:"view"},{name:"balanceOf",type:"function",inputs:[{name:"account",type:"felt"}],outputs:[{name:"balance",type:"Uint256"}],stateMutability:"view"},{name:"allowance",type:"function",inputs:[{name:"owner",type:"felt"},{name:"spender",type:"felt"}],outputs:[{name:"remaining",type:"Uint256"}],stateMutability:"view"},{name:"owner",type:"function",inputs:[],outputs:[{name:"owner",type:"felt"}],stateMutability:"view"},{name:"transfer",type:"function",inputs:[{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],outputs:[{name:"success",type:"felt"}]},{name:"transferFrom",type:"function",inputs:[{name:"sender",type:"felt"},{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],outputs:[{name:"success",type:"felt"}]},{name:"approve",type:"function",inputs:[{name:"spender",type:"felt"},{name:"amount",type:"Uint256"}],outputs:[{name:"success",type:"felt"}]},{name:"increaseAllowance",type:"function",inputs:[{name:"spender",type:"felt"},{name:"added_value",type:"Uint256"}],outputs:[{name:"success",type:"felt"}]},{name:"decreaseAllowance",type:"function",inputs:[{name:"spender",type:"felt"},{name:"subtracted_value",type:"Uint256"}],outputs:[{name:"success",type:"felt"}]},{name:"mint",type:"function",inputs:[{name:"to",type:"felt"},{name:"amount",type:"Uint256"}],outputs:[]},{name:"burnFrom",type:"function",inputs:[{name:"sender",type:"felt"},{name:"amount",type:"Uint256"}],outputs:[]},{name:"transferOwnership",type:"function",inputs:[{name:"newOwner",type:"felt"}],outputs:[]},{name:"renounceOwnership",type:"function",inputs:[],outputs:[]}]),Ee=w["f"].uint256(21e3),He=Te.compile("constructor",{name:"niceToken",symbol:"NIT",decimals:18,initial_supply:Ee,recipient:Ue.selectedAddress,owner:Ue.selectedAddress}),Re={contractAddress:"0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",entrypoint:"transfer",calldata:w["b"].compile({recipient:"0x00E5fe44958d29A91449cad2fA4a4082509616db690909A6a322DeAd9c81139c",amount:w["f"].uint256(1e-7*Math.pow(10,18))})},Ce={classHash:"0x02797c4997ea0ca14401188bf6cbd4d89f0e632bd088088ab6cabf63c2056fc8",constructorCalldata:He},Ie=[].concat(Ce).map((function(e){var t=e.classHash,n=e.salt,a=e.unique,r=void 0===a||a,c=e.constructorCalldata,o=void 0===c?[]:c,i=w["b"].compile(o),u=null!==n&&void 0!==n?n:w["m"].randomAddress();return{call:{contractAddress:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",entrypoint:"deployContract",calldata:[t,u,w["j"].toCairoBool(r),i.length].concat(Object(s["a"])(i))},address:se.calculateContractAddressFromHash(r?w["g"].starkCurve.pedersen(Ue.selectedAddress,u):u,t,i,r?"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf":0)}})),Fe=Ie.map((function(e){return e.call})),_e=Ie.map((function(e){return e.address})),console.log(Fe),n.next=223,Ue.account.execute([Re,Fe[0]]);case 223:return n.sent,console.log(_e),n.next=227,disconnect({clearLastWallet:!0});case 227:(function(e){e[e["Uninitialized"]=0]="Uninitialized",e[e["MetadataV1"]=4]="MetadataV1",e[e["EditionV1"]=1]="EditionV1",e[e["MasterEditionV1"]=2]="MasterEditionV1",e[e["MasterEditionV2"]=6]="MasterEditionV2",e[e["EditionMarker"]=7]="EditionMarker"})(Ne||(Ne={})),Le=Object(a["a"])((function e(t){Object(r["a"])(this,e),this.name=t.name,this.symbol=t.symbol,this.uri=t.uri,this.sellerFeeBasisPoints=t.sellerFeeBasisPoints,this.creators=t.creators})),Ve=Object(a["a"])((function e(t){Object(r["a"])(this,e),this.key=Ne.MetadataV1,this.updateAuthority=t.updateAuthority,this.mint=t.mint,this.data=t.data,this.primarySaleHappened=t.primarySaleHappened,this.isMutable=t.isMutable,this.editionNonce=t.editionNonce})),De=Object(a["a"])((function e(t){Object(r["a"])(this,e),this.address=t.address,this.verified=t.verified,this.share=t.share})),Ke=new Map([[Le,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[De]}]]}],[De,{kind:"struct",fields:[["address","pubkeyAsString"],["verified","u8"],["share","u8"]]}],[Ve,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",Le],["primarySaleHappened","u8"],["isMutable","u8"]]}]]),We="metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s",Je="metadata",$e=new Map,b["BinaryReader"].prototype.readPubkey=function(){var e=this,t=e.readFixedArray(32);return new m["PublicKey"](t)},b["BinaryWriter"].prototype.writePubkey=function(e){var t=this;t.writeFixedArray(e.toBuffer())},b["BinaryReader"].prototype.readPubkeyAsString=function(){var e=this,t=e.readFixedArray(32);return h.a.encode(t)},b["BinaryWriter"].prototype.writePubkeyAsString=function(e){var t=this;t.writeFixedArray(h.a.decode(e))},Qe=function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(t,n){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["PublicKey"].findProgramAddress(t,n);case 2:return a=e.sent,e.abrupt("return",[a[0].toBase58(),a[1]]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(e){if("string"!==typeof e)return e;var t=$e.get(e);return t||(t=new m["PublicKey"](e),$e.set(e,t)),t},Ze=new RegExp("\0","g"),et=function(e){try{var t=Object(b["deserializeUnchecked"])(Ke,Ve,e);return t.data.name=t.data.name.replace(Ze,""),t.data.uri=t.data.uri.replace(Ze,""),t.data.symbol=t.data.symbol.replace(Ze,""),t}catch(n){console.log(n)}},tt=function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(t){var n,a,r,s,o,i;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("working"),n=new m["Connection"]("https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ","confirmed"),e.next=4,n.getParsedTokenAccountsByOwner(t,{programId:f["TOKEN_PROGRAM_ID"]});case 4:return a=e.sent,e.next=7,Promise.all(a.value.filter((function(e){return 1===e.account.data.parsed.info.tokenAmount.uiAmount})).map((function(e){return Ye(e.account.data.parsed.info.mint)})));case 7:return r=e.sent,s=r.map((function(e){return new m["PublicKey"](e)})),e.next=11,n.getMultipleAccountsInfo(s);case 11:return o=e.sent,i=o.filter((function(e){return null!==e})).map((function(e){return et(e.data)})),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(t){var n,a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:n=e.sent,a={},n.map(function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(t){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a[t.updateAuthority]||(a[t.updateAuthority]=[]),n={name:t.data.name,symbol:t.data.symbol,mint:t.mint},a[t.updateAuthority].push(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt(new m["PublicKey"]("HQQPeFqTCrsr9taqDgx5tzxzbUednJUapZnruvGRJk5b"));case 246:case"end":return n.stop()}}),n,null,[[9,16],[33,49,53,63],[54,,58,62],[103,110],[113,121],[137,155,158,161],[172,183]])})))()}}}).call(this,n("1c35").Buffer)},4252:function(e,t,n){},"46a4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e._v(" 1 ")])},r=[],s=n("014f"),c=s["a"],o=(n("b1e9"),n("2877")),i=Object(o["a"])(c,a,r,!1,null,"1be11030",null);t["default"]=i.exports},b1e9:function(e,t,n){"use strict";n("4252")},d208:function(e,t,n){"use strict";t["a"]={zh:{rpcServer:{}},en:{rpcServer:{}}}}}]);