(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17e17f02"],{"55f9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("TransactionSuccessDialog",{ref:"TransactionSuccessDialog",attrs:{"is-show-manage-pane":!0,title:e.$t("aptosCreateToken.success")}}),e.isZh?n("div",{staticClass:"tips_err"},[n("p",[e._v("CoinTool不提供任何技术支持！")]),n("p",[e._v("已关闭创建代币功能，请勿用于违法活动!")])]):n("Card",{attrs:{icon:"coin-trx","is-show-code-view":!1,title:e.$t("route.aptosCreateToken"),desc:e.$t("aptosCreateToken.pageDesc")}},[n("div",{staticClass:"flexCenter"},[n("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":e.isPc?"left":"top",rules:e.rules,model:e.form,"label-width":"160px","label-suffix":":"}},[n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.tokenName"),prop:"tokenName"}},[n("el-input",{model:{value:e.form.tokenName,callback:function(t){e.$set(e.form,"tokenName",t)},expression:"form.tokenName"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.symbol"),prop:"symbol"}},[n("el-input",{model:{value:e.form.symbol,callback:function(t){e.$set(e.form,"symbol",t)},expression:"form.symbol"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.decimals"),prop:"decimals"}},[n("el-input-number",{staticClass:"inputNum",attrs:{min:0,max:9},model:{value:e.form.decimals,callback:function(t){e.$set(e.form,"decimals",t)},expression:"form.decimals"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.initialSupply"),prop:"initialSupply"}},[n("el-input-number",{staticClass:"inputNum",attrs:{min:1},model:{value:e.form.initialSupply,callback:function(t){e.$set(e.form,"initialSupply",t)},expression:"form.initialSupply"}})],1),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),n("el-form-item",{attrs:{label:"Logo",prop:"image"}},[n("UploadImg",{attrs:{"img-url":e.form.image,height:"100px"},on:{"update:imgUrl":function(t){return e.$set(e.form,"image",t)},"update:img-url":function(t){return e.$set(e.form,"image",t)}}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.mintAuthority"),prop:"mintAuthority"}},[n("el-input",{model:{value:e.form.mintAuthority,callback:function(t){e.$set(e.form,"mintAuthority",t)},expression:"form.mintAuthority"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.freezeAuthority"),prop:"freezeAuthority"}},[n("el-input",{model:{value:e.form.freezeAuthority,callback:function(t){e.$set(e.form,"freezeAuthority",t)},expression:"form.freezeAuthority"}})],1),n("el-form-item",[n("el-alert",{staticStyle:{"line-height":"18px"},attrs:{title:"There is no cap on tokens, you need to mint in the token admin",type:"warning",effect:"dark"}})],1),n("el-form-item",{staticClass:"btnBox"},[n("el-button",{staticClass:"item-btn",attrs:{loading:e.loading,size:"medium",type:"primary"},on:{click:e.onCreatToken}},[e._v(" "+e._s(e.$t("aptosCreateToken.createBtn"))+" ")])],1)],1)],1)])],1)},r=[],o=n("4833"),i=n("efe2"),s=(n("7479"),n("4a32"),n("37de"),n("1e34"),n("7fe9"),n("9bdd"),n("6a61"),n("6bec")),c=n("52c1"),l={zh:{aptosCreateToken:{tokenName:"代币名称",tokenNameValidate:"请输入代币名称",symbol:"缩写符号",symbolValidate:"请输入缩写符号",initialSupply:"发行数量",initialSupplyValidate:"请输入发行数量",decimals:"小数位数(0-9)",decimalsValidate:"请输入小数位数",config:"其他配置",createBtn:"立即创建",success:"代币创建成功，请前往区块浏览器或钱包查看！",pageDesc:"简单、快速、便捷",adminAddress:"管理员地址",mintAuthority:"增发权限地址",freezeAuthority:"冻结权限地址",alert_text:"抱歉，TRC20 Token自动创建功能暂未开通，请前往首页联系我们，由我们代为您发布TRC20 Token"}},en:{aptosCreateToken:{tokenName:"Token Name",tokenNameValidate:"Please enter token name",symbol:"Symbol",symbolValidate:"Please enter symbol",initialSupply:"Initial Supply",initialSupplyValidate:"Please enter initial supply",decimals:"Decimals(0-9)",decimalsValidate:"Please enter decimals",adminAddress:"Admin Address",mintAuthority:"Mint authority",freezeAuthority:"Freeze authority",config:"Other Config",createBtn:"Create Token",success:"Token created successfully, please go to the block browser or wallet to check!",pageDesc:"Simple, Fast, Convenient",alert_text:"Sorry, the automatic creation function of trc20 has not been activated yet. Please contact us on the home page and we will release the trc20 token for you"}}},u=n("12f9"),d=n("eaa1"),f=n("931f"),m="aptosCreateToken",p="createToken",b={name:p,inject:["solwalletStateTest"],components:{TransactionSuccessDialog:d["a"],UploadImg:s["a"],Card:u["a"]},data:function(){return{createFee:100,blockTxurl:"",c_address:"",tx_status:!1,loading:!1,rules:{},form:{tokenName:"",symbol:"",initialSupply:21e6,description:"",image:"",adminAddress:"",mintAuthority:"",freezeAuthority:"",decimals:9}}},computed:Object(i["a"])({},Object(c["b"])(["isConnect","aptosNetwork","aptosAccount","aptosWallet","aptosClient","navigatorLanguage","language","isZh","isPc"])),created:function(){this.$i18n.getLocaleMessage("en")[m]||(this.$i18n.mergeLocaleMessage("en",l.en),this.$i18n.mergeLocaleMessage("zh",l.zh)),this.rules={tokenName:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],symbol:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],decimals:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],initialSupply:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],mintAuthority:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],freezeAuthority:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}]}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{init:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onCreatToken:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,i,s,c,l,u,d,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.aptosAccount){t.next=3;break}return e.$message.error("Please connect your wallet."),t.abrupt("return");case 3:return e.loading=!0,t.next=6,e.aptosClient.getAptBalance(e.aptosAccount);case 6:return n=t.sent,console.log(n,"aptBalance"),t.next=10,e.aptosWallet.getWallet();case 10:if(a=t.sent,console.log(a,"aptosWallet"),!(n<=e.createFee)){t.next=16;break}return e.$msgbox({title:e.$t("common.balance_lack_title"),type:"warning",dangerouslyUseHTMLString:!0,message:e.$t("common.balance_lack_content",{address:e.aptosAccount,amount:e.createFee,symbol:"APT"}),confirmButtonText:e.$t("common.confirm")}),e.loading=!1,t.abrupt("return");case 16:return t.prev=16,console.log("大哥在这里写创建逻辑"),r=function(e){for(var t="",n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16);return t},t.next=21,e.aptosWallet.getAccount();case 21:return o=t.sent,i={type:"entry_function_payload",function:"0x1::code::publish_package_txn",type_arguments:[],arguments:[new f["c"]("0x084578616d706c65730100000000000000004032383133333744324536304246434439383242413231433130384439463445433539393339344337313438383132414334383835384537443433374231314535ab011f8b08000000000002ff3d8dbd0ec2300c84773f05ea928984198901217889aa426e62daa8cd8fe2b4f0f824509017dff93b5f1b514f3850071e1ded4ebbe6fa421767e206564a6c83afe6419669005a34261133710797603fb77bf50d45f286bcb6c4f21c73e05b2a0f9f214d1d0c3617508c39473e2a55e4b8f45207a7b092fb197bde561d12c9020848b4d69043eb05f0d21b9baafe622eaca41ebf862dfbd702de3e8ea761d7000000010a6d6f6f6e5f636f696e78a6011f8b08000000000002ff5d8dc10a83301044eff98ae0a128f4dc435a7ae987c8aaab849add92442c15ffbdc9522a3aa7d9b7cc8ce36e1a513fd892318e99ea36d9b75e944e0ad14f6d94af5e5625ac9f485bb2b176122d035287dee853b003a1af7ed12c78450e75efc1e1ccfe99068060c04e368cc92d1646fbc15b5eb897ffa06c4bef79c79a626648b1e2889be6802efbb38731e086aaabd855adea0b634118870101000000000300000000000000000000000000000000000000000000000000000000000000010e4170746f734672616d65776f726b00000000000000000000000000000000000000000000000000000000000000010b4170746f735374646c696200000000000000000000000000000000000000000000000000000000000000010a4d6f76655374646c696200").toUint8Array(),[new f["c"]("0xa11ceb0b050000000a01000402040403080b04130205151007254008654006a501100ab501050cba011200000101000200000003000100010503010100010201060c0001080005060c0a020a0202010a6d6f6f6e5f636f696e780c6d616e616765645f636f696e04436f696e0b696e69745f6d6f64756c650b64756d6d795f6669656c640a696e697469616c697a65"+e.aptosAccount.replace("0x","")+"000000000000000000000000000000000000000000000000000000000000010a020706776f61696e690a020302"+r("cc")+"00020104010000000001070b000700070131060938000200").toUint8Array()]]},console.log(i),console.log(e.aptosWallet,"this.aptosWallet"),t.t0=console,t.next=28,e.aptosWallet.signAndSubmitTransaction(o,i);case 28:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),t.abrupt("return");case 37:return c=t.sent,console.log("create ok",c),l=new f["d"].TypeTagStruct(f["d"].StructTag.fromString("".concat(o.address().toString(),"::MoonCoin::MoonCoin"))),u=new BCS.Serializer,u.serializeBool(!1),t.next=44,Promise.all([s.getAccount(o.address()),s.getChainId()]);case 44:return d=new f["d"].TransactionPayloadScriptFunction(f["d"].ScriptFunction.natural("0x1::managed_coin","initialize",[l],[BCS.bcsSerializeStr("Moon Coin"),BCS.bcsSerializeStr("MOON"),BCS.bcsSerializeUint64(6),u.getBytes()]))[(sequenceNumber,chainId)]=t.sent,rawTxn=new f["d"].RawTransaction(f["d"].AccountAddress.fromHex(o.address()),parseInt(sequenceNumber),d,parseInt(1e3),parseInt(1),parseInt(Math.floor(Date.now()/1e3)+10),new f["d"].ChainId(chainId)),m=f["b"].generateBCSTransaction(o,rawTxn),t.next=49,s.submitSignedBCSTransaction(m);case 49:p=t.sent,console.log("init ok",p.hash),console.log(e.aptosWallet,"this.aptosWallet"),t.next=57;break;case 54:t.prev=54,t.t2=t["catch"](16),console.log("error",t.t2);case 57:return t.prev=57,e.loading=!1,t.finish(57);case 60:case"end":return t.stop()}}),t,null,[[16,54,57,60]])})))()}}},g=b,h=(n("d6e4"),n("5d22")),w=Object(h["a"])(g,a,r,!1,null,"ed551cc0",null);t["default"]=w.exports},9:function(e,t){},"9dbb":function(e,t,n){},ab9c:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"j",(function(){return h})),n.d(t,"e",(function(){return k})),n.d(t,"i",(function(){return A})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return S})),n.d(t,"k",(function(){return $})),n.d(t,"f",(function(){return M})),n.d(t,"n",(function(){return I})),n.d(t,"l",(function(){return _})),n.d(t,"o",(function(){return B})),n.d(t,"h",(function(){return N})),n.d(t,"g",(function(){return z})),n.d(t,"m",(function(){return D}));var a=n("e7e7"),r=n("4833"),o=(n("6a61"),n("4898"),n("7479"),n("4a32"),n("8b79"),n("37de"),n("1e34"),n("96e6"),n("8a3f"),n("98ef"),n("22f9"),n("a9b5"),n("f597"),n("403f"),n("297b"),n("fdea"),n("ebbc")),i=n("5874"),s=n("5274"),c=n("53a7"),l=n.n(c),u=n("5dec"),d=n.n(u),f=n("ab3e"),m=n("aec5"),p=n("4360"),b={Mainnet:"https://api.mainnet-beta.solana.com",Testnet:"https://api.testnet.solana.com",Devnet:"https://api.devnet.solana.com"},g={Mainnet:"",Testnet:"testnet",Devnet:"devnet"},h={Mainnet:101,Testnet:102,Devnet:103},w="FEG5LbNmeRpU4BMCEz8HA7X8iTxWrGrgEskBPRtjPwmL",y=function(e){var t={CREATE:1,AUTHORITY:.2,MINT:.2,BURN:.2},n=p["a"].state.sol.solNetwork;return"Mainnet"===n?t[e]||.5:.001};function k(e,t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["d"].findProgramAddress([t.toBuffer(),o["TOKEN_PROGRAM_ID"].toBuffer(),n.toBuffer()],x);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var x=new s["d"]("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),T=function(e){if(e.length!==o["MintLayout"].span)throw new Error("Not a valid Mint");var t=o["MintLayout"].decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new s["d"](t.mintAuthority),t.supply=o["u64"].fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new s["d"](t.freezeAuthority),t},A=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n,a,r){var o,c,l,u,d,m,p,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getAccountInfo(new s["d"](n));case 2:if(o=t.sent,c={},!r){t.next=25;break}return t.next=7,(new i["b"]).resolve();case 7:if(l=t.sent,console.log(l,"TokenListProvider"),u=l.filterByChainId(r.chainID).excludeByTag("nft").getList(),d=n.toBase58(),m=u.find((function(e){return e.address===d})),m){t.next=23;break}return t.prev=13,t.next=16,Object(f["a"])({url:"https://debonair-tricky-umbrella.glitch.me/getTokenInfo",method:"get",data:{address:n.toBase58(),chainId:r.chainID}});case 16:p=t.sent,200===p.code&&(m=p.data),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](13),console.log("cointool get tokenInfo error",t.t0);case 23:c=m||{name:"Unknown",symbol:"Unknown"},console.log("metadata",c);case 25:if(null===o||void 0===o?void 0:o.data){t.next=27;break}return t.abrupt("return");case 27:return b=T(e.from(o.data)),t.abrupt("return",Object.assign(Object.assign({},b),{metadata:c,tokenAddress:n}));case 29:case"end":return t.stop()}}),t,null,[[13,20]])})));return function(e,n,a){return t.apply(this,arguments)}}(),C={Mainnet:{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",chainID:i["a"].MainnetBeta},Testnet:{name:"testnet",endpoint:Object(s["h"])("testnet"),chainID:i["a"].Testnet},Devnet:{name:"devnet",endpoint:Object(s["h"])("devnet"),chainID:i["a"].Devnet},localnet:{name:"localnet",endpoint:"http://127.0.0.1:8899",chainID:i["a"].Devnet}},S=function(e,t){var n=e.div(t).toString(),a=e.mod(t).toString();if(e.lt(t)){for(var r=t.toString().length-e.toString().length,o="",i=0;i<r-1;i++)o+="0";return"".concat(n,".").concat(o).concat(a)}return"0"===a?"".concat(n):"".concat(n,".").concat(a)},$=function(e,t){var n=null===e||void 0===e?void 0:e.toString().trim().replace(/,/gi,"");if(n.indexOf(".")===n.length-1&&(n=n.replace(".","")),!new RegExp(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/).test(n))throw Error("Not a number");var a=R(n);if(a>t)throw Error("Decimals of your token are ".concat(t,". Please enter the amount with correct decimals"));if(0!==a){var r=n.replace(".","");return new o["u64"](new o["u64"](r).mul(new o["u64"](Math.pow(10,t-a))).toString())}return new o["u64"](new o["u64"](n).mul(new o["u64"](Math.pow(10,t))).toString())},M=function(e){var t=new l.a(Math.pow(2,64).toString());return new o["u64"](t.sub(e).sub(new l.a(100)).toString())},R=function(e){var t=e.toString().split(".");return t[1]?t[1].length:0},I=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=.01,e.next=3,window.solConnection.getBalance(window.solana.publicKey);case 3:return a=e.sent,r=parseFloat(a/Math.pow(10,9)),e.abrupt("return",r-n>t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,o){var i,s,c,l,u,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.solana.publicKey){e.next=3;break}return m["Message"].error("Please connect your wallet."),e.abrupt("return");case 3:if(!t){e.next=10;break}if(i=O(t),!i){e.next=9;break}n.add(i),e.next=10;break;case 9:return e.abrupt("return");case 10:return n.setSigners.apply(n,[window.solana.publicKey].concat(Object(a["a"])(r.map((function(e){return e.publicKey}))))),e.next=13,window.solConnection.getRecentBlockhash("max");case 13:if(n.recentBlockhash=e.sent.blockhash,r.forEach((function(e){n.partialSign(e)})),s="",e.prev=16,!window.solana.signTransaction){e.next=28;break}return e.next=20,window.solana.signTransaction(n);case 20:return c=e.sent,console.log("signed",c),e.next=24,window.solConnection.sendRawTransaction(c.serialize(),{skipPreflight:!1,preflightCommitment:"singleGossip"});case 24:return s=e.sent,console.log("txidtxidtxidtxid",s),e.next=28,window.solConnection.confirmTransaction(s,"singleGossip");case 28:e.next=36;break;case 30:e.prev=30,e.t0=e["catch"](16),l="Something went wrong.",e.t0.message&&(u=e.t0.message,l=u.includes("Attempt to debit an account but found no record of a prior credit")?"Insufficient balance in your wallet..":e.t0.message),e.t0["logs"]&&(d=e.t0["logs"],f=d.filter((function(e){return e.includes("Error")})),f.length&&(l=f[0].split(":")[2]||f[0].split(":")[1]||f[0])),m["Message"].error(l);case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,null,[[16,30]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),O=function(e){try{if(!window.solana.publicKey)throw new Error("Missing master wallet");var t=y(e);return console.log(t,"raterateraterate"),s["e"].transfer({fromPubkey:window.solana.publicKey,toPubkey:w,lamports:t*Math.pow(10,9)})}catch(n){return m["Message"].error(n.message),!1}},B=function(e){var t=new l.a("");try{if("string"===typeof e){var n=new RegExp("[a-km-zA-HJ-NP-Z1-9]{32,44}$");if(!n.test(e))return;var a=d.a.decode(e);if(32!==a.length)return;t=new l.a(a)}else t=new l.a(e);if(t.byteLength()>32)return}catch(r){return!1}return!0},N=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n,a){var r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new o["Token"](window.solConnection,n,o["TOKEN_PROGRAM_ID"],window.solana.publicKey),t.next=3,o["Token"].getAssociatedTokenAddress(r.associatedProgramId,r.programId,n,window.solana.publicKey);case 3:return i=t.sent,t.next=6,a.getAccountInfo(i);case 6:if(s=t.sent,null!==s){t.next=9;break}return t.abrupt("return");case 9:if(s.owner.equals(o["TOKEN_PROGRAM_ID"])){t.next=11;break}return t.abrupt("return");case 11:if(s.data.length===o["AccountLayout"].span){t.next=13;break}return t.abrupt("return");case 13:return t.abrupt("return",o["AccountLayout"].decode(e.from(s.data)));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tx",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=p["a"].state.sol.solNetwork,a={Mainnet:"",Testnet:"?cluster=testnet",Devnet:"?cluster=devnet"},r=a[n]||a["Mainnet"];return"https://explorer.solana.com/".concat(e,"/").concat(t).concat(r)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return-1===e.indexOf(",")?new s["a"](d.a.decode(e)):new s["a"](JSON.parse(e))}catch(t){return!1}}}).call(this,n("fd40").Buffer)},d6e4:function(e,t,n){"use strict";n("9dbb")}}]);