(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c88d5208"],{1306:function(e,t,n){},"62f6":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n("05d6"),n("65f0"),n("8b79");var r=function(e,t){var n=(100*(e/t-1)).toFixed(2);return Number(n)},a=function(e){if("undefined"!==typeof e){var t=e>0?"+":"";return"".concat(t).concat(Number(e.toFixed(2)),"%")}}},c074:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[n("el-tag",{staticClass:"info",attrs:{effect:"dark",type:"danger"}},[e._v(" CoinTool.App ")]),n("grid-layout",{attrs:{layout:e.list,"col-num":12,"row-height":30,"is-draggable":!0,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!0,margin:[1,1],"use-css-transforms":!0},on:{"update:layout":function(t){e.list=t}}},e._l(e.list,(function(t){return n("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[n("div",{staticClass:"gridItem",style:{background:e.getBgColor(t.percent_change_24h),color:e.getTextColor(t.percent_change_24h)}},[n("span",{staticClass:"symbol",style:{fontSize:8*e.getCoinH(t.symbol)+"px"}},[e._v(e._s(t.symbol))]),n("span",{staticClass:"price",style:{fontSize:4+4*e.getCoinH(t.symbol)+"px"}},[e._v("$"+e._s(e._f("autoFixed")(t.price_usd)))]),n("span",{staticClass:"percent",style:{fontSize:8+2*e.getCoinH(t.symbol)+"px"}},[e._v(e._s(e.getRateText(t.percent_change_24h)))])])])})),1)],1)},a=[],o=n("4833"),c=(n("6a61"),n("a9b5"),n("8b79"),n("476c"),n("37de"),n("1e34"),n("22f9"),n("65f0"),n("ed08")),i=n("d1e0"),s=n.n(i),u=n("62f6"),l=null,d={name:"Market",components:{GridLayout:s.a.GridLayout,GridItem:s.a.GridItem},data:function(){return{loading:!0,list:[]}},mounted:function(){this.init(),this.onConnectWebSocket()},destroyed:function(){console.log("destroyed"),l.close()},deactivated:function(){console.log("deactivated"),l.close()},methods:{getRateText:function(e){return Object(u["b"])(e)},getSocketParams:function(){var e=["BTC","ETH","DOT","XRP","ADA","LINK","LTC","BCH","BNB","XLM","BSV","AAVE","EOS","XMR","XTZ","TRX","XEM","NEO","VET","UNI","THETA","SNX","FIL","ATOM","OKB","MKR","DAI","IOTA","SUSHI","HT","DASH","DOGE","AVAX","YFI","KSM","ETC","ZEC","ZIL","GRT","WAVES","UMA","DCR","REN","COMP","EGLD","OMG","BAT","NEAR","NANO","ICX","TUSD","ONT","LRC","NEXO","ZRX","QTUM","DGB","ENJ","ZEN","CRV","IOST","ALGO","MANA","KNC","REP","XVG","BAND","VGX","SEELE","SC","BTG","LSK","BNT","SNT","BAL","OXT","BCD","MATIC","ANT","GNO","HOT","MONA","CHZ","RLC","KCS","CVC","TOMO","UTK","FTM","FUN","DNT","ARDR","SXP","KAVA","YFII","NEST","GT","WICC","KMD","RVN","BTS","BTM","FET","IRIS","BTT","MLN","STEEM","SOL","IOTX","LOOM","TRAC","SYS","BRC","ETN","STORJ","ARK","VLX","WAN","TRB","ELA"],t=3e3,n=e.map((function(e){return'"'.concat(e.toLowerCase(),"usdt@miniTicker@").concat(t,'ms"')}));return n.join(",")},onConnectWebSocket:function(){var e=this;l&&l.close(),l=new WebSocket("wss://stream.yshyqxx.com/stream"),l.onopen=function(){l.send('{"method": "SUBSCRIBE","params":['.concat(e.getSocketParams(),'],"id": 1}'))},l.onmessage=function(t){try{for(var n=JSON.parse(t.data),r=n.stream&&n.stream.split("@")[0].replace("usdt","").toUpperCase(),a=0;a<e.list.length;a++)if(e.list[a].symbol===r){var o=Number(n.data.c),c=Number(n.data.o);e.list[a].price_usd=o,e.list[a].percent_change_24h=Object(u["a"])(o,c);break}}catch(i){console.log(i,"socket error")}},l.onclose=function(){console.log("socket close")}},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$ajax({url:"https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest",isProxy:!0,method:"get",timeout:6e4,headers:{"X-CMC_PRO_API_KEY":e.$ethUtils.getCoinmarketcapApiKey()},data:{}});case 3:return n=t.sent,t.abrupt("return",n);case 7:if(t.prev=7,t.t0=t["catch"](0),-1===t.t0.message.indexOf("429")){t.next=15;break}return t.next=12,Object(c["x"])(1e3);case 12:return t.next=14,e.getData();case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getBgColor:function(e){var t="";return e>=15?t="rgba(0, 153, 51, 1)":e>=10?t="rgba(0, 153, 51, 0.75)":e>=5?t="rgba(0, 153, 51, 0.5)":e>=.2?t="rgba(0, 153, 51, 0.25)":e<.2&&e>-.2?t="rgba(244, 244, 244, 1)":e>=-.2?t="rgba(243, 57, 57, 0.25)":e>=-5?t="rgba(243, 57, 57, 0.5)":e>=-10?t="rgba(243, 57, 57, 0.75)":e<-10&&(t="rgba(243, 57, 57, 0.9)"),t},getTextColor:function(e){var t="";return e>=15||e>=10?t="#fff":e>=5||e>=1||e<1&&e>-1||e>=-1||e>=-5?t="#000":(e>=-10||e<-10)&&(t="#fff"),t},getCoinW:function(e){var t={BTC:8,ETH:4,USDT:4};return t[e]?t[e]:2},getCoinH:function(e){var t={BTC:8,ETH:6};return t[e]?t[e]:2},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:n=t.sent,e.loading=!1,r=0,a=0,o=[],c=n.data,i=c.map((function(t,n){o.push(t.symbol);var c=Object.assign(t,{x:r,y:a,w:e.getCoinW(t.symbol),h:e.getCoinH(t.symbol),i:n,price_usd:t.quote.USD.price,percent_change_24h:t.quote.USD.percent_change_24h});return r+=e.getCoinW(t.symbol),r>=12&&(r=0,a++),c})),e.list=i;case 10:case"end":return t.stop()}}),t)})))()}}},g=d,f=(n("c66c"),n("5d22")),p=Object(f["a"])(g,r,a,!1,null,"4bd96f7b",null);t["default"]=p.exports},c66c:function(e,t,n){"use strict";n("1306")}}]);