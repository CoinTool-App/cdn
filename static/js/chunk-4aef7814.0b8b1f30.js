(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aef7814"],{1094:function(e,t,s){"use strict";s("d9c2")},"8d36":function(e,t,s){"use strict";s.r(t),t["default"]={zh:{eventRecord:{step_1:"填写上链信息",step_2:"等待打包上链",step_3:"完成",wallet:"钱包",desc:"内容",descValidate:"请输入要上链的内容",eth_num:"ETH 数量",contract_address:"合约地址",send_txidok:"信息已成功登记上区块链网络",loading_text:"区块链网络正在打包您的信息，请耐心等待.....",cancelOperation:"您取消了此次上链操作",cancel:"Close",createBtn:"立即创建",pageDesc:"去中心化、不可更改、永久记录"}},en:{eventRecord:{step_1:"Fill in the information",step_2:"Waiting for packing",step_3:"complete",wallet:"wallet",desc:"Content",descValidate:"Please enter desc",eth_num:"ETH number",contract_address:"Contract address",send_txidok:"The information has been successfully registered on the blockchain network",loading_text:"The blockchain network is packing your information, please wait patiently.....",cancelOperation:"You cancelled the operation",cancel:"Close",createBtn:"Create",pageDesc:"Decentralized, Unchangeable, Permanent record"}}}},a9c0:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("Card",{attrs:{icon:"coin-eth2","is-create-token":!1,title:e.$t("route.eventRecord"),desc:e.$t("eventRecord.pageDesc")}},[s("div",{staticClass:"box-card"},[s("div",{staticClass:"stepBox"},[s("el-steps",{attrs:{space:200,active:e.stepActive,"process-status":"wait","finish-status":"success","align-center":!0}},[s("el-step",{attrs:{title:e.$t("eventRecord.step_1")}}),s("el-step",{attrs:{title:e.$t("eventRecord.step_2")}}),s("el-step",{attrs:{title:e.$t("eventRecord.step_3")}})],1)],1),s("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"80px","label-position":e.isPc?"left":"top",rules:e.rules}},[s("el-form-item",{attrs:{label:e.$t("eventRecord.desc"),prop:"desc"}},[s("el-input",{attrs:{type:"textarea",rows:8,placeholder:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),s("el-form-item",{style:"textAlign: "+(e.isPc?"left":"center")},[s("el-button",{staticClass:"item-btn",attrs:{size:"medium",type:"primary",loading:2===e.stepActive},on:{click:e.onCreateRecord}},[e._v(" "+e._s(e.$t("eventRecord.createBtn"))+" ")])],1)],1),s("div",{staticClass:"tipBox"},[s("el-alert",{directives:[{name:"show",rawName:"v-show",value:3===e.stepActive,expression:"stepActive === 3"}],staticClass:"tips",attrs:{closable:!1,title:e.$t("eventRecord.send_txidok"),type:"success","show-icon":""}},[s("a",{attrs:{target:"_blank",href:e.blockTxurl+"/tx/"+e.blockHash}},[e._v(e._s(e.blockHash))])])],1)],1)])],1)},r=[],c=s("4833"),n=s("efe2"),o=(s("6a61"),s("8d36")),i=s("a835"),l=s("85d4"),d=s("8feb"),u=s.n(d),p=s("12f9"),m=s("52c1"),h="eventRecord",f=.03,v=1e5,g={name:"EventRecord",inject:["onCheckConnect"],components:{Card:p["a"]},data:function(){return{form:{contract_address:"",eth_num:.01,gas_price:"",gas_limit:v,hex:"",desc:""},rules:{},dialogFormVisible:!1,stepActive:0,blockTxurl:"",blockHash:""}},computed:Object(n["a"])({},Object(m["b"])(["isPc"])),watch:{"form.desc":function(e,t){this.stepActive=""!==e?1:0}},created:function(){this.$i18n.getLocaleMessage("en")[h]||(this.$i18n.mergeLocaleMessage("en",o["default"].en),this.$i18n.mergeLocaleMessage("zh",o["default"].zh)),this.rules={desc:[{required:!0,message:this.$t("eventRecord.descValidate"),trigger:"change"}]}},mounted:function(){},methods:{resetState:function(){this.blockHash=""},onCreateRecord:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["form"].validate();case 2:if(e.onCheckConnect()){t.next=4;break}return t.abrupt("return");case 4:e.resetState(),1!==i["a"].getChainId()&&(f=.01),e.form.eth_num=f,e.form.gas_price=i["a"].getGasprice(),e.form.contract_address=i["a"].resolveOneToMoreAddress(),e.blockTxurl=i["a"].resolveLinkOnEtherscan(),s=Object(l["toHex"])(e.form.desc),e.createTxByMetaMask(s);case 12:case"end":return t.stop()}}),t)})))()},createTxByMetaMask:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={from:i["a"].getAccount(),to:t.form.contract_address,value:Object(l["toHex"])(u.a.toWei(f,"ether")),data:e,chainId:i["a"].getChainId(),gasPrice:Object(l["toHex"])(u.a.toWei(t.form.gas_price,"gwei")),gas:Object(l["toHex"])(1e5)},t.stepActive=2,s.next=4,i["a"].createChainTx(a);case 4:r=s.sent,t.stepActive=3,200===r.code?(t.blockHash=r.transactionHash,t.stepActive=3):4001===r.code?(t.stepActive=1,t.$message.error(t.$t("eventRecord.cancelOperation"))):(t.$message({message:"Error：".concat(r.message),type:"error"}),t.stepActive=1);case 7:case"end":return s.stop()}}),s)})))()}}},b=g,_=(s("1094"),s("5d22")),k=Object(_["a"])(b,a,r,!1,null,"1bed3c50",null);t["default"]=k.exports},d9c2:function(e,t,s){}}]);