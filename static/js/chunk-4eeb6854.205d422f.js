(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eeb6854"],{"0171":function(t,e,i){t.exports=i.p+"static/img/elon.71779025.jpg"},"1e7e":function(t,e,i){t.exports=i.p+"static/img/5.56779b1b.png"},"1fe4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("ShareDialog",{ref:"ShareDialog",attrs:{text:"Are you a true Crypto enthusiast? Choose your laser eyes and tell the world! Update your profile picture today! ","twitter-tags":"LaserRayUntil100K"}}),i("div",{staticClass:"content"},[i("div",{staticClass:"topBox"},[i("div",{staticClass:"leftBox"},[i("h1",{staticClass:"title",domProps:{innerHTML:t._s(t.$t("cryptoEyes.title"))}}),i("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.$t("cryptoEyes.desc"))}}),i("div",{staticClass:"btnBox",on:{click:t.handleUploadClick}},[i("button",[i("i",{staticClass:"el-icon-camera-solid icon"}),i("span",[t._v(t._s(t.$t("cryptoEyes.pickPhoto")))])]),i("input",{ref:"inputUpload",staticStyle:{display:"none"},attrs:{type:"file",multiple:"",accept:"image/*"},on:{change:t.handleImgUploadChange}})])]),i("div",{staticClass:"rightBox"},[i("div",{staticClass:"rightBoxSize"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowNewAvatar,expression:"!isShowNewAvatar"}],staticClass:"board"},[i("div",{ref:"bgImg",staticClass:"imgBox",style:t.bgImg.style},t._l(t.maskList,(function(e,n){return i("vue-draggable-resizable",{key:n,attrs:{w:e.width,h:e.height,x:e.x,y:e.y,"min-width":50,"min-height":50,handles:["tl","tm","mr","br","bm","bl","ml"],"class-name":"dragBox"},on:{dragging:t.onDrag,resizing:t.onResize,activated:function(e){return t.onActivated(n)}}},[i("div",{staticClass:"closeBox",on:{click:function(e){return t.onRemoveMask(n)}}},[i("i",{staticClass:"el-icon-error icon"})]),i("div",{staticClass:"maskBox"},[i("img",{attrs:{src:e.imgUrl,alt:"img err"}})])])})),1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowBgImg,expression:"!isShowBgImg"}],staticClass:"imgTips"},[t._v(" "+t._s(t.$t("cryptoEyes.selectTips"))+" ")]),i("img",{directives:[{name:"show",rawName:"v-show",value:t.isShowNewAvatar,expression:"isShowNewAvatar"}],staticClass:"new-avatar",attrs:{src:t.newAvatar.imgUrl}}),i("div",{staticClass:"opBox"},[i("div",{staticClass:"iconBtn",on:{click:t.onShare}},[i("i",{staticClass:"el-icon-share icon"}),i("span",{staticClass:"label"},[t._v(t._s(t.$t("cryptoEyes.share")))])]),i("div",{staticClass:"iconBtn",on:{click:t.onDownload}},[i("i",{staticClass:"el-icon-download icon"}),i("span",{staticClass:"label"},[t._v(t._s(t.$t("cryptoEyes.download")))])])])])]),i("MaskTab",{attrs:{"active-tab":t.activeTab},on:{onChangeList:t.onChangeList}}),i("MaskList",{attrs:{list:t.tabsMaskList},on:{onAddMask:t.onAddMask}}),i("p",{staticClass:"copyright"},[i("el-link",{attrs:{type:"success",target:"_blank",href:this.$origin}},[t._v("CoinTool.App")])],1)],1)],1)},r=[],a=i("4833"),o=i("efe2"),s=(i("7479"),i("c9b2"),i("f597"),i("6a61"),i("52c1")),c={zh:{cryptoEyes:{title:"CREATE<br>CRYPTO EYES",desc:"你是一个真正的加密货币爱好者吗?<br>选择你的激光眼，告诉全世界!",pickPhoto:"选择图片",selectTips:"请选择图片",share:"分享",download:"下载",placeUploadImg:"请先上传图片",isShowNewAvatarTips:"已生成，请重新选择图片",phoneSave:"生成图片成功，请长按图片保存",pcSave:"图片下载成功",christmasHat:"圣诞帽子",eyes:"激光眼"}},en:{cryptoEyes:{title:"CREATE<br>CRYPTO EYES",desc:"Are you a true Crypto enthusiast? <br>Choose your laser eyes and tell the world!",pickPhoto:"Pick Photo",selectTips:"Please select picture",share:"Share",download:"Download",placeUploadImg:"Please pick a picture first",isShowNewAvatarTips:"Already generated, please re-select the image",phoneSave:"Image generated successful. please hold down the image to save",pcSave:"Download Success",christmasHat:"Christmas hat",eyes:"Eyes"}}},u=i("dc5e"),h=i("624b"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"maskList"},[i("ul",{staticClass:"ul"},t._l(t.list,(function(e,n){return i("li",{key:n,staticClass:"li",style:{backgroundImage:"url("+e.imgUrl+")"},on:{click:function(i){return t.handleSelectClick(e.imgUrl)}}})})),0)])},f=[],d={props:{list:{require:!0,type:Array}},data:function(){return{}},created:function(){},methods:{handleSelectClick:function(t){this.$emit("onAddMask",t)}}},g=d,p=(i("edf6"),i("5d22")),m=Object(p["a"])(g,l,f,!1,null,"d9fbd4ac",null),v=m.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"maskTab"},[i("ul",{staticClass:"ul"},t._l(t.list,(function(e,n){return i("li",{key:n,class:"li "+(e.key===t.activeTab?"on":""),on:{click:function(i){return t.onChangeTab(e.key)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])},y=[],w=(i("a9b5"),i("5e28")),x=i.n(w),k=i("6b01"),C=i.n(k),j=i("5455"),_=i.n(j),O=i("b24a"),I=i.n(O),S=i("1e7e"),A=i.n(S),M=i("8252"),P=i.n(M),T=i("aa1b"),L=i.n(T),E=i("daf6"),U=i.n(E),R=i("42c1"),N=i.n(R),$=i("91b1"),D=i.n($),B=i("cb20"),q=i.n(B),W=i("ecac"),z=i.n(W),H=i("45bbf"),F=i.n(H),Y={data:function(){return{activeTab:"eyes",christmasList:[{name:"christmas1",imgUrl:x.a},{name:"christmas2",imgUrl:C.a},{name:"christmas3",imgUrl:_.a},{name:"christmas4",imgUrl:I.a},{name:"christmas5",imgUrl:A.a}],eyesList:[{name:"light-hit-1",imgUrl:P.a},{name:"light-hit-2",imgUrl:L.a},{name:"light-hit-3",imgUrl:U.a},{name:"light-hit-4",imgUrl:N.a},{name:"light-hit-5",imgUrl:D.a},{name:"light-hit-6",imgUrl:q.a},{name:"light-hit-7",imgUrl:z.a},{name:"light-hit-8",imgUrl:F.a}],list:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])(["language"])),{},{coinList:function(){var t=["btc","eth","bnb","sol","shib","ht","doge","trx","ftm","matic","avax","celo","kcc","movr"];return t.map((function(t){return{name:t,imgUrl:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/token/".concat(t,".png")}}))}}),watch:{language:{handler:function(t){this.list=[{key:"eyes",label:this.$t("cryptoEyes.eyes")},{key:"hat",label:this.$t("cryptoEyes.christmasHat")},{key:"coin",label:"Coin"}]},immediate:!0}},created:function(){this.onChangeTab("eyes")},methods:{onChangeTab:function(t){this.activeTab=t;var e={eyes:this.eyesList,hat:this.christmasList,coin:this.coinList};this.$emit("onChangeList",e[t])}}},G=Y,V=(i("a3bb"),Object(p["a"])(G,b,y,!1,null,"3cda2f86",null)),X=V.exports,J=i("20e7"),K=i.n(J),Z=i("548a"),Q=i.n(Z),tt=(i("e764"),i("0171")),et=i.n(tt),it="cryptoEyes",nt={name:it,inject:["onCheckConnect"],components:{ShareDialog:u["a"],VueDraggableResizable:K.a,MaskList:v,MaskTab:X},data:function(){return{activeTab:"eyes",isShowBgImg:!1,bgImg:{width:360,height:360,imgUrl:null,style:null},isShowNewAvatar:!1,newAvatar:{imgUrl:"",width:360,height:360},maskListActiveIndex:0,maskList:[],tabsMaskList:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(s["b"])(["isConnect","account","isPc","language","isAndroid"])),{},{scaleNumber:function(){return this.isPc?1:2}}),created:function(){this.$i18n.getLocaleMessage("en")[it]||(this.$i18n.mergeLocaleMessage("en",c.en),this.$i18n.mergeLocaleMessage("zh",c.zh))},mounted:function(){this.onViewDemo()},methods:{onViewDemo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])(et.a,"elon");case 2:return i=e.sent,e.next=5,t.handleImgUploadChange(i,!0);case 5:t.isPc&&(t.maskList=[{width:75,height:75,x:114,y:90,imgUrl:q.a},{width:75,height:75,x:155,y:90,imgUrl:q.a},{width:140,height:140,x:120,y:0,imgUrl:x.a},{width:56,height:56,x:280,y:20,imgUrl:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/token/doge.png"}]);case 6:case"end":return e.stop()}}),e)})))()},onChangeList:function(t){this.tabsMaskList=t},onReupload:function(){this.isShowNewAvatar=!1,this.isShowBgImg=!1,this.maskList=[]},handleImgUploadChange:function(t){var e=arguments,i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]&&e[1],n.prev=1,n.abrupt("return",new Promise((function(e){var n=null;n=r?t:t.target.files[0];var a=new FileReader;if(i.isShowNewAvatar&&(i.isShowNewAvatar=!1),!/image.*/.test(n.type))return e(),!1;i.onReupload(),a.readAsDataURL(n),a.onload=function(t){var n=new Image;n.src=t.target.result,n.onload=function(){var r=n.height*(i.$refs.bgImg.offsetWidth/n.width);i.bgImg.height=r*i.scaleNumber,i.bgImg.width=i.$refs.bgImg.offsetWidth*i.scaleNumber,i.bgImg.imgUrl=t.target.result,i.bgImg.style={backgroundImage:"url(".concat(t.target.result,")"),backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"".concat(r,"px")},i.isShowBgImg=!0,e()}}})));case 5:return n.prev=5,n.t0=n["catch"](1),n.abrupt("return",!1);case 8:case"end":return n.stop()}}),n,null,[[1,5]])})))()},handleUploadClick:function(){this.$refs["inputUpload"].click()},onResize:function(t,e,i,n){var r=Object(o["a"])(Object(o["a"])({},this.maskList[this.maskListActiveIndex]),{},{x:t,y:e,width:i,height:n});this.$set(this.maskList,this.maskListActiveIndex,r)},onRemoveMask:function(t){this.maskList.splice(t,1)},onActivated:function(t){this.maskListActiveIndex=t},onDrag:function(t,e){var i=Object(o["a"])(Object(o["a"])({},this.maskList[this.maskListActiveIndex]),{},{x:t,y:e});this.$set(this.maskList,this.maskListActiveIndex,i)},onAddMask:function(t){if(this.isShowBgImg)if(this.isShowNewAvatar)this.$message.error(this.$t("cryptoEyes.isShowNewAvatarTips"));else if(0===this.maskList.length)this.maskList.push({width:75,height:75,x:this.isPc?100:20,y:this.isPc?100:40,imgUrl:t});else{var e=this.maskList[this.maskList.length-1];this.maskList.push(Object(o["a"])(Object(o["a"])({},e),{},{x:70,imgUrl:t}))}else this.$message.error(this.$t("cryptoEyes.placeUploadImg"))},onShare:function(){this.$refs.ShareDialog.show()},onDownloadImg:function(){var t=document.createElement("a");t.download="crypto-eyes.png",t.style.display="none",t.href=this.newAvatar.imgUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onDownload:function(){var t=this;if(this.isShowBgImg){var e=new Q.a({width:this.bgImg.width,height:this.bgImg.height}),i=e.background(this.bgImg.imgUrl,{left:0,top:0,type:"contain"});this.maskList.forEach((function(e){i=i.add(e.imgUrl,{width:e.width*t.scaleNumber,height:e.height*t.scaleNumber,pos:{x:e.x*t.scaleNumber,y:e.y*t.scaleNumber}})})),i.draw({type:"png",quality:1,success:function(e){t.newAvatar.imgUrl=e,t.newAvatar.width=t.bgImg.width,t.newAvatar.height=t.bgImg.height,t.isShowNewAvatar=!0,t.isPc||t.isAndroid?(t.onDownloadImg(),t.$message.success(t.$t("cryptoEyes.pcSave"))):t.$message.success(t.$t("cryptoEyes.phoneSave"))}})}else this.$message.error(this.$t("cryptoEyes.placeUploadImg"))}}},rt=nt,at=(i("2412"),Object(p["a"])(rt,n,r,!1,null,"27983625",null));e["default"]=at.exports},2412:function(t,e,i){"use strict";i("f62f")},"42c1":function(t,e,i){t.exports=i.p+"static/img/light-hit-4.048c5de9.png"},"45bbf":function(t,e,i){t.exports=i.p+"static/img/light-hit-8.ecd3a90b.png"},5455:function(t,e,i){t.exports=i.p+"static/img/3.e5f6ab6a.png"},"548a":function(t,e,i){!function(e,i){t.exports=i()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";i.d(e,"g",(function(){return n.a})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return s})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return u})),i.d(e,"k",(function(){return h})),i.d(e,"d",(function(){return l})),i.d(e,"i",(function(){return f})),i.d(e,"j",(function(){return d})),i.d(e,"h",(function(){return p}));var n=i(1);function r(t){var e={},i=e.toString,n=e.hasOwnProperty,r=n.toString,a=r.call(Object);if(!t||"[object Object]"!==i.call(t))return!1;var o=Object.getPrototypeOf(t);if(!o)return!0;var s=n.call(o,"constructor")&&o.constructor;return"function"==typeof s&&r.call(s)===a}function a(){for(var t,e,i,n,o,s,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var h=arguments[0]||{},l=1,f=arguments.length,d=!1;for("boolean"==typeof h&&(d=h,h=arguments[l]||{},l++),"object"!=typeof h&&"function"!=typeof h&&(h={}),l===f&&(h=this,l--);l<f;l++)if(null!==(t=arguments[l]))for(e in t)if(t.hasOwnProperty(e)){if(o=h[e],h===(n=t[e]))continue;d&&n&&(r(n)||(s=Array.isArray(n)))?(s?(s=!1,i=o&&Array.isArray(o)?o:[]):i=o&&r(o)?o:{},h[e]=a(d,i,n)):void 0!==n&&(h[e]=n)}return h}function o(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])}function s(){var t=window.navigator.userAgent.toLowerCase(),e=/(iPhone|iPad|iPod|iOS)/gi.test(t),i=/(iPad)/gi.test(t);if(e){var n=i?t.match(/cpu os (\d*)/):t.match(/iphone os (\d*)/);return!!(n&&+n[1]<9)}return!1}function c(t){return"IMG"===t.tagName?{iw:t.naturalWidth,ih:t.naturalHeight}:{iw:t.width,ih:t.height}}function u(t,e){return t.indexOf&&-1!==t.indexOf(e)}function h(t,e,i,r){var a=i;if(n.a.str(i))if(u(i,":")&&"pos"===r){var o=i.split(":"),s=o[0],c=o[1];switch(s){case"left":case"top":a=+c.replace("px","");break;case"right":case"bottom":a=t-+c.replace("px","")-e}}else a=u(i,"px")?+i.replace("px",""):u(i,"%")?("crop"===r?e:t)*+i.replace("%","")/100:u(["top","left"],i)?0:u(["bottom","right"],i)?t-e:"center"===i?(t-e)/2:"origin"===i?e:+i;return Math.round(a)}function l(t,e){var i=e;return n.a.str(e)&&(i=u(e,"px")?+e.replace("px",""):u(e,"%")?t*+e.replace("%","")/100:"center"===e?t/2:+e),Math.round(i)}function f(t){throw new Error("[MCanvas ERROR]: "+t)}function d(t){throw new Error("[MCanvas WARN]: "+t)}function g(t){return!!/[\ |\s*(.*?)\s+$|\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\，|\。|\“|\”|\‘|\’|\¥|\？|\（|\）|\；|\：|\、|\！|\<|\.|\>|\/|\?]/g.test(t)}function p(t){if(!n.a.str(t))return[];var e,i=[],r=t.length,a="";for(e=0;e<r;e++){var o=t[e];/^[A-Za-z]+$/g.test(o)?(a+=o,g(t[e+1])&&(i.push(a),a="")):i.push(o)}return i}},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n={};function r(t){var e=n.toString.call(t);return null===t?t+"":Number.isNaN(t)?"NaN":"object"==typeof t||"function"==typeof t?n[e]||"object":typeof t}"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach((function(t){n["[object "+t+"]"]=t.toLowerCase()}));var a={primitive:function(t){return["string","number"].includes(r(t))},array:function(t){return"array"===r(t)},str:function(t){return"string"===r(t)},obj:function(t){return"object"===r(t)},arr:function(t){return"array"===r(t)},num:function(t){return"number"===r(t)},fn:function(t){return"function"===r(t)},undef:function(t){return"undefined"===r(t)},def:function(t){return!a.undef(t)},null:function(t){return"null"===r(t)},empty:function(t){switch(r(t)){case"object":return 0===Object.keys(t).length;case"array":return 0===t.length;case"string":return!t.trim();case"undefined":case"null":case"NaN":case"boolean":return!0;default:return!1}},Nil:function(t){return["null","undefined"].includes(r(t))},NaN:function(t){return"NaN"===r(t)},promise:function(t){return!!t&&(a.obj(t)||a.fn(t))&&a.fn(t.then)}}},function(t,e,i){t.exports=i(4)},function(t,e,i){"use strict";i.r(e),i.d(e,"_Canvas",(function(){return r}));var n=i(0),r={name:"WebCanvas",create:function(t,e){void 0===t&&(t=500),void 0===e&&(e=500);var i=document.createElement("canvas"),r=i.getContext("2d");return n.g.num(t)&&(i.width=t),n.g.num(e)&&(i.height=e),[i,r]},loadImage:function(t){return new Promise((function(e,i){var n=new Image;0===t.indexOf("http")&&(n.crossOrigin="*"),n.onload=function(){return e(n)},n.onerror=function(){return i("img load error.url: "+t)},n.src=t}))}}},function(t,e,i){"use strict";i.r(e),i.d(e,"MCanvas",(function(){return c})),i.d(e,"MImage",(function(){return _}));var n=i(0),r=i(3)._Canvas,a={getImage:function(t){return"string"==typeof t?o.loadImage(t):"object"==typeof t?Promise.resolve(t):Promise.reject("getImage error, src="+t)},drawRoundRectPath:function(t,e,i,n){t.beginPath(),t.arc(e-n,i-n,n,0,Math.PI/2),t.lineTo(n,i),t.arc(n,i-n,n,Math.PI/2,Math.PI),t.lineTo(0,n),t.arc(n,n,n,Math.PI,3*Math.PI/2),t.lineTo(e-n,0),t.arc(e-n,n,n,3*Math.PI/2,2*Math.PI),t.lineTo(e,i-n),t.closePath()},drawRoundRect:function(t,e,i,n,r,o,s,c,u){void 0===o&&(o=0),void 0===s&&(s="#fff"),void 0===c&&(c=0),void 0===u&&(u="#000");var h=Math.min(n,r);2*o>h&&(o=h/2),t.save(),t.translate(e,i),a.drawRoundRectPath(t,n,r,o),t.fillStyle=s,t.fill(),t.lineWidth=c,t.strokeStyle=u,t.stroke(),t.restore()}},o=Object(n.b)(!0,r,a);function s(t,e){var i=Object(n.e)(t),r=i.iw,a=i.ih,s=Object(n.b)(!0,{x:0,y:0,width:"100%",height:"100%",radius:0},e),c=s.width,u=s.height,h=s.x,l=s.y,f=s.radius;(c=Object(n.d)(r,c))>r&&(c=r),(u=Object(n.d)(a,u))>a&&(u=a),h=Object(n.k)(r,c,h,"pos"),l=Object(n.k)(a,u,l,"pos"),f=Object(n.d)(r,f);var d=o.create(c,u),g=d[0],p=d[1];return g.width=c,g.height=u,o.drawRoundRect(p,0,0,c,u,f),p.globalCompositeOperation="source-in",p.drawImage(t,-h,-l,r,a),{cvs:g,ctx:p}}var c=function(){function t(t){void 0===t&&(t={}),this.queue=[],this.fn={success:function(){},error:function(t){}},this.data={textId:0,text:{},bgConfig:null},this._defaultFontFamily="helvetica neue,hiragino sans gb,Microsoft YaHei,arial,tahoma,sans-serif",this.ops=Object(n.b)({width:500,height:500,backgroundColor:""},t),this._init()}return t.prototype._init=function(){var t,e=this.ops,i=e.width,n=e.height,r=e.backgroundColor;t=o.create(i,n),this.cvs=t[0],this.ctx=t[1],r&&this._setBgColor(r)},t.prototype.background=function(t,e){var i=this;return void 0===e&&(e={type:"origin"}),t||this.data.bgConfig?(t?(e.image=t,this.data.bgConfig=e):this.data.bgConfig&&(e=this.data.bgConfig),this.queue.push((function(){e.color&&i._setBgColor(e.color),o.getImage(e.image).then((function(t){return i._background(t,e)})).catch(i.fn.error)})),this):(Object(n.i)("the init background must has a image."),this)},t.prototype._setBgColor=function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.cvs.width,this.cvs.height)},t.prototype._getBgAlign=function(t,e,i,r){var a;return n.g.str(t)?"50%"===t||"center"===t?a=Math.abs((e-i/r)/2):"100%"===t?a=Math.abs(e-i/r):"0%"===t&&(a=0):a=n.g.num(t)?t:0,a},t.prototype._background=function(t,e){var i,r,a,o,s,c,u,h,l,f=Object(n.e)(t),d=f.iw,g=f.ih,p=d/g,m=this.cvs.width/this.cvs.height;switch(e.type){case"crop":p>m?(a=g*m,o=g,l=this.cvs.height/g):(o=(a=d)/m,l=this.cvs.width/d),i=this._getBgAlign(e.left,d,this.cvs.width,l),r=this._getBgAlign(e.top,g,this.cvs.height,l),c=s=0,h=this.cvs.height,u=this.cvs.width;break;case"contain":r=i=0,a=d,o=g,p>m?(h=(u=this.cvs.width)/p,s=e.left||0,c=e.top||0===e.top?e.top:(this.cvs.height-h)/2):(u=(h=this.cvs.height)*p,c=e.top||0,s=e.left||0===e.left?e.left:(this.cvs.width-u)/2);break;case"origin":this.cvs.width=d,this.cvs.height=g,i=r=0,a=d,o=g,s=c=0,u=this.cvs.width,h=this.cvs.height;break;default:return void Object(n.i)("background type error!")}this.ctx.drawImage(t,i,r,a,o,s,c,u,h),this._next()},t.prototype.rect=function(t){var e=this;return void 0===t&&(t={}),this.queue.push((function(){var i=e.cvs,r=i.width,a=i.height,s=t.fillColor,c=void 0===s?"#fff":s,u=t.strokeColor,h=void 0===u?c:u,l=t.strokeWidth,f=void 0===l?0:l,d=t.radius,g=void 0===d?0:d,p=t.width,m=void 0===p?100:p,v=t.height,b=void 0===v?100:v,y=t.x,w=void 0===y?0:y,x=t.y,k=void 0===x?0:x;m=Object(n.k)(r,0,m,"pos")-2*f,b=Object(n.k)(a,0,b,"pos")-2*f,w=Object(n.k)(r,m,w,"pos")+(Object(n.f)(w,"right")?-f:f),k=Object(n.k)(a,b,k,"pos")+(Object(n.f)(k,"bottom")?-f:f),o.drawRoundRect(e.ctx,w,k,m,b,g,c,f,h),e._resetCtx()._next()})),this},t.prototype.circle=function(t){var e=this;return void 0===t&&(t={}),this.queue.push((function(){var i=t.fillColor,r=void 0===i?"#fff":i,a=t.strokeColor,o=void 0===a?r:a,s=t.strokeWidth,c=void 0===s?0:s,u=e.cvs,h=u.width,l=u.height,f=t.x,d=void 0===f?0:f,g=t.y,p=void 0===g?0:g,m=t.radius,v=void 0===m?100:m,b=Object(n.k)(h,0,v,"pos")-2*c;d=Object(n.k)(h,2*b,d,"pos")+b+(Object(n.f)(d,"right")?-c:c),p=Object(n.k)(l,2*b,p,"pos")+b+(Object(n.f)(p,"bottom")?-c:c),e.ctx.beginPath(),e.ctx.arc(d,p,b,0,2*Math.PI,!1),e.ctx.fillStyle=r,e.ctx.fill(),e.ctx.strokeStyle=o,e.ctx.lineWidth=c,e.ctx.stroke(),e.ctx.closePath(),e._resetCtx()._next()})),this},t.prototype._resetCtx=function(){return this.ctx.setTransform(1,0,0,1,0,0),this},t.prototype.watermark=function(t,e){if(void 0===e&&(e={}),!t)return Object(n.i)("there is not image of watermark."),this;var i=e.width,r=void 0===i?"40%":i,a=e.pos,o=void 0===a?"rightbottom":a,s=e.margin,c=void 0===s?20:s,u={x:0,y:0,scale:1,rotate:0};switch(o){case"leftTop":u.x="left:"+c,u.y="top:"+c;break;case"leftBottom":u.x="left:"+c,u.y="bottom:"+c;break;case"rightTop":u.x="right:"+c,u.y="top:"+c;break;case"rightBottom":u.x="right:"+c,u.y="bottom:"+c}return this.add(t,{width:r,pos:u}),this},t.prototype.add=function(t,e){var i=this,r={width:"100%",crop:{x:0,y:0,width:"100%",height:"100%",radius:0},pos:{x:0,y:0,scale:1,rotate:0}};return(n.g.arr(t)?t:[{image:t,options:e}]).map((function(t){var e=t.image,a=t.options;i.queue.push((function(){o.getImage(e).then((function(t){i._add(t,i._handleOps(t,Object(n.b)(!0,r,a)))})).catch(i.fn.error)}))})),this},t.prototype._add=function(t,e){var i,r=e.crop,a=e.pos,c=e.width;0===c&&Object(n.j)("the width of mc-element is zero");var u,h,l,f,d=Object(n.e)(t),g=d.iw,p=d.ih,m=r.width,v=r.height,b=r.radius;(m!==g||v!==p||b>0)&&(t=s(t,r).cvs);var y,w,x,k,C,j,_=m/v,O=g>p?g/p:p/g,I=1.4*O>5?5:1.4*O,S=o.create(Math.round(m*I),Math.round(v*I)),A=S[0],M=S[1],P=Object(n.a)()&&(A.width>2096||A.height>2096)?2096:4096,T=_>1?P/A.width:P/A.height;y=-Math.round(m/2),w=-Math.round(v/2),x=m,k=Math.round(m/_),(A.width>P||A.height>P)&&T&&(i=[A.width,A.height,y,w,x,k].map((function(t){return Math.round(t*T)})),A.width=i[0],A.height=i[1],y=i[2],w=i[3],x=i[4],k=i[5]),M.translate(A.width/2,A.height/2),M.rotate(a.rotate),M.drawImage(t,y,w,x,k),l=Math.round(c*I),f=Math.round(l/_),j=(C=(I-1)*c/2)/_,u=Math.round(a.x+l*(1-a.scale)/2-C),h=Math.round(a.y+f*(1-a.scale)/2-j),l*=a.scale,f*=a.scale,this.ctx.drawImage(A,u,h,l,f),this._next()},t.prototype._getRotate=function(t){return n.g.str(t)?parseFloat(t)*Math.PI/180:n.g.num(t)?t*Math.PI/180:0},t.prototype._handleOps=function(t,e){var i,r,a=this.cvs,o=a.width,s=a.height,c=Object(n.e)(t),u=c.iw,h=c.ih,l=u/h,f=Object(n.k)(o,u,e.width,"pos"),d=Object(n.k)(o,u,e.crop.width,"crop"),g=Object(n.k)(s,h,e.crop.height,"crop"),p={width:d,height:g,x:Object(n.k)(u,d,e.crop.x,"crop"),y:Object(n.k)(h,g,e.crop.y,"crop"),radius:Object(n.d)(d,e.crop.radius)};p.x>u&&(p.x=u),p.y>h&&(p.y=h),i=u-p.x,r=h-p.y,p.width>i&&(p.width=i),p.height>r&&(p.height=r);var m=e.pos,v=m.x,b=m.y,y=m.rotate,w=m.scale,x=void 0===w?1:w;return{width:f,crop:p,pos:{x:Object(n.k)(o,f,v,"pos"),y:Object(n.k)(s,f/l,b,"pos"),scale:x,rotate:this._getRotate(y)}}},t.prototype._createStyle=function(t,e){return{font:t+"px "+this._defaultFontFamily,lineHeight:e,color:"#000",type:"fill",lineWidth:1,wordBreak:!0,shadow:{color:null,blur:0,offsetX:0,offsetY:0}}},t.prototype.text=function(t,e){var i=this;void 0===e&&(e={});var r=this.cvs.width/20;return this.queue.push((function(){var a,o=Object(n.b)(!0,{width:300,align:"left",smallStyle:i._createStyle(.8*r,.9*r),normalStyle:i._createStyle(r,1.1*r),largeStyle:i._createStyle(1.3*r,1.4*r),pos:{x:0,y:0,rotate:0}},e),s=i._parse(String(t)),c=0;s.map((function(t){t.size>c&&(c=t.size,a=t.type)}));var u=parseInt(o[a+"Style"].font);u&&o.width<u&&(o.width=u),i._text(s,o),i._resetCtx()._next()})),this},t.prototype._parse=function(t){for(var e=t.split(/<s>|<b>/),i=[],n=0;n<e.length;n++){var r=e[n];if(/<\/s>|<\/b>/.test(r)){var a=/<\/s>/.test(r)?"</s>":"</b>",o=/<\/s>/.test(r)?"small":"large",s=e[n].split(a);i.push({type:o,text:s[0],size:"small"===o?0:2}),s[1]&&i.push({type:"normal",text:s[1],size:1})}else e[n]&&i.push({text:e[n],type:"normal",size:1})}return i},t.prototype._text=function(t,e){var i=this;this.data.textId++,this.data.text[this.data.textId]={};var r,a=e.width=Object(n.k)(this.cvs.width,0,e.width,"pos"),s=1,c=0,u=this._getLineHeight(t,e),h=Object(n.k)(this.cvs.width,a,0,"pos"),l=Object(n.k)(this.cvs.height,0,0,"pos")+u;this.data.text[this.data.textId][s]={data:[],lineWidth:0},t.map((function(t){r=e[t.type+"Style"],i.ctx.font=r.font;var o=i.ctx.measureText(t.text).width,f=t.text.replace(/<br>/g,"|");if(c+o>a||Object(n.f)(f,"|")){r.wordBreak||(f=Object(n.h)(f));for(var d=0,g=f.length;d<g;d++){var p=f[d];o=i.ctx.measureText(p).width,(c+o>a||"|"===p)&&(h=c=0,l+=u,s+=1,i.data.text[i.data.textId][s]={data:[],lineWidth:0},"|"===p)||((m=i.data.text[i.data.textId][s]).data.push({context:p,x:h,y:l,style:r,width:o}),h+=o,m.lineWidth=c+=o)}}else{var m;(m=i.data.text[i.data.textId][s]).data.push({context:f,x:h,y:l,style:r,width:o}),h+=o,m.lineWidth=c+=o}}));var f=o.create(a,this._getTextRectHeight(s)),d=f[0],g=f[1],p=d.height,m=d.width,v=Object(n.k)(this.cvs.width,m,e.pos.x,"pos"),b=Object(n.k)(this.cvs.height,p,e.pos.y,"pos");Object(n.c)(this.data.text[this.data.textId],(function(t,n){var r=0;n.lineWidth<a&&("center"===e.align?r=(a-n.lineWidth)/2:"right"===e.align&&(r=a-n.lineWidth)),n.data.map((function(t){t.x+=r,i._fillText(g,t)}))})),this.ctx.translate(v+m/2,b+p/2),this.ctx.rotate(this._getRotate(e.pos.rotate)),this.ctx.drawImage(d,-m/2,-p/2,m,p)},t.prototype._getLineHeight=function(t,e){var i,n=0;return t.map((function(t){(i=e[t.type+"Style"].lineHeight)>n&&(n=i)})),n},t.prototype._fillText=function(t,e){var i=e.context,r=e.x,a=e.y,o=e.style,s=o.align,c=o.lineWidth,u=o.shadow,h=o.font,l=o.gradient,f=o.lineHeight,d=u.color,g=u.blur,p=u.offsetX,m=u.offsetY;if(t.font=h,t.textAlign=s,t.textBaseline="alphabetic",t.lineWidth=c,t.shadowColor=d,t.shadowBlur=g,t.shadowOffsetX=p,t.shadowOffsetY=m,l){var v=l.type,b=l.colorStop,y=void 0,w=void 0,x=void 0,k=void 0;1===v?(y=r,w=a,x=r+e.width,k=a):(y=r,w=a-f,x=r,k=a);var C=t.createLinearGradient(y,w,x,k),j=b.length||0;Object(n.c)(b,(function(t,e){C.addColorStop(1/j*(+t+1),e)})),t[o.type+"Style"]=C}else t[o.type+"Style"]=o.color;t[o.type+"Text"](i,r,a),this._resetCtx()},t.prototype._getTextRectHeight=function(t){var e=this.data.text[this.data.textId][t].data[0];return e.y+e.style.lineHeight},t.prototype.draw=function(t){var e=this;return void 0===t&&(t={}),new Promise((function(i,r){var a={type:"jpeg",quality:.9,exportType:"base64",success:function(t){},error:function(t){}};n.g.fn(t)?a.success=t:"jpg"===(a=Object(n.b)(!0,a,t)).type&&(a.type="jpeg"),e.fn.error=function(t){a.error(t),r(t)},e.fn.success=function(){"canvas"===a.exportType?(a.success(e.cvs),i(e.cvs)):setTimeout((function(){var t=e.cvs.toDataURL("image/"+a.type,a.quality);a.success(t),i(t)}),0)},e._next()}))},t.prototype._next=function(){if(this.queue.length>0){this.ctx.save();var t=this.queue.shift();t&&t(),this.ctx.restore()}else this.fn.success()},t.prototype.clear=function(){return this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height),this},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function u(t,e,i,n){return new(i||(i=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,s)}c((n=n.apply(t,e||[])).next())}))}function h(t,e){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function l(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n}Object.create,Object.create;var f=i(1),d=function(){function t(t){var e=this;this.isFirst=!0,this.queue=[],this._next=function(t){if(e.isFirst||(t=e.after(t)),e.queue.length>0){var i=e.queue.shift();i&&(t=e.before(t),i(e._next,t),e.isFirst=!1)}else e.end(t),e.queue=[]};var i=t||{},n=i.before,r=void 0===n?function(t){return t}:n,a=i.after,o=void 0===a?function(t){return t}:a;this.before=r,this.after=o}return t.prototype.push=function(t){f.a.fn(t)&&this.queue.push(t)},t.prototype.perform=function(t,e){this.end=t,this._next(e)},t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function t(){this._queue=new d}t.prototype.line=function(t){var e=this;return this._queue.push((function(i,n){setTimeout((function(){return u(e,void 0,void 0,(function(){var e;return h(this,(function(r){return e=t(n),f.a.promise(e)?e.then(i):i(e),[2]}))}))}),0)})),this},t.prototype.start=function(t,e){this._queue.perform(t,e)}}();var p=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],m=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function v(t,e,i,n,r){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==g(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,i,n,r)}catch(t){throw new Error("unable to access image data: "+t)}}function b(t,e,i,n,r,a){if(!(isNaN(a)||a<1)){a|=0;var o=v(t,e,i,n,r);o=function(t,e,i,n,r,a){var o,s,c,u,h,l,f,d,g,v,b,w,x,k,C,j,_,O,I,S,A,M,P,T,L,E=t.data,U=2*a+1,R=n-1,N=r-1,$=a+1,D=$*($+1)/2,B=new y,q=B;for(c=1;c<U;c++)q=q.next=new y,c===$&&(L=q);q.next=B;var W=null,z=null;f=l=0;var H=p[a],F=m[a];for(s=0;s<r;s++){for(j=_=O=I=d=g=v=b=0,w=$*(S=E[l]),x=$*(A=E[l+1]),k=$*(M=E[l+2]),C=$*(P=E[l+3]),d+=D*S,g+=D*A,v+=D*M,b+=D*P,q=B,c=0;c<$;c++)q.r=S,q.g=A,q.b=M,q.a=P,q=q.next;for(c=1;c<$;c++)u=l+((R<c?R:c)<<2),d+=(q.r=S=E[u])*(T=$-c),g+=(q.g=A=E[u+1])*T,v+=(q.b=M=E[u+2])*T,b+=(q.a=P=E[u+3])*T,j+=S,_+=A,O+=M,I+=P,q=q.next;for(W=B,z=L,o=0;o<n;o++)E[l+3]=P=b*H>>F,0!==P?(P=255/P,E[l]=(d*H>>F)*P,E[l+1]=(g*H>>F)*P,E[l+2]=(v*H>>F)*P):E[l]=E[l+1]=E[l+2]=0,d-=w,g-=x,v-=k,b-=C,w-=W.r,x-=W.g,k-=W.b,C-=W.a,u=f+((u=o+a+1)<R?u:R)<<2,j+=W.r=E[u],_+=W.g=E[u+1],O+=W.b=E[u+2],I+=W.a=E[u+3],d+=j,g+=_,v+=O,b+=I,W=W.next,w+=S=z.r,x+=A=z.g,k+=M=z.b,C+=P=z.a,j-=S,_-=A,O-=M,I-=P,z=z.next,l+=4;f+=n}for(o=0;o<n;o++){for(_=O=I=j=g=v=b=d=0,w=$*(S=E[l=o<<2]),x=$*(A=E[l+1]),k=$*(M=E[l+2]),C=$*(P=E[l+3]),d+=D*S,g+=D*A,v+=D*M,b+=D*P,q=B,c=0;c<$;c++)q.r=S,q.g=A,q.b=M,q.a=P,q=q.next;for(h=n,c=1;c<=a;c++)l=h+o<<2,d+=(q.r=S=E[l])*(T=$-c),g+=(q.g=A=E[l+1])*T,v+=(q.b=M=E[l+2])*T,b+=(q.a=P=E[l+3])*T,j+=S,_+=A,O+=M,I+=P,q=q.next,c<N&&(h+=n);for(l=o,W=B,z=L,s=0;s<r;s++)E[3+(u=l<<2)]=P=b*H>>F,P>0?(P=255/P,E[u]=(d*H>>F)*P,E[u+1]=(g*H>>F)*P,E[u+2]=(v*H>>F)*P):E[u]=E[u+1]=E[u+2]=0,d-=w,g-=x,v-=k,b-=C,w-=W.r,x-=W.g,k-=W.b,C-=W.a,u=o+((u=s+$)<N?u:N)*n<<2,d+=j+=W.r=E[u],g+=_+=W.g=E[u+1],v+=O+=W.b=E[u+2],b+=I+=W.a=E[u+3],W=W.next,w+=S=z.r,x+=A=z.g,k+=M=z.b,C+=P=z.a,j-=S,_-=A,O-=M,I-=P,z=z.next,l+=n}return t}(o,0,0,n,r,a),t.getContext("2d").putImageData(o,e,i)}}var y=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function w(t,e){void 0===e&&(e=20);var i=t.width,n=t.height,r=t.getContext("2d");return b(t,0,0,i,n,e),[t,r]}function x(t,e){void 0===e&&(e="hor");var i,n,r,a,o=t.width,s=t.height,c=t.getContext("2d"),u=c.getImageData(0,0,o,s).data,h=c.createImageData(o,s),l=h.data;for(i=0;i<s;i++)for(n=0;n<o;n++)r=4*(i*o+n),l[a="hor"===e?4*(i*o+(o-n-1)):4*((s-i-1)*o+n)]=u[r],l[a+1]=u[r+1],l[a+2]=u[r+2],l[a+3]=u[r+3];return c.putImageData(h,0,0),[t,c]}function k(t){var e,i,n=t.width,r=t.height,a=t.getContext("2d"),o=a.getImageData(0,0,n,r).data,s=a.createImageData(n,r),c=s.data;for(e=0;e<o.length;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],c[e]=c[e+1]=c[e+2]=i,c[e+3]=o[e+3];return a.putImageData(s,0,0),[t,a]}function C(t,e){void 0===e&&(e=10);var i,n,r,a,o,s,c,u,h,l,f,d,g,p,m,v=t.width,b=t.height,y=t.getContext("2d"),w=y.getImageData(0,0,v,b).data,x=y.createImageData(v,b),k=x.data,C=Math.ceil(v/e),j=Math.ceil(b/e);for(i=0;i<j;i++)for((s=(o=i*e)+e)>b&&(s=b),n=0;n<C;n++){for((a=(r=n*e)+e)>v&&(a=v),d=g=p=m=0,f=(a-r)*(s-o),u=o;u<s;u+=1)for(h=u*v,c=r;c<a;c+=1)d+=w[l=h+c<<2],g+=w[l+1],p+=w[l+2],m+=w[l+3];for(d=d/f+.5|0,g=g/f+.5|0,p=p/f+.5|0,m=m/f+.5|0,u=o;u<s;u++)for(h=u*v,c=r;c<a;c++)k[l=h+c<<2]=d,k[l+1]=g,k[l+2]=p,k[l+3]=m}return y.putImageData(x,0,0),[t,y]}function j(t,e,i){void 0===e&&(e=2),void 0===i&&(i=32);var n,r,a,o,s,c,u,h,l,f,d,g,p,m,v,b,y,w,x=t.width,k=t.height,C=t.getContext("2d"),j=C.getImageData(0,0,x,k).data,_=C.createImageData(x,k),O=_.data,I=[],S=[],A=[],M=[],P=[],T=[],L=0;for(c=0;c<k;c++)for(s=0;s<x;s++){for(u=0;u<i;u++)I[u]=S[u]=A[u]=M[u]=P[u]=T[u]=0;for(h=-e;h<=e;h++)if(!((n=c+h)<0||n>=k))for(a=n*x,l=-e;l<=e;l++)(r=s+l)<0||r>=x||(f=j[o=a+r<<2],m=(d=j[o+1])*i>>8,v=(g=j[o+2])*i>>8,M[p=f*i>>8]+=f,P[m]+=d,T[v]+=g,I[p]+=1,S[m]+=1,A[v]+=1);for(b=y=w=0,u=1;u<i;u++)I[u]>I[b]&&(b=u),S[u]>S[y]&&(y=u),A[u]>A[w]&&(w=u);O[L]=M[b]/I[b]|0,O[L+1]=P[y]/S[y]|0,O[L+2]=T[w]/A[w]|0,O[L+3]=j[L+3],L+=4}return C.putImageData(_,0,0),[t,C]}var _=function(){function t(t){this._image=t,this._queue=new d,this.clear()}return t.prototype.clear=function(){return this._getImage()._drawCanvas(),this},t.prototype._drawCanvas=function(){return this._run((function(t){var e=Object(n.e)(t),i=e.iw,r=e.ih,a=o.create(i,r),s=a[0],c=a[1];return c.drawImage(t,0,0,i,r),{cvs:s,ctx:c}}))},t.prototype._getImage=function(){var t=this;return this._run((function(){return new Promise((function(e){return u(t,void 0,void 0,(function(){var t=this;return h(this,(function(i){return n.g.str(this._image)?o.getImage(this._image).then((function(i){return e(t._image=i)})).catch(this._error):e(this._image),[2]}))}))}))}))},t.prototype._run=function(t){var e=this;return this._queue.push((function(i,r){setTimeout((function(){return u(e,void 0,void 0,(function(){var e;return h(this,(function(a){return e=t(r),n.g.promise(e)?e.then(i):i(e),[2]}))}))}),0)})),this},t.prototype.draw=function(t){var e=this;return void 0===t&&(t={}),new Promise((function(i,r){var a={type:"jpeg",quality:1,exportType:"base64",success:function(t){},error:function(t){}};n.g.fn(t)?a.success=t:"jpg"===(a=Object(n.b)(!0,a,t)).type&&(a.type="jpeg");var o=a.exportType,s=a.type,c=a.quality,u=a.success,h=a.error,l=function(t){u(t),i(t),e.clear()};e._error=function(t){h(t),r(t)},e._queue.perform((function(t){var e=t.cvs,i=t.quality;"canvas"===o?l(e):setTimeout((function(){var t=e.toDataURL("image/"+s,i||c);l(t)}),0)}))}))},t.prototype.crop=function(t){return void 0===t&&(t={}),this._run((function(e){return s(e.cvs,t)}))},t.prototype.compress=function(t){return void 0===t&&(t={}),this._run((function(e){var i=e.cvs,r=e.ctx,a=t.quality,s=t.width,c=t.height,u=i.width/i.height;if(!n.g.num(s)&&!n.g.num(c))return{cvs:i,ctx:r,quality:a};n.g.num(s)||(s=c*u),n.g.num(c)||(c=s/u);var h=o.create(s,c),l=h[0],f=h[1];return f.drawImage(i,0,0,s,c),{cvs:l,ctx:f,quality:a}}))},t.prototype.filter=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this._run((function(i){var n,r,a,o,s,c=i.cvs,u=c,h=i.ctx;switch(t){case"blur":u=(n=w.apply(void 0,l([c],e)))[0],h=n[1];break;case"flip":u=(r=x.apply(void 0,l([c],e)))[0],h=r[1];break;case"gray":u=(a=k(c))[0],h=a[1];break;case"mosaic":u=(o=C.apply(void 0,l([c],e)))[0],h=o[1];break;case"oil":u=(s=j.apply(void 0,l([c],e)))[0],h=s[1]}return{cvs:u,ctx:h}}))},t}();e.default=c}])}))},"5e28":function(t,e,i){t.exports=i.p+"static/img/1.6481b56c.png"},"624b":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s}));var n=i("4833"),r=(i("6a61"),i("37de"),i("22f9"),i("63f1"),i("e3a7"),i("7479"),i("91cc"),i("2c1c"),i("48c5"),i("0f02"),i("782e"),i("fceb"),i("e5cb"),i("ecfe"),i("0e9c"),i("cfa9"),i("6bfd"),i("583c"),i("1e68"),i("b0c7"),i("6237"),i("7ad5"),i("ff5e"),i("b606"),i("3a56"),i("7e59"),i("5bf0"),i("f6ed"),i("3f1a"),i("eb26"),i("65f0"),function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){i.height=r.height,i.width=r.width,n.drawImage(r,0,0);var t=i.toDataURL("image/png");e(t),i=null},r.src=t}),a=function(t,e){var i=t.split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),a=r.length,o=new Uint8Array(a);while(a--)o[a]=r.charCodeAt(a);return new File([o],e,{type:n})},o=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.length>1&&void 0!==n[1]?n[1]:"imgName",t.abrupt("return",new Promise((function(t){r(e,(function(e){var n=a(e,i);t(n)}))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number(new Date),i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",e);var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!0,!1,0,null),i.dispatchEvent(n)}},"68fb":function(t,e,i){},"6b01":function(t,e,i){t.exports=i.p+"static/img/2.2fd4051f.png"},8252:function(t,e,i){t.exports=i.p+"static/img/light-hit-1.808de3e1.png"},"91b1":function(t,e,i){t.exports=i.p+"static/img/light-hit-5.8047e00b.png"},a3bb:function(t,e,i){"use strict";i("f3583")},aa1b:function(t,e,i){t.exports=i.p+"static/img/light-hit-2.35b3bce3.png"},b24a:function(t,e,i){t.exports=i.p+"static/img/4.4339c1cb.png"},cb20:function(t,e,i){t.exports=i.p+"static/img/light-hit-6.d5d80367.png"},daf6:function(t,e,i){t.exports=i.p+"static/img/light-hit-3.c4f099c3.png"},ecac:function(t,e,i){t.exports=i.p+"static/img/light-hit-7.4d971ba1.png"},edf6:function(t,e,i){"use strict";i("68fb")},f3583:function(t,e,i){},f62f:function(t,e,i){}}]);