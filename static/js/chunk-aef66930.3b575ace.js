(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aef66930"],{"0a32":function(e,t,a){},"0ada":function(e,t,a){},3125:function(e,t,a){},"391d":function(e,t,a){"use strict";a("0a32")},"6c6a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("SwapStatusSuccess",{ref:"SwapStatusSuccess",attrs:{token1:e.token1,token2:e.token2,tx:e.swapTxhash}}),a("SettingDialog",{ref:"SettingDialog",attrs:{form:e.settingForm},on:{onUpdateSetting:e.onUpdateSetting}}),a("SelectTokenDialog",{ref:"SelectTokenDialog",attrs:{config:e.config,"eth-balance":e.ethBalance},on:{onSelectItem:e.onSelectItem}}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:e.$logo,alt:"logo"}})]),a("span",[e._v("CoinTool Swap")])]),a("div",{staticClass:"swap-content"},[a("div",{staticClass:"swap-header"},[a("div",{staticClass:"leftBox"},[a("el-select",{attrs:{size:"mini"},model:{value:e.exchange,callback:function(t){e.exchange=t},expression:"exchange"}},e._l(e.exchangeArr,(function(e){return a("el-option",{key:e.address,attrs:{label:e.name,value:e.address}})})),1)],1),a("div",{staticClass:"iconBox"},[a("i",{staticClass:"el-icon-refresh-left icon",on:{click:e.onResetData}}),a("i",{staticClass:"el-icon-setting icon",on:{click:function(t){return e.$refs.SettingDialog.show()}}}),a("i",{staticClass:"el-icon-question icon"})])]),a("div",{staticClass:"panel-box"},[a("div",{staticClass:"swap-panel"},[a("div",{staticClass:"balance"},[e._v(e._s(e.$t("swap.balance"))+": "+e._s(e.token1.balance/Math.pow(10,e.token1.decimals))+" "+e._s(e.token1.symbol))]),a("div",{staticClass:"maxBtn",on:{click:e.onMax}},[e._v("MAX")]),a("div",{staticClass:"select-swap",on:{click:function(t){return e.$refs.SelectTokenDialog.show(e.token1,"top")}}},[a("div",{staticClass:"imgBox"},[a("el-image",{staticClass:"img",attrs:{src:e.token1.logo}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/unknown-token.png"}})])])],1),a("div",{staticClass:"vertical-middle"},[a("span",{staticClass:"symbol"},[e._v(e._s(e.token1.symbol))]),a("span",{staticClass:"network"},[e._v(e._s(e.token1.name))])]),a("i",{staticClass:"el-icon-caret-bottom"})]),a("div",{staticClass:"input-amount-wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.token1.amount,expression:"token1.amount"}],staticClass:"amount-input",attrs:{type:"number",placeholder:"0.0"},domProps:{value:e.token1.amount},on:{input:function(t){t.target.composing||e.$set(e.token1,"amount",t.target.value)}}})])]),a("div",{staticClass:"swap-panel"},[a("div",{staticClass:"balance"},[e._v(e._s(e.$t("swap.balance"))+": "+e._s(e.token2.balance/Math.pow(10,e.token2.decimals))+" "+e._s(e.token2.symbol))]),a("div",{staticClass:"select-swap",on:{click:function(t){return e.$refs.SelectTokenDialog.show(e.token2,"bottom")}}},[a("div",{staticClass:"imgBox"},[a("el-image",{staticClass:"img",attrs:{src:e.token2.logo}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/unknown-token.png"}})])])],1),a("div",{staticClass:"vertical-middle"},[a("span",{staticClass:"symbol"},[e._v(e._s(e.token2.symbol))]),a("span",{staticClass:"network"},[e._v(e._s(e.token2.name))])]),a("i",{staticClass:"el-icon-caret-bottom caret-bottom-icon"})]),a("div",{staticClass:"input-amount-wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.token2.amount,expression:"token2.amount"}],staticClass:"amount-input",attrs:{type:"number",placeholder:"0.0"},domProps:{value:e.token2.amount},on:{input:function(t){t.target.composing||e.$set(e.token2,"amount",t.target.value)}}})])]),a("div",{staticClass:"exchangeBox",on:{click:e.onSwapTokenInfo}},[e.swapTokenInfoLoading?a("i",{staticClass:"el-icon-loading icon"}):a("span",[a("i",{staticClass:"el-icon-bottom icon"}),a("i",{staticClass:"el-icon-sort icon"})])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"tipsBox"},[a("el-alert",{attrs:{title:"余额不足",type:"error",closable:!1}})],1),a("div",{staticClass:"btnBox"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.approveStatus,expression:"!approveStatus"}],staticClass:"btn",attrs:{type:"success",loading:e.swapLoading},on:{click:e.onSwap}},[e._v("Swap")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.approveStatus,expression:"approveStatus"}],staticClass:"btn",attrs:{type:"success"},on:{click:e.sendApprove}},[e._v("Approve")])],1),a("div",{staticClass:"exchangeInfo"},[a("ul",[a("li",[a("span",{staticClass:"label"},[e._v(e._s(e.$t("swap.exchangRoute")))]),a("span",{staticClass:"value"},[e._v(" "+e._s(e.path)+" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.path,expression:"path"}],attrs:{content:e.$t("swap.bestRoute"),effect:"dark",placement:"top"}},[a("i",{staticClass:"el-icon-success"})])],1)]),a("li",[a("span",{staticClass:"label"},[e._v(e._s(e.$t("swap.referencePrice")))]),a("span",{staticClass:"value"},[e._v(" 1 "+e._s(e.token1.symbol)+" = "+e._s(e.rate)+" "+e._s(e.token2.symbol)+" "),a("i",{staticClass:"el-icon-refresh icon"})])]),a("li",[a("span",{staticClass:"label"},[e._v(e._s(e.$t("swap.priceImpact")))]),a("span",{staticClass:"value"},[e._v("-"+e._s(e.priceImpact)+"%")])])])])])])],1)},s=[],o=a("e7e7"),r=a("4833"),i=a("efe2"),c=a("5937"),l=(a("7479"),a("4a32"),a("65f0"),a("37de"),a("1e34"),a("7fe9"),a("9bdd"),a("8b79"),a("fdea"),a("dfe9"),a("6a61"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog",attrs:{width:e.isPc?"600px":"90%",height:"800px",visible:e.isShowDialog,modal:!0,title:"Select a Token"},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("div",{staticClass:"dialogBox"},[a("div",{staticClass:"inputBox"},[a("el-input",{attrs:{placeholder:"Search token name or contract address","prefix-icon":"el-icon-search",clearable:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),a("ul",{staticClass:"baseCoin"},e._l(e.baseCoinList,(function(t,n){return a("li",{key:n,on:{click:function(a){return e.onSelectItem(t)}}},[a("el-image",{staticClass:"img",attrs:{src:t.logo}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:t.logo}})])]),a("span",{staticClass:"symbol"},[e._v(e._s(t.symbol))])],1)})),0),a("el-tabs",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"All",name:"all"}},[a("ul",{staticClass:"coinList"},[a("li",{on:{click:function(t){return e.onSelectItem(e.baseNcoin)}}},[a("TokenInfo",{attrs:{item:e.baseNcoin}})],1),e._l(e.allListArr,(function(t,n){return a("li",{key:n,on:{click:function(a){return e.onSelectItem(t)}}},[a("TokenInfo",{directives:[{name:"show",rawName:"v-show",value:t.name.toLowerCase().indexOf(e.address.toLowerCase())>-1||t.symbol.toLowerCase().indexOf(e.address.toLowerCase())>-1||t.address.toLowerCase().indexOf(e.address.toLowerCase())>-1,expression:"\n                (item.name.toLowerCase()).indexOf(address.toLowerCase()) > -1 ||\n                  (item.symbol.toLowerCase()).indexOf(address.toLowerCase()) > -1 ||\n                  (item.address.toLowerCase()).indexOf(address.toLowerCase()) > -1\n              "}],attrs:{item:t}})],1)}))],2)]),a("el-tab-pane",{attrs:{label:"My List",name:"my"}},[a("ul",{staticClass:"coinList"},e._l(e.myList,(function(t,n){return a("li",{key:n,on:{click:function(a){return e.onSelectItem(t)}}},[a("TokenInfo",{directives:[{name:"show",rawName:"v-show",value:t.name.toLowerCase().indexOf(e.address.toLowerCase())>-1||t.symbol.toLowerCase().indexOf(e.address.toLowerCase())>-1||t.address.toLowerCase().indexOf(e.address.toLowerCase())>-1,expression:"\n                (item.name.toLowerCase()).indexOf(address.toLowerCase()) > -1 ||\n                  (item.symbol.toLowerCase()).indexOf(address.toLowerCase()) > -1 ||\n                  (item.address.toLowerCase()).indexOf(address.toLowerCase()) > -1\n              "}],attrs:{item:t}})],1)})),0)])],1)],1)])}),d=[],p=a("5af6"),u=a("a892"),m=(a("a9b5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tokenInfo"},[a("div",{staticClass:"leftBox"},[a("el-image",{staticClass:"img",attrs:{src:e.item.logo}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/unknown-token.png"}})])]),a("div",{staticClass:"vertical-middle"},[a("span",{staticClass:"symbol"},[e._v(e._s(e.item.symbol))]),a("span",{staticClass:"fullName"},[e._v(e._s(e.item.name))])])],1),a("div",{staticClass:"rightBox"},[e._v(" "+e._s(e.item.balance/Math.pow(10,e.item.decimals))+" ")])])}),b=[],h=a("52c1"),f={components:{},props:{item:{require:!0,type:Object}},data:function(){return{}},computed:Object(i["a"])({},Object(h["b"])(["isConnect","account","isPc","language"])),created:function(){},mounted:function(){},methods:{}},g=f,k=(a("80ae"),a("5d22")),w=Object(k["a"])(g,m,b,!1,null,"c6875374",null),y=w.exports,v=a("cc3f"),x=a("a835"),T=[{inputs:[{internalType:"address",name:"_token",type:"address"}],name:"claimTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"router",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"uint256",name:"Amount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"Cswap",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"fee",type:"uint16"}],name:"setDevFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"contract IUniswapV2Router02",name:"router",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountOutFor",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IUniswapV2Router02",name:"router",type:"address"},{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"getPoolSize",outputs:[{internalType:"uint256",name:"amounts",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],R=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],S=a("e046"),C=a.n(S),O=a("ed08"),F=a("50fd"),_=a.n(F),N=a("7cbd"),W={components:{TokenInfo:y},data:function(){return{web3:null,multiCall:null,tokenHash:[],baseNcoin:null,tabName:"all",baseCoinList:[],BalanceList:[],allList:[],myList:[],address:"",loading:!0,isShowDialog:!1,selectTokenInfo:{},direction:"top"}},computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["isPc","account"])),{},{allListArr:function(){var e,t=this.BalanceList.concat(this.allList),a=[],n=Object(u["a"])(t);try{for(n.s();!(e=n.n()).done;){var s,o=e.value,r=!0,i=Object(u["a"])(a);try{for(i.s();!(s=i.n()).done;){var c=s.value;o.address.toLowerCase()===c.address.toLowerCase()&&(r=!1)}}catch(l){i.e(l)}finally{i.f()}r&&a.push(o)}}catch(l){n.e(l)}finally{n.f()}return a=a.sort(Object(O["u"])("balance",1)),a}}),props:{config:{require:!0,type:Object},ethBalance:{require:!0,type:N["string"]}},watch:{ethBalance:function(){console.log(222),this.baseNcoin={address:"0x0",name:this.config.baseToken.n_name,symbol:this.config.baseToken.n_symbol,logo:this.config.baseToken.n_logo,decimals:"18",balance:this.ethBalance}},config:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.web3=new _.a(new _.a.providers.HttpProvider(e.config.rpc)),a=x["a"].MULTI_CALL_CONTRACT(e.config.id),e.multiCall=new v["MultiCall"](e.web3,a),n=[],e.baseNcoin||(e.baseNcoin={address:"0x0",name:e.config.baseToken.n_name,symbol:e.config.baseToken.n_symbol,logo:e.config.baseToken.n_logo,decimals:"18",balance:0}),n.push(e.baseNcoin),n.push({address:e.config.baseToken.address,name:e.config.baseToken.name,symbol:e.config.baseToken.symbol,logo:e.config.baseToken.logo,decimals:"18"}),e.config.baseTokenList.map((function(e){n.push({address:e.address,symbol:e.symbol,name:e.name,decimals:e.decimals,logo:e.logo})})),e.baseCoinList=n,s=e.config.baseTokenList,s.push({address:e.config.baseToken.address,name:e.config.baseToken.name,symbol:e.config.baseToken.symbol,logo:e.config.baseToken.logo,decimals:"18"}),e.updateBaseTokenBalance(s),e.config.tokenlist&&e.getAlltokenList();case 13:case"end":return t.stop()}}),t)})))()}},created:function(){},mounted:function(){this.myList=[0,1,2,3,4,5,6,7,8].map((function(e){return{address:"0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82",symbol:"BTC",name:"biance token",balance:22}}))},methods:{updateBaseTokenBalance:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.map((function(e){var a=new C.a(R,e.address);return{balance:a.methods.balanceOf(t.account),decimals:e.decimals,name:e.name,symbol:e.symbol,logo:e.logo,address:e.address}})),console.log(n),a.next=4,t.multiCall.all([n]);case 4:s=a.sent,o=Object(p["a"])(s,1),r=o[0],console.log(r),t.BalanceList=r.filter((function(e){if(e.balance>0)return e}));case 9:case"end":return a.stop()}}),a)})))()},getAlltokenList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.config.id,t.next=56===t.t0?3:19;break;case 3:return t.prev=3,t.next=6,e.$ajax({url:e.config.tokenlist,method:"get"});case 6:return a=t.sent,n=a.tokens.map((function(t){var a=new C.a(R,t.address);return{balance:a.methods.balanceOf(e.account),address:t.address,symbol:t.symbol,name:t.name,decimals:String(t.decimals),logo:t.logoURI}})),t.next=10,e.multiCall.all([n]);case 10:s=t.sent,o=Object(p["a"])(s,1),r=o[0],e.allList=r,t.next=18;break;case 16:t.prev=16,t.t1=t["catch"](3);case 18:return t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,null,[[3,16]])})))()},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.selectTokenInfo=e,this.direction=t,this.isShowDialog=!this.isShowDialog},onSelectItem:function(e){this.selectTokenInfo=e,this.$emit("onSelectItem",this.selectTokenInfo,this.direction),this.isShowDialog=!this.isShowDialog}}},j=W,M=(a("dd05"),Object(k["a"])(j,l,d,!1,null,"71b46a7c",null)),B=M.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":!0,width:e.isPc?"500px":"90%",title:e.$t("swap.settings"),visible:e.isShowDialog,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("div",{staticClass:"dialogBox"},[a("el-form",{attrs:{model:e.form,"label-position":"top"}},[a("el-form-item",{staticClass:"item",attrs:{label:e.$t("swap.setting_gwei")}},[a("el-radio-group",{model:{value:e.form.gwei,callback:function(t){e.$set(e.form,"gwei",t)},expression:"form.gwei"}},[a("el-radio-button",{attrs:{label:e.list[0].price}},[e._v(e._s(e.$t("swap.fast"))+"("+e._s(e.list[0].price)+")")]),a("el-radio-button",{attrs:{label:e.list[1].price}},[e._v(e._s(e.$t("swap.normal"))+"("+e._s(e.list[1].price)+")")]),a("el-radio-button",{attrs:{label:e.list[2].price}},[e._v(e._s(e.$t("swap.slow"))+"("+e._s(e.list[2].price)+")")])],1),a("el-input",{staticClass:"customInput",attrs:{placeholder:"0.00",oninput:"value=value.replace(/[^\\d\\.]/g,'')"},on:{blur:e.onChangeCustomGwei},model:{value:e.form.gwei,callback:function(t){e.$set(e.form,"gwei",t)},expression:"form.gwei"}}),a("span",{staticClass:"per_span"},[e._v("Gwei")])],1),a("el-form-item",{staticClass:"item",attrs:{label:e.$t("swap.slippageTolerance")}},[a("el-radio-group",{model:{value:e.form.slippageTolerance,callback:function(t){e.$set(e.form,"slippageTolerance",t)},expression:"form.slippageTolerance"}},[a("el-radio-button",{attrs:{label:"0.1"}},[e._v("0.1%")]),a("el-radio-button",{attrs:{label:"0.5"}},[e._v("0.5%")]),a("el-radio-button",{attrs:{label:"1.0"}},[e._v("1.0%")]),a("el-radio-button",{attrs:{label:"3.0"}},[e._v("3.0%")])],1),a("el-input",{staticClass:"customInput",attrs:{oninput:"value=value.replace(/[^\\d\\.]/g,'')",placeholder:"1.00"},on:{blur:e.onChangeSlippageTolerance},model:{value:e.form.slippageTolerance,callback:function(t){e.$set(e.form,"slippageTolerance",t)},expression:"form.slippageTolerance"}}),a("span",{staticClass:"per_span"},[e._v("%")])],1),a("el-form-item",{staticClass:"item",attrs:{label:e.$t("swap.recipientAddress")}},[a("el-switch",{staticStyle:{"text-align":"center"},attrs:{"active-color":"#2AB079","inactive-color":"#666666"},model:{value:e.form.auto_sell,callback:function(t){e.$set(e.form,"auto_sell",t)},expression:"form.auto_sell"}})],1),a("el-form-item",{staticClass:"item",attrs:{label:e.$t("swap.swapEndTime")}},[a("el-input",{staticClass:"customInput",staticStyle:{"margin-left":"0"},attrs:{placeholder:"EX: 20",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.form.swapEndTime,callback:function(t){e.$set(e.form,"swapEndTime",t)},expression:"form.swapEndTime"}})],1)],1)],1)])},V=[],Z=(a("05d6"),a("d2c8")),U={components:{},props:{chainName:{require:!0,type:String},form:{require:!0,type:Object}},data:function(){return{isShowDialog:!1,newForm:null,list:[{type:"fast",price:0},{type:"normal",price:0},{type:"slow",price:0}]}},computed:Object(i["a"])({},Object(h["b"])(["isPc","language"])),deactivated:function(){this.isShowDialog=!1},destroyed:function(){this.isShowDialog=!1},created:function(){this.getGasPrice()},methods:{getGasPrice:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(Z["a"])("eth");case 2:a=t.sent,e.list=e.list.map((function(e){var t=Object(i["a"])(Object(i["a"])({},e),{},{price:a.data[e.type].price/1e9});return t})),e.form.gwei=e.list[0].price;case 5:case"end":return t.stop()}}),t)})))()},onChangeSlippageTolerance:function(){this.form.slippageTolerance<.1&&(this.form.slippageTolerance=.1),-1===this.form.slippageTolerance.indexOf(".")&&(this.form.slippageTolerance=Number(this.form.slippageTolerance).toFixed(1))},onChangeCustomGwei:function(){(""===this.form.gwei||Number(this.form.gwei)<=0)&&(this.form.gwei=.1)},show:function(){this.isShowDialog=!this.isShowDialog}}},E=U,D=(a("a6c2"),Object(k["a"])(E,L,V,!1,null,"f5e14c28",null)),I=D.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":!0,width:e.isPc?"500px":"90%",title:e.$t("swap.swapSuccess"),visible:e.isShowDialog,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("div",{staticClass:"dialogBox"},[a("div",{staticClass:"iconBox"},[a("i",{staticClass:"el-icon-circle-check icon"})]),a("div",{staticClass:"linkBox"},[a("a",{attrs:{target:"_blank",href:e.blockTxurl+"/tx/"+e.tx}},[a("span",[e._v("View on Block browser")]),a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"skip"}})],1)]),a("el-alert",{staticClass:"smaillBox",attrs:{title:"TX",type:"success",closable:!1,"show-icon":"",center:!1}},[a("el-link",{staticClass:"link",attrs:{type:"success",target:"_blank",href:e.blockTxurl+"/tx/"+e.tx}},[e._v(e._s(e.tx)+" ")]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.blockTxurl+"/tx/"+e.tx,expression:"`${blockTxurl}/tx/${tx}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"copy",attrs:{type:"text"}},[a("svg-icon",{attrs:{"icon-class":"copy"}})],1)],1)],1)])},Y=[],J={inject:["onCopySuccess"],components:{},props:{tx:{require:!0,type:String},token1:{require:!0,type:Object},token2:{require:!0,type:Object}},data:function(){return{isShowDialog:!1,blockTxurl:"",newForm:null}},computed:Object(i["a"])({},Object(h["b"])(["isPc","language"])),deactivated:function(){this.isShowDialog=!1},destroyed:function(){this.isShowDialog=!1},created:function(){},mounted:function(){this.blockTxurl=x["a"].resolveLinkOnEtherscan()},methods:{show:function(){this.isShowDialog=!this.isShowDialog}}},A=J,H=(a("391d"),Object(k["a"])(A,X,Y,!1,null,"13b6ac6c",null)),z=H.exports,G=a("8feb"),$=a.n(G),P=a("7921"),q=a.n(P),Q=a("85d4"),K=a("7742"),ee=a.n(K),te="swap",ae={name:te,inject:["onCheckConnect"],components:{SelectTokenDialog:B,SwapStatusSuccess:z,SettingDialog:I},data:function(){return{web3:null,multiCall:null,swapTokenInfoLoading:!1,swapLoading:!1,swapTxhash:"111",path:"",rate:"",priceImpact:"0",router:"",callPath:[],approveStatus:!1,baseName:"BNB Smart Chain",baseSymbol:"BNB",ethBalance:0,txFee:"",token1:{address:"0x0",name:"",symbol:"",balance:"",decimals:"",amount:""},token2:{address:"",name:"",symbol:"",balance:"",decimals:"",amount:""},settingForm:{auto_sell:!1,swapEndTime:"20",slippageTolerance:"0.1",gwei:"1",isOpenRecipientAddress:!1},exchange:"",exchangeArr:[],fees:"0.3",config:null}},computed:Object(i["a"])({},Object(h["b"])(["isConnect","account","isPc","language"])),watch:{"token1.amount":function(e){this.getTokenInputPrice()}},created:function(){},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={97:{id:97,tokenlist:"",baseToken:{n_name:"BNB",n_symbol:"BNB",n_logo:"https://cmp.dodoex.io/BWNSMMqu68bSFJsr9vsiCV09IonH3yuAkR9gQxaipBw/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vZDhvazF4akd3bU9GUXUtMVdzNEVRLVBNRnJYMW9DLXlmYTc3OGJUUkx0US9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMEpPUWw5alpEUTVNalE0TXpJMkwwSk9RbDlqWkRRNU1qUTRNekkyTG5CdVp3LnBuZw.webp",name:"WBNB",symbol:"WBNB",logo:"https://cmp.dodoex.io/BWNSMMqu68bSFJsr9vsiCV09IonH3yuAkR9gQxaipBw/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vZDhvazF4akd3bU9GUXUtMVdzNEVRLVBNRnJYMW9DLXlmYTc3OGJUUkx0US9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMEpPUWw5alpEUTVNalE0TXpJMkwwSk9RbDlqWkRRNU1qUTRNekkyTG5CdVp3LnBuZw.webp",address:"0xae13d989dac2f0debff460ac112a837c89baa7cd",decimals:18},baseTokenList:[{name:"BUSD Token",symbol:"BUSD",address:"0x78867BbEeF44f2326bF8DDd1941a4439382EF2A7",logo:"https://cmp.dodoex.io/BvxyffA5gsLB4bLmlOVkfu7AVami78-VcW_6_i8I6kc/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vbC1Sa25meFB3ZXlCOGVYSWJ2b04wdHczLTlzckZOckxfRHdTTnRLSHVRRS9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMlZ5WXpJd0wyaDBkSEJ6WDJOa2JsOXRaV1JwWVY5a2IyUnZaWGhmYVc5ZlluVnpaRjgyTXpsbFlqZzNZV0V4WDJKMWMyUmZOak01WldJNE4yRmhNVjlsT1dVMVlXRTBOemxtTG5OMlp3LnN2Zw.webp",decimals:"18"},{name:"Tether USD",symbol:"USDT",address:"0x7ef95a0fee0dd31b22626fa2e10ee6a223f8a684",logo:"https://cmp.dodoex.io/QOl7CvP_WSmTUOMthbxQsNKjDj0s5kSjup69dW_-UeA/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vTjdQU3RXV2ZGaGNTVzM1QlE2TEJIaF9keVROUEJqa1RLTXRwTll5cEhSWS9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMlZ5WXpJd0wyaDBkSEJ6WDJOa2JsOXRaV1JwWVY5a2IyUnZaWGhmYVc5ZmRYTmtkRjh4TlRZME1XWmpaRFF3WDNWelpIUmZNVFUyTkRGbVkyUTBNRjlqWmpJMVpUYzVZVE5qTG5OMlp3LnN2Zw.webp",decimals:"18"},{name:"Ethereum Token",symbol:"ETH",address:"0x8babbb98678facc7342735486c851abd7a0d17ca",logo:"https://cmp.dodoex.io/KWYmKxU_OCS1PmzuEO0xjdr1Yn08SjGBkyqSI8hxlpE/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vdkkyZF9rdFdyUzQyM0FqZlBLbkxRYloyRGVzTkpacmNTSlZNb1dYRnkyOC9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMWRGVkVoZmFXTnZibDh6TVRjd1pqTTBORGcxTDFkRlZFaGZhV052Ymw4ek1UY3daak0wTkRnMUxuQnVady5wbmc.webp",decimals:"18"}],rpc:"https://data-seed-prebsc-1-s1.binance.org:8545/",router:[{name:"Pancakeswap",address:"0x9Ac64Cc6e4415144C455BD8E4837Fea55603e5c3",logo:"https://pancakeswap.finance/favicon.ico"}],c_address:"0xa856A2f09aA1b84e0714ae85227910259c52407F"},56:{id:56,tokenlist:"https://tokens.pancakeswap.finance/pancakeswap-top-100.json",baseToken:{n_name:"BNB",n_symbol:"BNB",n_logo:"https://cmp.dodoex.io/BWNSMMqu68bSFJsr9vsiCV09IonH3yuAkR9gQxaipBw/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vZDhvazF4akd3bU9GUXUtMVdzNEVRLVBNRnJYMW9DLXlmYTc3OGJUUkx0US9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMEpPUWw5alpEUTVNalE0TXpJMkwwSk9RbDlqWkRRNU1qUTRNekkyTG5CdVp3LnBuZw.webp",name:"WBNB",symbol:"WBNB",logo:"https://cmp.dodoex.io/BWNSMMqu68bSFJsr9vsiCV09IonH3yuAkR9gQxaipBw/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vZDhvazF4akd3bU9GUXUtMVdzNEVRLVBNRnJYMW9DLXlmYTc3OGJUUkx0US9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMEpPUWw5alpEUTVNalE0TXpJMkwwSk9RbDlqWkRRNU1qUTRNekkyTG5CdVp3LnBuZw.webp",address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",decimals:18},baseTokenList:[{name:"BUSD Token",symbol:"BUSD",address:"0xe9e7cea3dedca5984780bafc599bd69add087d56",logo:"https://cmp.dodoex.io/BvxyffA5gsLB4bLmlOVkfu7AVami78-VcW_6_i8I6kc/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vbC1Sa25meFB3ZXlCOGVYSWJ2b04wdHczLTlzckZOckxfRHdTTnRLSHVRRS9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMlZ5WXpJd0wyaDBkSEJ6WDJOa2JsOXRaV1JwWVY5a2IyUnZaWGhmYVc5ZlluVnpaRjgyTXpsbFlqZzNZV0V4WDJKMWMyUmZOak01WldJNE4yRmhNVjlsT1dVMVlXRTBOemxtTG5OMlp3LnN2Zw.webp",decimals:"18"},{name:"Tether USD",symbol:"USDT",address:"0x55d398326f99059fF775485246999027B3197955",logo:"https://cmp.dodoex.io/QOl7CvP_WSmTUOMthbxQsNKjDj0s5kSjup69dW_-UeA/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vTjdQU3RXV2ZGaGNTVzM1QlE2TEJIaF9keVROUEJqa1RLTXRwTll5cEhSWS9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMlZ5WXpJd0wyaDBkSEJ6WDJOa2JsOXRaV1JwWVY5a2IyUnZaWGhmYVc5ZmRYTmtkRjh4TlRZME1XWmpaRFF3WDNWelpIUmZNVFUyTkRGbVkyUTBNRjlqWmpJMVpUYzVZVE5qTG5OMlp3LnN2Zw.webp",decimals:"18"},{name:"Binance-Peg USD Coin",symbol:"USDC",address:"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d",logo:"https://cmp.dodoex.io/sQ5dF3FkjjQUsmfqFFE5cKq-cthh4u0wUooBE5Epf-k/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vTDlEVElLa2dONG5mRkNTSF9GMUdXU3JiZkJDa2JZRTkwbmFDS0dIWnRsby9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMM1Z6WkdOZlpXVTFNbUV4WldReVlpOTFjMlJqWDJWbE5USmhNV1ZrTW1JdWNHNW4ucG5n.webp",decimals:"18"},{name:"BTCB Token",symbol:"BTCB",address:"0x7130d2a12b9bcbfae4f2634d864a1ee1ce3ead9c",logo:"https://cmp.dodoex.io/fZG0z_RZ1U73_LuuC3RGrrZvNR-bgrCUjkwvaro-PCY/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vZ1NXN0RuYWNkMnc2YWxSQnFmcENqTHNDZWJhc2VtQTc0dDJlTEdDZjhfNC9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMlZ5WXpJd0wyeHZaMjlmWmpJNVlXRmpZamxoTVM1d2JtYy5wbmc.webp",decimals:"18"},{name:"Ethereum Token",symbol:"ETH",address:"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",logo:"https://cmp.dodoex.io/KWYmKxU_OCS1PmzuEO0xjdr1Yn08SjGBkyqSI8hxlpE/rs:fit:96:96:0/g:no/aHR0cHM6Ly9pbWFnZS1wcm94eS5kb2RvZXguaW8vdkkyZF9rdFdyUzQyM0FqZlBLbkxRYloyRGVzTkpacmNTSlZNb1dYRnkyOC9hSFIwY0hNNkx5OWpaRzR0YldWa2FXRXVaRzlrYjJWNExtbHZMMWRGVkVoZmFXTnZibDh6TVRjd1pqTTBORGcxTDFkRlZFaGZhV052Ymw4ek1UY3daak0wTkRnMUxuQnVady5wbmc.webp",decimals:"18"}],rpc:"https://bsc-dataseed3.binance.org",router:[{name:"Pancakeswap",address:"0x10ed43c718714eb63d5aa57b78b54704e256024e",logo:"https://pancakeswap.finance/favicon.ico"}],c_address:""}},n=x["a"].getChainId()||56,56===n){t.next=5;break}return e.$notify.error({title:"Network Error",message:"This network is not supported at the moment！"}),t.abrupt("return");case 5:return e.config=a[n],e.exchangeArr=Object(o["a"])(a[n].router),e.exchangeArr.unshift({name:"All Swap",address:"0x0",logo:null}),e.exchange=e.exchangeArr[0].address,e.token1={name:e.config.baseToken.n_name,symbol:e.config.baseToken.n_symbol,logo:e.config.baseToken.logo,decimals:18,address:"0x0"},e.token2=e.config.baseTokenList[0],e.web3=new _.a(new _.a.providers.HttpProvider(e.config.rpc)),s=x["a"].MULTI_CALL_CONTRACT(parseInt(e.config.id)),e.multiCall=new v["MultiCall"](e.web3,s),t.next=16,Object(O["s"])(1e3);case 16:console.log(e.account),x["a"].getAccount()&&e.onUpdateBalance(!0);case 18:case"end":return t.stop()}}),t)})))()},methods:{onResetData:function(){var e={address:"",name:"",symbol:"",decimals:"",balance:"",amount:""};this.token1=e,this.token2=e},onSelectItem:function(e,t){var a=this.token1,n=this.token2;"top"===t?(this.token1=Object(i["a"])(Object(i["a"])({},this.token1),e),this.token2.address.toLowerCase()===this.token1.address.toLowerCase()&&(this.token2=a)):(this.token2=Object(i["a"])(Object(i["a"])({},this.token2),e),this.token2.address.toLowerCase()===this.token1.address.toLowerCase()&&(this.token1=n)),this.getTokenInputPrice(),this.onUpdateBalance(!1)},onSwapTokenInfo:function(){var e=[this.token2,this.token1];this.token1=e[0],this.token2=e[1]},onUpdateSetting:function(e){console.log(e,"item")},onMax:function(){if("0x0"===this.token1.address){var e=0,t=this.token1.balance;if(""!==this.token2.address){var a="0x"+ee.a.methodID("Cswap",["address","address","address","address","uint256","address"]).toString("hex")+ee.a.rawEncode(["address","address","address","address","uint256","address"],[this.router,this.baseToken,this.token1.address,this.token2.address,new q.a(Number(this.token1.balance)/2).times(Math.pow(10,this.token1.decimals)),x["a"].getAccount()]).toString("hex"),n={from:x["a"].getAccount(),to:this.c_address,value:Object(Q["toHex"])($.a.toWei(this.token1.amount,"ether")),data:a};e=$.a.toWei(new q.a(this.getEth_estimateGas(n)).times(this.gwei),"gwei")}0!==e&&(t=new q.a(t).minus(e)),this.token1=Object(i["a"])(Object(i["a"])({},this.token1),{},{amount:new q.a(t).div(Math.pow(10,parseInt(this.token1.decimals)))}),console.log(this.token1.balance,e)}else this.token1=Object(i["a"])(Object(i["a"])({},this.token1),{},{amount:new q.a(this.token1.balance).div(Math.pow(10,this.token1.decimals))})},onSwap:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="0x0",e.callPath[0].toLowerCase()===e.config.baseToken.address.toLowerCase()&&e.token1.symbol===e.config.baseToken.n_symbol&&(a="0x"+ee.a.methodID("swapExactETHForTokens",["address","address","address[]","address"]).toString("hex")+ee.a.rawEncode(["address","address","address[]","address"],[e.router,e.config.baseToken.address,e.callPath,x["a"].getAccount()]).toString("hex"),n=Object(Q["toHex"])($.a.toWei(e.token1.amount,"ether"))),e.callPath[e.callPath.length-1].toLowerCase()===e.config.baseToken.address.toLowerCase()&&e.token2.symbol===e.config.baseToken.n_symbol&&(console.log(2221,"ss"),a="0x"+ee.a.methodID("swapTokensForExactETH",["address","address","address[]","uint256","address"]).toString("hex")+ee.a.rawEncode(["address","address","address[]","uint256","address"],[e.router,e.config.baseToken.address,e.callPath,new q.a(e.token1.amount).times(Math.pow(10,e.token1.decimals)).toString(),x["a"].getAccount()]).toString("hex")),e.token1.symbol!==e.config.baseToken.n_symbol&&e.token2.symbol!==e.config.baseToken.n_symbol&&(a="0x"+ee.a.methodID("swapTokensForExactTokens",["address","address[]","uint256","address"]).toString("hex")+ee.a.rawEncode(["address","address[]","uint256","address"],[e.router,e.callPath,new q.a(e.token1.amount).times(Math.pow(10,e.token1.decimals)).toString(),x["a"].getAccount()]).toString("hex"),console.log("ttt",e.router,e.callPath,new q.a(e.token1.amount).times(Math.pow(10,e.token1.decimals)).toString())),e.swapLoading=!0,s={from:x["a"].getAccount(),to:e.config.c_address,value:n,data:a},t.next=8,e.getEth_estimateGas(s);case 8:if(o=t.sent,"error"!==o.status){t.next=12;break}return e.$alert("Error: "+o.value,"Error found",{confirmButtonText:"OK"}),t.abrupt("return");case 12:return console.log("onSwap"),t.prev=13,t.next=16,x["a"].sendTransaction(s);case 16:if(r=t.sent,!r){t.next=24;break}return e.swapTxhash=r,e.$refs.SwapStatusSuccess.show(),t.next=22,x["a"].getTransactionSuccess(r);case 22:i=t.sent,200===i.code?(e.onUpdateBalance(!1),e.$notify({title:"Success",message:"Successful transaction",type:"success"})):e.$notify.error({title:"Error",message:i.message});case 24:t.next=28;break;case 26:t.prev=26,t.t0=t["catch"](13);case 28:return t.prev=28,e.swapLoading=!1,t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[13,26,28,31]])})))()},getEth_estimateGas:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$ajax({url:t.config.rpc,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_estimateGas",params:[e]}});case 2:if(n=a.sent,null===n||void 0===n||!n.result){a.next=7;break}return a.abrupt("return",{status:"ok",value:parseInt(n.result)});case 7:return a.abrupt("return",{status:"error",value:null===n||void 0===n?void 0:n.error.message});case 8:case"end":return a.stop()}}),a)})))()},getTokenInfo:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.config.rpc,method:"post",data:[{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:e,data:"0x06fdde03"},"latest"]},{jsonrpc:"2.0",id:2,method:"eth_call",params:[{to:e,data:"0x95d89b41"},"latest"]},{jsonrpc:"2.0",id:3,method:"eth_call",params:[{to:e,data:"0x313ce567"},"latest"]},{jsonrpc:"2.0",id:4,method:"eth_call",params:[{to:e,data:"0x70a08231000000000000000000000000"+x["a"].getAccount().replace("0x","")},"latest"]}]});case 3:return n=a.sent,a.abrupt("return",{name:$.a.abi.decodeParams(["string"],n[0].result)[0],symbol:$.a.abi.decodeParams(["string"],n[1].result)[0],decimals:parseInt(n[2].result),balance:n[3].result});case 7:return a.prev=7,a.t0=a["catch"](0),a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},getTokenInputPrice:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,r,l,d,p,u,m,b,h,f,g,k,w,y,v,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.token1.amount&&!(e.token1.amount<=0)){t.next=2;break}return t.abrupt("return");case 2:a={},n=[],s=0,o=new C.a(T,e.config.c_address),r=e.token1.address,l=e.token2.address,"0x0"===r&&(r=e.config.baseToken.address),"0x0"===l&&(l=e.config.baseToken.address),d=e.config.baseTokenList,console.log(e.config.router),p=!0,u=!1,t.prev=14,b=regeneratorRuntime.mark((function t(){var n,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=g,"0x0"===e.exchange||n.address===e.exchange){t.next=3;break}return t.abrupt("return","continue");case 3:return c=[],s++,a[s]=Object(i["a"])({path:[r,l],pathName:"".concat(e.token1.symbol,"->").concat(e.token2.symbol)},n),c.push({jsonrpc:"2.0",id:s,method:"eth_call",params:[{to:e.config.c_address,data:o.methods.getAmountOutFor(n.address,new q.a(e.token1.amount).times(Math.pow(10,e.token1.decimals)),[r,l]).encodeABI()},"latest"]}),d.filter((function(t){t.address.toLowerCase()!==l.toLowerCase()&&"0x0"===e.token1.address.toLowerCase()&&t.symbol!==e.config.baseToken.symbol&&(s++,a[s]=Object(i["a"])({path:[r,t.address,l],pathName:"".concat(e.token1.symbol,"->").concat(t.symbol,"->").concat(e.token2.symbol)},n),c.push({jsonrpc:"2.0",id:s,method:"eth_call",params:[{to:e.config.c_address,data:o.methods.getAmountOutFor(n.address,new q.a(e.token1.amount).times(Math.pow(10,e.token1.decimals)),[r,t.address,l]).encodeABI()},"latest"]}))})),t.next=10,e.$ajax({url:e.config.rpc,method:"post",data:c});case 10:p=t.sent,p.filter((function(e){if(null!==e&&void 0!==e&&e.result&&(null===e||void 0===e?void 0:e.result.length)>2){var t=$.a.abi.decodeParams(["uint[]"],null===e||void 0===e?void 0:e.result);a[e.id].value=new q.a(t[0][a[e.id].path.length-1]).toString()}}));case 12:case"end":return t.stop()}}),t)})),h=Object(c["a"])(e.config.router);case 17:return t.next=19,h.next();case 19:return f=t.sent,p=f.done,t.next=23,f.value;case 23:if(g=t.sent,p){t.next=32;break}return t.delegateYield(b(),"t0",26);case 26:if(k=t.t0,"continue"!==k){t.next=29;break}return t.abrupt("continue",29);case 29:p=!0,t.next=17;break;case 32:t.next=38;break;case 34:t.prev=34,t.t1=t["catch"](14),u=!0,m=t.t1;case 38:if(t.prev=38,t.prev=39,p||null==h.return){t.next=43;break}return t.next=43,h.return();case 43:if(t.prev=43,!u){t.next=46;break}throw m;case 46:return t.finish(43);case 47:return t.finish(38);case 48:for(w in a)n.push({value:a[w].value,id:w});return y=n.sort((function(e,t){return t.value-e.value})),e.token2=Object(i["a"])(Object(i["a"])({},e.token2),{},{amount:new q.a(y[0].value).div(Math.pow(10,e.token2.decimals))}),e.path=a[y[0].id].name+" "+a[y[0].id].pathName,e.router=a[y[0].id].address,e.callPath=a[y[0].id].path,e.rate=new q.a(e.token2.amount).div(e.token1.amount).dp(5).toString(),t.prev=55,s++,t.next=59,e.$ajax({url:e.config.rpc,method:"post",data:{jsonrpc:"2.0",id:s,method:"eth_call",params:[{to:e.config.c_address,data:o.methods.getPoolSize(a[y[0].id].address,a[y[0].id].path[a[y[0].id].path.length-2],a[y[0].id].path[a[y[0].id].path.length-1]).encodeABI()},"latest"]}});case 59:v=t.sent,x=new q.a(y[0].value).div(v.result).times(100).dp(5).toString(),e.priceImpact="0"===x?"<0.00001":x,t.next=66;break;case 64:t.prev=64,t.t2=t["catch"](55);case 66:e.token2.symbol!==e.config.baseToken.n_symbol&&e.token1.symbol===e.config.baseToken.n_symbol||e.checkApprove(!1);case 67:case"end":return t.stop()}}),t,null,[[14,34,38,48],[39,,43,47],[55,64]])})))()},checkApprove:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$ajax({url:t.config.rpc,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:t.token1.address,data:"0x"+ee.a.methodID("allowance",["address","address"]).toString("hex")+ee.a.rawEncode(["address","address"],[x["a"].getAccount(),t.config.c_address]).toString("hex")},"latest"]}});case 3:n=a.sent,null!==n&&void 0!==n&&n.result&&0===parseInt(null===n||void 0===n?void 0:n.result)?(t.approveStatus=!0,e&&(s=t,setTimeout((function(){s.checkApprove(!0)}),4500))):(e&&(t.onUpdateBalance(!1),t.$notify({title:"Success",message:"Approve Success",type:"success"})),t.approveStatus=!1),a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})))()},sendApprove:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new C.a(R,e.token1.address),n=new q.a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",16),t.next=4,a.methods.approve(e.config.c_address,n.toString(10)).encodeABI();case 4:return s=t.sent,o={from:x["a"].getAccount(),to:e.token1.address,value:Object(Q["toHex"])(0),data:s},t.next=8,x["a"].sendTransaction(o);case 8:e.checkApprove(!0);case 9:case"end":return t.stop()}}),t)})))()},onUpdateBalance:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s,o,r,c,l,d,p,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.swapTokenInfoLoading=!0,a.prev=1,n=x["a"].getAccount(),!n){a.next=24;break}return a.next=6,x["a"].sendEthgetBalance(x["a"].getAccount());case 6:if(l=a.sent,t.ethBalance=l,null===(s=t.token1)||void 0===s||!s.address||"0x0"===(null===(o=t.token1)||void 0===o?void 0:o.address)){a.next=15;break}return a.next=11,t.getTokenInfo(t.token1.address);case 11:d=a.sent,null!==d&&void 0!==d&&d.name&&(t.token1=Object(i["a"])(Object(i["a"])({},t.token1),{},{name:d.name,symbol:d.symbol,balance:new q.a(d.balance).toString(),decimals:d.decimals})),a.next=16;break;case 15:t.token1=Object(i["a"])(Object(i["a"])({},t.token1),{},{name:t.config.baseToken.n_name,symbol:t.config.baseToken.n_symbol,balance:new q.a(t.ethBalance).toString(),logo:t.config.baseToken.logo,decimals:18});case 16:if(null===(r=t.token2)||void 0===r||!r.address||"0x0"===(null===(c=t.token2)||void 0===c?void 0:c.address)){a.next=23;break}return a.next=19,t.getTokenInfo(t.token2.address);case 19:p=a.sent,null!==p&&void 0!==p&&p.name&&(t.token2=Object(i["a"])(Object(i["a"])({},t.token2),{},{name:p.name,symbol:p.symbol,balance:p.balance,decimals:p.decimals})),a.next=24;break;case 23:t.token2=Object(i["a"])(Object(i["a"])({},t.token2),{},{name:t.config.baseToken.n_name,symbol:t.config.baseToken.n_symbol,logo:t.config.baseToken.logo,balance:t.ethBalance,decimals:18});case 24:a.next=28;break;case 26:a.prev=26,a.t0=a["catch"](1);case 28:return a.prev=28,t.swapTokenInfoLoading=!1,a.finish(28);case 31:e&&(u=t,setTimeout((function(){u.onUpdateBalance(!0)}),1e4));case 32:case"end":return a.stop()}}),a,null,[[1,26,28,31]])})))()}}},ne=ae,se=(a("df5a"),Object(k["a"])(ne,n,s,!1,null,"2ba8b50a",null));t["default"]=se.exports},"80ae":function(e,t,a){"use strict";a("0ada")},"88a5":function(e,t,a){},a6c2:function(e,t,a){"use strict";a("88a5")},c607:function(e,t,a){},d2c8:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("4833"),s=(a("f597"),a("403f"),a("6a61"),a("ab3e")),o=a("e6ce");function r(e){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])({url:o["a"][t].rpcNode,method:"post",data:{jsonrpc:"2.0",id:1,method:"eth_gasPrice",params:[]}});case 3:return a=e.sent,n=a.result,r={fast:{price:Math.ceil(1.03*n),estimated_seconds:0},normal:{price:Math.ceil(1.01*n),estimated_seconds:0},slow:{price:Math.ceil(n),estimated_seconds:0}},e.abrupt("return",{data:r});case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0,"error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),i.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])({url:"https://api.rabby.io/v1/wallet/gas_market",method:"get",data:{chain_id:t}});case 3:return a=e.sent,n={data:{}},a.forEach((function(e){n.data[e.level]={price:e.price,estimated_seconds:0}})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e["catch"](0),console.log("error"),e.next=14,r(t);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,null,[[0,9]])}))),l.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!["iotx","glmr","sdn","xdc","klay","one","brise","dogechain","syscoin","ethw"].includes(t)){e.next=6;break}return e.next=3,r(t);case 3:a=e.sent,e.next=15;break;case 6:if("aptos"!==t){e.next=12;break}return e.next=9,u();case 9:a=e.sent,e.next=15;break;case 12:return e.next=14,c(t);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function u(){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])({url:"https://fullnode.mainnet.aptoslabs.com/v1/estimate_gas_price",method:"get",isProxy:!0,data:{}});case 3:return t=e.sent,a={fast:{price:t.prioritized_gas_estimate,estimated_seconds:0},normal:{price:t.gas_estimate,estimated_seconds:0},slow:{price:parseInt(.9*t.gas_estimate),estimated_seconds:0}},e.abrupt("return",{data:a});case 8:return e.prev=8,e.t0=e["catch"](0),console.log("error"),e.next=13,u();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,null,[[0,8]])}))),m.apply(this,arguments)}},dd05:function(e,t,a){"use strict";a("3125")},df5a:function(e,t,a){"use strict";a("c607")}}]);