(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43240406"],{"0c9ec":function(e,t,n){},10:function(e,t){},11:function(e,t){},12:function(e,t){},"2b45":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("OneToMoreHeader",{attrs:{"support-networks":e.supportNetworks,title:e.oneToMoreHeaderTitle,"chain-name":"aptos"}}),n("div",{staticClass:"containerBg"},[n("div",{staticClass:"oneToMoreBox"},[n("div",{staticClass:"stepBox"},[n("el-steps",{attrs:{active:e.stepActive,"align-center":"","process-status":"finish","finish-status":"finish"}},[n("el-step",{attrs:{title:e.$t("editorInput.prepare")}}),n("el-step",{attrs:{title:e.$t("editorInput.confirm")}}),n("el-step",{attrs:{title:e.$t("editorInput.send")}})],1)],1),n("Step1",{directives:[{name:"show",rawName:"v-show",value:0===e.stepActive,expression:"stepActive === 0"}],on:{onStep1Confirm:e.onStep1Confirm}}),n("Step2",{directives:[{name:"show",rawName:"v-show",value:1===e.stepActive,expression:"stepActive === 1"}],attrs:{"queue-list":e.queueList,"step-active":e.stepActive,"token-info":e.tokenInfo},on:{onStep2Prev:e.onStep2Prev,onStep2Next:e.onStep2Next,onStep2Confirm:e.onStep2Confirm}}),n("Step3",{directives:[{name:"show",rawName:"v-show",value:2===e.stepActive,expression:"stepActive === 2"}],attrs:{send_tx:e.send_tx,"token-info":e.tokenInfo,"step-active":e.stepActive,"current-fee":e.currentFee,"array-limit":e.arrayLimit,"queue-list":e.queueList},on:{onStep3Prev:e.onStep3Prev}})],1)])],1)},a=[],r=n("4833"),i=n("efe2"),o=(n("6a61"),n("52c1")),c=n("850d"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step1"},[n("div",{staticClass:"inputBox"},[n("div",{staticClass:"inputContext inputContextAddress"},[n("div",{staticClass:"label"},[n("span",[e._v(e._s("Token"))]),e.isPc&&e.tokenInfo.symbol?n("el-tag",[e._v(" Balance: "+e._s(e.tokenInfo.balance)+" "+e._s(e.tokenInfo.symbol)+" ")]):e._e()],1),n("el-select",{staticClass:"selectBox",staticStyle:{width:"100%"},attrs:{clearable:"",size:"large",filterable:"","filter-method":e.handleFilterAddress},on:{change:e.onSelectChange},model:{value:e.contractName,callback:function(t){e.contractName=t},expression:"contractName"}},e._l(e.addressOptions,(function(t,s){return n("el-option",{key:s,attrs:{label:t.symbol,value:t.coinType}},[n("span",{staticClass:"nameBox",staticStyle:{float:"left"}},[e._v(" "+e._s(t.symbol)+" ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"0x1"!==t.contract,expression:"item.contract !== '0x1'"}],staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(e._f("autoAddress")(t.contract)))])])})),1)],1)]),n("div",{staticClass:"label"},[n("span",[e._v(e._s(e.$t("editorInput.address_amount")))]),n("span",{staticClass:"btnText",on:{click:e.onBulkAmount}},[e._v(e._s(e.$t("editorInput.auto_amount")))]),e.isInput?n("span",{staticClass:"btnText",on:{click:e.onToggleInputType}},[e._v(e._s(e.$t("editorInput.upload_file")))]):n("span",{staticClass:"btnText",on:{click:e.onToggleInputType}},[e._v(e._s(e.$t("editorInput.iinsert_manually")))])]),n("el-row",[n("el-col",{attrs:{xs:{span:24}}},[e.isInput?n("Editor",{ref:"editor",on:{changed:e.onChangeEditor},model:{value:e.editorValue,callback:function(t){e.editorValue=t},expression:"editorValue"}}):n("upload-excel-component",{attrs:{"on-success":e.onUploadFileSuccess,"before-upload":e.beforeUpload}})],1)],1),n("div",{staticClass:"label label-remark"},[e.isInput?n("span",[e._v(e._s(e.$t("editorInput.inputAlert_3")))]):n("span",[e._v(e._s(e.$t("editorInput.inputAlert_2")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.isInput,expression:"!isInput"}],staticClass:"btnText"},[n("a",{attrs:{target:"_blank",href:"/example.xlsx"}},[e._v(e._s(e.$t("editorInput.download_examples")))])]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.isInput,expression:"isInput"}],staticClass:"btnText",on:{click:e.onExample}},[e._v(e._s(e.$t("editorInput.show_examples")))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.errInfoList.length>0,expression:"errInfoList.length > 0"}],staticClass:"errInfoBox"},[n("div",{staticClass:"label label-remark"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.repeat,expression:"!repeat"}]},[e._v(e._s(e.$t("editorInput.inputAlert_4")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}]},[e._v(e._s(e.$t("editorInput.inputAlert_12")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.repeat,expression:"!repeat"}],staticClass:"btnText",on:{click:e.onDeleteErr}},[e._v(e._s(e.$t("editorInput.delete_err")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(1)}}},[e._v(e._s(e.$t("editorInput.repeat_1")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(2)}}},[e._v(e._s(e.$t("editorInput.repeat_2")))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(3)}}},[e._v(e._s(e.$t("editorInput.repeat_3")))])]),n("ul",e._l(e.errInfoList,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.scanProgress>0||e.checkQueueLoading,expression:"scanProgress > 0 || checkQueueLoading"}],staticClass:"progressBox"},[100!==e.scanProgress?n("p",{staticClass:"tips"},[e._v(e._s(e.$t("editorInput.checking_reg_tips",{symbol:e.tokenInfo.symbol})))]):e._e(),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:e.scanProgress}})],1),n("div",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"large",type:"primary",loading:e.checkLoading||e.checkQueueLoading},on:{click:e.onNext}},[e._v(e._s(e.$t("editorInput.next")))]),n("el-button",{attrs:{size:"large",type:"success"},on:{click:function(t){return e.$router.push({name:"aptosBatchRegister"})}}},[e._v(e._s(e.$t("route.aptosBatchRegister")))])],1)],1)},l=[],p=n("5af6"),d=n("5937"),f=(n("4898"),n("476c"),n("37de"),n("22f9"),n("f597"),n("c9f2"),n("7479"),n("9bdd"),n("96e6"),n("c774"),n("fdea"),n("8b79"),n("9905")),m=n("3796"),h=n("fa7e"),v=n("986e"),_=n("ed08"),b={name:"Step1",inject:["atomWalletStateTest"],components:{UploadExcelComponent:m["a"],Editor:h["a"]},data:function(){return{checkTokenRegArr:[],checkLoading:!1,contractName:"",balance:{},tokenInfo:{},repeat:!1,repeat_status:!1,loading_address:!1,stepActive:1,addressOptions:[],addressOptionsCopy:[],isInput:!0,editorValue:"",queueList:[],errInfoList:[],aptBalance:"",checkQueue:null,task_num:10,scanProgress:0,checkQueueLoading:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["isPc","aptosNetwork","aptosAccount","aptosWallet","aptosClient"])),{},{isNativeToken:function(){return"0x1::aptos_coin::AptosCoin"===this.tokenInfo.coinType}}),watch:{editorValue:function(e){this.onEditCheck(e)},contractName:function(e){e||(this.addressOptions=this.addressOptionsCopy)},aptosAccount:{immediate:!0,handler:function(e){""!==e&&this.init()}}},created:function(){var e=this;v["h"].$on(v["g"],(function(e){})),this.checkQueue=f["a"].queue(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n,s){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"undefined"!==typeof e.checkTokenRegArr[n.address]){t.next=6;break}return t.next=4,e.aptosClient.isAccountRegistered(n.address,e.contractName);case 4:a=t.sent,e.checkTokenRegArr[n.address]=a;case 6:s(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),e.checkTokenRegArr[n.address]=!1,s();case 13:e.scanProgress=parseInt((e.queueList.length-e.checkQueue.length())/e.queueList.length*100);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),this.task_num),this.checkQueue.drain(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.checkQueueLoading=!1,e.scanProgress=100;case 2:case"end":return t.stop()}}),t)}))))},mounted:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.aptosClient.getAllTokenList(e.aptosAccount,!0);case 2:return n=t.sent,console.log(n,"tokenList"),e.addressOptions=n,e.addressOptionsCopy=n,t.next=8,e.aptosClient.getBalance(e.aptosAccount);case 8:return e.aptBalance=t.sent,t.next=11,Object(_["s"])(200);case 11:e.contractName="0x1::aptos_coin::AptosCoin",e.onSelectChange(e.contractName);case 13:case"end":return t.stop()}}),t)})))()},onSelectChange:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log("onSelectChange"),s=t.addressOptions.find((function(t){return t.coinType===e})),t.onEditCheck(t.editorValue),t.tokenInfo=s,t.addressOptions=t.addressOptionsCopy;case 5:case"end":return n.stop()}}),n)})))()},onExample:function(){var e=["0xec6efecfcc62ea666390e5279c390b84b59cff3e020008361a545f88bbff0451,0.1","0x385819acdc435ace8461ae4c92f4fff0a26c2f79c0dce3699b205d448df10cde,0.2"];this.editorValue=e.join("\n")},onBulkAmount:function(){var e=this;this.$prompt(this.$t("editorInput.auto_amount"),this.$t("editorInput.inputAlert_5"),{confirmButtonText:this.$t("editorInput.confirm"),cancelButtonText:this.$t("editorInput.close")}).then((function(t){var n=t.value,s=e.editorValue.split("\n"),a="";for(var r in s){var i=s[r].split(",");i[1]&&(s[r]=i[0]),parseInt(r)+1===s.length?a+=s[r]+","+n:a+=s[r]+","+n+"\n"}e.editorValue=a})).catch((function(){}))},onNext:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.flowAccount){t.next=3;break}return e.$message.error(e.$t("common.connect_wallet_tips")),t.abrupt("return");case 3:if(""!==e.editorValue){t.next=6;break}return e.$message.error(e.$t("editorInput.inputAlert_6")),t.abrupt("return");case 6:if(e.tokenInfo&&""!==e.tokenInfo.address){t.next=9;break}return e.$message.error(e.$t("editorInput.select_token_tips")),t.abrupt("return");case 9:return t.next=11,e.onEditCheck(e.editorValue);case 11:if(n=t.sent,!n){t.next=14;break}return t.abrupt("return");case 14:e.$emit("onStep1Confirm",{queueList:e.queueList,tokenInfo:e.tokenInfo});case 15:case"end":return t.stop()}}),t)})))()},onDeleteErr:function(){var e=this,t="",n=[];for(var s in this.queueList)n.push(this.queueList[s]);this.queueList=n,this.queueList.forEach((function(n,s){var a=s===e.queueList.length-1?"":"\n";t+=e.queueList[s].join()+a})),this.editorValue=t},onRepeat:function(e){var t=this,n="",s=[],a=[];for(var r in this.queueList)s[this.queueList[r][0]]&&1===e?delete this.queueList[r]:s[this.queueList[r][0]]&&2===e?(a[this.queueList[r][0]]+=parseFloat(this.queueList[r][1]),delete this.queueList[r]):(s[this.queueList[r][0]]=!0,2===e&&(a[this.queueList[r][0]]=parseFloat(this.queueList[r][1]),delete this.queueList[r]));if(2===e)for(var i in a)this.queueList.push([i,a[i]]);3===e&&(this.repeat_status=!0,this.repeat=!1,this.errInfoList=[]);var o=[];for(var c in this.queueList)o.push(this.queueList[c]);this.queueList=o,this.queueList.forEach((function(e,s){var a=s===t.queueList.length-1?"":"\n";n+=t.queueList[s].join()+a})),this.editorValue=n},onEditCheck:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,a,r,i,o,c,u,l,f,m,h,v,_,b,k,w,x,g,C,I,L,y,A,$,N,O,T;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==t.flowAccount){n.next=2;break}return n.abrupt("return",!1);case 2:if(""!==e){n.next=7;break}return t.queueList=[],t.errInfoList=[],t.repeat_status=!1,n.abrupt("return");case 7:t.checkLoading=!0,s=e.split("\n"),a=[],r=[],i=[],o=!1,c=!1,u=!0,l=!1,n.prev=16,m=Object(d["a"])(s.entries());case 18:return n.next=20,m.next();case 20:return h=n.sent,u=h.done,n.next=24,h.value;case 24:if(v=n.sent,u){n.next=48;break}if(_=v,b=Object(p["a"])(_,2),k=b[0],b[1],w=parseInt(k)+1,x=s[k].trim().split(","),2!==x.length){n.next=40;break}if(x[0].startsWith("0x")&&66===x[0].length){n.next=34;break}return o=!0,r.push(t.$t("editorInput.inputAlert_7",{line:w,str:x[0]})),n.abrupt("continue",45);case 34:if(!(parseFloat(x[1])<0)&&parseFloat(x[1])){n.next=38;break}return o=!0,r.push(t.$t("editorInput.inputAlert_8",{line:w,str:x[1]})),n.abrupt("continue",45);case 38:n.next=43;break;case 40:return o=!0,r.push(t.$t("editorInput.inputAlert_9",{line:w,str:x[0]})),n.abrupt("continue",45);case 43:i[x[0]]&&!t.repeat_status?(c=!0,o=!0,r.push(t.$t("editorInput.inputAlert_11",{line:w,str:x[0]}))):i[x[0]]=!0,a.push(x);case 45:u=!0,n.next=18;break;case 48:n.next=54;break;case 50:n.prev=50,n.t0=n["catch"](16),l=!0,f=n.t0;case 54:if(n.prev=54,n.prev=55,u||null==m.return){n.next=59;break}return n.next=59,m.return();case 59:if(n.prev=59,!l){n.next=62;break}throw f;case 62:return n.finish(59);case 63:return n.finish(54);case 64:if(o||t.isNativeToken){n.next=100;break}g=!0,C=!1,n.prev=67,L=Object(d["a"])(s.entries());case 69:return n.next=71,L.next();case 71:return y=n.sent,g=y.done,n.next=75,y.value;case 75:if(A=n.sent,g){n.next=84;break}$=A,N=Object(p["a"])($,2),O=N[0],N[1],t.checkQueueLoading=!0,T=s[O].trim().split(","),t.checkQueue.push({address:T[0],amount:T[1]});case 81:g=!0,n.next=69;break;case 84:n.next=90;break;case 86:n.prev=86,n.t1=n["catch"](67),C=!0,I=n.t1;case 90:if(n.prev=90,n.prev=91,g||null==L.return){n.next=95;break}return n.next=95,L.return();case 95:if(n.prev=95,!C){n.next=98;break}throw I;case 98:return n.finish(95);case 99:return n.finish(90);case 100:return t.repeat=c,t.queueList=a,t.errInfoList=r,t.checkLoading=!1,n.abrupt("return",o);case 105:case"end":return n.stop()}}),n,null,[[16,50,54,64],[55,,59,63],[67,86,90,100],[91,,95,99]])})))()},handleFilterAddress:function(e){var t=e.trim().toLowerCase();t?(this.addressOptions=this.addressOptionsCopy.filter((function(e){return-1!==e.coinType.toLowerCase().indexOf(t)||-1!==e.symbol.toLowerCase().indexOf(t)})),this.contractName=t):this.addressOptions=this.addressOptionsCopy},onToggleInputType:function(){this.isInput=!this.isInput},beforeUpload:function(e){var t=e.size/1024/1024<10;return!!t||(this.$message({message:"Please do not upload files larger than 10m in size.",type:"warning"}),!1)},onChangeEditor:function(e){this.editorValue=e},onUploadFileSuccess:function(e){var t=e.results,n=(e.header,"");t.forEach((function(e,s){var a=s===t.length-1?"":"\n";n+="".concat(e.Address,",").concat(e.Amount).concat(a)})),this.editorValue=n,this.onToggleInputType()}}},k=b,w=(n("8700"),n("5d22")),x=Object(w["a"])(k,u,l,!1,null,"22e1f983",null),g=x.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokenInfo?n("div",{staticClass:"step2"},[n("div",{staticClass:"label"},[n("span",[e._v(e._s(e.$t("editorInput.addressList")))])]),n("el-table",{staticStyle:{width:"100%","border-radius":"10px"},attrs:{data:e.tableData,height:e.tableData.length>7?250:null}},[n("el-table-column",{attrs:{prop:"address",label:"Address",width:e.isPc?"410px":"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[n("span",[n("a",{attrs:{href:"https://explorer.aptoslabs.com/account/"+s.address+"?network="+e.aptosNetwork,target:"_blank"}},[e._v(" "+e._s(e._f("autoAddress")(s.address))+" ")])])]}}],null,!1,1694337077)}),n("el-table-column",{attrs:{prop:"amount",label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.amount)+" "+e._s(e.tokenInfo.symbol)+" ")]}}],null,!1,2479941859)}),n("el-table-column",{attrs:{width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v(" "+e._s(e.$t("editorInput.remove"))+" ")])]}}],null,!1,2294174239)})],1),n("div",{staticClass:"label"},[n("span",[e._v(e._s(e.$t("editorInput.summary")))])]),n("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.step2_loading,expression:"step2_loading"}],staticClass:"abstract"},[n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.address_count))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.total_address_num")))])]),n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.send_amount)+" "+e._s(e.tokenInfo.symbol))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.total_send_token_num")))])]),n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.send_tx))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.total_send_tx_num")))])]),n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.tokenBalance)+" "+e._s(e.tokenInfo.symbol))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.you_balance",{symbol:e.tokenInfo.symbol})))])]),n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.fees)+" "+e._s("APT"))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.y_fee")))])]),n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.remaining)+" "+e._s(e.tokenInfo.symbol))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.remaining")))])]),e.isNativeToken?e._e():n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.aptBalance)+" "+e._s("APT"))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.you_balance",{symbol:"APT"})))])]),e.isNativeToken?e._e():n("li",[n("span",{staticClass:"number"},[e._v(e._s(e.aptBalance-e.aptosConfig.fees)+" "+e._s("APT"))]),n("span",{staticClass:"remark"},[e._v(e._s(e.$t("editorInput.remaining")))])])]),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.approve_status,expression:"approve_status"}],staticClass:"tips",attrs:{title:e.$t("editorInput.inputAlert_10"),type:"success",closable:!1,effect:"dark"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.errInfoList.length>0,expression:"errInfoList.length > 0"}],staticClass:"errInfoBox"},[n("ul",e._l(e.errInfoList,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]),n("div",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"large",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.onPrev}}),n("el-button",{attrs:{loading:e.step2_loading,size:"large",type:"primary",disabled:e.isDisabledSend},on:{click:e.onNext}},[e._v(e._s(e.$t("editorInput.next")))])],1)],1):e._e()},I=[],L=(n("65f0"),n("05d6"),{contract_address:{mainnet:"0x5eaf5a0754665a10db29135559af6c77496e75e76dffb41e3af5a365303f7a2c",devnet:"0x5eaf5a0754665a10db29135559af6c77496e75e76dffb41e3af5a365303f7a2c",testnet:"0x5eaf5a0754665a10db29135559af6c77496e75e76dffb41e3af5a365303f7a2c"},fees:.9}),y=L,A=n("b893"),$={name:"Step2",components:{},props:{queueList:{type:Array,required:!0},tokenInfo:{type:Object,required:!0},stepActive:{type:Number,required:!0}},data:function(){return{aptosConfig:y,web3:{},send_tx:0,approve_status:!1,send_amount:0,address_count:0,step2_loading:!1,allowance_select:2,aptBalance:null,tokenBalance:0,isDisabledSend:!1,errInfoList:[],arrayLimit:200,tableData:[],sliderMarks:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["isPc","aptosNetwork","aptosAccount","aptosWallet","aptosClient"])),{},{remaining:function(){var e=this.isNativeToken?y.fees:0;return Number(Number(this.tokenBalance-this.send_amount-e).toFixed(5))},fees:function(){return y.fees+.01},isNativeToken:function(){return"0x1::aptos_coin::AptosCoin"===this.tokenInfo.coinType}}),watch:{step2_loading:function(e){v["h"].$emit(v["g"],e)},stepActive:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!==e){n.next=4;break}return t.propQueueListl=t.queueList,n.next=4,t.init();case 4:case"end":return n.stop()}}),n)})))()}},created:function(){},mounted:function(){},methods:{handleDelete:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=n.propQueueListl.filter((function(e){return e[0]!==t.address})),n.propQueueListl=s,n.init();case 3:case"end":return e.stop()}}),e)})))()},init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.errInfoList=[],e.tableData=[],e.isDisabledSend=!1,e.step2_loading=!0,t.next=6,e.onUpdateBalance();case 6:return t.next=8,e.aptosClient.getBalance(e.aptosAccount);case 8:for(n in e.aptBalance=t.sent,console.log(e.aptBalance,"this.aptBalance"),e.propQueueListl)e.tableData.push({address:e.propQueueListl[n][0],amount:e.propQueueListl[n][1]});for(a in e.address_count=e.propQueueListl.length,e.send_tx=Math.ceil(e.propQueueListl.length/e.arrayLimit),s=0,e.propQueueListl)s=A["a"].numAdd(s,e.propQueueListl[a][1]);e.send_amount=s,e.step2_loading=!1,e.tokenBalance<e.send_amount+e.fees&&(e.isDisabledSend=!0,e.errInfoList.push(e.$t("editorInput.insufficient_balance",{symbol:e.tokenInfo.symbol,amount:e.send_amount+e.fees})));case 18:case"end":return t.stop()}}),t)})))()},onNext:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onStep2Confirm",{queueList:e.propQueueListl,send_tx:e.send_tx,arrayLimit:e.arrayLimit});case 1:case"end":return t.stop()}}),t)})))()},onPrev:function(){this.$emit("onStep2Prev")},onUpdateBalance:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.aptosClient.getBalance(e.aptosAccount,e.tokenInfo.coinType,e.tokenInfo.decimals);case 2:n=t.sent,e.tokenBalance=n;case 4:case"end":return t.stop()}}),t)})))()}}},N=$,O=(n("7a71"),Object(w["a"])(N,C,I,!1,null,"a513bd82",null)),T=O.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step3"},[n("div",{staticClass:"label"},[n("span",[e._v(" "+e._s(e.$t("editorInput.step3_alert_1",{a:e.send_status.a,b:e.send_status.b})))]),n("span",{directives:[{name:"show",rawName:"v-show",value:0===e.send_status.b&&!e.all_send,expression:"send_status.b === 0 && !all_send"}]},[e._v(e._s(e.$t("editorInput.step3_alert_2")))])]),n("DealList",{attrs:{list:e.dealList}}),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:0===e.send_status.b&&e.all_send,expression:"send_status.b === 0 && all_send"}],staticClass:"tips",attrs:{title:e.$t("editorInput.step3_alert_3"),type:"success",closable:!1,effect:"dark"}}),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.waitMetamask,expression:"waitMetamask"}],staticClass:"tips",attrs:{type:"success",closable:!1,center:"",effect:"dark"}},[n("i",{staticClass:"el-icon-loading icon"}),e._v(e._s(e.$t("editorInput.wait_confirm")))]),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.send_close,expression:"send_close"}],staticClass:"tips",attrs:{title:e.$t("editorInput.step3_alert_4"),type:"success",closable:!1,effect:"dark"}}),n("div",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"large",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.onPrev}}),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.send_close,expression:"send_close"}],attrs:{size:"large",type:"primary"},on:{click:e.onSend}},[e._v(e._s(e.$t("editorInput.step3_alert_5",{d:e.d_slice})))])],1)],1)},q=[],j=n("22e1"),R=(n("a9b5"),n("4a32"),n("7b24")),B=n.n(R),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],staticClass:"dealList"},e._l(e.list,(function(t,s){return n("li",{key:t.address},[n("div",{staticClass:"left"},[n("span",{staticClass:"index"},[e._v(e._s(s+1))]),n("a",{staticClass:"address",attrs:{target:"_blank",href:e.aptosClient.getScanLink("txn",t.address)}},[e._v(e._s(t.address))])]),n("div",{staticClass:"right"},[n("span",{staticClass:"status"},[0===t.status?n("i",{staticClass:"el-icon-loading"}):1===t.status?n("i",{staticClass:"el-icon-success"}):2===t.status?n("i",{staticClass:"el-icon-error",staticStyle:{color:"#F05252"}}):e._e()])])])})),0)},E=[],Q={props:{list:{type:Array,required:!0}},data:function(){return{}},computed:Object(i["a"])({},Object(o["b"])(["isPc","aptosNetwork","aptosAccount","aptosWallet","aptosClient"])),created:function(){},mounted:function(){},methods:{}},M=Q,V=(n("db2c"),Object(w["a"])(M,P,E,!1,null,"677ab3be",null)),D=V.exports,F={name:"Step3",components:{DealList:D},props:{send_tx:{type:Number,required:!0},arrayLimit:{type:Number,required:!0},tokenInfo:{type:Object,required:!0},queueList:{type:Array,required:!0},stepActive:{type:Number,required:!0}},data:function(){return{dealList:[],send_close:!1,addresses_to_send:[],balances_to_send:[],send_status:{a:1,b:1},all_send:!1,d_slice:1,d_slice_s:0,web3:{},waitMetamask:!1}},computed:Object(i["a"])({},Object(o["b"])(["isPc","aptosNetwork","aptosAccount","aptosWallet","aptosClient"])),watch:{stepActive:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(2!==e){n.next=3;break}return n.next=3,t.init();case 3:case"end":return n.stop()}}),n)})))()}},created:function(){},mounted:function(){},methods:{init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dealList=[],e.send_status={a:1,b:1},e.send_close=!1,e.all_send=!1,t.next=6,e._multisend();case 6:case"end":return t.stop()}}),t)})))()},onPrev:function(){this.send_close=!1,this.$emit("onStep3Prev")},onSend:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.send_close=!1,t.next=3,e._multisend();case 3:case"end":return t.stop()}}),t)})))()},batchTransfer:function(e,t,n){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,i,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r="0x1::aptos_coin::AptosCoin"===e.coinType?"apt":"token",i={apt:"".concat(y.contract_address[s.aptosNetwork],"::Cointool_MutilSender::sendAptos"),token:"".concat(y.contract_address[s.aptosNetwork],"::Cointool_MutilSender::sendToken")},console.log(i[r],"functionMap[aptType]"),o={type:"entry_function_payload",function:i[r],type_arguments:[e.coinType],arguments:[t,n]},console.log(s.aptosWallet,"this.aptosWallet"),a.next=7,s.aptosWallet.getAccount();case 7:return c=a.sent,a.abrupt("return",s.aptosWallet.signAndSubmitTransaction(c,o));case 9:case"end":return a.stop()}}),a)})))()},_multisend:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.queueList.map((function(e,t){return{address:e[0],amount:e[1]}})),!1,t.prev=2,e.waitMetamask=!0,console.log("start",n),s=n.map((function(e){return e.address})),a=n.map((function(t){var n=new B.a(t.amount).mul(new B.a(10).toPower(e.tokenInfo.decimals));return n.toString()})),console.log(s,"recipientArr"),console.log(a,"amountArr"),t.next=11,e.batchTransfer(e.tokenInfo,s,a);case 11:r=t.sent,console.log(r,"txHash"),e.dealList.push({address:r,status:1}),e.all_send=!0,e.send_status.b=0,t.next=24;break;case 18:t.prev=18,t.t0=t["catch"](2),i="","string"===typeof t.t0?i=t.t0:"object"===Object(j["a"])(t.t0)&&(i=t.t0.message),e.send_close=!0,e.$message.error(i);case 24:return t.prev=24,e.waitMetamask=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[2,18,24,27]])})))()}}},z=F,W=(n("2f51"),Object(w["a"])(z,S,q,!1,null,"383adf85",null)),U=W.exports,H="multiSender",J={name:H,components:{OneToMoreHeader:c["a"],Step1:g,Step2:T,Step3:U},data:function(){return{stepActive:0,send_tx:0,arrayLimit:0,tokenInfo:{},c_address:"",address:"",currentFee:0,queueList:[]}},computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["isPc","aptosNetwork","aptosAccount","aptosWallet","aptosClient"])),{},{oneToMoreHeaderTitle:function(){return this.$t("common.welcomeOneToMore",{appName:this.$shortName,chainName:"Aptos"})},supportNetworks:function(){return[{icon:"",name:"mainnet",symbol:"mainnet".toLowerCase(),value:"mainnet"},{icon:"",name:"devnet",symbol:"devnet".toLowerCase(),value:"devnet"},{icon:"",name:"testnet",symbol:"testnet".toLowerCase(),value:"testnet"}]}}),watch:{},created:function(){},mounted:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onStep1Confirm:function(e){var t=e.queueList,n=e.tokenInfo;this.queueList=t,this.tokenInfo=n,this.stepActive=1},onStep2Confirm:function(e){var t=e.queueList,n=e.send_tx,s=e.arrayLimit,a=e.currentFee;this.queueList=t,this.send_tx=n,this.arrayLimit=s,this.currentFee=a,this.stepActive=2},onStep2Prev:function(){this.stepActive=0},onStep2Next:function(){this.stepActive=2},onStep3Prev:function(){this.stepActive=1},onChangeEditor:function(e){this.editorValue=e}}},G=J,K=(n("a5e2"),Object(w["a"])(G,s,a,!1,null,"70b135a2",null));t["default"]=K.exports},"2f51":function(e,t,n){"use strict";n("52ad")},"34b3":function(e,t,n){},"52ad":function(e,t,n){},"7a71":function(e,t,n){"use strict";n("a0a5")},8700:function(e,t,n){"use strict";n("e08a")},a0a5:function(e,t,n){},a5e2:function(e,t,n){"use strict";n("34b3")},c9f2:function(e,t,n){var s=n("c194"),a=n("5960");s({target:"String",proto:!0},{repeat:a})},db2c:function(e,t,n){"use strict";n("0c9ec")},e08a:function(e,t,n){}}]);