(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cd41bea"],{"0fee":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("OneToMoreHeader",{attrs:{"support-networks":e.supportNetworks,"chain-name":"dot",title:e.$t("dotOneToMore.welcome",{appName:e.$shortName})}}),t("div",{staticClass:"containerBg"},[t("div",{staticClass:"oneToMoreBox"},[t("div",{staticClass:"stepBox"},[t("el-steps",{attrs:{active:e.stepActive,"align-center":"","process-status":"finish","finish-status":"finish"}},[t("el-step",{attrs:{title:e.$t("dotOneToMore.prepare")}}),t("el-step",{attrs:{title:e.$t("dotOneToMore.confirm")}}),t("el-step",{attrs:{title:e.$t("dotOneToMore.send")}})],1)],1),t("Step1",{directives:[{name:"show",rawName:"v-show",value:0===e.stepActive,expression:"stepActive === 0"}],on:{onStep1Confirm:e.onStep1Confirm}}),1===e.stepActive?t("Step2",{attrs:{"queue-list":e.queueList,address:e.address,address_type:e.address_type,"step-active":e.stepActive},on:{onStep2Prev:e.onStep2Prev,onStep2Next:e.onStep2Next,onStep2Confirm:e.onStep2Confirm}}):2===e.stepActive?t("Step3",{attrs:{send_tx:e.send_tx,"current-fee":e.currentFee,"array-limit":e.arrayLimit,"step-active":e.stepActive,c_address:e.c_address,"queue-list":e.queueList,address:e.address,address_type:e.address_type},on:{onStep3Prev:e.onStep3Prev}}):e._e()],1)])],1)},a=[],r=s("c7eb"),o=s("1da1"),i={zh:{dotOneToMore:{token:"代币",wait_confirm:"等待确认交易...",welcome:"欢迎使用{appName} Polkadot批量发送",token_address_err:"代币地址错误",address_amount:"收款地址和数量",auto_amount:"自动添加数量",upload_file:"上传文件",iinsert_manually:"手动输入",download_examples:"下载例子",show_examples:"查看例子",delete_err:"删除无效地址",next:"下一步",address:"地址",slow:"慢",standard:"快",instant:"极速",inputAlert_2:"支持文件类型： CSV / Excel / Txt",inputAlert_3:"每一行应包括地址和数量，逗号分隔",inputAlert_4:"以下地址或金额不能发送",inputAlert_5:"可自动在每个地址后面添加数量",inputAlert_6:"请至少输入一条地址信息",inputAlert_7:"第 {line} 行: {str} 无效的钱包地址",inputAlert_8:"第 {line} 行: {str} 无效的数量",inputAlert_9:"第 {line} 行: {str} 请输入正确的格式，地址和数量以逗号分隔。例: address,number",inputAlert_10:"授信成功，请点击下一步！",inputAlert_11:"第 {line} 行: {str} 重复的地址",inputAlert_12:"发现重复地址",repeat_1:"保留第一个",repeat_2:"合并重复地址",repeat_3:"保留重复地址",step3_alert_1:"总共需要发送 {a} 次,还需要发送 {b} 次",step3_alert_2:"交易已全部发出，请等待交易被确认。",step3_alert_3:"祝贺，您的代币全部发送成功！",step3_alert_4:"您手动取消了交易，如需继续，请点击发送",step3_alert_5:"继续第 {d} 次交易",decimals:"位数",account:"账户",address_type:"账户类型",wallet_select:"请登录您的钱包，并授权本网站",summary:"摘要",total_address_num:"地址总数",total_send_token_num:"代币发送总数",total_send_tx_num:"交易总数",token_balance:"代币余额",y_fee:"预估费用",you_balance:"你的 {symbol} 余额",d_allowance_b:"当前授信额度",y_allowance_b:"需授信额度",approve_amount:"授权额度",send_amount:"发送数量({amount} {symbol})",send_amount_b:"代币余额({amount} {symbol})",insufficient_balance:"{symbol} 余额不足",prepare:"准备",confirm:"确认",close:"关闭",send:"发送"}},en:{dotOneToMore:{token:"Token",welcome:"Welcome to {appName} Polkadot Bulk Sender",token_address_err:"Token address error",address_amount:"Addresses with Amounts",auto_amount:"Auto add amounts",upload_file:"Upload file",iinsert_manually:"Insert manually",download_examples:"Download examples",show_examples:"Show examples",delete_err:"Delete them",next:"Next",address:"Address",slow:"Slow",standard:"Fast",instant:"Instant",inputAlert_2:"Accepted: CSV / Excel / Txt",inputAlert_3:"The address and amount are separated by commas",inputAlert_4:"The below addresses cannot be processed",inputAlert_5:"Amount can be automatically added after each address",inputAlert_6:"Please enter at least one address information",inputAlert_7:"Line {line} : {str}  is a invalid wallet address",inputAlert_8:"Line {line} : {str}  is a invalid wrong amount",inputAlert_9:"Line {line} : {str}  is a invalid wallet address and wrong amount. E.g:address,number",inputAlert_10:"Request approve succeeded ! Please click next",inputAlert_11:"Line {line}: {str} is duplicate address",inputAlert_12:"Duplicated wallet addresses",repeat_1:"Keep the first one",repeat_2:"Merge balances",repeat_3:"Keep duplicate addresses",step3_alert_1:"A total of {a} needs to be sent,You need to send {b} more times",step3_alert_2:"All transactions have been sent out. Please wait for the transaction to be confirmed.",step3_alert_3:"Congratulations, all your tokens have been sent successfully!",step3_alert_4:"You have manually cancelled the transaction, to continue, please click send",step3_alert_5:"Continue with the {d} first transaction",decimals:"Decimals",account:"Account",address_type:"Address Type",summary:"Summary",wallet_select:"Please login your wallet and authorize this website",total_address_num:"Total number of addresses",total_send_token_num:"Total number of tokens to be sent",total_send_tx_num:"Total number of transactions needed",token_balance:"Your token balance",y_fee:"Approximate cost of operation",you_balance:"Your {symbol} balance",d_allowance_b:"Your current allowance",y_allowance_b:"Request approve amount",prepare:"Prepare",approve_amount:"Amount to approve",send_amount:"Exact amount to be sent ({amount} {symbol})",send_amount_b:"Your token balance({amount} {symbol})",insufficient_balance:"Insufficient {symbol} balance",confirm:"Confirm",close:"Close",send:"Send",wait_confirm:"Pending confirmation of transaction"}}},l=s("850d"),c=(s("38cf"),function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingJs,expression:"loadingJs"}],staticClass:"step1"},[t("div",{staticClass:"inputBox"},[t("div",{staticClass:"inputContext inputContextAddress"},[t("div",{staticClass:"label"},[t("span",[e._v(e._s("Token"))])]),t("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.loading_address,clearable:"",size:"large",filterable:"","filter-method":e.handleFilterAddress},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.tokenList,(function(s,n){return t("el-option",{key:n,attrs:{label:s.label,value:s.value}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(s.label))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(s.value))])])})),1)],1)]),t("div",{staticClass:"label"},[t("span",[e._v(e._s(e.$t("dotOneToMore.address_amount")))]),t("span",{staticClass:"btnText",on:{click:e.onBulkAmount}},[e._v(e._s(e.$t("dotOneToMore.auto_amount")))]),e.isInput?t("span",{staticClass:"btnText",on:{click:e.onToggleInputType}},[e._v(e._s(e.$t("dotOneToMore.upload_file")))]):t("span",{staticClass:"btnText",on:{click:e.onToggleInputType}},[e._v(e._s(e.$t("dotOneToMore.iinsert_manually")))])]),t("el-row",[t("el-col",{attrs:{xs:{span:24}}},[e.isInput?t("Editor",{ref:"editor",on:{changed:e.onChangeEditor},model:{value:e.editorValue,callback:function(t){e.editorValue=t},expression:"editorValue"}}):t("upload-excel-component",{attrs:{"on-success":e.onUploadFileSuccess,"before-upload":e.beforeUpload}})],1)],1),t("div",{staticClass:"label label-remark"},[e.isInput?t("span",[e._v(e._s(e.$t("dotOneToMore.inputAlert_3")))]):t("span",[e._v(e._s(e.$t("dotOneToMore.inputAlert_2")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isInput,expression:"!isInput"}],staticClass:"btnText"},[t("a",{attrs:{target:"_blank",href:"/example_dot.xlsx"}},[e._v(e._s(e.$t("dotOneToMore.download_examples")))])]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isInput,expression:"isInput"}],staticClass:"btnText",on:{click:e.onExample}},[e._v(e._s(e.$t("dotOneToMore.show_examples")))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.errInfoList.length>0,expression:"errInfoList.length > 0"}],staticClass:"errInfoBox"},[t("div",{staticClass:"label label-remark"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.repeat,expression:"!repeat"}]},[e._v(e._s(e.$t("dotOneToMore.inputAlert_4")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}]},[e._v(e._s(e.$t("dotOneToMore.inputAlert_12")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.repeat,expression:"!repeat"}],staticClass:"btnText",on:{click:e.onDeleteErr}},[e._v(e._s(e.$t("dotOneToMore.delete_err")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(1)}}},[e._v(e._s(e.$t("dotOneToMore.repeat_1")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(2)}}},[e._v(e._s(e.$t("dotOneToMore.repeat_2")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.repeat,expression:"repeat"}],staticClass:"btnText",on:{click:function(t){return e.onRepeat(3)}}},[e._v(e._s(e.$t("dotOneToMore.repeat_3")))])]),t("ul",e._l(e.errInfoList,(function(s){return t("li",{key:s},[e._v(e._s(s))])})),0)]),t("el-button",{attrs:{size:"large",type:"primary",loading:e.nextLoading},on:{click:e.onNext}},[e._v(e._s(e.$t("dotOneToMore.next")))]),-1!==e.existentialDeposit?t("el-alert",{staticStyle:{"margin-top":"30px"},attrs:{title:e.$t("editorInput.dot_address_tips",{num:e.existentialDeposit}),type:"success"}},[t("el-link",{attrs:{type:"success",href:"https://wiki.polkadot.network/docs/build-protocol-info#existential-deposit",target:"_blank"}},[e._v(" More Info：https://wiki.polkadot.network/docs/build-protocol-info#existential-deposit ")])],1):e._e()],1)}),d=[],u=s("5530"),p=(s("caad"),s("2532"),s("14d9"),s("d3b7"),s("159b"),s("a15b"),s("498a"),s("99af"),s("37969")),_=s("fa7e"),h=s("2f62"),f=s("ed08"),m=s("986e"),v=s("e298"),b=s("901e"),w=s.n(b),x={name:"Step1",inject:["dotwalletStateTest"],components:{UploadExcelComponent:p["a"],Editor:_["a"]},data:function(){return{balance:{},repeat:!1,loadingJs:!1,nextLoading:!1,repeat_status:!1,loading_address:!1,stepActive:1,accountOptions:[],address:"DOT",tokenMap:{1:[{label:"DOT",value:"DOT"}],2:[{label:"KSM",value:"KSM"}]},existentialDeposit:-1,addressTypeOptions:[{value:"1",label:"Polkadot",decimals:6},{value:"2",label:"Kusama"}],decimals:6,isInput:!0,editorValue:"",queueList:[],errInfoList:[]}},computed:Object(u["a"])(Object(u["a"])({},Object(h["b"])(["isPc","dotNetwork","dotAccount"])),{},{tokenList:function(){return this.chainInfo?[{label:this.chainInfo.chain+" - "+this.chainInfo.nativeToken,value:this.chainInfo.nativeToken}]:[{label:"DOT",value:"DOT"}]},chainInfo:function(){return v["a"].networks[this.dotNetwork]}}),watch:{dotNetwork:function(){this.address=v["a"].networks[this.dotNetwork].nativeToken},address:function(e){return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},editorValue:function(e){this.onEditCheck(e)},chainInfo:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("chainInfo"),s=e.chainInfo.provider.includes("wss://")?new window.polkadotApi.WsProvider(e.chainInfo.provider):new window.polkadotApi.HttpProvider(e.chainInfo.provider),console.log(s,"provider"),t.next=5,window.polkadotApi.ApiPromise.create({provider:s});case 5:return window.dot_ws=t.sent,console.log("test"),t.next=9,window.dot_ws.isReady;case 9:return t.prev=9,t.t0=w.a,t.next=13,window.dot_ws.consts.balances.existentialDeposit.toNumber();case 13:t.t1=t.sent,e.existentialDeposit=new t.t0(t.t1).div(Math.pow(10,e.chainInfo.decimals)).toNumber(),t.next=20;break;case 17:t.prev=17,t.t2=t["catch"](9),console.log(t.t2,"e");case 20:case"end":return t.stop()}}),t,null,[[9,17]])})))()}},created:function(){return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:m["h"].$on(m["g"],(function(e){console.log(e,"step_state")}));case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dotwalletStateTest();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,Object(f["B"])(1e3);case 6:return t.next=8,window.polkadotExtensionDapp.web3Enable("CoinTool.App");case 8:if(s=t.sent,0!==s.length){t.next=12;break}return e.$message.error(e.$t("dotOneToMore.wallet_select")),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})))()},methods:{handleFilterAddress:function(){var e=arguments;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.length>0&&void 0!==e[0]?e[0]:"",console.log("handleFilterAddress");case 2:case"end":return t.stop()}}),t)})))()},onExample:function(){this.editorValue="16Y3CENSj8y5EqtgdNnQW6iacbfL4pt7b4e7C52mhhyRudFV,0.00001\n12pMJRWu2RaPVsQpocDjU7PuwGp5PUeyU2KrY8rSdAghyVDX,1\n14EHVyzqfa98gNoibgBJQ6onbAbRfBcJBprqduHBmEenDkCf,3.45"},onBulkAmount:function(){var e=this;this.$prompt(this.$t("dotOneToMore.auto_amount"),this.$t("dotOneToMore.inputAlert_5"),{confirmButtonText:this.$t("dotOneToMore.confirm"),cancelButtonText:this.$t("dotOneToMore.close")}).then((function(t){var s=t.value,n=e.editorValue.split("\n"),a="";for(var r in n){var o=n[r].split(",");o[1]&&(n[r]=o[0]),parseInt(r)+1===n.length?a+=n[r]+","+s:a+=n[r]+","+s+"\n"}e.editorValue=a})).catch((function(){}))},onNext:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nextLoading=!0,t.prev=1,t.next=4,e.dotwalletStateTest();case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:if(""!==e.editorValue){t.next=9;break}return e.$message.error(e.$t("dotOneToMore.inputAlert_6")),t.abrupt("return");case 9:if(s=e.onEditCheck(e.editorValue),!s){t.next=12;break}return t.abrupt("return");case 12:e.$emit("onStep1Confirm",{queueList:e.queueList,address:e.address}),t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](1);case 17:return t.prev=17,e.nextLoading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,15,17,20]])})))()},onDeleteErr:function(){var e=this,t="",s=[];for(var n in this.queueList)s.push(this.queueList[n]);this.queueList=s,this.queueList.forEach((function(s,n){var a=n===e.queueList.length-1?"":"\n";t+=e.queueList[n].join()+a})),this.editorValue=t},onRepeat:function(e){var t=this,s="",n=[],a=[];for(var r in this.queueList)n[this.queueList[r][0]]&&1===e?delete this.queueList[r]:n[this.queueList[r][0]]&&2===e?(a[this.queueList[r][0]]+=parseFloat(this.queueList[r][1]),delete this.queueList[r]):(n[this.queueList[r][0]]=!0,2===e&&(a[this.queueList[r][0]]=parseFloat(this.queueList[r][1]),delete this.queueList[r]));if(2===e)for(var o in a)this.queueList.push([o,a[o]]);3===e&&(this.repeat_status=!0,this.repeat=!1,this.errInfoList=[]);var i=[];for(var l in this.queueList)i.push(this.queueList[l]);this.queueList=i,this.queueList.forEach((function(e,n){var a=n===t.queueList.length-1?"":"\n";s+=t.queueList[n].join()+a})),this.editorValue=s},onEditCheck:function(e){if(""===e)return this.queueList=[],this.errInfoList=[],void(this.repeat_status=!1);var t=e.split("\n"),s=[],n=[],a=[],r=!1,o=!1;for(var i in t){var l=parseInt(i)+1,c=t[i].trim().split(",");2===c.length?this.isValidAddressPolkadotAddress(c[0])?parseFloat(c[1])<0||!parseFloat(c[1])?(r=!0,n.push(this.$t("dotOneToMore.inputAlert_8",{line:l,str:c[1]}))):(a[c[0]]&&!this.repeat_status?(o=!0,r=!0,n.push(this.$t("dotOneToMore.inputAlert_11",{line:l,str:c[0]}))):a[c[0]]=!0,s.push(c)):(r=!0,n.push(this.$t("dotOneToMore.inputAlert_7",{line:l,str:c[0]}))):(r=!0,n.push(this.$t("dotOneToMore.inputAlert_9",{line:l,str:c[0]})))}return this.repeat=o,this.queueList=s,this.errInfoList=n,r},isValidAddressPolkadotAddress:function(e){try{return window.polkadotKeyring.encodeAddress(window.polkadotUtil.isHex(e)?window.polkadotUtil.hexToU8a(e):window.polkadotKeyring.decodeAddress(e)),!0}catch(t){return!1}},onToggleInputType:function(){this.isInput=!this.isInput},beforeUpload:function(e){var t=e.size/1024/1024<10;return!!t||(this.$message({message:"Please do not upload files larger than 10m in size.",type:"warning"}),!1)},onChangeEditor:function(e){this.editorValue=e},onUploadFileSuccess:function(e){var t=e.results,s=(e.header,"");t.forEach((function(e,n){var a=n===t.length-1?"":"\n";s+="".concat(e.Address,",").concat(e.Amount).concat(a)})),this.editorValue=s,this.onToggleInputType()}}},k=x,y=(s("751d"),s("2877")),g=Object(y["a"])(k,c,d,!1,null,"53f7df06",null),O=g.exports,L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step2"},[t("div",{staticClass:"label"},[t("span",[e._v(e._s(e.$t("editorInput.addressList")))])]),t("el-table",{staticStyle:{width:"100%","border-radius":"10px"},attrs:{data:e.tableData,height:e.tableData.length>7?250:null}},[t("el-table-column",{attrs:{prop:"address",label:"Address",width:e.isPc?"410px":"auto"},scopedSlots:e._u([{key:"default",fn:function(s){var n=s.row;return[t("span",[t("a",{attrs:{href:e.$ethUtils.getScanLink("dot","address",n.address),target:"_blank"}},[e._v(" "+e._s(e._f("miniAddress")(n.address))+" ")])])]}}])}),t("el-table-column",{attrs:{prop:"amount",label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[e._v(" "+e._s(s.amount)+" "+e._s(e.symbol)+" ")]}}])}),t("el-table-column",{attrs:{width:"80px"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(s.$index,s.row)}}},[e._v(" "+e._s(e.$t("editorInput.remove"))+" ")])]}}])})],1),t("div",{staticClass:"label"},[t("span",[e._v(e._s(e.$t("dotOneToMore.summary")))])]),t("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.step2_loading,expression:"step2_loading"}],staticClass:"abstract"},[t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.address_count))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.total_address_num")))])]),t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.send_amount)+" "+e._s(e.symbol))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.total_send_token_num")))])]),t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.send_tx))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.total_send_tx_num")))])]),t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.tokenBalance)+" "+e._s(e.symbol))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.token_balance")))])]),t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.fee)+" "+e._s(e.symbol))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.y_fee")))])]),t("li",[t("span",{staticClass:"number"},[e._v(e._s(e.ethBalance)+" "+e._s(e.symbol))]),t("span",{staticClass:"remark"},[e._v(e._s(e.$t("dotOneToMore.you_balance",{symbol:e.symbol})))])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.errInfoList.length>0,expression:"errInfoList.length > 0"}],staticClass:"errInfoBox"},[t("ul",e._l(e.errInfoList,(function(s){return t("li",{key:s},[e._v(e._s(s))])})),0)]),t("div",{staticClass:"btnBox"},[t("el-button",{attrs:{size:"large",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.onPrev}}),t("el-button",{attrs:{loading:e.step2_loading,size:"large",type:"primary",disabled:e.send_btn},on:{click:e.onNext}},[e._v(e._s(e.$t("dotOneToMore.next")))])],1),e.isShowBalanceLow?t("el-alert",{staticStyle:{"margin-top":"30px"},attrs:{title:e.$t("editorInput.dot_balance_mini_tips",{num:e.balanceMini}),type:"success"}},[t("el-link",{attrs:{type:"success",href:"https://wiki.polkadot.network/docs/build-protocol-info#existential-deposit",target:"_blank"}},[e._v(" More Info：https://wiki.polkadot.network/docs/build-protocol-info#existential-deposit ")])],1):e._e()],1)},A=[],T=(s("a9e3"),s("b680"),s("4de4"),{name:"Step2",props:{queueList:{type:Array,required:!0},address:{type:String,required:!0},stepActive:{type:Number,required:!0}},data:function(){return{c_address:"",web3:{},send_tx:0,symbol:"",approve_status:!1,send_amount:0,address_count:0,step2_loading:!1,fee:0,d_fee:0,currentFee:"",tokenBalance:0,ethBalance:0,send_btn:!1,approveList:[],errInfoList:[],tableData:[],propQueueListl:[],arrayLimit:200,sliderMarks:{},balanceMini:0,isShowBalanceLow:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(h["b"])(["isPc","dotNetwork","dotAccount"])),{},{chainInfo:function(){return v["a"].networks[this.dotNetwork]}}),watch:{step2_loading:function(e){m["h"].$emit(m["g"],e)},stepActive:{immediate:!0,handler:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function s(){return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(1!==e){s.next=4;break}return t.propQueueListl=t.queueList,s.next=4,t.init();case 4:case"end":return s.stop()}}),s)})))()}}},created:function(){},mounted:function(){return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var s,n,a,o,i,l,c,d,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("init"),e.tableData=[],e.isShowBalanceLow=!1,e.step2_loading=!0,e.symbol=e.chainInfo.nativeToken,a=e.chainInfo.provider.includes("wss://")?new window.polkadotApi.WsProvider(e.chainInfo.provider):new window.polkadotApi.HttpProvider(e.chainInfo.provider),t.next=8,window.polkadotApi.ApiPromise.create({provider:a});case 8:return window.dot_ws=t.sent,t.next=11,window.dot_ws.isReady;case 11:return o=0,t.prev=12,t.next=15,window.dot_ws.consts.balances.existentialDeposit.toNumber();case 15:o=t.sent,t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](12);case 20:return i=new w.a(o).div(Math.pow(10,e.chainInfo.decimals)).toNumber(),t.next=23,e.onUpdateBalance(e.dotAccount);case 23:for(c in e.address_count=e.propQueueListl.length,e.arrayLimit=30,e.send_tx=Math.ceil(e.propQueueListl.length/e.arrayLimit),l=0,e.propQueueListl)o>0&&e.propQueueListl[c][1],e.tableData.push({address:e.propQueueListl[c][0],amount:e.propQueueListl[c][1]}),l=new w.a(l).plus(e.propQueueListl[c][1]).toFixed();if(e.send_amount=l,d=null!==(s=e.chainInfo)&&void 0!==s&&s.fee?null===(n=e.chainInfo)||void 0===n?void 0:n.fee:1e-4,e.currentFee=new w.a(d).times(Math.pow(10,e.chainInfo.decimals)).toFixed(0),"polkadot"!==e.dotNetwork&&(e.currentFee=i),e.d_fee=d,u=e.d_fee,e.fee=u,!(e.ethBalance<e.send_amount+u)){t.next=40;break}return e.step2_loading=!1,e.errInfoList.push(e.$t("dotOneToMore.insufficient_balance",{symbol:e.symbol})),e.send_btn=!0,t.abrupt("return");case 40:if(!(e.ethBalance<i)){t.next=44;break}return e.balanceMini=i,e.isShowBalanceLow=!0,t.abrupt("return");case 44:e.step2_loading=!1;case 45:case"end":return t.stop()}}),t,null,[[12,18]])})))()},handleDelete:function(e,t){var s=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=s.propQueueListl.filter((function(e){return e[0]!==t.address})),s.propQueueListl=n,s.init();case 3:case"end":return e.stop()}}),e)})))()},onNext:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onStep2Confirm",{queueList:e.propQueueListl,address:e.address,send_tx:e.send_tx,arrayLimit:e.arrayLimit,currentFee:e.currentFee,c_address:e.c_address});case 1:case"end":return t.stop()}}),t)})))()},onPrev:function(){this.$emit("onStep2Prev")},onUpdateBalance:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function s(){var n,a;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,window.dot_ws.query.system.account(e);case 3:n=s.sent,a=n.data,t.ethBalance=new w.a(a.free).div(Math.pow(10,t.chainInfo.decimals)),t.tokenBalance=t.ethBalance,s.next=15;break;case 9:return s.prev=9,s.t0=s["catch"](0),s.next=13,Object(f["B"])(1e3);case 13:return s.next=15,t.onUpdateBalance(e);case 15:case"end":return s.stop()}}),s,null,[[0,9]])})))()}}}),C=T,M=(s("a394c"),Object(y["a"])(C,L,A,!1,null,"2913342e",null)),S=M.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step3"},[t("div",{staticClass:"label"},[t("span",[e._v(" "+e._s(e.$t("dotOneToMore.step3_alert_1",{a:e.send_status.a,b:e.send_status.b})))]),t("span",{directives:[{name:"show",rawName:"v-show",value:0===e.send_status.b&&!e.all_send,expression:"send_status.b === 0 && !all_send"}]},[e._v(e._s(e.$t("dotOneToMore.step3_alert_2")))])]),t("DealList",{attrs:{list:e.dealList}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0===e.send_status.b&&e.all_send,expression:"send_status.b ===0 && all_send"}],staticClass:"tips",attrs:{title:e.$t("dotOneToMore.step3_alert_3"),type:"success",closable:!1,effect:"dark"}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.send_close,expression:"send_close"}],staticClass:"tips",attrs:{title:e.$t("dotOneToMore.step3_alert_4"),type:"success",closable:!1,effect:"dark"}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.waitMetamask,expression:"waitMetamask"}],staticClass:"tips",attrs:{type:"success",closable:!1,center:"",effect:"dark"}},[t("i",{staticClass:"el-icon-loading icon"}),e._v(e._s(e.$t("dotOneToMore.wait_confirm")))]),t("div",{staticClass:"btnBox"},[t("el-button",{attrs:{size:"large",type:"primary",icon:"el-icon-arrow-left"},on:{click:e.onPrev}}),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.send_close,expression:"send_close"}],attrs:{size:"large",type:"primary"},on:{click:e.onSend}},[e._v(e._s(e.$t("dotOneToMore.step3_alert_5",{d:e.d_slice})))])],1)],1)},$=[],I=s("9daf"),q=I["a"],N=(s("61ba"),Object(y["a"])(q,j,$,!1,null,"d9623804",null)),P=N.exports,B="dotOneToMore",D={name:B,components:{OneToMoreHeader:l["a"],Step1:O,Step2:S,Step3:P},data:function(){return{supportNetworks:[{icon:"coin-dot",name:"Polkadot"},{icon:"kusama",name:"Kusama"}],stepActive:0,c_abi:[],send_tx:0,arrayLimit:0,c_address:"",currentFee:0,queueList:[],address:"",address_type:"1",decimals:6}},watch:{},created:function(){this.$i18n.getLocaleMessage("en")[B]||(this.$i18n.mergeLocaleMessage("en",i.en),this.$i18n.mergeLocaleMessage("zh",i.zh))},mounted:function(){return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onStep1Confirm:function(e){var t=e.queueList,s=e.address,n=e.address_type;this.queueList=t,this.address=s,this.address_type=n,this.stepActive=1},onStep2Confirm:function(e){var t=e.queueList,s=e.address,n=e.address_type,a=e.send_tx,r=e.arrayLimit,o=e.currentFee,i=e.c_address;this.queueList=t,this.address=s,this.address_type=n,this.send_tx=a,this.arrayLimit=r,this.currentFee=o,this.c_address=i,this.stepActive=2},onStep2Prev:function(){this.stepActive=0},onStep2Next:function(){this.stepActive=2},onStep3Prev:function(){this.stepActive=1},onChangeEditor:function(e){this.editorValue=e}}},F=D,E=(s("3ac0"),Object(y["a"])(F,n,a,!1,null,"2af75f20",null));t["default"]=E.exports},17:function(e,t){},18:function(e,t){},19:function(e,t){},"24a0":function(e,t,s){"use strict";s("f36aa")},"3ac0":function(e,t,s){"use strict";s("6ad6")},"61ba":function(e,t,s){"use strict";s("caf7")},"6ad6":function(e,t,s){},"6ffc":function(e,t,s){},"751d":function(e,t,s){"use strict";s("a71f")},"8fb4":function(e,t,s){"use strict";var n=function(){var e=this,t=e._self._c;return t("ul",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],staticClass:"dealList"},e._l(e.list,(function(s,n){return t("li",{key:s.address},[t("div",{staticClass:"left"},[t("span",{staticClass:"index"},[e._v(e._s(n+1))]),t("a",{staticClass:"address",attrs:{target:"_blank",href:e.$ethUtils.getScanLink("dot","tx",s.address)}},[e._v(e._s(s.address))])]),t("div",{staticClass:"right"},[t("span",{staticClass:"status"},[0===s.status?t("i",{staticClass:"el-icon-loading"}):1===s.status?t("i",{staticClass:"el-icon-success"}):2===s.status?t("i",{staticClass:"el-icon-error",staticStyle:{color:"#F05252"}}):e._e()])])])})),0)},a=[],r={props:{list:{type:Array,required:!0}},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},o=r,i=(s("24a0"),s("2877")),l=Object(i["a"])(o,n,a,!1,null,"67b63bdc",null);t["a"]=l.exports},"9daf":function(e,t,s){"use strict";(function(e){var n,a=s("c7eb"),r=s("1da1"),o=s("5530"),i=(s("a9e3"),s("14d9"),s("b680"),s("fb6a"),s("d3b7"),s("25f0"),s("8fb4")),l=s("901e"),c=s.n(l),d=s("2f62"),u=s("e298");t["a"]={name:"Step3",components:{DealList:i["a"]},props:{send_tx:{type:Number,required:!0},arrayLimit:{type:Number,required:!0},currentFee:{type:[String,Number],required:!0},c_address:{type:String,required:!0},queueList:{type:Array,required:!0},address:{type:String,required:!0}},data:function(){return{waitMetamask:!1,dealList:[],send_close:!1,decimals:0,addresses_to_send:[],balances_to_send:[],send_status:{},all_send:!1,d_slice:0,d_slice_s:0,web3:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(d["b"])(["isPc","dotNetwork","dotAccount"])),{},{chainInfo:function(){return u["a"].networks[this.dotNetwork]}}),created:function(){},mounted:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var s,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s in n=e,e.addresses_to_send=[],e.balances_to_send=[],e.decimals=e.chainInfo.decimals,e.queueList)e.addresses_to_send.push(e.queueList[s][0]),r=new c.a(10).pow(e.decimals).times(e.queueList[s][1]).toFixed(0),e.balances_to_send.push(r);return t.next=7,e._multisend(e.send_tx,e.arrayLimit);case 7:case"end":return t.stop()}}),t)})))()},methods:{onPrev:function(){this.$emit("onStep3Prev")},onSend:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.send_close=!1,t.next=3,e._multisend(e.d_slice_s,e.arrayLimit);case 3:case"end":return t.stop()}}),t)})))()},_multisend:function(t,s){var o=this;return Object(r["a"])(Object(a["a"])().mark((function r(){var i,l,c,d,u,p,_,h,f,m;return Object(a["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(h in a.prev=0,o.waitMetamask=!0,o.d_slice=o.send_tx-t===0?1:o.send_tx-t+1,o.d_slice_s=t,o.send_status={a:o.send_tx,b:t},i=(t-1)*s,l=t*s,c=o.addresses_to_send.slice(i,l),d=o.balances_to_send.slice(i,l),u=window.polkadotKeyring.decodeAddress("5FstNh7PcF4yp32VsSmc2F8kHkdHYhQCnk9WncXauQ44pxMA"),p=window.polkadotKeyring.encodeAddress(u,o.chainInfo.ss58Format),_=[],c)_.push(window.dot_ws.tx.balances.transfer(c[h],d[h]));return o.$isDev&&(c.unshift(p),d.unshift(o.currentFee)),a.next=16,window.polkadotExtensionDapp.web3FromAddress(o.dotAccount);case 16:return f=a.sent,a.next=19,window.dot_ws.tx.utility.batch(_).signAndSend(o.dotAccount,{nonce:-1,signer:f.signer});case 19:m=a.sent,m&&(n.dealList.push({address:"0x"+e.from(m).toString("hex"),status:1}),t--,t>0?n._multisend(t,s):(n.all_send=!0,o.waitMetamask=!1)),a.next=29;break;case 23:a.prev=23,a.t0=a["catch"](0),console.log("xxx",a.t0),"Confirmation declined by user"===a.t0&&(o.send_close=!0),o.waitMetamask=!1,o.$message.error(a.t0.toString());case 29:case"end":return a.stop()}}),r,null,[[0,23]])})))()}}}}).call(this,s("1c35").Buffer)},a394c:function(e,t,s){"use strict";s("6ffc")},a71f:function(e,t,s){},caf7:function(e,t,s){},f36aa:function(e,t,s){}}]);