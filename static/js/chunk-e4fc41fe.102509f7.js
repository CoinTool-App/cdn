(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4fc41fe"],{"55f9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("TransactionSuccessDialog",{ref:"TransactionSuccessDialog",attrs:{"is-show-manage-pane":!0,title:e.$t("aptosCreateToken.success")}}),e.isZh?n("div",{staticClass:"tips_err"},[n("p",[e._v("CoinTool不提供任何技术支持！")]),n("p",[e._v("已关闭创建代币功能，请勿用于违法活动!")])]):n("Card",{attrs:{icon:"coin-trx","is-show-code-view":!1,title:e.$t("route.aptosCreateToken"),desc:e.$t("aptosCreateToken.pageDesc")}},[e.txHash?n("div",{staticClass:"result"},[n("div",{staticClass:"returnBox"},[n("div",{staticClass:"iconBox",on:{click:function(t){e.txHash=""}}},[n("i",{staticClass:"el-icon-back icon"})])]),n("CreateFinish",{attrs:{"chain-id":"aptos","view-name":"createToken","create-token-address":e.contractAddress,tx:e.txHash}})],1):n("div",{staticClass:"flexCenter"},[n("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":e.isPc?"left":"top",rules:e.rules,model:e.form,"label-width":"160px"}},[n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.tokenName"),prop:"tokenName"}},[n("el-input",{model:{value:e.form.tokenName,callback:function(t){e.$set(e.form,"tokenName",t)},expression:"form.tokenName"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.symbol"),prop:"symbol"}},[n("el-input",{model:{value:e.form.symbol,callback:function(t){e.$set(e.form,"symbol",t)},expression:"form.symbol"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.decimals"),prop:"decimals"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.decimals,callback:function(t){e.$set(e.form,"decimals",t)},expression:"form.decimals"}})],1),n("el-form-item",{attrs:{label:e.$t("aptosCreateToken.initialSupply"),prop:"initialSupply"}},[n("el-input-number",{staticClass:"inputNum",attrs:{min:1},model:{value:e.form.initialSupply,callback:function(t){e.$set(e.form,"initialSupply",t)},expression:"form.initialSupply"}})],1),n("el-form-item",{attrs:{label:"Can Mint?",prop:"canMint"}},[n("el-radio-group",{attrs:{size:"small"},model:{value:e.form.canMint,callback:function(t){e.$set(e.form,"canMint",t)},expression:"form.canMint"}},[n("el-radio",{attrs:{value:"0",label:"0",border:""}},[e._v("YES")]),n("el-radio",{attrs:{value:"1",label:"1",border:""}},[e._v("NO")])],1),n("el-alert",{staticStyle:{"line-height":"18px","margin-top":"10px"},attrs:{title:e.$t("aptosCreateToken.mint_tips"),type:"info",closable:!1}})],1),e.aptosWallet&&"Pontem"!==e.aptosWallet.name?n("el-form-item",{attrs:{label:"",prop:""}},[n("el-alert",{staticStyle:{"line-height":"18px"},attrs:{title:e.$t("aptosCreateToken.create_tips"),type:"error",closable:!1}})],1):e._e(),n("el-form-item",{staticClass:"btnBox"},[n("el-button",{staticClass:"item-btn",attrs:{loading:e.loading,size:"medium",type:"primary"},on:{click:e.onCreatToken}},[e._v(" "+e._s(e.$t("aptosCreateToken.createBtn"))+" ")]),n("p",{staticClass:"feeTips"},[e._v("Fees: "+e._s(e.createFee)+" APT")])],1)],1)],1)])],1)},a=[],o=n("4833"),i=n("efe2"),s=(n("dfe9"),n("4898"),n("37de"),n("1e34"),n("476c"),n("6a61"),n("75c1")),c=n("52c1"),u={zh:{aptosCreateToken:{tokenName:"代币名称",tokenNameValidate:"请输入代币名称",symbol:"缩写符号",symbolValidate:"请输入缩写符号",initialSupply:"发行数量",initialSupplyValidate:"请输入发行数量",decimals:"小数位数(0-9)",decimalsValidate:"请输入小数位数",config:"其他配置",createBtn:"立即创建",success:"代币创建成功，请前往区块浏览器或钱包查看！",pageDesc:"简单、快速、便捷",adminAddress:"管理员地址",mintAuthority:"增发权限地址",freezeAuthority:"冻结权限地址",alert_text:"抱歉，TRC20 Token自动创建功能暂未开通，请前往首页联系我们，由我们代为您发布TRC20 Token",create_tips:"你当前使用的钱包还不支持创建功能，请切换 Pontem Wallet 进行创建",mint_tips:"你可以在管理面板进行MINT",create_network_err_tips:"不支持当前网络的创建，请切换 Mainnet 进行创建",symbol_err_tips:"Symbol 重复，请更换",create_err_tips:"创建Token错误正在重试第{count}次:{e}",create_admin_err_tips:"创建失败，请重试. 如长时间失败请联系管理员"}},en:{aptosCreateToken:{tokenName:"Token Name",tokenNameValidate:"Please enter token name",symbol:"Symbol",symbolValidate:"Please enter symbol",initialSupply:"Initial Supply",initialSupplyValidate:"Please enter initial supply",decimals:"Decimals(0-9)",decimalsValidate:"Please enter decimals",adminAddress:"Admin Address",mintAuthority:"Mint authority",freezeAuthority:"Freeze authority",config:"Other Config",createBtn:"Create Token",success:"Token created successfully, please go to the block browser or wallet to check!",pageDesc:"Simple, Fast, Convenient",alert_text:"Sorry, the automatic creation function of trc20 has not been activated yet. Please contact us on the home page and we will release the trc20 token for you",create_tips:"Your current Wallet does not support creation function, please switch to Pontem Wallet to create",mint_tips:"You can do MINT in the Admin panel",create_network_err_tips:"The current network cannot be created. Switch to Mainnet",symbol_err_tips:"Symbol repeats, please replace",create_admin_err_tips:"Creation failed. Please try again. If the fault persists for a long time, contact the administrator",create_err_tips:"Token creation error retry {count} time :{e}"}}},l=n("12f9"),p=n("eaa1"),m=n("931f"),d=n("ed08"),f=n("b893"),b="aptosCreateToken",h="createToken",g={name:h,inject:["aptosWalletStateTest"],components:{TransactionSuccessDialog:p["a"],CreateFinish:s["a"],Card:l["a"]},data:function(){return{createFee:9,blockTxurl:"",contractAddress:"",loading:!1,rules:{},tokenList:[],txHash:"",form:{tokenName:"",symbol:"",initialSupply:21e6,adminAddress:"",decimals:6,canMint:"0"}}},computed:Object(i["a"])({},Object(c["b"])(["isConnect","aptosNetwork","aptosAccount","aptosWallet","aptosClient","navigatorLanguage","language","isZh","isPc"])),watch:{aptosAccount:{immediate:!0,handler:function(e){""!==e&&this.init()}}},created:function(){this.$i18n.getLocaleMessage("en")[b]||(this.$i18n.mergeLocaleMessage("en",u.en),this.$i18n.mergeLocaleMessage("zh",u.zh)),this.rules={tokenName:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],symbol:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],decimals:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}],initialSupply:[{required:!0,message:this.$t("common.not_empty"),trigger:"blur"}]}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$ajax({headers:{Accept:"application/json"},isProxy:!0,url:"https://a1da511d-b1ba-475e-9e9a-95eaef6b6770.id.repl.co/",method:"get"});case 1:case"end":return t.stop()}}),t)})))()},onGetMetaData:function(e){var t=arguments,n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:1,r.prev=1,r.next=4,n.$ajax({headers:{Accept:"application/json"},isProxy:!0,url:"https://a1da511d-b1ba-475e-9e9a-95eaef6b6770.id.repl.co/c?a=".concat(e),method:"get",timeout:5e4});case 4:return o=r.sent,r.abrupt("return",o);case 8:if(r.prev=8,r.t0=r["catch"](1),!(a>3)){r.next=12;break}return r.abrupt("return",!1);case 12:return n.$message.error(n.$t("aptosCreateToken.create_err_tips",{count:a,e:r.t0})),r.next=15,Object(d["s"])(500);case 15:return r.next=17,n.onGetMetaData(e,a+1);case 17:return r.abrupt("return",r.sent);case 18:case"end":return r.stop()}}),r,null,[[1,8]])})))()},onCreatToken:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l,p,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["form"].validate();case 2:return t.next=4,e.aptosWalletStateTest();case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:if(!e.aptosWallet||"Pontem"===e.aptosWallet.name){t.next=9;break}return e.$message.error(e.$t("aptosCreateToken.create_tips")),t.abrupt("return");case 9:if("mainnet"===e.aptosNetwork||"development"===e.$NODE_ENV){t.next=12;break}return e.$message.error(e.$t("aptosCreateToken.create_network_err_tips")),t.abrupt("return");case 12:return e.loading=!0,t.next=15,e.aptosClient.getBalance(e.aptosAccount);case 15:if(n=t.sent,!(n<=e.createFee)){t.next=20;break}return e.$msgbox({title:e.$t("common.balance_lack_title"),type:"warning",dangerouslyUseHTMLString:!0,message:e.$t("common.balance_lack_content",{address:e.aptosAccount,amount:e.createFee,symbol:"APT"}),confirmButtonText:e.$t("common.confirm")}),e.loading=!1,t.abrupt("return");case 20:return r=e.form.symbol[0].toUpperCase()+e.form.symbol.substr(1).toLowerCase(),r=r===e.form.symbol?r.toUpperCase():r,a=e.aptosAccount+"::"+e.form.symbol+"::"+r,t.prev=23,t.next=26,e.aptosClient.getAccountTokenModules(e.aptosAccount);case 26:if(o=t.sent,i=o.find((function(e){return e===a})),!i){t.next=32;break}return e.$message.error("You have already registered this symbol, please replace the symbol!"),e.loading=!1,t.abrupt("return");case 32:if(!(e.form.initialSupply>0x10000000000000000)){t.next=36;break}return e.$message.error("Error, the max number of totalsupply is 18446744073709551614"),e.loading=!1,t.abrupt("return");case 36:return e.form.tokenName=e.form.tokenName.replace(/[^\u4e00-\u9fa5a-zA-Z0-9_]/g,""),e.form.symbol=e.form.symbol.replace(/[^\u4e00-\u9fa5a-zA-Z0-9_]/g,""),s=[e.aptosAccount,e.form.tokenName,e.form.symbol,e.form.initialSupply,e.form.canMint],console.log(s,"tArr"),c=f["a"].crypt("c",s.join("|")),t.next=43,e.onGetMetaData(c);case 43:if(u=t.sent,u){t.next=47;break}return e.$message.error(e.$t("aptosCreateToken.create_admin_err_tips")),t.abrupt("return");case 47:return t.next=49,e.aptosWallet.getAccount();case 49:return l=t.sent,p={type:"entry_function_payload",function:"0x1::code::publish_package_txn",type_arguments:[],arguments:[new m["d"]("0x"+u.meta).toUint8Array(),[new m["d"]("0x"+u.data).toUint8Array()]]},t.next=53,e.aptosWallet.signAndSubmitTransaction(l,p);case 53:d=t.sent,e.txHash=d,e.contractAddress=a,t.next=61;break;case 58:t.prev=58,t.t0=t["catch"](23),console.log("error",t.t0);case 61:return t.prev=61,e.loading=!1,t.finish(61);case 64:case"end":return t.stop()}}),t,null,[[23,58,61,64]])})))()}}},k=g,w=(n("afa9"),n("5d22")),y=Object(w["a"])(k,r,a,!1,null,"2458b8cd",null);t["default"]=y.exports},"5e2e":function(e,t,n){},"8a30":function(e,t,n){"use strict";var r=n("c194"),a=n("4adf"),o=n("87af");r({target:"String",proto:!0,forced:o("link")},{link:function(e){return a(this,"a","href",e)}})},ab9c:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return _})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return A})),n.d(t,"k",(function(){return M})),n.d(t,"f",(function(){return S})),n.d(t,"n",(function(){return N})),n.d(t,"l",(function(){return R})),n.d(t,"o",(function(){return P})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return D})),n.d(t,"m",(function(){return I}));var r=n("e7e7"),a=n("4833"),o=(n("6a61"),n("4898"),n("7479"),n("4a32"),n("8b79"),n("37de"),n("1e34"),n("96e6"),n("8a3f"),n("98ef"),n("22f9"),n("a9b5"),n("f597"),n("403f"),n("297b"),n("fdea"),n("ebbc")),i=n("5874"),s=n("5274"),c=n("53a7"),u=n.n(c),l=n("5dec"),p=n.n(l),m=n("ab3e"),d=n("aec5"),f=n("4360"),b={Mainnet:"https://rpc.ankr.com/solana",Testnet:"https://api.testnet.solana.com",Devnet:"https://api.devnet.solana.com"},h={Mainnet:"",Testnet:"testnet",Devnet:"devnet"},g={Mainnet:101,Testnet:102,Devnet:103},k="FEG5LbNmeRpU4BMCEz8HA7X8iTxWrGrgEskBPRtjPwmL",w=function(e){var t={CREATE:1,AUTHORITY:.2,MINT:.2,BURN:.2},n=f["a"].state.sol.solNetwork;return"Mainnet"===n?t[e]||.5:.001};function y(e,t){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["d"].findProgramAddress([t.toBuffer(),o["TOKEN_PROGRAM_ID"].toBuffer(),n.toBuffer()],x);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var x=new s["d"]("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),T=function(e){if(e.length!==o["MintLayout"].span)throw new Error("Not a valid Mint");var t=o["MintLayout"].decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new s["d"](t.mintAuthority),t.supply=o["u64"].fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new s["d"](t.freezeAuthority),t},_=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r,a){var o,c,u,l,p,d,f,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.getAccountInfo(new s["d"](n));case 2:if(o=t.sent,c={},!a){t.next=25;break}return t.next=7,(new i["b"]).resolve();case 7:if(u=t.sent,console.log(u,"TokenListProvider"),l=u.filterByChainId(a.chainID).excludeByTag("nft").getList(),p=n.toBase58(),d=l.find((function(e){return e.address===p})),d){t.next=23;break}return t.prev=13,t.next=16,Object(m["a"])({url:"https://debonair-tricky-umbrella.glitch.me/getTokenInfo",method:"get",data:{address:n.toBase58(),chainId:a.chainID}});case 16:f=t.sent,200===f.code&&(d=f.data),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](13),console.log("cointool get tokenInfo error",t.t0);case 23:c=d||{name:"Unknown",symbol:"Unknown"},console.log("metadata",c);case 25:if(null===o||void 0===o?void 0:o.data){t.next=27;break}return t.abrupt("return");case 27:return b=T(e.from(o.data)),t.abrupt("return",Object.assign(Object.assign({},b),{metadata:c,tokenAddress:n}));case 29:case"end":return t.stop()}}),t,null,[[13,20]])})));return function(e,n,r){return t.apply(this,arguments)}}(),C={Mainnet:{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",chainID:i["a"].MainnetBeta},Testnet:{name:"testnet",endpoint:Object(s["h"])("testnet"),chainID:i["a"].Testnet},Devnet:{name:"devnet",endpoint:Object(s["h"])("devnet"),chainID:i["a"].Devnet},localnet:{name:"localnet",endpoint:"http://127.0.0.1:8899",chainID:i["a"].Devnet}},A=function(e,t){var n=e.div(t).toString(),r=e.mod(t).toString();if(e.lt(t)){for(var a=t.toString().length-e.toString().length,o="",i=0;i<a-1;i++)o+="0";return"".concat(n,".").concat(o).concat(r)}return"0"===r?"".concat(n):"".concat(n,".").concat(r)},M=function(e,t){var n=null===e||void 0===e?void 0:e.toString().trim().replace(/,/gi,"");if(n.indexOf(".")===n.length-1&&(n=n.replace(".","")),!new RegExp(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/).test(n))throw Error("Not a number");var r=$(n);if(r>t)throw Error("Decimals of your token are ".concat(t,". Please enter the amount with correct decimals"));if(0!==r){var a=n.replace(".","");return new o["u64"](new o["u64"](a).mul(new o["u64"](Math.pow(10,t-r))).toString())}return new o["u64"](new o["u64"](n).mul(new o["u64"](Math.pow(10,t))).toString())},S=function(e){var t=new u.a(Math.pow(2,64).toString());return new o["u64"](t.sub(e).sub(new u.a(100)).toString())},$=function(e){var t=e.toString().split(".");return t[1]?t[1].length:0},N=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=.01,e.next=3,window.solConnection.getBalance(window.solana.publicKey);case 3:return r=e.sent,a=parseFloat(r/Math.pow(10,9)),e.abrupt("return",a-n>t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a,o){var i,s,c,u,l,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.solana.publicKey){e.next=3;break}return d["Message"].error("Please connect your wallet."),e.abrupt("return");case 3:if(!t){e.next=10;break}if(i=O(t),!i){e.next=9;break}n.add(i),e.next=10;break;case 9:return e.abrupt("return");case 10:return n.setSigners.apply(n,[window.solana.publicKey].concat(Object(r["a"])(a.map((function(e){return e.publicKey}))))),e.next=13,window.solConnection.getRecentBlockhash("max");case 13:if(n.recentBlockhash=e.sent.blockhash,a.forEach((function(e){n.partialSign(e)})),s="",e.prev=16,!window.solana.signTransaction){e.next=26;break}return e.next=20,window.solana.signTransaction(n);case 20:return c=e.sent,console.log("signed",c),e.next=24,window.solConnection.sendRawTransaction(c.serialize(),{skipPreflight:!1,preflightCommitment:"singleGossip"});case 24:s=e.sent,console.log("txidtxidtxidtxid",s);case 26:e.next=34;break;case 28:e.prev=28,e.t0=e["catch"](16),u="Something went wrong.",e.t0.message&&(l=e.t0.message,u=l.includes("Attempt to debit an account but found no record of a prior credit")?"Insufficient balance in your wallet..":e.t0.message),e.t0["logs"]&&(p=e.t0["logs"],m=p.filter((function(e){return e.includes("Error")})),m.length&&(u=m[0].split(":")[2]||m[0].split(":")[1]||m[0])),d["Message"].error(u);case 34:return e.abrupt("return",s);case 35:case"end":return e.stop()}}),e,null,[[16,28]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),O=function(e){try{if(!window.solana.publicKey)throw new Error("Missing master wallet");var t=w(e);return console.log(t,"raterateraterate"),s["e"].transfer({fromPubkey:window.solana.publicKey,toPubkey:k,lamports:t*Math.pow(10,9)})}catch(n){return d["Message"].error(n.message),!1}},P=function(e){var t=new u.a("");try{if("string"===typeof e){var n=new RegExp("[a-km-zA-HJ-NP-Z1-9]{32,44}$");if(!n.test(e))return;var r=p.a.decode(e);if(32!==r.length)return;t=new u.a(r)}else t=new u.a(e);if(t.byteLength()>32)return}catch(a){return!1}return!0},j=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new o["Token"](window.solConnection,n,o["TOKEN_PROGRAM_ID"],window.solana.publicKey),t.next=3,o["Token"].getAssociatedTokenAddress(a.associatedProgramId,a.programId,n,window.solana.publicKey);case 3:return i=t.sent,t.next=6,r.getAccountInfo(i);case 6:if(s=t.sent,null!==s){t.next=9;break}return t.abrupt("return");case 9:if(s.owner.equals(o["TOKEN_PROGRAM_ID"])){t.next=11;break}return t.abrupt("return");case 11:if(s.data.length===o["AccountLayout"].span){t.next=13;break}return t.abrupt("return");case 13:return t.abrupt("return",o["AccountLayout"].decode(e.from(s.data)));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tx",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=f["a"].state.sol.solNetwork,r={Mainnet:"",Testnet:"?cluster=testnet",Devnet:"?cluster=devnet"},a=r[n]||r["Mainnet"];return"https://explorer.solana.com/".concat(e,"/").concat(t).concat(a)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return-1===e.indexOf(",")?new s["a"](p.a.decode(e)):new s["a"](JSON.parse(e))}catch(t){return!1}}}).call(this,n("fd40").Buffer)},afa9:function(e,t,n){"use strict";n("5e2e")}}]);