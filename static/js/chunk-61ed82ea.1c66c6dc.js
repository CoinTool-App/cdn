(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61ed82ea"],{"3f37":function(e,t,a){},"7fa1":function(e,t,a){"use strict";a("3f37")},c735:function(e,t,a){"use strict";a.r(t);var s,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("approveTemplate",{attrs:{coin:"trx",rpc_node:"https://bsc.mytokenpocket.vip/"}})},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"container "+(e.tableData.length>0?"miniContainer":"")},[a("div",{staticClass:"createBox"},[a("div",{staticClass:"boxCenter"},[a("div",{staticClass:"coinIcon"},[a("svg-icon",{style:"color:"+e.coinList[e.form.coin].color,attrs:{"icon-class":e.coinList[e.form.coin].icon}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.coinList[e.form.coin].type,expression:"coinList[form.coin].type"}],staticClass:"radioBox"},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.coinList[e.form.coin].type,(function(t,s){return a("el-radio",{key:t,attrs:{label:s,border:""}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("div",{staticClass:"inputBox"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.$t("approve.sleep"),placement:"top"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address,expression:"form.address"}],staticClass:"input",attrs:{type:"text",placeholder:e.$t("approve.inputPlaceholder")},domProps:{value:e.form.address},on:{input:function(t){t.target.composing||e.$set(e.form,"address",t.target.value)}}})]),a("div",{staticClass:"icon",on:{click:e.onCheck}},[a("i",{class:e.loading?"el-icon-loading":"el-icon-right"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.tableData.length,expression:"tableData.length === 0"}],staticClass:"desc"},[a("el-alert",{attrs:{title:e.$t("approve.desc"),type:"success",closable:!1}})],1)])]),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],attrs:{"text-inside":!0,"stroke-width":12,percentage:e.percentage}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],staticClass:"scrollBox"},[a("div",{staticClass:"tips"},[a("p",{staticClass:"alertText"},[e._v(e._s(e.$t("approve.alert_text")))])]),a("el-row",{staticClass:"cardList",attrs:{gutter:20}},e._l(e.tableData,(function(t,s){return a("el-col",{key:s,attrs:{lg:12,xs:24}},[a("div",{staticClass:"card"},[a("div",{staticClass:"coinInfo"},[a("div",{staticClass:"left"},[a("div",{staticClass:"imgBox"},[a("el-image",{staticClass:"img img1",attrs:{src:e.coinList[e.form.coin].logo_link.replace("#address#","bsc"===e.form.coin?t.symbol:t.token_address)}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("img",{staticClass:"img",attrs:{src:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/pic/unknown-token.png"}})])])],1),a("div",{staticClass:"sybmol"},[a("a",{staticStyle:{"margin-left":"6px"},attrs:{href:e.coinList[e.form.coin].url+"/#/token20/"+t.token_address+"?a="+e.form.address,target:"_blank"}},[e._v(e._s(t.symbol))])])]),a("div",{staticClass:"right"},[e._v(" "+e._s(e.$t("approve.dangerLevel"))+": "),a("span",{class:"flag "+(1===t.type?"redBg":"greenBg")},[e._v(e._s(1===t.type?e.$t("approve.high"):e.$t("approve.low")))])])]),a("ul",[a("li",[a("p",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.smart_contract"))+":")]),a("a",{attrs:{href:e.coinList[e.form.coin].url+"/#/address/"+t.c_address,target:"_blank"}},[e._v(" "+e._s(e._f("autoAddress")(t.c_address))+" ")])])]),a("li",[a("p",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.token"))+":")]),a("a",{attrs:{href:e.coinList[e.form.coin].url+"/#/token20/"+t.token_address+"?a="+e.form.address,target:"_blank"}},[e._v(" "+e._s(e._f("autoAddress")(t.token_address))+" ")])])]),a("li",[a("p",[a("span",{staticClass:"key"},[e._v(e._s(e.$t("approve.amount"))+":")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.amount)+" "),a("i",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"item.type===1"}],staticClass:"el-icon-warning",staticStyle:{color:"red"}})])])])]),a("div",{staticClass:"unlockBtn"},[e.form.web3Address===e.form.address?a("el-button",{attrs:{disabled:1===t.status,type:"danger",size:"mini"},on:{click:function(a){return e.closeApprove(s,t)}}},[e._v(e._s(e.$t("approve.decline")))]):a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.$t("approve.unlock")))])],1)])])})),1)],1)],1)},i=[],c=(a("c975"),a("a434"),a("b680"),a("d3b7"),a("25f0"),a("498a"),a("ddb0"),a("96cf"),a("1da1")),l=a("5530"),d=a("023d"),p=a("d01b"),u=a.n(p),m=a("2f62"),v="approve",f="https://api.trongrid.io",g=new u.a({fullHost:f}),b=Object(l["a"])(Object(l["a"])({name:"ApproveTemplate",inject:["tronwalletStateTest"],props:{coin:{type:String,default:"eth"},rpc_node:{type:String,default:""}}},Object(m["b"])(["isPc"])),{},{data:function(){return{loading:!1,donationNum:0,donationChecked:!0,donationOk:!0,donationSybmol:"ETH",form:{coin:"eth",address:"",web3Address:""},tableData:[],coinList:{trx:{icon:"coin-trx",name:"TRON",url:"https://tronscan.io/",logo_link:"https://coin.top/production/logo/#address#.png",color:"#6bb1f1"}},percentage:0}},computed:Object(l["a"])({},Object(m["b"])(["isPc"])),created:function(){this.$i18n.getLocaleMessage("en")[v]||(this.$i18n.mergeLocaleMessage("en",d["a"].en),this.$i18n.mergeLocaleMessage("zh",d["a"].zh))},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.tronwalletStateTest();case 2:e.form.coin=e.coin,s=e,a=e.$route.query.address,setTimeout((function(){try{s.form.web3Address=s.form.address=window.tronWeb.defaultAddress.base58,0!==a.length&&(s.form.address=a)}catch(e){console.log(e)}}),1500);case 6:case"end":return t.stop()}}),t)})))()},methods:{onCheck:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n,o,i,c,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.form.address){t.next=3;break}return e.$message.error(e.$t("approve.inputPlaceholder")),t.abrupt("return");case 3:if(e.form.address=e.form.address.trim(),g.isAddress(e.form.address)){t.next=7;break}return e.$message.error(e.$t("approve.addressError")),t.abrupt("return");case 7:return e.tableData=[],e.percentage=0,e.loading=!0,a=[],t.prev=11,t.next=14,e.checkApi(e.form.address);case 14:s=t.sent,r=!1,t.t0=regeneratorRuntime.keys(s.data);case 17:if((t.t1=t.t0()).done){t.next=35;break}if(n=t.t1.value,"Approval"!==s.data[n].type){t.next=33;break}if(o=s.data[n].to,i=s.data[n].from+o,!a[i]){t.next=24;break}return t.abrupt("continue",17);case 24:if(a[i]=!0,c=e.$t("approve.unlimited"),l=1,d=s.data[n].value,"115792089237316195423570985008687907853269984665640564039457584007913129639935"!==s.data[n].value&&(c=parseFloat(parseInt(d)/Math.pow(10,s.data[n].token_info.decimals)),c.toString().indexOf(".")>-1&&(c=c.toFixed(4)),(c.toString().indexOf("e")>-1||c.toString().indexOf("+")>-1)&&(c="<0.00001"),l=2),0!==c){t.next=31;break}return t.abrupt("continue",17);case 31:r=!0,e.tableData.push({type:l,status:0,symbol:s.data[n].token_info.symbol,token_address:s.data[n].token_info.address,c_address:o,amount:c});case 33:t.next=17;break;case 35:if(r){t.next=39;break}return e.$message({message:e.$t("approve.addressZero")}),e.loading=!1,t.abrupt("return");case 39:t.next=44;break;case 41:t.prev=41,t.t2=t["catch"](11),console.log(t.t2);case 44:e.percentage=100,e.loading=!1;case 46:case"end":return t.stop()}}),t,null,[[11,41]])})))()},closeApprove:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.tableData[e].status=1,r.prev=1,n=[{type:"address",value:t.c_address},{type:"uint256",value:0}],r.next=5,window.tronWeb.transactionBuilder.triggerSmartContract(t.token_address,"approve(address,uint256)",{feeLimit:4e7},n);case 5:return o=r.sent,r.next=8,window.tronWeb.trx.sign(o.transaction);case 8:i=r.sent,window.tronWeb.trx.sendRawTransaction(i).then((function(t){s.tableData.splice(e,1),a.$message({message:a.$t("approve.decline_ok")})})).catch((function(e){console.log("wwwwww",e)})),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),a.tableData[e].status=0;case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},checkApi:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$ajax({url:"https://api.trongrid.io/v1/accounts/"+e+"/transactions/trc20",method:"get",timeout:1e4});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()}}}),h=b,w=(a("7fa1"),a("2877")),k=Object(w["a"])(h,o,i,!1,null,"898354c6",null),_=k.exports,x={name:"BscApprove",components:{approveTemplate:_}},y=x,C=Object(w["a"])(y,r,n,!1,null,null,null);t["default"]=C.exports}}]);