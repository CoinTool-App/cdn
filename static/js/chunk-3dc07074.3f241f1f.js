(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dc07074"],{"0092":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TransactionSkeleton",{enumerable:!0,get:function(){return n.TransactionSkeleton}}),Object.defineProperty(e,"addCellDep",{enumerable:!0,get:function(){return i.addCellDep}}),Object.defineProperty(e,"addressToScript",{enumerable:!0,get:function(){return n.addressToScript}}),Object.defineProperty(e,"createTransactionFromSkeleton",{enumerable:!0,get:function(){return n.createTransactionFromSkeleton}}),Object.defineProperty(e,"createTransactionSkeleton",{enumerable:!0,get:function(){return n.createTransactionSkeleton}}),Object.defineProperty(e,"encodeToAddress",{enumerable:!0,get:function(){return n.encodeToAddress}}),Object.defineProperty(e,"encodeToConfigAddress",{enumerable:!0,get:function(){return n.encodeToConfigAddress}}),Object.defineProperty(e,"minimalCellCapacity",{enumerable:!0,get:function(){return n.minimalCellCapacity}}),Object.defineProperty(e,"minimalCellCapacityCompatible",{enumerable:!0,get:function(){return n.minimalCellCapacityCompatible}}),Object.defineProperty(e,"minimalScriptCapacity",{enumerable:!0,get:function(){return n.minimalScriptCapacity}}),Object.defineProperty(e,"minimalScriptCapacityCompatible",{enumerable:!0,get:function(){return n.minimalScriptCapacityCompatible}}),Object.defineProperty(e,"objectToTransactionSkeleton",{enumerable:!0,get:function(){return n.objectToTransactionSkeleton}}),Object.defineProperty(e,"parseAddress",{enumerable:!0,get:function(){return n.parseAddress}}),Object.defineProperty(e,"sealTransaction",{enumerable:!0,get:function(){return n.sealTransaction}}),Object.defineProperty(e,"transactionSkeletonToObject",{enumerable:!0,get:function(){return n.transactionSkeletonToObject}});var n=r("c1f3"),i=r("832d")},"01b0":function(t,e,r){var n=r("b0fd");function i(t){return function(){return new n(t.apply(this,arguments))}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"01d4":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.issueToken=w,e.ownerForSudt=C,e.packAmount=S,e.transfer=A,e.unpackAmount=E;var n=r("832d"),i=r("0b92"),o=b(r("d4f1")),a=r("1c87"),s=b(r("5d00")),u=r("c1f3"),c=r("329b"),l=r("a2e8"),f=r("ad49"),p=m(r("d29a")),h=b(r("9a80")),d=r("6cf0"),g=r("4b0a");function y(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(y=function(t){return t?r:e})(t)}function m(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=y(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function b(t){return t&&t.__esModule?t:{default:t}}const{computeScriptHash:v}=i.utils,{ScriptValue:_}=i.values;async function w(t,e,r,i,o,{config:c}={}){c=c||(0,l.getConfig)();const f=c.SCRIPTS.SUDT;if(!f)throw new Error("Provided config does not have SUDT script setup!");t=(0,n.addCellDep)(t,{outPoint:{txHash:f.TX_HASH,index:f.INDEX},depType:f.DEP_TYPE});const p=(0,a.parseFromInfo)(e,{config:c}).fromScript,h=p,y={codeHash:f.CODE_HASH,hashType:f.HASH_TYPE,args:v(p)},m={cellOutput:{capacity:"0x0",lock:h,type:y},data:g.bytes.hexify(g.number.Uint128LE.pack(r)),outPoint:void 0,blockHash:void 0};i||(i=(0,u.minimalCellCapacityCompatible)(m));const b=d.BI.from(i);m.cellOutput.capacity="0x"+b.toString(16),t=t.update("outputs",t=>t.push(m));const _=t.get("outputs").size-1;return t=t.update("fixedEntries",t=>t.push({field:"outputs",index:_})),t=await s.default.injectCapacity(t,[e],d.BI.from(d.BI.from(m.cellOutput.capacity)),void 0,o,{config:c}),t}async function A(t,e,r,i,y,m,b,v,{config:w,LocktimePoolCellCollector:A=f.CellCollector,splitChangeCell:C=!1}={}){w=w||(0,l.getConfig)();let S=d.BI.from(y),k=b?d.BI.from(b):void 0;const x=w.SCRIPTS.SUDT;if(!x)throw new Error("Provided config does not have SUDT script setup!");if(0===e.length)throw new Error("`fromInfos` can't be empty!");if(!i)throw new Error("You must provide a to address!");const O=(0,u.parseAddress)(i,{config:w}),P=e.map(t=>(0,a.parseFromInfo)(t,{config:w}).fromScript),B=m?(0,u.parseAddress)(m,{config:w}):P[0];if(S.lte(0))throw new Error("amount must be greater than 0");const M=I(r,w),T=t.get("cellProvider");if(!T)throw new Error("Cell provider is missing!");let D=d.BI.from(0),j=d.BI.from(0);if((0,n.isAcpScript)(O,w)){const e=new p.CellCollector(i,T,{config:w,queryOptions:{type:M,data:"any"}}),r=(await e.collect().next()).value;if(!r)throw new Error("toAddress ANYONE_CAN_PAY input not found!");t=t.update("inputs",t=>t.push(r)),t=t.update("witnesses",t=>t.push("0x")),D=d.BI.from(r.cellOutput.capacity),j=E(r.data)}const H={cellOutput:{capacity:"0x0",lock:O,type:M},data:g.bytes.hexify(g.number.Uint128LE.pack(S)),outPoint:void 0,blockHash:void 0};(0,n.isAcpScript)(O,w)?(k||(k=d.BI.from(0)),H.cellOutput.capacity="0x"+D.add(k).toString(16),H.data=g.bytes.hexify(g.number.Uint128LE.pack(j.add(S)))):(k||(k=d.BI.from((0,u.minimalCellCapacityCompatible)(H))),H.cellOutput.capacity="0x"+k.toString(16)),t=t.update("outputs",t=>t.push(H)),t=t.update("fixedEntries",e=>e.push({field:"outputs",index:t.get("outputs").size-1})),t=(0,n.addCellDep)(t,{outPoint:{txHash:x.TX_HASH,index:x.INDEX},depType:x.DEP_TYPE});const L={cellOutput:{capacity:"0x0",lock:B,type:M},data:g.bytes.hexify(g.number.Uint128LE.pack(0)),outPoint:void 0,blockHash:void 0},U={cellOutput:{capacity:"0x0",lock:B,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let R=d.BI.from(0),F=d.BI.from(0),N=(0,c.Set)();for(const n of t.get("inputs"))N=N.add(`${n.outPoint.txHash}_${n.outPoint.index}`);let Q=(0,c.List)();v&&e.forEach((t,e)=>{const r=new A(t,T,{config:w,tipHeader:v,queryOptions:{type:M,data:"any"}});Q=Q.push({cellCollector:r,index:e})}),e.forEach((t,e)=>{const r=new h.default.CellCollector(t,T,{config:w,queryOptions:{type:M,data:"any"}}),n=new o.default.CellCollector(t,T,{config:w,queryOptions:{type:M,data:"any"}}),i=new p.default.CellCollector(t,T,{config:w,queryOptions:{type:M,data:"any"}});Q=Q.push({cellCollector:r,index:e},{cellCollector:n,index:e},{cellCollector:i,index:e,isAnyoneCanPay:!0,destroyable:(0,a.parseFromInfo)(t,{config:w}).destroyable})}),v&&e.forEach((t,e)=>{const r=new A(t,T,{config:w,tipHeader:v});Q=Q.push({cellCollector:r,index:e})}),e.forEach((t,e)=>{const r=new h.default.CellCollector(t,T,{config:w}),n=new o.default.CellCollector(t,T,{config:w}),i=new p.default.CellCollector(t,T,{config:w});Q=Q.push({cellCollector:r,index:e},{cellCollector:n,index:e},{cellCollector:i,index:e,isAnyoneCanPay:!0,destroyable:(0,a.parseFromInfo)(t,{config:w}).destroyable})});for(const{index:n,cellCollector:o,isAnyoneCanPay:a,destroyable:c}of Q)for await(const r of o.collect()){const i=`${r.outPoint.txHash}_${r.outPoint.index}`;if(N.has(i))continue;N=N.add(i);const o=e[n];t=await s.default.setupInputCell(t,r,o,{config:w});const l=t.get("outputs").size-1;t=t.update("outputs",t=>t.remove(l));const f=t.get("fixedEntries").findIndex(t=>"outputs"===t.field&&t.index===l);f>=0&&(t=t.update("fixedEntries",t=>t.remove(f)));const p=d.BI.from(r.cellOutput.capacity),h=r.cellOutput.type?E(r.data):d.BI.from(0);let y=a&&!c?p.sub((0,u.minimalCellCapacityCompatible)(r)):p,m=h;y.gt(k)&&(y=d.BI.from(k)),k=k.sub(y);const b=p.sub(y);(!a||a&&c)&&(R=R.add(b)),m.gt(S)&&(m=S),S=S.sub(m);const v=h.sub(m);if((!a||a&&c)&&(F=F.add(v)),a&&!c){const e={cellOutput:{capacity:"0x"+b.toString(16),lock:r.cellOutput.lock,type:r.cellOutput.type},data:r.cellOutput.type?g.bytes.hexify(g.number.Uint128LE.pack(v)):"0x"};t=t.update("outputs",t=>t.push(e)),r.cellOutput.type&&(t=t.update("fixedEntries",e=>e.push({field:"outputs",index:t.get("outputs").size-1})))}if(k.eq(0)&&S.eq(0)&&(R.eq(0)&&F.eq(0)||R.gt((0,u.minimalCellCapacityCompatible)(U))&&F.eq(0))){L.cellOutput.type=void 0,L.data="0x";break}if(k.eq(0)&&S.eq(0)&&R.gt((0,u.minimalCellCapacityCompatible)(U))&&F.gt(0))break}let K=-1;if((0,n.isAcpScript)(L.cellOutput.lock,w)&&-1!==(K=t.get("outputs").findIndex(t=>new _(L.cellOutput.lock,{validate:!1}).equals(new _(t.cellOutput.lock,{validate:!1}))&&(F.eq(0)&&!L.cellOutput.type&&!t.cellOutput.type||F.gte(0)&&!!L.cellOutput.type&&!!t.cellOutput.type&&new _(L.cellOutput.type,{validate:!1}).equals(new _(t.cellOutput.type,{validate:!1})))))&&-1===t.get("fixedEntries").findIndex(t=>"output"===t.field&&t.index===K)){const e=t.get("outputs").get(K),r=JSON.parse(JSON.stringify(e));r.cellOutput.capacity="0x"+d.BI.from(e.cellOutput.capacity).add(R).toString(16),F.gt(0)&&(r.data=g.bytes.hexify(g.number.Uint128LE.pack(E(e.data).add(F))));const n=d.BI.from((0,u.minimalCellCapacityCompatible)(L)),i=d.BI.from((0,u.minimalCellCapacityCompatible)(U));let o=!1;F.gt(0)&&C&&R.gte(n.add(i))&&(r.cellOutput.capacity=e.cellOutput.capacity,U.cellOutput.capacity="0x"+R.toString(16),o=!0),t=t.update("outputs",t=>t.set(K,r)),o&&(t=t.update("outputs",t=>t.push(U)))}else if(R.gte((0,u.minimalCellCapacityCompatible)(L))){L.cellOutput.capacity="0x"+R.toString(16),F.gt(0)&&(L.data=g.bytes.hexify(g.number.Uint128LE.pack(F)));const e=d.BI.from((0,u.minimalCellCapacityCompatible)(L)),r=d.BI.from((0,u.minimalCellCapacityCompatible)(U));let n=!1;F.gt(0)&&C&&R.gte(e.add(r))&&(L.cellOutput.capacity="0x"+e.toString(16),U.cellOutput.capacity="0x"+R.sub(e).toString(16),n=!0),t=t.update("outputs",t=>t.push(L)),F.gt(0)&&(t=t.update("fixedEntries",e=>e.push({field:"outputs",index:t.get("outputs").size-1}))),n&&(t=t.update("outputs",t=>t.push(U)))}else if(F.gt(0)&&R.lt((0,u.minimalCellCapacityCompatible)(L)))throw new Error("Not enough capacity for change in from infos!");if(k.gt(0))throw new Error("Not enough capacity in from infos!");if(S.gt(0))throw new Error("Not enough amount in from infos!");return t}function I(t,e){const r=e.SCRIPTS.SUDT;return{codeHash:r.CODE_HASH,hashType:r.HASH_TYPE,args:t}}function C(t,{config:e}={}){e=e||(0,l.getConfig)();const{fromScript:r}=(0,a.parseFromInfo)(t,{config:e}),n=v(r);return n}function E(t){return g.number.Uint128LE.unpack(g.bytes.bytify(t).slice(0,16))}function S(t){return g.bytes.hexify(g.number.Uint128LE.pack(t))}var k={issueToken:w,transfer:A,ownerForSudt:C,packAmount:S,unpackAmount:E};e.default=k},"03e3":function(t,e,r){"use strict";var n=r("448a").default,i=r("7037").default,o=r("ded3").default;r("d9e2"),r("d81d"),r("4de4"),r("d3b7"),r("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.generateAbsoluteEpochSince=p,e.generateHeaderEpoch=h,e.generateSince=c,e.maximumAbsoluteEpochSince=f,e.parseAbsoluteEpochSince=d,e.parseEpoch=l,e.parseSince=s,e.parseSinceCompatible=u,e.validateAbsoluteEpochSince=g,e.validateSince=y;var a=r("6cf0");function s(t){var e=u(t);return"epochNumber"===e.type?e:o(o({},e),{},{value:e.value.toBigInt()})}function u(t){var e,r,n=a.BI.from(t),i=n.shr(56),o=i.shr(5).and("0b11");if(o.eq(0))e="blockNumber",r=n.and("0xFFFFFFFFFFFFFF");else if(o.eq(1))e="epochNumber",r={length:n.shr(40).and(65535).toNumber(),index:n.shr(24).and(65535).toNumber(),number:n.and(16777215).toNumber()};else{if(!o.eq(2))throw new Error("Invalid metric flag!");e="blockTimestamp",r=n.and("0xFFFFFFFFFFFFFF")}return{relative:!i.and("0x80").eq(0),type:e,value:r}}function c(t){var e,r=t.relative,n=t.type,o=t.value,s=a.BI.from(0);return r&&(s=s.add(128)),"epochNumber"===n?s=s.add(32):"blockTimestamp"===n&&(s=s.add(64)),e=(0,a.isBIish)(o)?a.BI.from(o):"object"===i(o)?h(o):a.BI.from(o),m(s.shl(56).add(e))}function l(t){var e=a.BI.from(t);return{length:e.shr(40).and(65535).toNumber(),index:e.shr(24).and(65535).toNumber(),number:e.and(16777215).toNumber()}}function f(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=e.map((function(t){return d(t)})),o=Math.max.apply(Math,n(i.map((function(t){return t.number})))),s=i.filter((function(t){return t.number===o})),u=s[0],c=1;c<s.length;++c){var l=s[c];a.BI.from(l.index).mul(u.length).gte(a.BI.from(u.index).mul(l.length))&&(u=l)}return p(u)}function p(t){var e=t.length,r=t.index,n=t.number;return c({relative:!1,type:"epochNumber",value:{length:e,index:r,number:n}})}function h(t){var e=t.length,r=t.index,n=t.number;return m(a.BI.from(e).shl(40).add(a.BI.from(r).shl(24)).add(n))}function d(t){var e=u(t),r=e.relative,n=e.type,i=e.value;if(!1!==r||"epochNumber"!==n)throw new Error("Since format error!");return i}function g(t,e){var r=u(t).value,n=l(e);return a.BI.from(r.number).lt(n.number)||a.BI.from(r.number).eq(n.number)&&a.BI.from(r.index).mul(n.length).lte(a.BI.from(n.index).mul(r.length))}function y(t,e,r){var n=u(t),i=n.relative,o=n.type,s=n.value;if(i){if("epochNumber"===o){var c=l(e.epoch),f=l(r.epoch),p={number:a.BI.from(s.number).add(f.number),index:a.BI.from(s.index).mul(f.length).add(a.BI.from(f.index).mul(s.length)),length:a.BI.from(s.length).mul(f.length)};return 0===s.length&&0!==f.length?(p.index=a.BI.from(f.index),p.length=a.BI.from(f.length)):0===f.length&&0!==s.length&&(p.index=a.BI.from(s.index),p.length=a.BI.from(s.length)),!a.BI.from(p.length).eq(0)&&a.BI.from(p.index).gte(p.length)&&(p.number=p.index.div(p.length).add(p.number),p.index=p.index.mod(p.length)),a.BI.from(p.number).lt(c.number)||a.BI.from(p.number).eq(c.number)&&a.BI.from(p.index).mul(c.length).lte(a.BI.from(c.index).mul(p.length))}if("blockNumber"===o)return a.BI.from(s).add(r.blockNumber).lte(e.blockNumber);if("blockTimestamp"===o){if(!e.median_timestamp||!r.median_timestamp)throw new Error("Must provide median_timestamp!");return a.BI.from(s).mul(1e3).add(r.median_timestamp).lte(e.median_timestamp)}}else{if("epochNumber"===o)return g(t,e.epoch);if("blockNumber"===o)return a.BI.from(s).lte(e.blockNumber);if("blockTimestamp"===o){if(!e.median_timestamp)throw new Error("Must provide tip median_timestamp!");return a.BI.from(s).mul(1e3).lte(e.median_timestamp)}}return!1}function m(t){return"0x"+t.toString(16)}},"0426":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},"064e":function(t,e){function r(t){return 2*t.length}function n(t){const e=t.byteLength;let r="";for(let n=0;n<e-1;n+=2)r+=String.fromCharCode(t[n]+256*t[n+1]);return r}function i(t,e,n=0,i=r(e)){const o=Math.min(i,t.byteLength-n);let a=o;for(let r=0;r<e.length;++r){if((a-=2)<0)break;const i=e.charCodeAt(r),o=i>>8,s=i%256;t[n+2*r]=s,t[n+2*r+1]=o}return o}t.exports={byteLength:r,toString:n,write:i}},"088a":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(r("ca1d"));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var a={getBlockchainInfo:{method:"get_blockchain_info",paramsFormatters:[],resultFormatters:n.toBlockchainInfo},getDeploymentsInfo:{method:"get_deployments_info",paramsFormatters:[],resultFormatters:n.toDeploymentsInfo}};e.default=a},"0abe":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Uint128",{enumerable:!0,get:function(){return o.Uint128}}),Object.defineProperty(e,"Uint128BE",{enumerable:!0,get:function(){return o.Uint128BE}}),Object.defineProperty(e,"Uint128LE",{enumerable:!0,get:function(){return o.Uint128LE}}),Object.defineProperty(e,"Uint16",{enumerable:!0,get:function(){return o.Uint16}}),Object.defineProperty(e,"Uint16BE",{enumerable:!0,get:function(){return o.Uint16BE}}),Object.defineProperty(e,"Uint16LE",{enumerable:!0,get:function(){return o.Uint16LE}}),Object.defineProperty(e,"Uint256",{enumerable:!0,get:function(){return o.Uint256}}),Object.defineProperty(e,"Uint256BE",{enumerable:!0,get:function(){return o.Uint256BE}}),Object.defineProperty(e,"Uint256LE",{enumerable:!0,get:function(){return o.Uint256LE}}),Object.defineProperty(e,"Uint32",{enumerable:!0,get:function(){return o.Uint32}}),Object.defineProperty(e,"Uint32BE",{enumerable:!0,get:function(){return o.Uint32BE}}),Object.defineProperty(e,"Uint32LE",{enumerable:!0,get:function(){return o.Uint32LE}}),Object.defineProperty(e,"Uint512",{enumerable:!0,get:function(){return o.Uint512}}),Object.defineProperty(e,"Uint512BE",{enumerable:!0,get:function(){return o.Uint512BE}}),Object.defineProperty(e,"Uint512LE",{enumerable:!0,get:function(){return o.Uint512LE}}),Object.defineProperty(e,"Uint64",{enumerable:!0,get:function(){return o.Uint64}}),Object.defineProperty(e,"Uint64BE",{enumerable:!0,get:function(){return o.Uint64BE}}),Object.defineProperty(e,"Uint64LE",{enumerable:!0,get:function(){return o.Uint64LE}}),Object.defineProperty(e,"Uint8",{enumerable:!0,get:function(){return o.Uint8}}),Object.defineProperty(e,"array",{enumerable:!0,get:function(){return i.array}}),Object.defineProperty(e,"blockchain",{enumerable:!0,get:function(){return s.blockchain}}),Object.defineProperty(e,"byteArrayOf",{enumerable:!0,get:function(){return i.byteArrayOf}}),Object.defineProperty(e,"byteOf",{enumerable:!0,get:function(){return i.byteOf}}),Object.defineProperty(e,"byteVecOf",{enumerable:!0,get:function(){return i.byteVecOf}}),e.bytes=void 0,Object.defineProperty(e,"bytify",{enumerable:!0,get:function(){return n.bytify}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return n.concat}}),Object.defineProperty(e,"createArrayCodec",{enumerable:!0,get:function(){return a.createArrayCodec}}),Object.defineProperty(e,"createBytesCodec",{enumerable:!0,get:function(){return a.createBytesCodec}}),Object.defineProperty(e,"createFixedBytesCodec",{enumerable:!0,get:function(){return a.createFixedBytesCodec}}),Object.defineProperty(e,"createNullableCodec",{enumerable:!0,get:function(){return a.createNullableCodec}}),Object.defineProperty(e,"createObjectCodec",{enumerable:!0,get:function(){return a.createObjectCodec}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return n.equal}}),Object.defineProperty(e,"hexify",{enumerable:!0,get:function(){return n.hexify}}),Object.defineProperty(e,"isFixedCodec",{enumerable:!0,get:function(){return a.isFixedCodec}}),Object.defineProperty(e,"option",{enumerable:!0,get:function(){return i.option}}),Object.defineProperty(e,"struct",{enumerable:!0,get:function(){return i.struct}}),Object.defineProperty(e,"table",{enumerable:!0,get:function(){return i.table}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return i.union}}),Object.defineProperty(e,"vector",{enumerable:!0,get:function(){return i.vector}});var n=r("c914"),i=r("3224"),o=r("6436"),a=r("4b0a"),s=r("0b92");const u={bytify:n.bytify,hexify:n.hexify,concat:n.concat,equal:n.equal};e.bytes=u},"0b92":function(t,e,r){"use strict";var n=r("7037").default;r("d3b7"),r("ddb0"),r("159b"),r("b64b"),r("3ca3"),r("10d1"),r("e439"),Object.defineProperty(e,"__esModule",{value:!0});var i={values:!0,utils:!0,since:!0,helpers:!0,indexer:!0,logger:!0,blockchain:!0};e.values=e.utils=e.since=e.logger=e.indexer=e.helpers=e.blockchain=void 0;var o=g(r("2b43"));e.values=o;var a=g(r("9560"));e.utils=a;var s=g(r("03e3"));e.since=s;var u=g(r("6e6e"));e.helpers=u;var c=g(r("456cd"));e.indexer=c,Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(i,t)||t in e&&e[t]===c[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))}));var l=g(r("d30e"));e.logger=l;var f=g(r("fbbb"));e.blockchain=f;var p=r("e63c");Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(i,t)||t in e&&e[t]===p[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}}))}));var h=r("0426");function d(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(d=function(t){return t?r:e})(t)}function g(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!==typeof t)return{default:t};var r=d(e);if(r&&r.has(t))return r.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}Object.keys(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(i,t)||t in e&&e[t]===h[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}}))}))},"0be3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ResponseException=e.IdNotMatchException=void 0;var n=i(r("76d4"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r){return e=a(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=s(t,"string");return"symbol"===typeof e?e:String(e)}function s(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}class u extends Error{constructor(t,e){super(`Expect json rpc id to be ${t}, but ${e} received`),o(this,"code",n.default.IdNotMatch)}}e.IdNotMatchException=u;class c extends Error{constructor(...t){super(...t),o(this,"code",n.default.ResponseMessage)}}e.ResponseException=c;var l={IdNotMatchException:u,ResponseException:c};e.default=l},1170:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=a(r("7f73b")),i=a(r("8b00")),o=a(r("4778"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){var e=t.A,r=t.C,a=t.W;(0,o["default"])(e,1)(a,0);for(var s=0,u=0,c=0,l=32,f=0;f<24;f++){var p=n["default"][f],h=i["default"][f];(0,o["default"])(e,p)(r,0),s=a[0],u=a[1],l=32-h,c=h<32?0:1,a[c]=s<<h|u>>>l,a[(c+1)%2]=u<<h|s>>>l,(0,o["default"])(a,0)(e,p),(0,o["default"])(r,0)(a,0)}},u=s;e["default"]=u},"12cc":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.UnsupportedCipher=e.InvalidKeystore=e.IncorrectPassword=void 0;var n=u(r("1c46")),i=r("6a49"),o=r("6344"),a=r("ddb4"),s=r("9f6a");function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,r){return e=l(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){var e=f(t,"string");return"symbol"===typeof e?e:String(e)}function f(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}class p extends Error{constructor(){super("Unsupported cipher!")}}e.UnsupportedCipher=p;class h extends Error{constructor(){super("Incorrect password!")}}e.IncorrectPassword=h;class d extends Error{constructor(){super("Invalid keystore, please check your file integrity.")}}e.InvalidKeystore=d;const g="aes-128-ctr",y="ckb-cli";class m{constructor(t,e,r){c(this,"version",3),this.crypto=t,this.id=e,this.origin=r}static fromJson(t){try{const e=JSON.parse(t);return new m(e.crypto,e.id,e.origin)}catch{throw new d}}static load(t){const e=r("3e8f"),n=e.readFileSync(t,"utf-8");return this.fromJson(n)}save(t,{name:e=this.filename(),overwrite:n=!1}={}){const i=r("3e8f"),o=r("df7c"),a=o.join(t,e);if(!n&&i.existsSync(a))throw new Error("Keystore file already exists!");i.writeFileSync(a,this.toJson())}filename(){return this.id+".json"}toJson(){return JSON.stringify(this)}isFromCkbCli(){return this.origin===y}static createEmpty(){const t=n.default.randomBytes(32),e=n.default.randomBytes(16),r={dklen:32,salt:t.toString("hex"),n:2**18,r:8,p:1};return new m({ciphertext:"",cipherparams:{iv:e.toString("hex")},cipher:g,kdf:"scrypt",kdfparams:r,mac:""},(0,o.v4)())}static create(e,r,i={}){const a=i.salt||n.default.randomBytes(32),u=i.iv||n.default.randomBytes(16),c={dklen:32,salt:a.toString("hex"),n:2**18,r:8,p:1},l=t.from((0,s.syncScrypt)(t.from(r),a,c.n,c.r,c.p,c.dklen)),f=n.default.createCipheriv(g,l.slice(0,16),u);if(!f)throw new p;const h=t.concat([f.update(t.from(e.serialize().slice(2),"hex")),f.final()]);return new m({ciphertext:h.toString("hex"),cipherparams:{iv:u.toString("hex")},cipher:g,kdf:"scrypt",kdfparams:c,mac:m.mac(l,h)},(0,o.v4)())}isEmpty(){return""===this.crypto.ciphertext&&""===this.crypto.mac}decrypt(e){const r=this.derivedKey(e),i=t.from(this.crypto.ciphertext,"hex");if(m.mac(r,i)!==this.crypto.mac)throw new h;const o=n.default.createDecipheriv(this.crypto.cipher,r.slice(0,16),t.from(this.crypto.cipherparams.iv,"hex"));return"0x"+t.concat([o.update(i),o.final()]).toString("hex")}extendedPrivateKey(t){return a.ExtendedPrivateKey.parse(this.decrypt(t))}checkPassword(e){const r=this.derivedKey(e),n=t.from(this.crypto.ciphertext,"hex");return m.mac(r,n)===this.crypto.mac}derivedKey(e){const{kdfparams:r}=this.crypto;return t.from((0,s.syncScrypt)(t.from(e),t.from(r.salt,"hex"),r.n,r.r,r.p,r.dklen))}static mac(e,r){return new i.Keccak(256).update(t.concat([e.slice(16,32),r])).digest("hex")}static scryptOptions(t){return{N:t.n,r:t.r,p:t.p,maxmem:128*(t.n+t.p+2)*t.r}}}e.default=m}).call(this,r("1c35").Buffer)},"142e":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHexStringBytes=e.generateSearchKey=void 0,e.requestBatch=d,e.requestBatchTransactionWithStatus=g;var n=r("0b92"),i=l(r("9d96")),o=r("6cf0"),a=r("1f7a"),s=r("d8d3"),u=r("e4f07"),c=r("8130");function l(t){return t&&t.__esModule?t:{default:t}}const f=t=>{let e=void 0;const r={};let n=void 0,i="prefix";if(t.lock){const i=(0,u.unwrapScriptWrapper)(t.lock);if(e=(0,a.toScript)(i),n="lock",t.type&&"string"!==typeof t.type){const e=(0,u.unwrapScriptWrapper)(t.type);r.script=(0,a.toScript)(e)}}else if(t.type&&"string"!==typeof t.type){const r=(0,u.unwrapScriptWrapper)(t.type);e=(0,a.toScript)(r),n="type"}let c=null;if(t.fromBlock&&t.toBlock&&(c=[t.fromBlock,"0x"+o.BI.from(t.toBlock).add(1).toString(16)]),c&&(r.block_range=c),t.outputDataLenRange&&(r.output_data_len_range=t.outputDataLenRange),t.outputCapacityRange&&(r.output_capacity_range=t.outputCapacityRange),t.scriptLenRange&&(r.script_len_range=t.scriptLenRange),t.scriptSearchMode&&(i=t.scriptSearchMode),!e)throw new Error("Either lock or type script must be provided!");if(!n)throw new Error("script_type must be provided");return(0,s.toSearchKey)({script:e,script_type:n,filter:r,script_search_mode:i})};e.generateSearchKey=f;const p=t=>(n.utils.assertHexString("",t),Math.ceil(t.substr(2).length/2));e.getHexStringBytes=p;let h=0;async function d(t,e){if(!e.length)return[];const r=await(0,i.default)(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map(t=>({id:h++,...t})))});if(200!==r.status)throw new Error("Indexer request failed with HTTP code "+r.status);const n=await r.json();if(void 0!==n.error)throw new Error("indexer request rpc failed with error: "+JSON.stringify(n.error));return n}async function g(t,e){if(0===e.length)return[];const r=e.map((t,e)=>({id:e,jsonrpc:"2.0",method:"get_transaction",params:[t]})),n=await d(t,r);return n.map(t=>c.ResultFormatter.toTransactionWithStatus(t.result))}},"158e":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.privateKeyToBlake160=f,e.privateToPublic=c,e.publicKeyToBlake160=l,e.recoverFromSignature=u,e.signRecoverable=s;var n=r("0b92"),i=r("3337"),o=r("9cd4");const a=new i.ec("secp256k1");function s(t,e){n.utils.assertHexString("message",t),(0,o.assertPrivateKey)(e);const r=a.keyFromPrivate(e.slice(2)),{r:i,s:s,recoveryParam:u}=r.sign(t.slice(2),{canonical:!0});if(null===u)throw new Error("Sign message failed!");const c=i.toString(16).padStart(64,"0"),l=s.toString(16).padStart(64,"0"),f=u.toString(16).padStart(2,"0");return"0x"+c+l+f}function u(e,r){n.utils.assertHexString("message",e),n.utils.assertHexString("signature",r);const i=t.from(e.slice(2),"hex"),o=t.from(r.slice(2),"hex"),s={r:o.slice(0,32),s:o.slice(32,64),recoveryParam:o[64]},u=a.recoverPubKey(i,s,s.recoveryParam),c="0x"+u.encode("hex",!0).toLowerCase();return c}function c(e){let r=e;if("string"===typeof e&&((0,o.assertPrivateKey)(e),r=t.from(e.slice(2),"hex")),32!==r.length)throw new Error("Private key must be 32 bytes!");const n=a.keyFromPrivate(r).getPublic(!0,"hex");return"string"===typeof e?"0x"+n:t.from(n,"hex")}function l(t){(0,o.assertPublicKey)(t);const e=(new n.utils.CKBHasher).update(t).digestHex().slice(0,42);return e}function f(t){const e=c(t);return l(e)}var p={signRecoverable:s,recoverFromSignature:u,privateToPublic:c,publicKeyToBlake160:l,privateKeyToBlake160:f};e.default=p}).call(this,r("1c35").Buffer)},"1c87":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isMultisigFromInfo=u,e.multisigArgs=l,e.parseFromInfo=f,e.serializeMultisigScript=c;var n=r("0b92"),i=r("c1f3"),o=r("a2e8"),a=r("4b0a");const{CKBHasher:s}=n.utils;function u(t){if(!t||"object"!==typeof t)return!1;const e=t;return"number"===typeof(null===e||void 0===e?void 0:e.R)&&"number"===typeof(null===e||void 0===e?void 0:e.M)&&Array.isArray(null===e||void 0===e?void 0:e.publicKeyHashes)}function c({R:t,M:e,publicKeyHashes:r}){if(t<0||t>255)throw new Error("`R` should be less than 256!");if(e<0||e>255)throw new Error("`M` should be less than 256!");return"0x00"+("00"+t.toString(16)).slice(-2)+("00"+e.toString(16)).slice(-2)+("00"+r.length.toString(16)).slice(-2)+r.map(t=>t.slice(2)).join("")}function l(t,e){let r="0x";return null!=e&&(r=a.bytes.hexify(a.number.Uint64LE.pack(e))),(new s).update(t).digestHex().slice(0,42)+r.slice(2)}function f(t,{config:e}={}){let r,n,a,s;if(e=e||(0,o.getConfig)(),"string"===typeof t)r=(0,i.parseAddress)(t,{config:e});else if("R"in t){const i=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!i)throw new Error("Provided config does not have SECP256K1_BLAKE16_MULTISIG script setup!");n=c(t);const o=l(n,t.since);r={codeHash:i.CODE_HASH,hashType:i.HASH_TYPE,args:o}}else if("address"in t){const n=e.SCRIPTS.ANYONE_CAN_PAY;if(!n)throw new Error("Provided config does not have ANYONE_CAN_PAY script setup!");const o=t.address;if(r=(0,i.parseAddress)(o,{config:e}),a=t.destroyable,r.codeHash!==n.CODE_HASH||r.hashType!==n.HASH_TYPE)throw new Error("fromInfo.address is not ANYONE_CAN_PAY address!")}else{if(!("script"in t))throw new Error("Invalid fromInfo format!");r=t.script,s=t.customData}return{fromScript:r,multisigScript:n,destroyable:a,customData:s}}},"1db6":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TerminableCellAdapter=e.CkbIndexer=void 0;var n=r("0b92"),i=r("142e"),o=r("8d64"),a=r("faa1"),s=r("4235"),u=r("6cf0"),c=r("8f9d"),l=r("8130"),f=r("a7ee"),p=r("e4f07");function h(t,e,r){return e=d(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=g(t,"string");return"symbol"===typeof e?e:String(e)}function g(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}const y=()=>({stop:!1,push:!0});function m(t,e){console.log(`[${t}] ${e}`)}class b{constructor(t,e){h(this,"medianTimeEmitters",[]),h(this,"emitters",[]),h(this,"isSubscribeRunning",!1),this.ckbIndexerUrl=t,this.ckbRpcUrl=e,this.uri=e||t,this.ckbIndexerUri=t}getCkbRpc(){return new l.CKBRPC(this.uri)}getIndexerRpc(){if(this.uri===this.ckbIndexerUri){const t=this.getCkbRpc();return{...t,getTip:t.getIndexerTip}}return new c.RPC(this.ckbIndexerUri)}async tip(){return await this.getIndexerRpc().getTip()}asyncSleep(t){return new Promise(e=>setTimeout(e,t))}async waitForSync(t=0){const e=parseInt((await this.getCkbRpc().getTipHeader()).number,16);while(1){const r=parseInt((await this.tip()).blockNumber,16);if(r+t>=e)return;await this.asyncSleep(1e3)}}collector(t,e){return new o.CKBCellCollector(this,t,e)}async getCells(t,e=y,r={}){return new v(this.getIndexerRpc()).getCells(t,e,r)}async getTransactions(t,e={}){let r=[],n=e.lastCursor;const i=e.sizeLimit||100,o=e.order||"asc";while(1){const e=await this.getIndexerRpc().getTransactions(t,o,"0x"+i.toString(16),n),a=e.objects;if(n=e.lastCursor,r=r.concat(a),a.length<=i)break}return{objects:r,lastCursor:n}}running(){return!0}start(){m("warn","deprecated: no need to start the ckb-indexer manually")}startForever(){m("warn","deprecated: no need to startForever the ckb-indexer manually")}stop(){m("warn","deprecated: no need to stop the ckb-indexer manually")}subscribe(t){if(this.isSubscribeRunning=!0,this.scheduleLoop(),t.lock&&t.type)throw new Error("The notification machanism only supports you subscribing for one script once so far!");null===t.toBlock&&null===t.skip||m("warn","The passing fields such as toBlock and skip are ignored in subscribe() method.");const e=new s.IndexerEmitter;if(e.argsLen=t.argsLen,e.outputData=t.data&&(0,p.unwrapDataWrapper)(t.data),t.fromBlock&&n.utils.assertHexadecimal("fromBlock",t.fromBlock),e.fromBlock=t.fromBlock?u.BI.from(t.fromBlock):u.BI.from(0),t.lock)f.validators.ValidateScript(t.lock),e.lock=t.lock;else{if(!t.type||"empty"===t.type)throw new Error("Either lock or type script must be provided!");f.validators.ValidateScript(t.type),e.type=t.type}return this.emitters.push(e),e}loop(){this.isSubscribeRunning&&this.poll().then(t=>{this.scheduleLoop(t)}).catch(t=>{m("error",`Error occurs: ${t} ${t.stack}, stopping indexer!`),this.isSubscribeRunning=!1})}scheduleLoop(t=1){setTimeout(()=>{this.loop()},t)}async poll(){let t=1;const e=await this.tip(),{blockNumber:r,blockHash:n}=e;if("0x0"===r){const t=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(t)}const i=u.BI.from(r).add(1),o=await this.getCkbRpc().getBlockByNumber("0x"+i.toString(16));if(o)if(o.header.parentHash===n)await this.publishAppendBlockEvents(o);else{const t=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(t)}else{const e=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(e),t=3e3}return t}async publishAppendBlockEvents(t){for(const[e,r]of t.transactions.entries()){const n=t.header.number;if(e>0){const t=r.inputs.map(t=>t.previousOutput.txHash),e=await(0,i.requestBatchTransactionWithStatus)(this.uri,t).then(t=>t.map((t,e)=>{const n=r.inputs[e].previousOutput.index,i=t.transaction.outputs[parseInt(n)],o=t.transaction.outputsData[parseInt(n)];return{output:i,outputData:o}}));e.forEach(({output:t,outputData:e})=>{this.filterEvents(t,n,e)})}for(const[t,e]of r.outputs.entries()){const i=r.outputsData[t];this.filterEvents(e,n,i)}}await this.emitMedianTimeEvents()}filterEvents(t,e,r){for(const n of this.emitters)void 0!==n.lock&&this.checkFilterOptions(n,e,r,n.lock,t.lock)&&n.emit("changed");if(null!==t.type)for(const n of this.emitters)void 0!==n.type&&this.checkFilterOptions(n,e,r,n.type,t.type)&&n.emit("changed")}checkFilterOptions(t,e,r,n,i){const o=!t.fromBlock||u.BI.from(t.fromBlock).lte(e),a="any"===t.outputData||!t.outputData||t.outputData===r,s=!i||n.codeHash===i.codeHash&&n.hashType===i.hashType&&this.checkArgs(t.argsLen,n.args,i.args);return o&&a&&s}checkArgs(t,e,r){return-1===t||!t&&0!==t?e===r:("number"===typeof t&&r.length===2*t+2||"any"===t)&&r.substring(0,e.length)===e}async emitMedianTimeEvents(){if(0===this.medianTimeEmitters.length)return;const t=await this.getCkbRpc().getBlockchainInfo(),e=t.medianTime;for(const r of this.medianTimeEmitters)r.emit("changed",e)}subscribeMedianTime(){this.isSubscribeRunning=!0,this.scheduleLoop();const t=new a.EventEmitter;return this.medianTimeEmitters.push(t),t}}e.CkbIndexer=b,h(b,"version","0.4.1");class v{constructor(t){this.getCellsableRpc=t}async getCells(t,e=y,r={}){const n=[];let i=r.lastCursor;const o=r.sizeLimit||100,a=r.order||"asc",s=0;while(1){const r=await this.getCellsableRpc.getCells(t,a,"0x"+o.toString(16),i),u=r.objects;i=r.lastCursor;for(const t of u){const r={cellOutput:t.output,data:t.outputData,outPoint:t.outPoint?t.outPoint:void 0,blockNumber:t.blockNumber},{stop:o,push:a}=e(s,r);if(a&&n.push(r),o)return{objects:n,lastCursor:i}}if(u.length<=o)break}return{objects:n,lastCursor:i}}}e.TerminableCellAdapter=v},"1f7a":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toSearchKey=e.toSearchFilter=e.toScript=e.toGetTransactionsSearchKey=e.toGetCellsSearchKey=void 0;const n=t=>({code_hash:t.codeHash,hash_type:t.hashType,args:t.args});e.toScript=n;const i=t=>({script:t.script?n(t.script):t.script,output_data_len_range:t.outputDataLenRange,output_capacity_range:t.outputCapacityRange,block_range:t.blockRange,script_len_range:t.scriptLenRange});e.toSearchFilter=i;const o=t=>({script:n(t.script),script_type:t.scriptType,filter:t.filter?i(t.filter):t.filter,script_search_mode:t.scriptSearchMode?t.scriptSearchMode:"prefix"});e.toSearchKey=o;const a=t=>({...o(t),with_data:t.withData});e.toGetCellsSearchKey=a;const s=t=>({...o(t),group_by_transaction:t.groupByTransaction});e.toGetTransactionsSearchKey=s},2224:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformBlock=_,e.TransformCellInput=f,e.TransformCellOutput=p,e.TransformCellbaseWitness=w,e.TransformHeader=b,e.TransformOutPoint=c,e.TransformRawHeader=m,e.TransformRawTransaction=g,e.TransformScript=u,e.TransformTransaction=y,e.TransformUncleBlock=v,e.TransformWitnessArgs=A;var n=o(r("9178"));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function a(t,e){return e instanceof Object&&e.serializeJson instanceof Function?e.serializeJson.call(e):e}function s(t,e,r){if(e=a(t,e),!(e instanceof Object))throw new Error(`Transformed ${t} is not an object!`);const n={};for(const[i,o]of Object.entries(r)){let r=e[i];if(!r){const t=i.replace(/(_[a-z])/g,t=>t.toUpperCase().replace("_",""));r=e[t]}r&&(n[i]=o(`${t}.${i}`,r))}return n}function u(t,{validation:e=!0,debugPath:r="script"}={}){return t=s(r,t,{codeHash:a,hashType:a,args:a}),e&&n.ValidateScript(t,{debugPath:"(transformed) "+r}),t}function c(t,{validation:e=!0,debugPath:r="outPoint"}={}){return t=s(r,t,{txHash:a,index:a}),e&&n.ValidateOutPoint(t,{debugPath:"(transformed) "+r}),t}function l(t){return function(e,r){return t(r,{validation:!1,debugPath:e})}}function f(t,{validation:e=!0,debugPath:r="cell_input"}={}){return t=s(r,t,{since:a,previousOutput:l(c)}),e&&n.ValidateCellInput(t,{debugPath:"(transformed) "+r}),t}function p(t,{validation:e=!0,debugPath:r="cellOutput"}={}){return t=s(r,t,{capacity:a,lock:l(u),type:l(u)}),e&&n.ValidateCellOutput(t,{debugPath:"(transformed) "+r}),t}function h(t,{validation:e=!0,debugPath:r="cell_dep"}={}){return t=s(r,t,{outPoint:l(c),depType:a}),e&&n.ValidateCellDep(t,{debugPath:"(transformed) "+r}),t}function d(t){return function(e,r){return r.map((r,n)=>t(`${e}[${n}]`,r))}}function g(t,{validation:e=!0,debugPath:r="raw_transaction"}={}){return t=s(r,t,{version:a,cellDeps:d(l(h)),headerDeps:d(a),inputs:d(l(f)),outputs:d(l(p)),outputsData:d(a)}),e&&n.ValidateRawTransaction(t,{debugPath:"(transformed) "+r}),t}function y(t,{validation:e=!0,debugPath:r="transaction"}={}){return t=s(r,t,{version:a,cellDeps:d(l(h)),headerDeps:d(a),inputs:d(l(f)),outputs:d(l(p)),outputsData:d(a),witnesses:d(a)}),e&&n.ValidateTransaction(t,{debugPath:"(transformed) "+r}),t}function m(t,{validation:e=!0,debugPath:r="raw_header"}={}){return t=s(r,t,{version:a,compactTarget:a,timestamp:a,number:a,epoch:a,parentHash:a,transactionsRoot:a,proposalsHash:a,extraHash:a,dao:a}),e&&n.ValidateRawHeader(t,{debugPath:"(transformed) "+r}),t}function b(t,{validation:e=!0,debugPath:r="header"}={}){return t=s(r,t,{version:a,compactTarget:a,timestamp:a,number:a,epoch:a,parentHash:a,transactionsRoot:a,proposalsHash:a,extraHash:a,dao:a,nonce:a}),e&&n.ValidateHeader(t,{debugPath:"(transformed) "+r}),t}function v(t,{validation:e=!0,debugPath:r="uncle_block"}={}){return t=s(r,t,{header:l(b),proposals:d(a)}),e&&n.ValidateUncleBlock(t,{debugPath:"(transformed) "+r}),t}function _(t,{validation:e=!0,debugPath:r="block"}={}){return t=s(r,t,{header:l(b),uncles:d(l(v)),transactions:d(l(y)),proposals:d(a)}),e&&n.ValidateBlock(t,{debugPath:"(transformed) "+r}),t}function w(t,{validation:e=!0,debugPath:r="cellbase_witness"}={}){return t=s(r,t,{lock:l(u),message:a}),e&&n.ValidateCellbaseWitness(t,{debugPath:"(transformed) "+r}),t}function A(t,{validation:e=!0,debugPath:r="witness_args"}={}){return t=s(r,t,{lock:a,inputType:a,outputType:a}),e&&n.ValidateWitnessArgs(t,{debugPath:"(transformed) "+r}),t}},"28ac":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},"28dd":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CKBHasher",{enumerable:!0,get:function(){return n.CKBHasher}}),Object.defineProperty(e,"assertHexString",{enumerable:!0,get:function(){return n.assertHexString}}),Object.defineProperty(e,"assertHexadecimal",{enumerable:!0,get:function(){return n.assertHexadecimal}}),Object.defineProperty(e,"ckbHash",{enumerable:!0,get:function(){return n.ckbHash}}),Object.defineProperty(e,"computeScriptHash",{enumerable:!0,get:function(){return n.computeScriptHash}}),Object.defineProperty(e,"formatUnit",{enumerable:!0,get:function(){return i.formatUnit}}),Object.defineProperty(e,"generateTypeIdScript",{enumerable:!0,get:function(){return n.generateTypeIdScript}}),Object.defineProperty(e,"parseUnit",{enumerable:!0,get:function(){return i.parseUnit}});var n=r("9560"),i=r("6cf0")},"2a27":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("9869");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var i=r("0be3");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}));var o=r("9dd8");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}))},"2b43":function(t,e,r){"use strict";(function(t){var n=r("ed6d").default,i=r("2d0d").default,o=r("970b").default,a=r("5bc3").default,s=r("7037").default;r("d3b7"),r("3ca3"),r("10d1"),r("ddb0"),r("e439"),Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionValue=e.ScriptValue=e.RawTransactionValue=e.OutPointValue=void 0;var u=r("d699"),c=r("9560"),l=r("4b0a"),f=h(r("fbbb"));function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(p=function(t){return t?r:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!==typeof t)return{default:t};var r=p(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}var d=l.bytes.hexify,g=function(){function e(t){o(this,e),this.buffer=t}return a(e,[{key:"equals",value:function(t){return d(this.buffer)===d(t.buffer)}},{key:"hashCode",value:function(){return(0,u.xxHash32)(t.from(this.buffer),0)}},{key:"hash",value:function(){return(0,c.ckbHash)(this.buffer)}}]),e}(),y=function(t){n(r,t);var e=i(r);function r(t){return o(this,r),e.call(this,f.Script.pack(t))}return a(r)}(g);e.ScriptValue=y;var m=function(t){n(r,t);var e=i(r);function r(t){return o(this,r),e.call(this,f.OutPoint.pack(t))}return a(r)}(g);e.OutPointValue=m;var b=function(t){n(r,t);var e=i(r);function r(t){return o(this,r),e.call(this,f.RawTransaction.pack(t))}return a(r)}(g);e.RawTransactionValue=b;var v=function(t){n(r,t);var e=i(r);function r(t){return o(this,r),e.call(this,f.Transaction.pack(t))}return a(r)}(g);e.TransactionValue=v}).call(this,r("1c35").Buffer)},"2edd":function(t,e){function r(t){let e=0;for(let r=0,n=t.length;r<n;r++){const i=t.charCodeAt(r);if(i>=55296&&i<=56319&&r+1<n){const n=t.charCodeAt(r+1);if(n>=56320&&n<=57343){e+=4,r++;continue}}e+=i<=127?1:i<=2047?2:3}return e}let n,i;if("undefined"!==typeof TextDecoder){const t=new TextDecoder;n=function(e){return t.decode(e)}}else n=function(t){const e=t.byteLength;let r="",n=0;while(n<e){let i=t[n];if(i<=127){r+=String.fromCharCode(i),n++;continue}let o=0,a=0;if(i<=223?(o=1,a=31&i):i<=239?(o=2,a=15&i):i<=244&&(o=3,a=7&i),e-n-o>0){let e=0;while(e<o)i=t[n+e+1],a=a<<6|63&i,e+=1}else a=65533,o=e-n;r+=String.fromCodePoint(a),n+=o+1}return r};if("undefined"!==typeof TextEncoder){const t=new TextEncoder;i=function(e,n,i=0,o=r(n)){const a=Math.min(o,e.byteLength-i);return t.encodeInto(n,e.subarray(i,i+a)),a}}else i=function(t,e,n=0,i=r(e)){const o=Math.min(i,t.byteLength-n);t=t.subarray(n,n+o);let a=0,s=0;while(a<e.length){const r=e.codePointAt(a);if(r<=127){t[s++]=r,a++;continue}let n=0,i=0;r<=2047?(n=6,i=192):r<=65535?(n=12,i=224):r<=2097151&&(n=18,i=240),t[s++]=i|r>>n,n-=6;while(n>=0)t[s++]=128|r>>n&63,n-=6;a+=r>=65536?2:1}return o};t.exports={byteLength:r,toString:n,write:i}},3224:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"array",{enumerable:!0,get:function(){return i.array}}),Object.defineProperty(e,"byteArrayOf",{enumerable:!0,get:function(){return n.byteArrayOf}}),Object.defineProperty(e,"byteOf",{enumerable:!0,get:function(){return n.byteOf}}),Object.defineProperty(e,"byteVecOf",{enumerable:!0,get:function(){return n.byteVecOf}}),Object.defineProperty(e,"option",{enumerable:!0,get:function(){return i.option}}),Object.defineProperty(e,"struct",{enumerable:!0,get:function(){return i.struct}}),Object.defineProperty(e,"table",{enumerable:!0,get:function(){return i.table}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return i.union}}),Object.defineProperty(e,"vector",{enumerable:!0,get:function(){return i.vector}});var n=r("cd46"),i=r("c4c7")},"329b":function(t,e,r){"use strict";r.r(e),r.d(e,"Collection",(function(){return S})),r.d(e,"Iterable",(function(){return ii})),r.d(e,"List",(function(){return Mr})),r.d(e,"Map",(function(){return nr})),r.d(e,"OrderedMap",(function(){return Wr})),r.d(e,"OrderedSet",(function(){return Un})),r.d(e,"PairSorting",(function(){return Kn})),r.d(e,"Range",(function(){return bn})),r.d(e,"Record",(function(){return qn})),r.d(e,"Repeat",(function(){return Jn})),r.d(e,"Seq",(function(){return tt})),r.d(e,"Set",(function(){return fn})),r.d(e,"Stack",(function(){return Zr})),r.d(e,"fromJS",(function(){return Zn})),r.d(e,"get",(function(){return Ee})),r.d(e,"getIn",(function(){return vn})),r.d(e,"has",(function(){return Ce})),r.d(e,"hasIn",(function(){return wn})),r.d(e,"hash",(function(){return wt})),r.d(e,"is",(function(){return mt})),r.d(e,"isAssociative",(function(){return E})),r.d(e,"isCollection",(function(){return _})),r.d(e,"isImmutable",(function(){return D})),r.d(e,"isIndexed",(function(){return C})),r.d(e,"isKeyed",(function(){return A})),r.d(e,"isList",(function(){return Br})),r.d(e,"isMap",(function(){return dt})),r.d(e,"isOrdered",(function(){return H})),r.d(e,"isOrderedMap",(function(){return gt})),r.d(e,"isOrderedSet",(function(){return sn})),r.d(e,"isPlainObject",(function(){return we})),r.d(e,"isRecord",(function(){return T})),r.d(e,"isSeq",(function(){return B})),r.d(e,"isSet",(function(){return an})),r.d(e,"isStack",(function(){return Jr})),r.d(e,"isValueObject",(function(){return yt})),r.d(e,"merge",(function(){return Ne})),r.d(e,"mergeDeep",(function(){return Ke})),r.d(e,"mergeDeepWith",(function(){return ze})),r.d(e,"mergeWith",(function(){return Qe})),r.d(e,"remove",(function(){return ke})),r.d(e,"removeIn",(function(){return Te})),r.d(e,"set",(function(){return xe})),r.d(e,"setIn",(function(){return Be})),r.d(e,"update",(function(){return je})),r.d(e,"updateIn",(function(){return Oe})),r.d(e,"version",(function(){return ri}));var n="delete",i=5,o=1<<i,a=o-1,s={};function u(){return{value:!1}}function c(t){t&&(t.value=!0)}function l(){}function f(t){return void 0===t.size&&(t.size=t.__iterate(h)),t.size}function p(t,e){if("number"!==typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?f(t)+e:e}function h(){return!0}function d(t,e,r){return(0===t&&!b(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function g(t,e){return m(t,e,0)}function y(t,e){return m(t,e,e)}function m(t,e,r){return void 0===t?r:b(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function b(t){return t<0||0===t&&1/t===-1/0}var v="@@__IMMUTABLE_ITERABLE__@@";function _(t){return Boolean(t&&t[v])}var w="@@__IMMUTABLE_KEYED__@@";function A(t){return Boolean(t&&t[w])}var I="@@__IMMUTABLE_INDEXED__@@";function C(t){return Boolean(t&&t[I])}function E(t){return A(t)||C(t)}var S=function(t){return _(t)?t:tt(t)},k=function(t){function e(t){return A(t)?t:et(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),x=function(t){function e(t){return C(t)?t:rt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),O=function(t){function e(t){return _(t)&&!E(t)?t:nt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S);S.Keyed=k,S.Indexed=x,S.Set=O;var P="@@__IMMUTABLE_SEQ__@@";function B(t){return Boolean(t&&t[P])}var M="@@__IMMUTABLE_RECORD__@@";function T(t){return Boolean(t&&t[M])}function D(t){return _(t)||T(t)}var j="@@__IMMUTABLE_ORDERED__@@";function H(t){return Boolean(t&&t[j])}var L=0,U=1,R=2,F="function"===typeof Symbol&&Symbol.iterator,N="@@iterator",Q=F||N,K=function(t){this.next=t};function z(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function q(){return{value:void 0,done:!0}}function V(t){return!!Array.isArray(t)||!!G(t)}function W(t){return t&&"function"===typeof t.next}function Y(t){var e=G(t);return e&&e.call(t)}function G(t){var e=t&&(F&&t[F]||t[N]);if("function"===typeof e)return e}function $(t){var e=G(t);return e&&e===t.entries}function X(t){var e=G(t);return e&&e===t.keys}K.prototype.toString=function(){return"[Iterator]"},K.KEYS=L,K.VALUES=U,K.ENTRIES=R,K.prototype.inspect=K.prototype.toSource=function(){return this.toString()},K.prototype[Q]=function(){return this};var J=Object.prototype.hasOwnProperty;function Z(t){return!(!Array.isArray(t)&&"string"!==typeof t)||t&&"object"===typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var tt=function(t){function e(t){return void 0===t||null===t?ut():D(t)?t.toSeq():ft(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){var n=r.length,i=0;while(i!==n){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,i=0;return new K((function(){if(i===n)return q();var o=r[e?n-++i:i++];return z(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(S),et=function(t){function e(t){return void 0===t||null===t?ut().toKeyedSeq():_(t)?A(t)?t.toSeq():t.fromEntrySeq():T(t)?t.toSeq():ct(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(tt),rt=function(t){function e(t){return void 0===t||null===t?ut():_(t)?A(t)?t.entrySeq():t.toIndexedSeq():T(t)?t.toSeq().entrySeq():lt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(tt),nt=function(t){function e(t){return(_(t)&&!E(t)?t:rt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(tt);tt.isSeq=B,tt.Keyed=et,tt.Set=nt,tt.Indexed=rt,tt.prototype[P]=!0;var it=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[p(this,t)]:e},e.prototype.__iterate=function(t,e){var r=this._array,n=r.length,i=0;while(i!==n){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,i=0;return new K((function(){if(i===n)return q();var o=e?n-++i:i++;return z(t,o,r[o])}))},e}(rt),ot=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return J.call(this._object,t)},e.prototype.__iterate=function(t,e){var r=this._object,n=this._keys,i=n.length,o=0;while(o!==i){var a=n[e?i-++o:o++];if(!1===t(r[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length,o=0;return new K((function(){if(o===i)return q();var a=n[e?i-++o:o++];return z(t,a,r[a])}))},e}(et);ot.prototype[j]=!0;var at,st=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r,n=this._collection,i=Y(n),o=0;if(W(i))while(!(r=i.next()).done)if(!1===t(r.value,o++,this))break;return o},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._collection,n=Y(r);if(!W(n))return new K(q);var i=0;return new K((function(){var e=n.next();return e.done?e:z(t,i++,e.value)}))},e}(rt);function ut(){return at||(at=new it([]))}function ct(t){var e=pt(t);if(e)return e.fromEntrySeq();if("object"===typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function lt(t){var e=pt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ft(t){var e=pt(t);if(e)return $(t)?e.fromEntrySeq():X(t)?e.toSetSeq():e;if("object"===typeof t)return new ot(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function pt(t){return Z(t)?new it(t):V(t)?new st(t):void 0}var ht="@@__IMMUTABLE_MAP__@@";function dt(t){return Boolean(t&&t[ht])}function gt(t){return dt(t)&&H(t)}function yt(t){return Boolean(t&&"function"===typeof t.equals&&"function"===typeof t.hashCode)}function mt(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"===typeof t.valueOf&&"function"===typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(yt(t)&&yt(e)&&t.equals(e))}var bt="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var r=65535&t,n=65535&e;return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function vt(t){return t>>>1&1073741824|3221225471&t}var _t=Object.prototype.valueOf;function wt(t){if(null==t)return At(t);if("function"===typeof t.hashCode)return vt(t.hashCode(t));var e=Bt(t);if(null==e)return At(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return It(e);case"string":return e.length>Ut?Ct(e):Et(e);case"object":case"function":return kt(e);case"symbol":return St(e);default:if("function"===typeof e.toString)return Et(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function At(t){return null===t?1108378658:1108378659}function It(t){if(t!==t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);while(t>4294967295)t/=4294967295,e^=t;return vt(e)}function Ct(t){var e=Nt[t];return void 0===e&&(e=Et(t),Ft===Rt&&(Ft=0,Nt={}),Ft++,Nt[t]=e),e}function Et(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return vt(e)}function St(t){var e=jt[t];return void 0!==e||(e=Mt(),jt[t]=e),e}function kt(t){var e;if(Dt&&(e=Tt.get(t),void 0!==e))return e;if(e=t[Lt],void 0!==e)return e;if(!Ot){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Lt],void 0!==e)return e;if(e=Pt(t),void 0!==e)return e}if(e=Mt(),Dt)Tt.set(t,e);else{if(void 0!==xt&&!1===xt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ot)Object.defineProperty(t,Lt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Lt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Lt]=e}}return e}var xt=Object.isExtensible,Ot=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function Pt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Bt(t){return t.valueOf!==_t&&"function"===typeof t.valueOf?t.valueOf(t):t}function Mt(){var t=++Ht;return 1073741824&Ht&&(Ht=0),t}var Tt,Dt="function"===typeof WeakMap;Dt&&(Tt=new WeakMap);var jt=Object.create(null),Ht=0,Lt="__immutablehash__";"function"===typeof Symbol&&(Lt=Symbol(Lt));var Ut=16,Rt=255,Ft=0,Nt={},Qt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Yt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Wt(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,n){return t(e,n,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(et);Qt.prototype[j]=!0;var Kt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&f(this),this._iter.__iterate((function(i){return t(i,e?r.size-++n:n++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(U,e),i=0;return e&&f(this),new K((function(){var o=n.next();return o.done?o:z(t,e?r.size-++i:i++,o.value,o)}))},e}(rt),zt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(U,e);return new K((function(){var e=r.next();return e.done?e:z(t,e.value,e.value,e)}))},e}(nt),qt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){fe(e);var n=_(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(U,e);return new K((function(){while(1){var e=r.next();if(e.done)return e;var n=e.value;if(n){fe(n);var i=_(n);return z(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}}))},e}(et);function Vt(t){var e=he(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=de,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(e===R){var n=t.__iterator(e,r);return new K((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===U?L:U,r)},e}function Wt(t,e,r){var n=he(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,s);return o===s?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate((function(t,i,a){return!1!==n(e.call(r,t,i,a),i,o)}),i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(R,i);return new K((function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return z(n,s,e.call(r,a[1],s,t),i)}))},n}function Yt(t,e){var r=this,n=he(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Vt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=de,n.__iterate=function(r,n){var i=this,o=0;return n&&f(t),t.__iterate((function(t,a){return r(t,e?a:n?i.size-++o:o++,i)}),!n)},n.__iterator=function(n,i){var o=0;i&&f(t);var a=t.__iterator(R,!i);return new K((function(){var t=a.next();if(t.done)return t;var s=t.value;return z(n,e?s[0]:i?r.size-++o:o++,s[1],t)}))},n}function Gt(t,e,r,n){var i=he(t);return n&&(i.has=function(n){var i=t.get(n,s);return i!==s&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,s);return o!==s&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate((function(t,o,u){if(e.call(r,t,o,u))return s++,i(t,n?o:s-1,a)}),o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(R,o),s=0;return new K((function(){while(1){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(r,l,c,t))return z(i,n?c:s++,l,o)}}))},i}function $t(t,e,r){var n=nr().asMutable();return t.__iterate((function(i,o){n.update(e.call(r,i,o,t),0,(function(t){return t+1}))})),n.asImmutable()}function Xt(t,e,r){var n=A(t),i=(H(t)?Wr():nr()).asMutable();t.__iterate((function(o,a){i.update(e.call(r,o,a,t),(function(t){return t=t||[],t.push(n?[a,o]:o),t}))}));var o=pe(t);return i.map((function(e){return le(t,o(e))})).asImmutable()}function Jt(t,e,r){var n=A(t),i=[[],[]];t.__iterate((function(o,a){i[e.call(r,o,a,t)?1:0].push(n?[a,o]:o)}));var o=pe(t);return i.map((function(e){return le(t,o(e))}))}function Zt(t,e,r,n){var i=t.size;if(d(e,r,i))return t;var o=g(e,i),a=y(r,i);if(o!==o||a!==a)return Zt(t.toSeq().cacheResult(),e,r,n);var s,u=a-o;u===u&&(s=u<0?0:u);var c=he(t);return c.size=0===s?s:t.size&&s||void 0,!n&&B(t)&&s>=0&&(c.get=function(e,r){return e=p(this,e),e>=0&&e<s?t.get(e+o,r):r}),c.__iterateUncached=function(e,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,u=!0,c=0;return t.__iterate((function(t,r){if(!u||!(u=a++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==s})),c},c.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);if(0===s)return new K(q);var i=t.__iterator(e,r),a=0,u=0;return new K((function(){while(a++<o)i.next();if(++u>s)return q();var t=i.next();return n||e===U||t.done?t:z(e,u-1,e===L?void 0:t.value[1],t)}))},c}function te(t,e,r){var n=he(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return t.__iterate((function(t,i,s){return e.call(r,t,i,s)&&++a&&n(t,i,o)})),a},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var a=t.__iterator(R,i),s=!0;return new K((function(){if(!s)return q();var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(r,c,u,o)?n===R?t:z(n,u,c,t):(s=!1,q())}))},n}function ee(t,e,r,n){var i=he(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate((function(t,o,c){if(!s||!(s=e.call(r,t,o,c)))return u++,i(t,n?o:u-1,a)})),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(R,o),u=!0,c=0;return new K((function(){var t,o,l;do{if(t=s.next(),t.done)return n||i===U?t:z(i,c++,i===L?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(r,l,o,a))}while(u);return i===R?t:z(i,o,l,t)}))},i}function re(t,e){var r=A(t),n=[t].concat(e).map((function(t){return _(t)?r&&(t=k(t)):t=r?ct(t):lt(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&A(i)||C(t)&&C(i))return i}var o=new it(n);return r?o=o.toKeyedSeq():C(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),o}function ne(t,e,r){var n=he(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;function u(t,c){t.__iterate((function(t,o){return(!e||c<e)&&_(t)?u(t,c+1):(a++,!1===i(t,r?o:a-1,n)&&(s=!0)),!s}),o)}return u(t,0),a},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=t.__iterator(n,i),a=[],s=0;return new K((function(){while(o){var t=o.next();if(!1===t.done){var u=t.value;if(n===R&&(u=u[1]),e&&!(a.length<e)||!_(u))return r?t:z(n,s++,u,t);a.push(o),o=u.__iterator(n,i)}else o=a.pop()}return q()}))},n}function ie(t,e,r){var n=pe(t);return t.toSeq().map((function(i,o){return n(e.call(r,i,o,t))})).flatten(!0)}function oe(t,e){var r=he(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate((function(t){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)}),n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(U,n),a=0;return new K((function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?z(r,a++,e):z(r,a++,i.value,i)}))},r}function ae(t,e,r){e||(e=ge);var n=A(t),i=0,o=t.toSeq().map((function(e,n){return[n,e,i++,r?r(e,n,t):e]})).valueSeq().toArray();return o.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?et(o):C(t)?rt(o):nt(o)}function se(t,e,r){if(e||(e=ge),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return ue(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return ue(e,t,r)?r:t}))}function ue(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(void 0===r||null===r||r!==r)||n>0}function ce(t,e,r,n){var i=he(t),o=new it(r).map((function(t){return t.size}));return i.size=n?o.max():o.min(),i.__iterate=function(t,e){var r,n=this.__iterator(U,e),i=0;while(!(r=n.next()).done)if(!1===t(r.value,i++,this))break;return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=S(t),Y(i?t.reverse():t)})),a=0,s=!1;return new K((function(){var r;return s||(r=o.map((function(t){return t.next()})),s=n?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),s?q():z(t,a++,e.apply(null,r.map((function(t){return t.value}))))}))},i}function le(t,e){return t===e?t:B(t)?e:t.constructor(e)}function fe(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function pe(t){return A(t)?k:C(t)?x:O}function he(t){return Object.create((A(t)?et:C(t)?rt:nt).prototype)}function de(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):tt.prototype.cacheResult.call(this)}function ge(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function ye(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function me(t,e){if(!t)throw new Error(e)}function be(t){me(t!==1/0,"Cannot perform this action with an infinite size.")}function ve(t){if(Z(t)&&"string"!==typeof t)return t;if(H(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Kt.prototype.cacheResult=Qt.prototype.cacheResult=zt.prototype.cacheResult=qt.prototype.cacheResult=de;var _e=Object.prototype.toString;function we(t){if(!t||"object"!==typeof t||"[object Object]"!==_e.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=e,n=Object.getPrototypeOf(e);while(null!==n)r=n,n=Object.getPrototypeOf(r);return r===e}function Ae(t){return"object"===typeof t&&(D(t)||Array.isArray(t)||we(t))}function Ie(t){try{return"string"===typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Ce(t,e){return D(t)?t.has(e):Ae(t)&&J.call(t,e)}function Ee(t,e,r){return D(t)?t.get(e,r):Ce(t,e)?"function"===typeof t.get?t.get(e):t[e]:r}function Se(t){if(Array.isArray(t))return ye(t);var e={};for(var r in t)J.call(t,r)&&(e[r]=t[r]);return e}function ke(t,e){if(!Ae(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(D(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!J.call(t,e))return t;var r=Se(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function xe(t,e,r){if(!Ae(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(D(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(J.call(t,e)&&r===t[e])return t;var n=Se(t);return n[e]=r,n}function Oe(t,e,r,n){n||(n=r,r=void 0);var i=Pe(D(t),t,ve(e),0,r,n);return i===s?r:i}function Pe(t,e,r,n,i,o){var a=e===s;if(n===r.length){var u=a?i:e,c=o(u);return c===u?e:c}if(!a&&!Ae(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(Ie)+"]: "+e);var l=r[n],f=a?s:Ee(e,l,s),p=Pe(f===s?t:D(f),f,r,n+1,i,o);return p===f?e:p===s?ke(e,l):xe(a?t?gr():{}:e,l,p)}function Be(t,e,r){return Oe(t,e,s,(function(){return r}))}function Me(t,e){return Be(this,t,e)}function Te(t,e){return Oe(t,e,(function(){return s}))}function De(t){return Te(this,t)}function je(t,e,r,n){return Oe(t,[e],r,n)}function He(t,e,r){return 1===arguments.length?t(this):je(this,t,e,r)}function Le(t,e,r){return Oe(this,t,e,r)}function Ue(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return Fe(this,t)}function Re(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];if("function"!==typeof t)throw new TypeError("Invalid merger function: "+t);return Fe(this,e,t)}function Fe(t,e,r){for(var n=[],i=0;i<e.length;i++){var o=k(e[i]);0!==o.size&&n.push(o)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var e=r?function(e,n){je(t,n,s,(function(t){return t===s?e:r(t,e,n)}))}:function(e,r){t.set(r,e)},i=0;i<n.length;i++)n[i].forEach(e)})):t.constructor(n[0])}function Ne(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return Ve(t,e)}function Qe(t,e){var r=[],n=arguments.length-2;while(n-- >0)r[n]=arguments[n+2];return Ve(e,r,t)}function Ke(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return qe(t,e)}function ze(t,e){var r=[],n=arguments.length-2;while(n-- >0)r[n]=arguments[n+2];return qe(e,r,t)}function qe(t,e,r){return Ve(t,e,We(r))}function Ve(t,e,r){if(!Ae(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(D(t))return"function"===typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,o=n?x:k,a=n?function(e){i===t&&(i=Se(i)),i.push(e)}:function(e,n){var o=J.call(i,n),a=o&&r?r(i[n],e,n):e;o&&a===i[n]||(i===t&&(i=Se(i)),i[n]=a)},s=0;s<e.length;s++)o(e[s]).forEach(a);return i}function We(t){function e(r,n,i){return Ae(r)&&Ae(n)&&Ye(r,n)?Ve(r,[n],e):t?t(r,n,i):n}return e}function Ye(t,e){var r=tt(t),n=tt(e);return C(r)===C(n)&&A(r)===A(n)}function Ge(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return qe(this,t)}function $e(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return qe(this,e,t)}function Xe(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return Oe(this,t,gr(),(function(t){return Ve(t,e)}))}function Je(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return Oe(this,t,gr(),(function(t){return qe(t,e)}))}function Ze(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function tr(){return this.__ownerID?this:this.__ensureOwner(new l)}function er(){return this.__ensureOwner()}function rr(){return this.__altered}var nr=function(t){function e(e){return void 0===e||null===e?gr():dt(e)&&!H(e)?e:gr().withMutations((function(r){var n=t(e);be(n.size),n.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return gr().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return yr(this,t,e)},e.prototype.remove=function(t){return yr(this,t,s)},e.prototype.deleteAll=function(t){var e=S(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):gr()},e.prototype.sort=function(t){return Wr(ae(this,t))},e.prototype.sortBy=function(t,e){return Wr(ae(this,e,t))},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){n.forEach((function(i,o){n.set(o,t.call(e,i,o,r))}))}))},e.prototype.__iterator=function(t,e){return new fr(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?dr(this.size,this._root,t,this.__hash):0===this.size?gr():(this.__ownerID=t,this.__altered=!1,this)},e}(k);nr.isMap=dt;var ir=nr.prototype;ir[ht]=!0,ir[n]=ir.remove,ir.removeAll=ir.deleteAll,ir.setIn=Me,ir.removeIn=ir.deleteIn=De,ir.update=He,ir.updateIn=Le,ir.merge=ir.concat=Ue,ir.mergeWith=Re,ir.mergeDeep=Ge,ir.mergeDeepWith=$e,ir.mergeIn=Xe,ir.mergeDeepIn=Je,ir.withMutations=Ze,ir.wasAltered=rr,ir.asImmutable=er,ir["@@transducer/init"]=ir.asMutable=tr,ir["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},ir["@@transducer/result"]=function(t){return t.asImmutable()};var or=function(t,e){this.ownerID=t,this.entries=e};or.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(mt(r,i[o][0]))return i[o][1];return n},or.prototype.update=function(t,e,r,n,i,o,a){for(var u=i===s,l=this.entries,f=0,p=l.length;f<p;f++)if(mt(n,l[f][0]))break;var h=f<p;if(h?l[f][1]===i:u)return this;if(c(a),(u||!h)&&c(o),!u||1!==l.length){if(!h&&!u&&l.length>=kr)return _r(t,l,n,i);var d=t&&t===this.ownerID,g=d?l:ye(l);return h?u?f===p-1?g.pop():g[f]=g.pop():g[f]=[n,i]:g.push([n,i]),d?(this.entries=g,this):new or(t,g)}};var ar=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};ar.prototype.get=function(t,e,r,n){void 0===e&&(e=wt(r));var o=1<<((0===t?e:e>>>t)&a),s=this.bitmap;return 0===(s&o)?n:this.nodes[Ir(s&o-1)].get(t+i,e,r,n)},ar.prototype.update=function(t,e,r,n,o,u,c){void 0===r&&(r=wt(n));var l=(0===e?r:r>>>e)&a,f=1<<l,p=this.bitmap,h=0!==(p&f);if(!h&&o===s)return this;var d=Ir(p&f-1),g=this.nodes,y=h?g[d]:void 0,m=mr(y,t,e+i,r,n,o,u,c);if(m===y)return this;if(!h&&m&&g.length>=xr)return Ar(t,g,p,l,m);if(h&&!m&&2===g.length&&br(g[1^d]))return g[1^d];if(h&&m&&1===g.length&&br(m))return m;var b=t&&t===this.ownerID,v=h?m?p:p^f:p|f,_=h?m?Cr(g,d,m,b):Sr(g,d,b):Er(g,d,m,b);return b?(this.bitmap=v,this.nodes=_,this):new ar(t,v,_)};var sr=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};sr.prototype.get=function(t,e,r,n){void 0===e&&(e=wt(r));var o=(0===t?e:e>>>t)&a,s=this.nodes[o];return s?s.get(t+i,e,r,n):n},sr.prototype.update=function(t,e,r,n,o,u,c){void 0===r&&(r=wt(n));var l=(0===e?r:r>>>e)&a,f=o===s,p=this.nodes,h=p[l];if(f&&!h)return this;var d=mr(h,t,e+i,r,n,o,u,c);if(d===h)return this;var g=this.count;if(h){if(!d&&(g--,g<Or))return wr(t,p,g,l)}else g++;var y=t&&t===this.ownerID,m=Cr(p,l,d,y);return y?(this.count=g,this.nodes=m,this):new sr(t,g,m)};var ur=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};ur.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(mt(r,i[o][0]))return i[o][1];return n},ur.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=wt(n));var u=i===s;if(r!==this.keyHash)return u?this:(c(a),c(o),vr(this,t,e,r,[n,i]));for(var l=this.entries,f=0,p=l.length;f<p;f++)if(mt(n,l[f][0]))break;var h=f<p;if(h?l[f][1]===i:u)return this;if(c(a),(u||!h)&&c(o),u&&2===p)return new cr(t,this.keyHash,l[1^f]);var d=t&&t===this.ownerID,g=d?l:ye(l);return h?u?f===p-1?g.pop():g[f]=g.pop():g[f]=[n,i]:g.push([n,i]),d?(this.entries=g,this):new ur(t,this.keyHash,g)};var cr=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};cr.prototype.get=function(t,e,r,n){return mt(r,this.entry[0])?this.entry[1]:n},cr.prototype.update=function(t,e,r,n,i,o,a){var u=i===s,l=mt(n,this.entry[0]);return(l?i===this.entry[1]:u)?this:(c(a),u?void c(o):l?t&&t===this.ownerID?(this.entry[1]=i,this):new cr(t,this.keyHash,[n,i]):(c(o),vr(this,t,e,wt(n),[n,i])))},or.prototype.iterate=ur.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},ar.prototype.iterate=sr.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},cr.prototype.iterate=function(t,e){return t(this.entry)};var lr,fr=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&hr(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){var t=this._type,e=this._stack;while(e){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0===n)return pr(t,r.entry)}else if(r.entries){if(i=r.entries.length-1,n<=i)return pr(t,r.entries[this._reverse?i-n:n])}else if(i=r.nodes.length-1,n<=i){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return pr(t,o.entry);e=this._stack=hr(o,e)}continue}e=this._stack=this._stack.__prev}return q()},e}(K);function pr(t,e){return z(t,e[0],e[1])}function hr(t,e){return{node:t,index:0,__prev:e}}function dr(t,e,r,n){var i=Object.create(ir);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function gr(){return lr||(lr=dr(0))}function yr(t,e,r){var n,i;if(t._root){var o=u(),a=u();if(n=mr(t._root,t.__ownerID,0,void 0,e,r,o,a),!a.value)return t;i=t.size+(o.value?r===s?-1:1:0)}else{if(r===s)return t;i=1,n=new or(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?dr(i,n):gr()}function mr(t,e,r,n,i,o,a,u){return t?t.update(e,r,n,i,o,a,u):o===s?t:(c(u),c(a),new cr(e,n,[i,o]))}function br(t){return t.constructor===cr||t.constructor===ur}function vr(t,e,r,n,o){if(t.keyHash===n)return new ur(e,n,[t.entry,o]);var s,u=(0===r?t.keyHash:t.keyHash>>>r)&a,c=(0===r?n:n>>>r)&a,l=u===c?[vr(t,e,r+i,n,o)]:(s=new cr(e,n,o),u<c?[t,s]:[s,t]);return new ar(e,1<<u|1<<c,l)}function _r(t,e,r,n){t||(t=new l);for(var i=new cr(t,wt(r),[r,n]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function wr(t,e,r,n){for(var i=0,o=0,a=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==n&&(i|=u,a[o++]=l)}return new ar(t,i,a)}function Ar(t,e,r,n,i){for(var a=0,s=new Array(o),u=0;0!==r;u++,r>>>=1)s[u]=1&r?e[a++]:void 0;return s[n]=i,new sr(t,a+1,s)}function Ir(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function Cr(t,e,r,n){var i=n?t:ye(t);return i[e]=r,i}function Er(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=r,a=-1):o[s]=t[s+a];return o}function Sr(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,a=0;a<n;a++)a===e&&(o=1),i[a]=t[a+o];return i}var kr=o/4,xr=o/2,Or=o/4,Pr="@@__IMMUTABLE_LIST__@@";function Br(t){return Boolean(t&&t[Pr])}var Mr=function(t){function e(e){var r=Rr();if(void 0===e||null===e)return r;if(Br(e))return e;var n=t(e),a=n.size;return 0===a?r:(be(a),a>0&&a<o?Ur(0,a,i,null,new Dr(n.toArray())):r.withMutations((function(t){t.setSize(a),n.forEach((function(e,r){return t.set(r,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if(t=p(this,t),t>=0&&t<this.size){t+=this._origin;var r=Kr(this,t);return r&&r.array[t&a]}return e},e.prototype.set=function(t,e){return Fr(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=i,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Rr()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){zr(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},e.prototype.pop=function(){return zr(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){zr(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},e.prototype.shift=function(){return zr(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++){var i=e[n],o=t("string"!==typeof i&&V(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(t){r.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(r[0])},e.prototype.setSize=function(t){return zr(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){for(var i=0;i<r.size;i++)n.set(i,t.call(e,n.get(i),i,r))}))},e.prototype.slice=function(t,e){var r=this.size;return d(t,e,r)?this:zr(this,g(t,r),y(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,n=Lr(this,e);return new K((function(){var i=n();return i===Hr?q():z(t,e?--r:r++,i)}))},e.prototype.__iterate=function(t,e){var r,n=e?this.size:0,i=Lr(this,e);while((r=i())!==Hr)if(!1===t(r,e?--n:n++,this))break;return n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ur(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Rr():(this.__ownerID=t,this.__altered=!1,this)},e}(x);Mr.isList=Br;var Tr=Mr.prototype;Tr[Pr]=!0,Tr[n]=Tr.remove,Tr.merge=Tr.concat,Tr.setIn=Me,Tr.deleteIn=Tr.removeIn=De,Tr.update=He,Tr.updateIn=Le,Tr.mergeIn=Xe,Tr.mergeDeepIn=Je,Tr.withMutations=Ze,Tr.wasAltered=rr,Tr.asImmutable=er,Tr["@@transducer/init"]=Tr.asMutable=tr,Tr["@@transducer/step"]=function(t,e){return t.push(e)},Tr["@@transducer/result"]=function(t){return t.asImmutable()};var Dr=function(t,e){this.array=t,this.ownerID=e};Dr.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&a;if(n>=this.array.length)return new Dr([],t);var o,s=0===n;if(e>0){var u=this.array[n];if(o=u&&u.removeBefore(t,e-i,r),o===u&&s)return this}if(s&&!o)return this;var c=Qr(this,t);if(!s)for(var l=0;l<n;l++)c.array[l]=void 0;return o&&(c.array[n]=o),c},Dr.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&a;if(o>=this.array.length)return this;if(e>0){var s=this.array[o];if(n=s&&s.removeAfter(t,e-i,r),n===s&&o===this.array.length-1)return this}var u=Qr(this,t);return u.array.splice(o+1),n&&(u.array[o]=n),u};var jr,Hr={};function Lr(t,e){var r=t._origin,n=t._capacity,a=qr(n),s=t._tail;return u(t._root,t._level,0);function u(t,e,r){return 0===e?c(t,r):l(t,e,r)}function c(t,i){var u=i===a?s&&s.array:t&&t.array,c=i>r?0:r-i,l=n-i;return l>o&&(l=o),function(){if(c===l)return Hr;var t=e?--l:c++;return u&&u[t]}}function l(t,a,s){var c,l=t&&t.array,f=s>r?0:r-s>>a,p=1+(n-s>>a);return p>o&&(p=o),function(){while(1){if(c){var t=c();if(t!==Hr)return t;c=null}if(f===p)return Hr;var r=e?--p:f++;c=u(l&&l[r],a-i,s+(r<<a))}}}}function Ur(t,e,r,n,i,o,a){var s=Object.create(Tr);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Rr(){return jr||(jr=Ur(0,0,i))}function Fr(t,e,r){if(e=p(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?zr(t,e).set(0,r):zr(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,i=t._root,o=u();return e>=qr(t._capacity)?n=Nr(n,t.__ownerID,0,e,r,o):i=Nr(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Ur(t._origin,t._capacity,t._level,i,n):t}function Nr(t,e,r,n,o,s){var u,l=n>>>r&a,f=t&&l<t.array.length;if(!f&&void 0===o)return t;if(r>0){var p=t&&t.array[l],h=Nr(p,e,r-i,n,o,s);return h===p?t:(u=Qr(t,e),u.array[l]=h,u)}return f&&t.array[l]===o?t:(s&&c(s),u=Qr(t,e),void 0===o&&l===u.array.length-1?u.array.pop():u.array[l]=o,u)}function Qr(t,e){return e&&t&&e===t.ownerID?t:new Dr(t?t.array.slice():[],e)}function Kr(t,e){if(e>=qr(t._capacity))return t._tail;if(e<1<<t._level+i){var r=t._root,n=t._level;while(r&&n>0)r=r.array[e>>>n&a],n-=i;return r}}function zr(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new l,o=t._origin,s=t._capacity,u=o+e,c=void 0===r?s:r<0?s+r:o+r;if(u===o&&c===s)return t;if(u>=c)return t.clear();var f=t._level,p=t._root,h=0;while(u+h<0)p=new Dr(p&&p.array.length?[void 0,p]:[],n),f+=i,h+=1<<f;h&&(u+=h,o+=h,c+=h,s+=h);var d=qr(s),g=qr(c);while(g>=1<<f+i)p=new Dr(p&&p.array.length?[p]:[],n),f+=i;var y=t._tail,m=g<d?Kr(t,c-1):g>d?new Dr([],n):y;if(y&&g>d&&u<s&&y.array.length){p=Qr(p,n);for(var b=p,v=f;v>i;v-=i){var _=d>>>v&a;b=b.array[_]=Qr(b.array[_],n)}b.array[d>>>i&a]=y}if(c<s&&(m=m&&m.removeAfter(n,0,c)),u>=g)u-=g,c-=g,f=i,p=null,m=m&&m.removeBefore(n,0,u);else if(u>o||g<d){h=0;while(p){var w=u>>>f&a;if(w!==g>>>f&a)break;w&&(h+=(1<<f)*w),f-=i,p=p.array[w]}p&&u>o&&(p=p.removeBefore(n,f,u-h)),p&&g<d&&(p=p.removeAfter(n,f,g-h)),h&&(u-=h,c-=h)}return t.__ownerID?(t.size=c-u,t._origin=u,t._capacity=c,t._level=f,t._root=p,t._tail=m,t.__hash=void 0,t.__altered=!0,t):Ur(u,c,f,p,m)}function qr(t){return t<o?0:t-1>>>i<<i}var Vr,Wr=function(t){function e(t){return void 0===t||null===t?Gr():gt(t)?t:Gr().withMutations((function(e){var r=k(t);be(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Gr()},e.prototype.set=function(t,e){return $r(this,t,e)},e.prototype.remove=function(t){return $r(this,t,s)},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Yr(e,r,t,this.__hash):0===this.size?Gr():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=r,this)},e}(nr);function Yr(t,e,r,n){var i=Object.create(Wr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Gr(){return Vr||(Vr=Yr(gr(),Rr()))}function $r(t,e,r){var n,i,a=t._map,u=t._list,c=a.get(e),l=void 0!==c;if(r===s){if(!l)return t;u.size>=o&&u.size>=2*a.size?(i=u.filter((function(t,e){return void 0!==t&&c!==e})),n=i.toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=a.remove(e),i=c===u.size-1?u.pop():u.set(c,void 0))}else if(l){if(r===u.get(c)[1])return t;n=a,i=u.set(c,[e,r])}else n=a.set(e,u.size),i=u.set(u.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t.__altered=!0,t):Yr(n,i)}Wr.isOrderedMap=gt,Wr.prototype[j]=!0,Wr.prototype[n]=Wr.prototype.remove;var Xr="@@__IMMUTABLE_STACK__@@";function Jr(t){return Boolean(t&&t[Xr])}var Zr=function(t){function e(t){return void 0===t||null===t?nn():Jr(t)?t:nn().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;t=p(this,t);while(r&&t--)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):rn(e,r)},e.prototype.pushAll=function(e){if(e=t(e),0===e.size)return this;if(0===this.size&&Jr(e))return e;be(e.size);var r=this.size,n=this._head;return e.__iterate((function(t){r++,n={value:t,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):rn(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):nn()},e.prototype.slice=function(e,r){if(d(e,r,this.size))return this;var n=g(e,this.size),i=y(r,this.size);if(i!==this.size)return t.prototype.slice.call(this,e,r);var o=this.size-n,a=this._head;while(n--)a=a.next;return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):rn(o,a)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?rn(this.size,this._head,t,this.__hash):0===this.size?nn():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new it(this.toArray()).__iterate((function(e,n){return t(e,n,r)}),e);var n=0,i=this._head;while(i){if(!1===t(i.value,n++,this))break;i=i.next}return n},e.prototype.__iterator=function(t,e){if(e)return new it(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new K((function(){if(n){var e=n.value;return n=n.next,z(t,r++,e)}return q()}))},e}(x);Zr.isStack=Jr;var tn,en=Zr.prototype;function rn(t,e,r,n){var i=Object.create(en);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function nn(){return tn||(tn=rn(0))}en[Xr]=!0,en.shift=en.pop,en.unshift=en.push,en.unshiftAll=en.pushAll,en.withMutations=Ze,en.wasAltered=rr,en.asImmutable=er,en["@@transducer/init"]=en.asMutable=tr,en["@@transducer/step"]=function(t,e){return t.unshift(e)},en["@@transducer/result"]=function(t){return t.asImmutable()};var on="@@__IMMUTABLE_SET__@@";function an(t){return Boolean(t&&t[on])}function sn(t){return an(t)&&H(t)}function un(t,e){if(t===e)return!0;if(!_(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||A(t)!==A(e)||C(t)!==C(e)||H(t)!==H(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!E(t);if(H(t)){var n=t.entries();return e.every((function(t,e){var i=n.next().value;return i&&mt(i[1],t)&&(r||mt(i[0],e))}))&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"===typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var a=!0,u=e.__iterate((function(e,n){if(r?!t.has(e):i?!mt(e,t.get(n,s)):!mt(t.get(n,s),e))return a=!1,!1}));return a&&t.size===u}function cn(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function ln(t){if(!t||"object"!==typeof t)return t;if(!_(t)){if(!Ae(t))return t;t=tt(t)}if(A(t)){var e={};return t.__iterate((function(t,r){e[r]=ln(t)})),e}var r=[];return t.__iterate((function(t){r.push(ln(t))})),r}var fn=function(t){function e(e){return void 0===e||null===e?yn():an(e)&&!H(e)?e:yn().withMutations((function(r){var n=t(e);be(n.size),n.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(k(t).keySeq())},e.intersect=function(t){return t=S(t).toArray(),t.length?hn.intersect.apply(e(t.pop()),t):yn()},e.union=function(t){return t=S(t).toArray(),t.length?hn.union.apply(e(t.pop()),t):yn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return dn(this,this._map.set(t,t))},e.prototype.remove=function(t){return dn(this,this._map.remove(t))},e.prototype.clear=function(){return dn(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,n=!1,i=dn(this,this._map.mapEntries((function(i){var o=i[1],a=t.call(e,o,o,r);return a!==o&&(n=!0),[a,a]}),e));return n?i:this},e.prototype.union=function(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];return e=e.filter((function(t){return 0!==t.size})),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var n=0;n<e.length;n++)"string"===typeof e[n]?r.add(e[n]):t(e[n]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Un(ae(this,t))},e.prototype.sortBy=function(t,e){return Un(ae(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(O);fn.isSet=an;var pn,hn=fn.prototype;function dn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function gn(t,e){var r=Object.create(hn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function yn(){return pn||(pn=gn(gr()))}hn[on]=!0,hn[n]=hn.remove,hn.merge=hn.concat=hn.union,hn.withMutations=Ze,hn.asImmutable=er,hn["@@transducer/init"]=hn.asMutable=tr,hn["@@transducer/step"]=function(t,e){return t.add(e)},hn["@@transducer/result"]=function(t){return t.asImmutable()},hn.__empty=yn,hn.__make=gn;var mn,bn=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(me(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if(mn)return mn;mn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+p(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return d(t,r,this.size)?this:(t=g(t,this.size),r=y(r,this.size),r<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;while(o!==r){if(!1===t(i,e?r-++o:o++,this))break;i+=e?-n:n}return o},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;return new K((function(){if(o===r)return q();var a=i;return i+=e?-n:n,z(t,e?r-++o:o++,a)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:un(this,t)},e}(rt);function vn(t,e,r){var n=ve(e),i=0;while(i!==n.length)if(t=Ee(t,n[i++],s),t===s)return r;return t}function _n(t,e){return vn(this,t,e)}function wn(t,e){return vn(t,e,s)!==s}function An(t){return wn(this,t)}function In(){be(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}S.isIterable=_,S.isKeyed=A,S.isIndexed=C,S.isAssociative=E,S.isOrdered=H,S.Iterator=K,cn(S,{toArray:function(){be(this.size);var t=new Array(this.size||0),e=A(this),r=0;return this.__iterate((function(n,i){t[r++]=e?[i,n]:n})),t},toIndexedSeq:function(){return new Kt(this)},toJS:function(){return ln(this)},toKeyedSeq:function(){return new Qt(this,!0)},toMap:function(){return nr(this.toKeyedSeq())},toObject:In,toOrderedMap:function(){return Wr(this.toKeyedSeq())},toOrderedSet:function(){return Un(A(this)?this.valueSeq():this)},toSet:function(){return fn(A(this)?this.valueSeq():this)},toSetSeq:function(){return new zt(this)},toSeq:function(){return C(this)?this.toIndexedSeq():A(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Zr(A(this)?this.valueSeq():this)},toList:function(){return Mr(A(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return le(this,re(this,t))},includes:function(t){return this.some((function(e){return mt(e,t)}))},entries:function(){return this.__iterator(R)},every:function(t,e){be(this.size);var r=!0;return this.__iterate((function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1})),r},filter:function(t,e){return le(this,Gt(this,t,e,!0))},partition:function(t,e){return Jt(this,t,e)},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return be(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){be(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!==n&&void 0!==n?n.toString():""})),e},keys:function(){return this.__iterator(L)},map:function(t,e){return le(this,Wt(this,t,e))},reduce:function(t,e,r){return xn(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return xn(this,t,e,r,arguments.length<2,!0)},reverse:function(){return le(this,Yt(this,!0))},slice:function(t,e){return le(this,Zt(this,t,e,!0))},some:function(t,e){be(this.size);var r=!1;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=!0,!1})),r},sort:function(t){return le(this,ae(this,t))},values:function(){return this.__iterator(U)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return f(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return $t(this,t,e)},equals:function(t){return un(this,t)},entrySeq:function(){var t=this;if(t._cache)return new it(t._cache);var e=t.toSeq().map(Pn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Bn(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(h,null,t)},flatMap:function(t,e){return le(this,ie(this,t,e))},flatten:function(t){return le(this,ne(this,t,!0))},fromEntrySeq:function(){return new qt(this)},get:function(t,e){return this.find((function(e,r){return mt(r,t)}),void 0,e)},getIn:_n,groupBy:function(t,e){return Xt(this,t,e)},has:function(t){return this.get(t,s)!==s},hasIn:An,isSubset:function(t){return t="function"===typeof t.includes?t:S(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return t="function"===typeof t.isSubset?t:S(t),t.isSubset(this)},keyOf:function(t){return this.findKey((function(e){return mt(e,t)}))},keySeq:function(){return this.toSeq().map(On).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return se(this,t)},maxBy:function(t,e){return se(this,e,t)},min:function(t){return se(this,t?Mn(t):Dn)},minBy:function(t,e){return se(this,e?Mn(e):Dn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return le(this,ee(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Bn(t),e)},sortBy:function(t,e){return le(this,ae(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return le(this,te(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Bn(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=jn(this))}});var Cn=S.prototype;Cn[v]=!0,Cn[Q]=Cn.values,Cn.toJSON=Cn.toArray,Cn.__toStringMapper=Ie,Cn.inspect=Cn.toSource=function(){return this.toString()},Cn.chain=Cn.flatMap,Cn.contains=Cn.includes,cn(k,{flip:function(){return le(this,Vt(this))},mapEntries:function(t,e){var r=this,n=0;return le(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return le(this,this.toSeq().flip().map((function(n,i){return t.call(e,n,i,r)})).flip())}});var En=k.prototype;En[w]=!0,En[Q]=Cn.entries,En.toJSON=In,En.__toStringMapper=function(t,e){return Ie(e)+": "+Ie(t)},cn(x,{toKeyedSeq:function(){return new Qt(this,!1)},filter:function(t,e){return le(this,Gt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return le(this,Yt(this,!1))},slice:function(t,e){return le(this,Zt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=g(t,t<0?this.count():this.size);var n=this.slice(0,t);return le(this,1===r?n:n.concat(ye(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return le(this,ne(this,t,!1))},get:function(t,e){return t=p(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return t=p(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return le(this,oe(this,t))},interleave:function(){var t=[this].concat(ye(arguments)),e=ce(this.toSeq(),rt.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),le(this,r)},keySeq:function(){return bn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return le(this,ee(this,t,e,!1))},zip:function(){var t=[this].concat(ye(arguments));return le(this,ce(this,Tn,t))},zipAll:function(){var t=[this].concat(ye(arguments));return le(this,ce(this,Tn,t,!0))},zipWith:function(t){var e=ye(arguments);return e[0]=this,le(this,ce(this,t,e))}});var Sn=x.prototype;Sn[I]=!0,Sn[j]=!0,cn(O,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var kn=O.prototype;function xn(t,e,r,n,i,o){return be(t.size),t.__iterate((function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),o),r}function On(t,e){return e}function Pn(t,e){return[e,t]}function Bn(t){return function(){return!t.apply(this,arguments)}}function Mn(t){return function(){return-t.apply(this,arguments)}}function Tn(){return ye(arguments)}function Dn(t,e){return t<e?1:t>e?-1:0}function jn(t){if(t.size===1/0)return 0;var e=H(t),r=A(t),n=e?1:0,i=t.__iterate(r?e?function(t,e){n=31*n+Ln(wt(t),wt(e))|0}:function(t,e){n=n+Ln(wt(t),wt(e))|0}:e?function(t){n=31*n+wt(t)|0}:function(t){n=n+wt(t)|0});return Hn(i,n)}function Hn(t,e){return e=bt(e,3432918353),e=bt(e<<15|e>>>-15,461845907),e=bt(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=bt(e^e>>>16,2246822507),e=bt(e^e>>>13,3266489909),e=vt(e^e>>>16),e}function Ln(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}kn.has=Cn.includes,kn.contains=kn.includes,kn.keys=kn.values,cn(et,En),cn(rt,Sn),cn(nt,kn);var Un=function(t){function e(t){return void 0===t||null===t?Qn():sn(t)?t:Qn().withMutations((function(e){var r=O(t);be(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(k(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(fn);Un.isOrderedSet=sn;var Rn,Fn=Un.prototype;function Nn(t,e){var r=Object.create(Fn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Qn(){return Rn||(Rn=Nn(Gr()))}Fn[j]=!0,Fn.zip=Sn.zip,Fn.zipWith=Sn.zipWith,Fn.zipAll=Sn.zipAll,Fn.__empty=Qn,Fn.__make=Nn;var Kn={LeftThenRight:-1,RightThenLeft:1};function zn(t){if(T(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(D(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!==typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var qn=function(t,e){var r;zn(t);var n=function(o){var a=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(t),u=i._indices={};i._name=e,i._keys=s,i._defaultValues=t;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,i[l]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+Yn(this)+' with property "'+l+'" since that property name is part of the Record API.'):$n(i,l)}}return this.__ownerID=void 0,this._values=Mr().withMutations((function(t){t.setSize(a._keys.length),k(o).forEach((function(e,r){t.set(a._indices[r],e===a._defaultValues[r]?void 0:e)}))})),this},i=n.prototype=Object.create(Vn);return i.constructor=n,e&&(n.displayName=e),n};qn.prototype.toString=function(){for(var t,e=Yn(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)t=r[n],e+=(n?", ":"")+t+": "+Ie(this.get(t));return e+" }"},qn.prototype.equals=function(t){return this===t||T(t)&&Gn(this).equals(Gn(t))},qn.prototype.hashCode=function(){return Gn(this).hashCode()},qn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},qn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},qn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return Wn(this,r)}return this},qn.prototype.remove=function(t){return this.set(t)},qn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Wn(this,t)},qn.prototype.wasAltered=function(){return this._values.wasAltered()},qn.prototype.toSeq=function(){return Gn(this)},qn.prototype.toJS=function(){return ln(this)},qn.prototype.entries=function(){return this.__iterator(R)},qn.prototype.__iterator=function(t,e){return Gn(this).__iterator(t,e)},qn.prototype.__iterate=function(t,e){return Gn(this).__iterate(t,e)},qn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Wn(this,e,t):(this.__ownerID=t,this._values=e,this)},qn.isRecord=T,qn.getDescriptiveName=Yn;var Vn=qn.prototype;function Wn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Yn(t){return t.constructor.displayName||t.constructor.name||"Record"}function Gn(t){return ct(t._keys.map((function(e){return[e,t.get(e)]})))}function $n(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){me(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(r){}}Vn[M]=!0,Vn[n]=Vn.remove,Vn.deleteIn=Vn.removeIn=De,Vn.getIn=_n,Vn.hasIn=Cn.hasIn,Vn.merge=Ue,Vn.mergeWith=Re,Vn.mergeIn=Xe,Vn.mergeDeep=Ge,Vn.mergeDeepWith=$e,Vn.mergeDeepIn=Je,Vn.setIn=Me,Vn.update=He,Vn.updateIn=Le,Vn.withMutations=Ze,Vn.asMutable=tr,Vn.asImmutable=er,Vn[Q]=Vn.entries,Vn.toJSON=Vn.toObject=Cn.toObject,Vn.inspect=Vn.toSource=function(){return this.toString()};var Xn,Jn=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(Xn)return Xn;Xn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return mt(this._value,t)},e.prototype.slice=function(t,r){var n=this.size;return d(t,r,n)?this:new e(this._value,y(r,n)-g(t,n))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return mt(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return mt(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){var r=this.size,n=0;while(n!==r)if(!1===t(this._value,e?r-++n:n++,this))break;return n},e.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new K((function(){return i===n?q():z(t,e?n-++i:i++,r._value)}))},e.prototype.equals=function(t){return t instanceof e?mt(this._value,t._value):un(t)},e}(rt);function Zn(t,e){return ti([],e||ei,t,"",e&&e.length>2?[]:void 0,{"":t})}function ti(t,e,r,n,i,o){if("string"!==typeof r&&!D(r)&&(Z(r)||V(r)||we(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),i&&""!==n&&i.push(n);var a=e.call(o,n,tt(r).map((function(n,o){return ti(t,e,n,o,i,r)})),i&&i.slice());return t.pop(),i&&i.pop(),a}return r}function ei(t,e){return C(e)?e.toList():A(e)?e.toMap():e.toSet()}var ri="4.3.5",ni={version:ri,Collection:S,Iterable:S,Seq:tt,Map:nr,OrderedMap:Wr,List:Mr,Stack:Zr,Set:fn,OrderedSet:Un,PairSorting:Kn,Record:qn,Range:bn,Repeat:Jn,is:mt,fromJS:Zn,hash:wt,isImmutable:D,isCollection:_,isKeyed:A,isIndexed:C,isAssociative:E,isOrdered:H,isValueObject:yt,isPlainObject:we,isSeq:B,isList:Br,isMap:dt,isOrderedMap:gt,isStack:Jr,isSet:an,isOrderedSet:sn,isRecord:T,get:Ee,getIn:vn,has:Ce,hasIn:wn,merge:Ne,mergeDeep:Ke,mergeWith:Qe,mergeDeepWith:ze,remove:ke,removeIn:Te,set:xe,setIn:Be,update:je,updateIn:Oe},ii=S;e["default"]=ni},"34ba":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rpcProperties=e.Base=void 0;var n=c(r("c8ec")),i=c(r("c239")),o=c(r("5ecc")),a=c(r("54fc")),s=c(r("088a")),u=c(r("dbd54"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e,r){f(t,e),e.set(t,r)}function f(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(t,e){var r=h(t,e,"get");return d(t,r)}function h(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function d(t,e){return e.get?e.get.call(t):e.value}const g={...n.default,...i.default,...u.default,...o.default,...a.default,...s.default};e.rpcProperties=g;var y=new WeakMap;class m{constructor(){l(this,y,{writable:!0,value:g})}get rpcProperties(){return p(this,y)}}e.Base=m},"34c7":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LightClientRPC",{enumerable:!0,get:function(){return n.LightClientRPC}});var n=r("4405")},"363c":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TESTNET=e.MAINNET=void 0,Object.defineProperty(e,"createConfig",{enumerable:!0,get:function(){return i.createConfig}}),Object.defineProperty(e,"createLatestTypeIdResolver",{enumerable:!0,get:function(){return i.createLatestTypeIdResolver}}),Object.defineProperty(e,"createRpcResolver",{enumerable:!0,get:function(){return i.createRpcResolver}}),Object.defineProperty(e,"findConfigByScript",{enumerable:!0,get:function(){return i.findConfigByScript}}),Object.defineProperty(e,"generateGenesisScriptConfigs",{enumerable:!0,get:function(){return i.generateGenesisScriptConfigs}}),Object.defineProperty(e,"getConfig",{enumerable:!0,get:function(){return i.getConfig}}),Object.defineProperty(e,"helpers",{enumerable:!0,get:function(){return i.helpers}}),Object.defineProperty(e,"initializeConfig",{enumerable:!0,get:function(){return i.initializeConfig}}),Object.defineProperty(e,"nameOfScript",{enumerable:!0,get:function(){return i.nameOfScript}}),Object.defineProperty(e,"predefined",{enumerable:!0,get:function(){return i.predefined}}),Object.defineProperty(e,"refreshScriptConfigs",{enumerable:!0,get:function(){return i.refreshScriptConfigs}}),Object.defineProperty(e,"validateConfig",{enumerable:!0,get:function(){return i.validateConfig}});var n=r("fbaaf"),i=r("a2e8");const o=n.predefined.AGGRON4;e.TESTNET=o;const a=n.predefined.LINA;e.MAINNET=a},3848:function(t,e,r){"use strict";function n(t){const e=[],r=new Array(4),n=[0,192,224,240],i=[127,63,63,63],o=[0,128,128,128];for(const a of t){const t=r,s=a.codePointAt(0),u=0-(-(4294967168&s)>>31)-(-(4294965248&s)>>31)-(-(4294901760&s)>>31),c=i[u],l=o[u];t[3]=l|s&c,t[2]=l|s>>>6&c,t[1]=l|s>>>12&c,t[0]=l|s>>>18&c;const f=3-u;t[f]|=n[u],Array.prototype.push.apply(e,t.slice(f))}return new Uint8Array(e)}function i(t){const e=[];for(const r of t){const t=r.codePointAt(0);t<128?e.push(t):t<2048?e.push(192|t>>6&31,128|63&t):t<65536?e.push(224|t>>12&15,128|t>>6&63,128|63&t):e.push(240|t>>18&7,128|t>>12&63,128|t>>6&63,128|63&t)}return new Uint8Array(e)}function o(t){const e=[];for(let r=0,n=t.length;r<n;++r){const n=t.charCodeAt(r);if(n<128)e.push(n);else if(n<2048)e.push(192|n>>6,128|63&n);else if(n<55296||n>=57344)e.push(224|n>>12,128|n>>6&63,128|63&n);else{let i=65536+((1023&n)<<10|1023&t.charCodeAt(++r));e.push(240|i>>18&7,128|i>>12&63,128|i>>6&63,128|63&i)}}return new Uint8Array(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toUtf8_1=n,e.toUtf8_2=i,e.toUtf8_3=o,e.toUtf8=o,e.default=e.toUtf8},"3e8f":function(t,e){},"408b3":function(t,e,r){var n=r("cf8e"),i=1e8;function o(t){return Number(t)}Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&t%1===0}),t.exports={toBitcoin:function(t){var e=typeof t;if("string"===e&&(t=o(t),e="number"),"number"!==e)throw new TypeError("toBitcoin must be called on a number or string, got "+e);if(!Number.isInteger(t))throw new TypeError("toBitcoin must be called on a whole number or string format whole number");var r=new n(t);return Number(r.div(i))},toSatoshi:function(t){var e=typeof t;if("string"===e&&(t=o(t),e="number"),"number"!==e)throw new TypeError("toSatoshi must be called on a number or string, got "+e);var r=new n(t);return Number(r.times(i))}}},"41da":function(t,e,r){"use strict";function n(t,e,r){return e=i(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t){var e=o(t,"string");return"symbol"===typeof e?e:String(e)}function o(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.CodecExecuteError=e.CodecBaseParseError=e.CODEC_OPTIONAL_PATH=void 0,e.isCodecExecuteError=c;const a="__lc_option__";e.CODEC_OPTIONAL_PATH=a;class s extends Error{constructor(t,e){super(t),this.expectedType=e}}e.CodecBaseParseError=s;const u="CodecExecuteError";function c(t){return t instanceof Error&&t.name===u}class l extends Error{constructor(t){super(),n(this,"name",u),n(this,"keys",[]),this.origin=t}updateKey(t){this.keys.push(t),this.message=this.getPackErrorMessage()}getPackErrorMessage(){var t;const e=(t,e,r)=>(e=e===a?0===r?"?":"?.":"number"===typeof e?`[${e}]`:"."+e,t+e),r=this.keys.reduceRight(e,"input");return`Expect type ${this.origin.expectedType} at ${r} but got error: ${this.origin.message}\n    ${null===(t=this.origin.stack)||void 0===t?void 0:t.replace(/Error:.+?\n/,"")}\n    `}}e.CodecExecuteError=l},4235:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexerEmitter=void 0;var n=r("faa1");class i extends n.EventEmitter{}e.IndexerEmitter=i},4405:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LightClientRPC=void 0;var n=r("8130"),i=r("fc55"),o=a(r("59d2"));function a(t){return t&&t.__esModule?t:{default:t}}class s{constructor(t){this.uri=t}async getTipHeader(){return n.ResultFormatter.toHeader(await u(this.uri,"get_tip_header"))}async getPeers(){return n.ResultFormatter.toPeers(await u(this.uri,"get_peers"))}async localNodeInfo(){return n.ResultFormatter.toLocalNodeInfo(await u(this.uri,"local_node_info"))}async fetchHeader(t){const e=[t];return(0,i.toFetchHeaderResult)(await u(this.uri,"fetch_header",e))}async getHeader(t){const e=[t];return n.ResultFormatter.toHeader(await u(this.uri,"get_header",e))}async fetchTransaction(t){const e=[t];return(0,i.toFetchTransactionResult)(await u(this.uri,"fetch_transaction",e))}async getTransaction(t){const e=[t];return n.ResultFormatter.toTransactionWithStatus(await u(this.uri,"get_transaction",e))}async sendTransaction(t){const e=[n.ParamsFormatter.toRawTransaction(t)];return n.ResultFormatter.toHash(await u(this.uri,"send_transaction",e))}async getScripts(){return(await u(this.uri,"get_scripts")).map(i.toLightClientScript)}async setScripts(t,e){const r=[t.map(({script:t,scriptType:e,blockNumber:r})=>({script:n.ParamsFormatter.toScript(t),script_type:e,block_number:r})),e];await u(this.uri,"set_scripts",r)}async getCells(t,e,r,i){const o=[n.ParamsFormatter.toGetCellsSearchKey(t),e,r,i];return n.ResultFormatter.toGetCellsResult(await u(this.uri,"get_cells",o))}async getCellsCapacity(t){const e=[n.ParamsFormatter.toSearchKey(t)];return n.ResultFormatter.toCellsCapacity(await u(this.uri,"get_cells_capacity",e))}async getGenesisBlock(){return n.ResultFormatter.toBlock(await u(this.uri,"get_genesis_block"))}async getTransactions(t,e,r,i){const o=[n.ParamsFormatter.toGetTransactionsSearchKey(t),e,r,i];return n.ResultFormatter.toGetTransactionsResult(await u(this.uri,"get_transactions",o))}}e.LightClientRPC=s;const u=async(t,e,r)=>{const n=await(0,o.default)(t,{method:"POST",body:JSON.stringify({id:0,jsonrpc:"2.0",method:e,params:r}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error("indexer request failed with HTTP code "+n.status);const i=await n.json();if(void 0!==i.error)throw new Error("indexer request rpc failed with error: "+JSON.stringify(i.error));return i.result}},4432:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CellCollector=void 0,e.calculateDaoEarliestSince=S,e.calculateDaoEarliestSinceCompatible=k,e.calculateMaximumWithdraw=B,e.calculateMaximumWithdrawCompatible=M,e.default=void 0,e.deposit=_,e.extractDaoDataCompatible=P,e.listDaoCells=v,e.unlock=E;var n=r("c1f3"),i=r("0b92"),o=r("4b0a"),a=r("a2e8"),s=d(r("9a80")),u=d(r("d4f1")),c=r("1c87"),l=r("832d"),f=r("6cf0"),p=r("8130"),h=d(r("5d00"));function d(t){return t&&t.__esModule?t:{default:t}}const{parseSince:g}=i.since,y="0x0000000000000000",m=f.BI.from(180);class b{constructor(t,e,r,{config:n}={}){if(!e)throw new Error("Cell Provider is missing!");n=n||(0,a.getConfig)();const i=(0,c.parseFromInfo)(t,{config:n}).fromScript,o=(0,l.generateDaoScript)(n),s="deposit"===r?y:"any";this.cellType=r,this.cellCollector=e.collector({lock:i,type:o,data:s})}async*collect(){for await(const t of this.cellCollector.collect())"withdraw"===this.cellType&&t.data===y||(yield t)}}async function*v(t,e,r,{config:n}={}){const i=new b(e,t,r,{config:n});for await(const o of i.collect())yield o}async function _(t,e,r,i,{config:o,enableNonSystemScript:p=!1}={}){o=o||(0,a.getConfig)();const d=o.SCRIPTS.DAO;if(!d)throw new Error("Provided config does not have DAO script setup!");if(w(e,o),t=O(t,o),!r)throw new Error("You must provide a to address!");const g=(0,n.parseAddress)(r,{config:o}),m={codeHash:d.CODE_HASH,hashType:d.HASH_TYPE,args:"0x"};t=t.update("outputs",t=>t.push({cellOutput:{capacity:"0x"+f.BI.from(i).toString(16),lock:g,type:m},data:y,outPoint:void 0,blockHash:void 0}));const b=t.get("outputs").size-1;if(t=t.update("fixedEntries",t=>t.push({field:"outputs",index:b})),"string"===typeof e){const r=(0,n.parseAddress)(e,{config:o});(0,l.isSecp256k1Blake160Script)(r,o)?t=await s.default.injectCapacity(t,b,e,{config:o}):(0,l.isSecp256k1Blake160MultisigScript)(r,o)?t=await u.default.injectCapacity(t,b,e,{config:o}):p&&(t=await h.default.injectCapacity(t,[e],i,(0,n.encodeToAddress)((0,c.parseFromInfo)(e).fromScript,{config:o}),void 0,{config:o}))}else e&&((0,c.isMultisigFromInfo)(e)?t=await u.default.injectCapacity(t,b,e,{config:o}):p&&(t=await h.default.injectCapacity(t,[e],i,(0,n.encodeToAddress)((0,c.parseFromInfo)(e).fromScript,{config:o}),void 0,{config:o})));return t}function w(t,e){let r;if("string"===typeof t){const i=(0,n.parseAddress)(t,{config:e}),a=i.args;58===a.length&&(r=o.number.Uint64LE.unpack("0x"+a.slice(42)).toHexString())}else"R"in t&&(r=t.since);if(null!=r){const{relative:t,type:e}=g(r);if(t||"epochNumber"!==e)throw new Error("Can't deposit a dao cell with multisig locktime which not using absolute-epoch-number format!")}}async function A(t,e,r,{config:i,enableNonSystemScript:c=!1}={}){if(i=i||(0,a.getConfig)(),x(i),t=O(t,i),t.get("inputs").size!==t.get("outputs").size)throw new Error("Input size must equals to output size in txSkeleton!");if(!i.SCRIPTS.DAO)throw new Error("Provided config does not have DAO script setup!");const f=t.get("cellProvider");if(!f)throw new Error("Cell provider is missing!");const p=e.cellOutput.type,d=i.SCRIPTS.DAO;if(!p||p.codeHash!==d.CODE_HASH||p.hashType!==d.HASH_TYPE||e.data!==y)throw new Error("fromInput is not a DAO deposit cell.");const g=e.cellOutput.lock;(0,l.isSecp256k1Blake160Script)(g,i)?t=await s.default.setupInputCell(t,e,void 0,{config:i}):(0,l.isSecp256k1Blake160MultisigScript)(g,i)?t=await u.default.setupInputCell(t,e,r||(0,n.generateAddress)(g,{config:i}),{config:i}):c&&(t=await h.default.setupInputCell(t,e,r||(0,n.encodeToAddress)(g,{config:i}),{config:i}));const m=t.get("outputs").size-1,b=t.get("outputs").get(m),v=JSON.parse(JSON.stringify(b));if(!e.blockNumber)throw new Error("fromInput has no blockNumber!");return v.data=o.bytes.hexify(o.number.Uint64.pack(e.blockNumber)),t=t.update("outputs",t=>t.update(m,()=>v)),t=t.update("headerDeps",t=>t.push(e.blockHash)),t=t.update("fixedEntries",e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"outputs",index:t.get("outputs").size-1})),t}function I(t){const e=f.BI.from(t);return{length:e.shr(40).and(4095),index:e.shr(24).and(4095),number:e.and(16777215)}}function C({length:t,index:e,number:r}){const n=f.BI.from(t),i=f.BI.from(e),o=f.BI.from(r);return f.BI.from(32).shl(56).add(n.shl(40)).add(i.shl(24)).add(o)}async function E(t,e,r,c,h,{config:d,RpcClient:g=p.RPC}={}){if(d=d||(0,a.getConfig)(),x(d),t=O(t,d),!d.SCRIPTS.DAO)throw new Error("Provided config does not have DAO script setup!");const b=t.get("cellProvider");if(!b)throw new Error("Cell provider is missing!");const v=new g(b.uri),_=e.cellOutput.type,w=d.SCRIPTS.DAO;if(!_||_.codeHash!==w.CODE_HASH||_.hashType!==w.HASH_TYPE||e.data!==y)throw new Error("depositInput is not a DAO deposit cell.");const A=r.cellOutput.type;if(!A||A.codeHash!==w.CODE_HASH||A.hashType!==w.HASH_TYPE||r.data===y)throw new Error("withdrawInput is not a DAO withdraw cell.");const E=await v.getHeader(e.blockHash),S=I(E.epoch),k=await v.getHeader(r.blockHash),P=I(k.epoch),B=P.index.mul(S.length),T=S.index.mul(P.length);let D=P.number.sub(S.number);B.gt(T)&&(D=D.add(1));const j=D.add(m).sub(1).div(m).mul(m),H={number:f.BI.from(S.number.add(j)),index:f.BI.from(S.index),length:f.BI.from(S.length)},L=C(H),U="0x"+M(r,E.dao,k.dao).toString(16),R=(0,n.parseAddress)(c,{config:d});t=t.update("outputs",t=>t.push({cellOutput:{capacity:U,lock:R,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0}));const F="0x"+L.toString(16);while(t.get("witnesses").size<t.get("inputs").size-1)t=t.update("witnesses",t=>t.push("0x"));t=t.update("headerDeps",t=>t.push(e.blockHash,r.blockHash));const N=t.get("headerDeps").size-2,Q={inputType:o.bytes.hexify(o.number.Uint64LE.pack(N))},K=o.bytes.hexify(i.blockchain.WitnessArgs.pack(Q)),z=r.cellOutput.lock;(0,l.isSecp256k1Blake160Script)(z,d)?t=await s.default.setupInputCell(t,r,void 0,{config:d,since:F,defaultWitness:K}):(0,l.isSecp256k1Blake160MultisigScript)(z,d)&&(t=await u.default.setupInputCell(t,r,h||(0,n.generateAddress)(z,{config:d}),{config:d,since:F,defaultWitness:K}));const q=t.get("outputs").size-1;return t=t.update("outputs",t=>t.remove(q)),t=t.update("fixedEntries",e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"outputs",index:t.get("outputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2})),t}function S(t,e){const r=k(t,e);return BigInt(r.toString())}function k(t,e){const r=I(t),n=I(e),i=n.index.mul(r.length),o=r.index.mul(n.length);let a=n.number.sub(r.number);i.gt(o)&&(a=a.add(1));const s=a.add(m).sub(1).div(m).mul(m),u={number:f.BI.from(r.number.add(s)),index:f.BI.from(r.index),length:f.BI.from(r.length)};return C(u)}function x(t){const e=t.SCRIPTS.DAO;if(!e)throw new Error("Provided config does not have DAO script setup!")}function O(t,e){const r=e.SCRIPTS.DAO;return(0,l.addCellDep)(t,{outPoint:{txHash:r.TX_HASH,index:r.INDEX},depType:r.DEP_TYPE})}function P(t){if(!/^(0x)?([0-9a-fA-F]){64}$/.test(t))throw new Error("Invalid dao format!");const e=16,r=t.startsWith("0x")?t.slice(2):t;return["c","ar","s","u"].map((t,n)=>({[t]:o.number.Uint64LE.unpack("0x"+r.slice(e*n,e*(n+1)))})).reduce((t,e)=>({...t,...e}),{})}function B(t,e,r){return M(t,e,r).toBigInt()}function M(t,e,r){const i=f.BI.from(P(e).ar),o=f.BI.from(P(r).ar),a=f.BI.from((0,n.minimalCellCapacityCompatible)(t)),s=f.BI.from(t.cellOutput.capacity),u=s.sub(a),c=u.mul(o).div(i);return c.add(a)}e.CellCollector=b;var T={deposit:_,withdraw:A,unlock:E,calculateMaximumWithdraw:B,calculateMaximumWithdrawCompatible:M,calculateDaoEarliestSince:S,calculateDaoEarliestSinceCompatible:k,CellCollector:b,listDaoCells:v};e.default=T},"456cd":function(t,e,r){"use strict";var n=r("6374").default,i=r("7ec2").default,o=r("c973").default,a=r("5bc3").default,s=r("970b").default,u=r("5b109").default,c=r("01b0").default;r("d9e2"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.TransactionCollector=e.Indexer=void 0;var l=r("a7ee"),f=r("9560"),p=r("6e6e"),h=a((function t(){s(this,t)}));e.Indexer=h;var d=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.lock,i=r.type,o=r.argsLen,a=void 0===o?-1:o,u=r.fromBlock,c=r.toBlock,h=r.order,d=void 0===h?"asc":h,g=r.skip,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=y.skipMissing,b=void 0!==m&&m,v=y.includeStatus,_=void 0===v||v;if(s(this,t),!n&&(!i||"empty"===i))throw new Error("Either lock or type script must be provided!");if(n&&!(0,p.isScriptWrapper)(n)?(l.validators.ValidateScript(n),this.lock={script:n,ioType:"both",argsLen:a}):n&&n.script&&(l.validators.ValidateScript(n.script),this.lock=n,n.argsLen||(this.lock.argsLen=a),n.ioType||(this.lock.ioType="both")),"empty"===i?this.type=i:i&&!(0,p.isScriptWrapper)(i)?(l.validators.ValidateScript(i),this.type={script:i,ioType:"both",argsLen:a}):i&&i.script&&(l.validators.ValidateScript(i.script),this.type=i,i.argsLen||(this.type.argsLen=a),i.ioType||(this.type.ioType="both")),u&&(0,f.assertHexadecimal)("fromBlock",u),c&&(0,f.assertHexadecimal)("toBlock",c),"asc"!==d&&"desc"!==d)throw new Error("Order must be either asc or desc!");this.indexer=e,this.skipMissing=b,this.includeStatus=_,this.fromBlock=u,this.toBlock=c,this.order=d,this.skip=g,this.rpc=e.rpc}return a(t,[{key:"getTransactionHashes",value:function(){var t=o(i().mark((function t(){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("Not implement!");case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"count",value:function(){var t=o(i().mark((function t(){var e;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getTransactionHashes();case 2:return e=t.sent,t.abrupt("return",e.length);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"collect",value:function(){var t=this;return c(i().mark((function e(){var r,o,a,s,c;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t.getTransactionHashes());case 2:r=e.sent,o=n(r),e.prev=4,o.s();case 6:if((a=o.n()).done){e.next=22;break}return s=a.value,e.next=10,u(t.rpc.get_transaction(s));case 10:if(c=e.sent,t.skipMissing||c){e.next=13;break}throw new Error("Transaction ".concat(s," is missing!"));case 13:if(!t.includeStatus){e.next=18;break}return e.next=16,c;case 16:e.next=20;break;case 18:return e.next=20,c.transaction;case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](4),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[4,24,27,30]])})))()}}]),t}();e.TransactionCollector=d;var g={TransactionCollector:d},y=g;e.default=y},4778:function(t,e,r){"use strict";var n=function(t,e){return function(r,n){var i=2*n,o=2*e;r[i]=t[o],r[i+1]=t[o+1]}};t.exports=n},"47a9":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=s(r("a567")),i=s(r("9406")),o=s(r("1170")),a=s(r("9fa9"));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=new Uint32Array(10),e=new Uint32Array(10),r=new Uint32Array(2);return function(s){for(var u=0;u<24;u++)(0,a["default"])({A:s,C:t,D:e,W:r}),(0,o["default"])({A:s,C:t,W:r}),(0,n["default"])({A:s,C:t}),(0,i["default"])({A:s,roundIndex:u});t.fill(0),e.fill(0),r.fill(0)}},c=u;e["default"]=c},4923:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),i=n;e["default"]=i},"4b0a":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={createBytesCodec:!0,createFixedBytesCodec:!0,isFixedCodec:!0,bytes:!0,number:!0,molecule:!0};e.bytes=void 0,Object.defineProperty(e,"createBytesCodec",{enumerable:!0,get:function(){return i.createBytesCodec}}),Object.defineProperty(e,"createFixedBytesCodec",{enumerable:!0,get:function(){return i.createFixedBytesCodec}}),Object.defineProperty(e,"isFixedCodec",{enumerable:!0,get:function(){return i.isFixedCodec}}),e.number=e.molecule=void 0;var i=r("e3a3"),o=r("a100");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=l(r("c914"));e.bytes=a;var s=l(r("6436"));e.number=s;var u=l(r("3224"));function c(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=c(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}e.molecule=u},"4c7f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bech32m=e.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let p=0;p<n.length;p++){const t=n.charAt(p);i[t]=p}function o(t){const e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function a(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=o(e)^n>>5}e=o(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=o(e)^31&n}return e}function s(t,e,r,n){let i=0,o=0;const a=(1<<r)-1,s=[];for(let u=0;u<t.length;++u){i=i<<e|t[u],o+=e;while(o>=r)o-=r,s.push(i>>o&a)}if(n)o>0&&s.push(i<<r-o&a);else{if(o>=e)return"Excess padding";if(i<<r-o&a)return"Non-zero padding"}return s}function u(t){return s(t,8,5,!0)}function c(t){const e=s(t,5,8,!1);if(Array.isArray(e))return e}function l(t){const e=s(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function f(t){let e;function r(t,r,i){if(i=i||90,t.length+7+r.length>i)throw new TypeError("Exceeds length limit");t=t.toLowerCase();let s=a(t);if("string"===typeof s)throw new Error(s);let u=t+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5!==0)throw new Error("Non 5-bit word");s=o(s)^t,u+=n.charAt(t)}for(let e=0;e<6;++e)s=o(s);s^=e;for(let e=0;e<6;++e){const t=s>>5*(5-e)&31;u+=n.charAt(t)}return u}function s(t,r){if(r=r||90,t.length<8)return t+" too short";if(t.length>r)return"Exceeds length limit";const n=t.toLowerCase(),s=t.toUpperCase();if(t!==n&&t!==s)return"Mixed-case string "+t;t=n;const u=t.lastIndexOf("1");if(-1===u)return"No separator character for "+t;if(0===u)return"Missing prefix for "+t;const c=t.slice(0,u),l=t.slice(u+1);if(l.length<6)return"Data too short";let f=a(c);if("string"===typeof f)return f;const p=[];for(let e=0;e<l.length;++e){const t=l.charAt(e),r=i[t];if(void 0===r)return"Unknown character "+t;f=o(f)^r,e+6>=l.length||p.push(r)}return f!==e?"Invalid checksum for "+t:{prefix:c,words:p}}function f(t,e){const r=s(t,e);if("object"===typeof r)return r}function p(t,e){const r=s(t,e);if("object"===typeof r)return r;throw new Error(r)}return e="bech32"===t?1:734539939,{decodeUnsafe:f,decode:p,encode:r,toWords:u,fromWordsUnsafe:c,fromWords:l}}e.bech32=f("bech32"),e.bech32m=f("bech32m")},"54fc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("bfda"),i=a(r("ca1d"));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var s={sendTransaction:{method:"send_transaction",paramsFormatters:[n.formatter.toRawTransaction,n.formatter.toOutputsValidator],resultFormatters:i.toHash},txPoolInfo:{method:"tx_pool_info",paramsFormatters:[],resultFormatters:i.toTxPoolInfo},clearTxPool:{method:"clear_tx_pool",paramsFormatters:[]},getRawTxPool:{method:"get_raw_tx_pool",paramsFormatters:[],resultFormatters:i.toRawTxPool}};e.default=s},"557c":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=r("1c35"),i=o(r("47a9"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e){for(var r=0;r<t.length;r+=8){var n=r/4;e[n]^=t[r+7]<<24|t[r+6]<<16|t[r+5]<<8|t[r+4],e[n+1]^=t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]}return e},s=function(t,e){for(var r=0;r<e.length;r+=8){var n=r/4;e[r]=t[n+1],e[r+1]=t[n+1]>>>8,e[r+2]=t[n+1]>>>16,e[r+3]=t[n+1]>>>24,e[r+4]=t[n],e[r+5]=t[n]>>>8,e[r+6]=t[n]>>>16,e[r+7]=t[n]>>>24}return e},u=function(t){var e=this,r=t.capacity,o=t.padding,u=(0,i["default"])(),c=200,l=r/8,f=c-r/4,p=0,h=new Uint32Array(c/4),d=n.Buffer.allocUnsafe(f);return this.absorb=function(t){for(var r=0;r<t.length;r++)d[p]=t[r],p+=1,p>=f&&(a(d,h),u(h),p=0);return e},this.squeeze=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={buffer:t.buffer||n.Buffer.allocUnsafe(l),padding:t.padding||o,queue:n.Buffer.allocUnsafe(d.length),state:new Uint32Array(h.length)};d.copy(e.queue);for(var r=0;r<h.length;r++)e.state[r]=h[r];e.queue.fill(0,p),e.queue[p]|=e.padding,e.queue[f-1]|=128,a(e.queue,e.state);for(var i=0;i<e.buffer.length;i+=f)u(e.state),s(e.state,e.buffer.slice(i,i+f));return e.buffer},this.reset=function(){return d.fill(0),h.fill(0),p=0,e},this},c=u;e["default"]=c},"562e":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XPubStore=void 0;var n=r("ddb4"),i=o(r("3e8f"));function o(t){return t&&t.__esModule?t:{default:t}}class a{constructor(t){this.accountExtendedPublicKey=t}toAccountExtendedPublicKey(){return this.accountExtendedPublicKey}save(t,{overwrite:e=!1}={}){if(!e&&i.default.existsSync(t))throw new Error("XPub file already exists!");i.default.writeFileSync(t,this.toJson())}toJson(){return JSON.stringify({xpubkey:this.accountExtendedPublicKey.serialize().slice(2)})}static load(t){const e=i.default.readFileSync(t,"utf-8"),r=JSON.parse(e).xpubkey,o=n.AccountExtendedPublicKey.parse("0x"+r);return new a(o)}}e.XPubStore=a},"56f7":function(t,e){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256);for(let s=0;s<r.length;s++)n[r.charCodeAt(s)]=s;function i(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}function o(t){const e=t.byteLength;let n="";for(let i=0;i<e;i+=3)n+=r[t[i]>>2]+r[(3&t[i])<<4|t[i+1]>>4]+r[(15&t[i+1])<<2|t[i+2]>>6]+r[63&t[i+2]];return e%3===2?n=n.substring(0,n.length-1)+"=":e%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function a(t,e,r=0,o=i(e)){const a=Math.min(o,t.byteLength-r);for(let i=0,s=0;s<a;i+=4){const r=n[e.charCodeAt(i)],o=n[e.charCodeAt(i+1)],a=n[e.charCodeAt(i+2)],u=n[e.charCodeAt(i+3)];t[s++]=r<<2|o>>4,t[s++]=(15&o)<<4|a>>2,t[s++]=(3&a)<<6|63&u}return a}n[45]=62,n[95]=63,t.exports={byteLength:i,toString:o,write:a}},"57b3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"anyoneCanPay",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"common",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"createP2PKHMessageGroup",{enumerable:!0,get:function(){return f.createP2PKHMessageGroup}}),Object.defineProperty(e,"dao",{enumerable:!0,get:function(){return a.default}}),e.default=void 0,Object.defineProperty(e,"deploy",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"locktimePool",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"omnilock",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"parseFromInfo",{enumerable:!0,get:function(){return o.parseFromInfo}}),Object.defineProperty(e,"secp256k1Blake160",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"secp256k1Blake160Multisig",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"sudt",{enumerable:!0,get:function(){return c.default}});var n=d(r("9a80")),i=d(r("d4f1")),o=r("1c87"),a=d(r("4432")),s=d(r("ad49")),u=d(r("5d00")),c=d(r("01d4")),l=d(r("d29a")),f=r("b2eb"),p=d(r("c06b")),h=d(r("b9b7"));function d(t){return t&&t.__esModule?t:{default:t}}var g={secp256k1Blake160:n.default,secp256k1Blake160Multisig:i.default,dao:a.default,locktimePool:s.default,common:u.default,sudt:c.default,anyoneCanPay:l.default};e.default=g},"59d2":function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!==typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function p(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function h(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}function d(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=a(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype["delete"]=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=s(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function v(t,e){e=e||{};var r=e.body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function w(t){var e=new c,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function A(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var I=[301,302,303,307,308];A.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(E){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(t,n){return new Promise((function(i,o){var a=new v(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:w(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new A(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=c,t.Request=v,t.Response=A),e.Headers=c,e.Request=v,e.Response=A,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},"5b109":function(t,e,r){var n=r("c8baa");function i(t){return new n(t,0)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"5bf9":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("3848"),i=2654435761,o=2246822519,a=3266489917,s=668265263,u=374761393;function c(t,e=0){t="string"===typeof t?n.default(t):t;const r=t;let c=e+u&4294967295,l=0;if(r.length>=16){const r=[e+i+o&4294967295,e+o&4294967295,e+0&4294967295,e-i&4294967295],n=t,a=n.length-16;let s=0;for(l=0;(4294967280&l)<=a;l+=4){const t=l,e=n[t+0]+(n[t+1]<<8),a=n[t+2]+(n[t+3]<<8),u=e*o+(a*o<<16);let c=r[s]+u&4294967295;c=c<<13|c>>>19;const f=65535&c,p=c>>>16;r[s]=f*i+(p*i<<16)&4294967295,s=s+1&3}c=(r[0]<<1|r[0]>>>31)+(r[1]<<7|r[1]>>>25)+(r[2]<<12|r[2]>>>20)+(r[3]<<18|r[3]>>>14)&4294967295}c=c+t.length&4294967295;let f=t.length-4;for(;l<=f;l+=4){const t=l,e=r[t+0]+(r[t+1]<<8),n=r[t+2]+(r[t+3]<<8),i=e*a+(n*a<<16);c=c+i&4294967295,c=c<<17|c>>>15,c=(65535&c)*s+((c>>>16)*s<<16)&4294967295}for(;l<r.length;++l){const t=r[l];c+=t*u,c=c<<11|c>>>21,c=(65535&c)*i+((c>>>16)*i<<16)&4294967295}return c^=c>>>15,c=((65535&c)*o&4294967295)+((c>>>16)*o<<16),c^=c>>>13,c=((65535&c)*a&4294967295)+((c>>>16)*a<<16),c^=c>>>16,c<0?c+4294967296:c}e.xxHash32=c},"5d00":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.injectCapacity=S,e.payFee=k,e.payFeeByFeeRate=D,e.prepareSigningEntries=x,e.registerCustomLockScriptInfos=I,e.setupInputCell=T,e.transfer=E;var n=r("c1f3"),i=m(r("d4f1")),o=r("1c87"),a=m(r("9a80")),s=r("a2e8"),u=y(r("ad49")),c=r("0b92"),l=m(r("d29a")),f=r("329b"),p=r("832d"),h=r("6cf0"),d=m(r("b9b7"));function g(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(g=function(t){return t?r:e})(t)}function y(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=g(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function m(t){return t&&t.__esModule?t:{default:t}}const{ScriptValue:b}=c.values;function v(t,e){console.log(`[${t}] ${e}`)}const _={configHashCode:0,_predefinedInfos:[],_customInfos:[],get infos(){return[...this._predefinedInfos,...this._customInfos]}};function w(){_.configHashCode=0,_._predefinedInfos=[],_._customInfos=[]}function A(){return _}function I(t){_._customInfos=t}function C({config:e}={}){e=e||(0,s.getConfig)();const r=()=>{var t,r,n,o;const s=null===(t=e)||void 0===t?void 0:t.SCRIPTS.SECP256K1_BLAKE160,u=null===(r=e)||void 0===r?void 0:r.SCRIPTS.SECP256K1_BLAKE160_MULTISIG,c=null===(n=e)||void 0===n?void 0:n.SCRIPTS.ANYONE_CAN_PAY,f=null===(o=e)||void 0===o?void 0:o.SCRIPTS.OMNILOCK,p=[];return s?p.push({codeHash:s.CODE_HASH,hashType:s.HASH_TYPE,lockScriptInfo:a.default}):v("warn","SECP256K1_BLAKE160 script info not found in config!"),u?p.push({codeHash:u.CODE_HASH,hashType:u.HASH_TYPE,lockScriptInfo:i.default}):v("warn","SECP256K1_BLAKE160_MULTISIG script info not found in config!"),c?p.push({codeHash:c.CODE_HASH,hashType:c.HASH_TYPE,lockScriptInfo:l.default}):v("warn","ANYONE_CAN_PAY script info not found in config!"),f?p.push({codeHash:f.CODE_HASH,hashType:f.HASH_TYPE,lockScriptInfo:d.default}):v("warn","OMNILOCK script info not found in config!"),p},n=c.utils.hashCode(t.from(JSON.stringify(e)));0===_.infos.length?(_._predefinedInfos=r(),_.configHashCode=n):n!==_.configHashCode&&(v("warn","`config` changed, regenerate lockScriptInfos!"),_._predefinedInfos=r(),_.configHashCode=n)}async function E(t,e,r,i,o,a,{config:c,useLocktimeCellsFirst:l=!0,LocktimePoolCellCollector:f=u.CellCollector}={}){var p;c=c||(0,s.getConfig)();const d=h.BI.from(i);if(!r)throw new Error("You must provide a to address!");const g=(0,n.parseAddress)(r,{config:c}),y={cellOutput:{capacity:"0x"+d.toString(16),lock:g,type:void 0},data:"0x"};C({config:c});const m=_.infos.find(t=>t.codeHash===g.codeHash&&t.hashType===g.hashType);return t=m&&null!==(p=m.lockScriptInfo)&&void 0!==p&&p.setupOutputCell?await m.lockScriptInfo.setupOutputCell(t,y,{config:c}):t.update("outputs",t=>t.push(y)),t=await S(t,e,d.toString(),o,a,{config:c,useLocktimeCellsFirst:l,LocktimePoolCellCollector:f}),t}async function S(t,e,r,i,a,{config:c,useLocktimeCellsFirst:l=!0,LocktimePoolCellCollector:f=u.CellCollector,enableDeductCapacity:p=!0}={}){c=c||(0,s.getConfig)();const d=h.BI.from(r);let g=d;if(0===e.length)throw new Error("No from info provided!");const y=(0,o.parseFromInfo)(i||e[0],{config:c}).fromScript,m={cellOutput:{capacity:"0x0",lock:y,type:void 0},data:"0x"},b=h.BI.from((0,n.minimalCellCapacityCompatible)(m));let v=h.BI.from(0);if(l){if(a){const r=await u.default.injectCapacityWithoutChangeCompatible(t,e,g.toString(),a,b.toString(),{config:c,LocktimeCellCollector:f,enableDeductCapacity:p});t=r.txSkeleton,g=h.BI.from(r.capacity),v=h.BI.from(r.changeCapacity)}if(g.gt(0)){const r=await P(t,e,g,b,{config:c,enableDeductCapacity:p});t=r.txSkeleton,g=r.capacity,v=r.changeCapacity}else if(g.eq(0)&&v.gt(0)&&v.lt(b)){const r=await P(t,e,b.sub(v),h.BI.from(0),{config:c,enableDeductCapacity:p});t=r.txSkeleton,g=r.capacity,v=r.changeCapacity}}else{const r=await P(t,e,g,b,{config:c,enableDeductCapacity:p});if(t=r.txSkeleton,g=r.capacity,v=r.changeCapacity,a)if(g.gt(0)){const r=await u.default.injectCapacityWithoutChangeCompatible(t,e,g.toString(),a,b.toString(),{config:c,LocktimeCellCollector:f,enableDeductCapacity:p});t=r.txSkeleton,g=h.BI.from(r.capacity),v=h.BI.from(r.changeCapacity)}else if(g.eq(0)&&v.gt(0)&&v.lt(b)){const r=await u.default.injectCapacityWithoutChangeCompatible(t,e,b.sub(v).toString(),a,0,{config:c,LocktimeCellCollector:f,enableDeductCapacity:p});t=r.txSkeleton,g=h.BI.from(r.capacity),v=h.BI.from(r.changeCapacity)}}if(g.gt(0))throw new Error("Not enough capacity in from infos!");if(v.gt(0)&&v.lt(b))throw new Error("Not enough capacity in from infos for change!");return v.gt(0)&&(m.cellOutput.capacity="0x"+v.toString(16),t=t.update("outputs",t=>t.push(m))),t}async function k(t,e,r,n,{config:i,useLocktimeCellsFirst:o=!0,enableDeductCapacity:a=!0}={}){return S(t,e,r,void 0,n,{config:i,useLocktimeCellsFirst:o,enableDeductCapacity:a})}function x(t,{config:e}={}){e=e||(0,s.getConfig)(),C({config:e});for(const r of _.infos)t=r.lockScriptInfo.prepareSigningEntries(t,{config:e});return t}async function O(t,e,r,n,{config:i,enableDeductCapacity:o=!0}={}){const a=await P(t,e,r,n,{config:i,enableDeductCapacity:o});return{txSkeleton:a.txSkeleton,capacity:BigInt(a.capacity.toString()),changeCapacity:BigInt(a.changeCapacity.toString())}}async function P(t,e,r,n,{config:i,enableDeductCapacity:a=!0}={}){i=i||(0,s.getConfig)();let u=h.BI.from(r);const c=t.get("cellProvider");if(!c)throw new Error("Cell Provider is missing!");const l=t=>{var e,r;return`${null===(e=t.outPoint)||void 0===e?void 0:e.txHash}_${null===(r=t.outPoint)||void 0===r?void 0:r.index}`};let p=(0,f.Set)();for(const o of t.get("inputs"))p=p.add(l(o));const d=e.map(t=>(0,o.parseFromInfo)(t,{config:i}).fromScript);for(const o of d)a&&u.gt(0)&&([t,u]=B(t,o,u));C({config:i});let g=h.BI.from(0);if(u.gt(0))t:for(const o of e){const e=_.infos.map(t=>new t.lockScriptInfo.CellCollector(o,c,{config:i}));for(const r of e)for await(const e of r.collect()){const r=l(e);if(p.has(r))continue;p=p.add(r);const a=await M(t,e,o,{config:i,needCapacity:u});t=a.txSkeleton;const s=h.BI.from(a.availableCapacity);let c=s;if(c.gt(u)&&(c=u),u=u.sub(c),g=g.add(s.sub(c)),u.eq(0)&&(g.eq(0)||g.gt(n)))break t}}return{txSkeleton:t,capacity:u,changeCapacity:g}}function B(t,e,r){let i=h.BI.from(r);const o=t.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let a=o?o.index+1:0;for(;a<t.get("outputs").size&&i.gt(0);a++){const o=t.get("outputs").get(a);if(o&&new b(o.cellOutput.lock,{validate:!1}).equals(new b(e,{validate:!1}))){const e=JSON.parse(JSON.stringify(o)),s=h.BI.from(e.cellOutput.capacity),u=s;let c;i.gte(u)?c=u:(c=s.sub((0,n.minimalCellCapacityCompatible)(e)),c.gt(r)&&(c=r)),i=i.sub(c),e.cellOutput.capacity="0x"+s.sub(c).toString(16),t=t.update("outputs",t=>t.update(a,()=>e))}}return t=t.update("outputs",t=>t.filter(t=>h.BI.from(t.cellOutput.capacity).toString()!==h.BI.from(0).toString())),[t,i]}async function M(t,e,r,{config:i,since:o,defaultWitness:a="0x",needCapacity:u}={}){i=i||(0,s.getConfig)(),t=await T(t,e,r,{config:i,since:o,defaultWitness:a});const c=t.get("outputs").size-1,l=t.get("outputs").get(c);if(!l)throw new Error("Impossible: can not find last output");const f=h.BI.from(l.cellOutput.capacity),d=t.get("fixedEntries").findIndex(t=>"outputs"===t.field&&t.index===c),g=e.cellOutput.lock;let y=h.BI.from(0);if(i.SCRIPTS.ANYONE_CAN_PAY&&(0,p.isAcpScript)(g,i)){const e=!!(r&&"object"===typeof r&&"destroyable"in r&&r.destroyable),i=u?h.BI.from(u):f;if(e)y=f,t=t.update("outputs",t=>t.remove(c)),d>=0&&(t=t.update("fixedEntries",t=>t.remove(d)));else{const e=h.BI.from((0,n.minimalCellCapacityCompatible)(l)),r=f.sub(e),o=JSON.parse(JSON.stringify(l));let a=e;y=r,i.lt(r)&&(a=f.sub(i),y=i),o.cellOutput.capacity="0x"+a.toString(16),t=t.update("outputs",t=>t.update(c,()=>o))}}else{var m;if(d<0)y=h.BI.from(null===(m=t.get("outputs").get(c))||void 0===m?void 0:m.cellOutput.capacity),t=t.update("outputs",t=>t.remove(c))}return{txSkeleton:t,availableCapacity:y}}async function T(t,e,r,{config:n,since:i,defaultWitness:o}={}){n=n||(0,s.getConfig)(),C({config:n});const a=e.cellOutput.lock,u=_.infos.find(t=>t.codeHash===a.codeHash&&t.hashType===a.hashType);if(!u)throw new Error("No LockScriptInfo found for setupInputCell!");return u.lockScriptInfo.setupInputCell(t,e,r,{config:n,since:i,defaultWitness:o})}async function D(t,e,r,n,{config:i,useLocktimeCellsFirst:o=!0,enableDeductCapacity:a=!0}={}){let s=0,u=t,c=L(u);while(c>s){s=c;const l=H(s,r);u=await k(t,e,l,n,{config:i,useLocktimeCellsFirst:o,enableDeductCapacity:a}),c=L(u)}return u}function j(t,e){const r=H(t,e);return BigInt(r.toString())}function H(t,e){const r=h.BI.from(1e3),n=h.BI.from(t).mul(e),i=n.div(r);return i.mul(r).lt(n)?i.add(1):h.BI.from(i)}function L(t){const e=(0,n.createTransactionFromSkeleton)(t);return U(e)}function U(t){const e=c.blockchain.Transaction.pack(t),r=e.byteLength+4;return r}var R={transfer:E,payFee:k,prepareSigningEntries:x,injectCapacity:S,setupInputCell:T,registerCustomLockScriptInfos:I,payFeeByFeeRate:D,__tests__:{_commonTransfer:O,resetLockScriptInfos:w,getLockScriptInfos:A,generateLockScriptInfos:C,getTransactionSizeByTx:U,getTransactionSize:L,calculateFee:j,calculateFeeCompatible:H}};e.default=R}).call(this,r("1c35").Buffer)},"5daf":function(t,e,r){(function(t){(function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(45).Buffer}catch(P){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function u(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function c(t,e,r,i){for(var o=0,a=0,s=Math.min(t.length,r),u=e;u<s;u++){var c=t.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else{var s=t.length-e;for(n=s%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8}this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,l=r;l<s;l+=n)u=c(t,l,l+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(t,l,t.length,e),l=0;l<a;l++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){l(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(P){o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,i+=2,i>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?p[6-u.length]+u+r:u+r}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=h[t],l=d[t];r="";var f=this.clone();f.negative=0;while(!f.isZero()){var g=f.modrn(l).toString(t);f=f.idivn(l),r=f.isZero()?g+r:p[c-g.length]+g+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var g=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function y(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,p=Math.min(c,e.length-1),h=Math.max(0,c-t.length+1);h<=p;h++){var d=c-h|0;i=0|t.words[d],o=0|e.words[h],a=i*o+f,l+=a/67108864|0,f=67108863&a}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=g(t,o),s="le"===e?"LE":"BE";return this["_toArrayLike"+s](a,i),a},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r++]=255&a,r<t.length&&(t[r++]=a>>8&255),r<t.length&&(t[r++]=a>>16&255),6===o?(r<t.length&&(t[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r--]=255&a,r>=0&&(t[r--]=a>>8&255),r>=0&&(t[r--]=a>>16&255),6===o?(r>=0&&(t[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)e=(0|r.words[a])-(0|n.words[a])+o,o=e>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)e=(0|r.words[a])+o,o=e>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var b=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,c=0,l=0|a[0],f=8191&l,p=l>>>13,h=0|a[1],d=8191&h,g=h>>>13,y=0|a[2],m=8191&y,b=y>>>13,v=0|a[3],_=8191&v,w=v>>>13,A=0|a[4],I=8191&A,C=A>>>13,E=0|a[5],S=8191&E,k=E>>>13,x=0|a[6],O=8191&x,P=x>>>13,B=0|a[7],M=8191&B,T=B>>>13,D=0|a[8],j=8191&D,H=D>>>13,L=0|a[9],U=8191&L,R=L>>>13,F=0|s[0],N=8191&F,Q=F>>>13,K=0|s[1],z=8191&K,q=K>>>13,V=0|s[2],W=8191&V,Y=V>>>13,G=0|s[3],$=8191&G,X=G>>>13,J=0|s[4],Z=8191&J,tt=J>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ft=8191&lt,pt=lt>>>13,ht=0|s[9],dt=8191&ht,gt=ht>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(f,N),i=Math.imul(f,Q),i=i+Math.imul(p,N)|0,o=Math.imul(p,Q);var yt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,N),i=Math.imul(d,Q),i=i+Math.imul(g,N)|0,o=Math.imul(g,Q),n=n+Math.imul(f,z)|0,i=i+Math.imul(f,q)|0,i=i+Math.imul(p,z)|0,o=o+Math.imul(p,q)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,N),i=Math.imul(m,Q),i=i+Math.imul(b,N)|0,o=Math.imul(b,Q),n=n+Math.imul(d,z)|0,i=i+Math.imul(d,q)|0,i=i+Math.imul(g,z)|0,o=o+Math.imul(g,q)|0,n=n+Math.imul(f,W)|0,i=i+Math.imul(f,Y)|0,i=i+Math.imul(p,W)|0,o=o+Math.imul(p,Y)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(_,N),i=Math.imul(_,Q),i=i+Math.imul(w,N)|0,o=Math.imul(w,Q),n=n+Math.imul(m,z)|0,i=i+Math.imul(m,q)|0,i=i+Math.imul(b,z)|0,o=o+Math.imul(b,q)|0,n=n+Math.imul(d,W)|0,i=i+Math.imul(d,Y)|0,i=i+Math.imul(g,W)|0,o=o+Math.imul(g,Y)|0,n=n+Math.imul(f,$)|0,i=i+Math.imul(f,X)|0,i=i+Math.imul(p,$)|0,o=o+Math.imul(p,X)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,N),i=Math.imul(I,Q),i=i+Math.imul(C,N)|0,o=Math.imul(C,Q),n=n+Math.imul(_,z)|0,i=i+Math.imul(_,q)|0,i=i+Math.imul(w,z)|0,o=o+Math.imul(w,q)|0,n=n+Math.imul(m,W)|0,i=i+Math.imul(m,Y)|0,i=i+Math.imul(b,W)|0,o=o+Math.imul(b,Y)|0,n=n+Math.imul(d,$)|0,i=i+Math.imul(d,X)|0,i=i+Math.imul(g,$)|0,o=o+Math.imul(g,X)|0,n=n+Math.imul(f,Z)|0,i=i+Math.imul(f,tt)|0,i=i+Math.imul(p,Z)|0,o=o+Math.imul(p,tt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,N),i=Math.imul(S,Q),i=i+Math.imul(k,N)|0,o=Math.imul(k,Q),n=n+Math.imul(I,z)|0,i=i+Math.imul(I,q)|0,i=i+Math.imul(C,z)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(_,W)|0,i=i+Math.imul(_,Y)|0,i=i+Math.imul(w,W)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(m,$)|0,i=i+Math.imul(m,X)|0,i=i+Math.imul(b,$)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(d,Z)|0,i=i+Math.imul(d,tt)|0,i=i+Math.imul(g,Z)|0,o=o+Math.imul(g,tt)|0,n=n+Math.imul(f,rt)|0,i=i+Math.imul(f,nt)|0,i=i+Math.imul(p,rt)|0,o=o+Math.imul(p,nt)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(O,N),i=Math.imul(O,Q),i=i+Math.imul(P,N)|0,o=Math.imul(P,Q),n=n+Math.imul(S,z)|0,i=i+Math.imul(S,q)|0,i=i+Math.imul(k,z)|0,o=o+Math.imul(k,q)|0,n=n+Math.imul(I,W)|0,i=i+Math.imul(I,Y)|0,i=i+Math.imul(C,W)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(_,$)|0,i=i+Math.imul(_,X)|0,i=i+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,n=n+Math.imul(m,Z)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Z)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(d,rt)|0,i=i+Math.imul(d,nt)|0,i=i+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0,n=n+Math.imul(f,ot)|0,i=i+Math.imul(f,at)|0,i=i+Math.imul(p,ot)|0,o=o+Math.imul(p,at)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(M,N),i=Math.imul(M,Q),i=i+Math.imul(T,N)|0,o=Math.imul(T,Q),n=n+Math.imul(O,z)|0,i=i+Math.imul(O,q)|0,i=i+Math.imul(P,z)|0,o=o+Math.imul(P,q)|0,n=n+Math.imul(S,W)|0,i=i+Math.imul(S,Y)|0,i=i+Math.imul(k,W)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,X)|0,i=i+Math.imul(C,$)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(_,Z)|0,i=i+Math.imul(_,tt)|0,i=i+Math.imul(w,Z)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(d,ot)|0,i=i+Math.imul(d,at)|0,i=i+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0,n=n+Math.imul(f,ut)|0,i=i+Math.imul(f,ct)|0,i=i+Math.imul(p,ut)|0,o=o+Math.imul(p,ct)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(j,N),i=Math.imul(j,Q),i=i+Math.imul(H,N)|0,o=Math.imul(H,Q),n=n+Math.imul(M,z)|0,i=i+Math.imul(M,q)|0,i=i+Math.imul(T,z)|0,o=o+Math.imul(T,q)|0,n=n+Math.imul(O,W)|0,i=i+Math.imul(O,Y)|0,i=i+Math.imul(P,W)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(S,$)|0,i=i+Math.imul(S,X)|0,i=i+Math.imul(k,$)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(I,Z)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(C,Z)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(_,rt)|0,i=i+Math.imul(_,nt)|0,i=i+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,at)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,at)|0,n=n+Math.imul(d,ut)|0,i=i+Math.imul(d,ct)|0,i=i+Math.imul(g,ut)|0,o=o+Math.imul(g,ct)|0,n=n+Math.imul(f,ft)|0,i=i+Math.imul(f,pt)|0,i=i+Math.imul(p,ft)|0,o=o+Math.imul(p,pt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,N),i=Math.imul(U,Q),i=i+Math.imul(R,N)|0,o=Math.imul(R,Q),n=n+Math.imul(j,z)|0,i=i+Math.imul(j,q)|0,i=i+Math.imul(H,z)|0,o=o+Math.imul(H,q)|0,n=n+Math.imul(M,W)|0,i=i+Math.imul(M,Y)|0,i=i+Math.imul(T,W)|0,o=o+Math.imul(T,Y)|0,n=n+Math.imul(O,$)|0,i=i+Math.imul(O,X)|0,i=i+Math.imul(P,$)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(S,Z)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(k,Z)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(I,rt)|0,i=i+Math.imul(I,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(_,ot)|0,i=i+Math.imul(_,at)|0,i=i+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(d,ft)|0,i=i+Math.imul(d,pt)|0,i=i+Math.imul(g,ft)|0,o=o+Math.imul(g,pt)|0,n=n+Math.imul(f,dt)|0,i=i+Math.imul(f,gt)|0,i=i+Math.imul(p,dt)|0,o=o+Math.imul(p,gt)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(U,z),i=Math.imul(U,q),i=i+Math.imul(R,z)|0,o=Math.imul(R,q),n=n+Math.imul(j,W)|0,i=i+Math.imul(j,Y)|0,i=i+Math.imul(H,W)|0,o=o+Math.imul(H,Y)|0,n=n+Math.imul(M,$)|0,i=i+Math.imul(M,X)|0,i=i+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(O,Z)|0,i=i+Math.imul(O,tt)|0,i=i+Math.imul(P,Z)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(I,ot)|0,i=i+Math.imul(I,at)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(_,ut)|0,i=i+Math.imul(_,ct)|0,i=i+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,n=n+Math.imul(m,ft)|0,i=i+Math.imul(m,pt)|0,i=i+Math.imul(b,ft)|0,o=o+Math.imul(b,pt)|0,n=n+Math.imul(d,dt)|0,i=i+Math.imul(d,gt)|0,i=i+Math.imul(g,dt)|0,o=o+Math.imul(g,gt)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(U,W),i=Math.imul(U,Y),i=i+Math.imul(R,W)|0,o=Math.imul(R,Y),n=n+Math.imul(j,$)|0,i=i+Math.imul(j,X)|0,i=i+Math.imul(H,$)|0,o=o+Math.imul(H,X)|0,n=n+Math.imul(M,Z)|0,i=i+Math.imul(M,tt)|0,i=i+Math.imul(T,Z)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(O,rt)|0,i=i+Math.imul(O,nt)|0,i=i+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,at)|0,i=i+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,n=n+Math.imul(I,ut)|0,i=i+Math.imul(I,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(_,ft)|0,i=i+Math.imul(_,pt)|0,i=i+Math.imul(w,ft)|0,o=o+Math.imul(w,pt)|0,n=n+Math.imul(m,dt)|0,i=i+Math.imul(m,gt)|0,i=i+Math.imul(b,dt)|0,o=o+Math.imul(b,gt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,$),i=Math.imul(U,X),i=i+Math.imul(R,$)|0,o=Math.imul(R,X),n=n+Math.imul(j,Z)|0,i=i+Math.imul(j,tt)|0,i=i+Math.imul(H,Z)|0,o=o+Math.imul(H,tt)|0,n=n+Math.imul(M,rt)|0,i=i+Math.imul(M,nt)|0,i=i+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(O,ot)|0,i=i+Math.imul(O,at)|0,i=i+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(k,ut)|0,o=o+Math.imul(k,ct)|0,n=n+Math.imul(I,ft)|0,i=i+Math.imul(I,pt)|0,i=i+Math.imul(C,ft)|0,o=o+Math.imul(C,pt)|0,n=n+Math.imul(_,dt)|0,i=i+Math.imul(_,gt)|0,i=i+Math.imul(w,dt)|0,o=o+Math.imul(w,gt)|0;var xt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(U,Z),i=Math.imul(U,tt),i=i+Math.imul(R,Z)|0,o=Math.imul(R,tt),n=n+Math.imul(j,rt)|0,i=i+Math.imul(j,nt)|0,i=i+Math.imul(H,rt)|0,o=o+Math.imul(H,nt)|0,n=n+Math.imul(M,ot)|0,i=i+Math.imul(M,at)|0,i=i+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(O,ut)|0,i=i+Math.imul(O,ct)|0,i=i+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,n=n+Math.imul(S,ft)|0,i=i+Math.imul(S,pt)|0,i=i+Math.imul(k,ft)|0,o=o+Math.imul(k,pt)|0,n=n+Math.imul(I,dt)|0,i=i+Math.imul(I,gt)|0,i=i+Math.imul(C,dt)|0,o=o+Math.imul(C,gt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(R,rt)|0,o=Math.imul(R,nt),n=n+Math.imul(j,ot)|0,i=i+Math.imul(j,at)|0,i=i+Math.imul(H,ot)|0,o=o+Math.imul(H,at)|0,n=n+Math.imul(M,ut)|0,i=i+Math.imul(M,ct)|0,i=i+Math.imul(T,ut)|0,o=o+Math.imul(T,ct)|0,n=n+Math.imul(O,ft)|0,i=i+Math.imul(O,pt)|0,i=i+Math.imul(P,ft)|0,o=o+Math.imul(P,pt)|0,n=n+Math.imul(S,dt)|0,i=i+Math.imul(S,gt)|0,i=i+Math.imul(k,dt)|0,o=o+Math.imul(k,gt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,ot),i=Math.imul(U,at),i=i+Math.imul(R,ot)|0,o=Math.imul(R,at),n=n+Math.imul(j,ut)|0,i=i+Math.imul(j,ct)|0,i=i+Math.imul(H,ut)|0,o=o+Math.imul(H,ct)|0,n=n+Math.imul(M,ft)|0,i=i+Math.imul(M,pt)|0,i=i+Math.imul(T,ft)|0,o=o+Math.imul(T,pt)|0,n=n+Math.imul(O,dt)|0,i=i+Math.imul(O,gt)|0,i=i+Math.imul(P,dt)|0,o=o+Math.imul(P,gt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(R,ut)|0,o=Math.imul(R,ct),n=n+Math.imul(j,ft)|0,i=i+Math.imul(j,pt)|0,i=i+Math.imul(H,ft)|0,o=o+Math.imul(H,pt)|0,n=n+Math.imul(M,dt)|0,i=i+Math.imul(M,gt)|0,i=i+Math.imul(T,dt)|0,o=o+Math.imul(T,gt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,ft),i=Math.imul(U,pt),i=i+Math.imul(R,ft)|0,o=Math.imul(R,pt),n=n+Math.imul(j,dt)|0,i=i+Math.imul(j,gt)|0,i=i+Math.imul(H,dt)|0,o=o+Math.imul(H,gt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,dt),i=Math.imul(U,gt),i=i+Math.imul(R,dt)|0,o=Math.imul(R,gt);var Dt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u[0]=yt,u[1]=mt,u[2]=bt,u[3]=vt,u[4]=_t,u[5]=wt,u[6]=At,u[7]=It,u[8]=Ct,u[9]=Et,u[10]=St,u[11]=kt,u[12]=xt,u[13]=Ot,u[14]=Pt,u[15]=Bt,u[16]=Mt,u[17]=Tt,u[18]=Dt,0!==c&&(u[19]=c,r.length++),r};function v(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,f=0|t.words[l],p=0|e.words[c],h=f*p,d=67108863&h;a=a+(h/67108864|0)|0,d=d+s|0,s=67108863&d,a=a+(d>>>26)|0,i+=a>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function _(t,e,r){return v(t,e,r)}function w(t,e){this.x=t,this.y=e}Math.imul||(b=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?b(this,t,e):n<63?m(this,t,e):n<1024?v(this,t,e):_(this,t,e),r},w.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},w.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},w.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},w.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,p=c,h=0;h<a;h++){var d=r[l+h],g=n[l+h],y=r[l+h+a],m=n[l+h+a],b=f*y-p*m;m=f*m+p*y,y=b,r[l+h]=d+y,n[l+h]=g+m,r[l+h+a]=d-y,n[l+h+a]=g-m,h!==s&&(b=u*f-c*p,p=u*p+c*f,f=b)}},w.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},w.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},w.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},w.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},w.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),p=r.words;p.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,l,f,n,i);for(var h=0;h<n;h++){var d=s[h]*l[h]-u[h]*f[h];u[h]=s[h]*f[h]+u[h]*l[h],s[h]=d}return this.conjugate(s,u,n),this.transform(s,u,p,o,n,i),this.conjugate(p,o,n),this.normalize13b(p,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),_(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=y(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;o-=67108863&u,s=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+s,s=o>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)o=-(0|this.words[i])+s,s=o>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,a=0|i.words[i.length-1],s=this._countBits(a);r=26-s,0!==r&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var f=n.clone()._ishlnsubmul(i,1,c);0===f.negative&&(n=f,u&&(u.words[c]=1));for(var p=c-1;p>=0;p--){var h=67108864*(0|n.words[i.length+p])+(0|n.words[i.length+p-1]);h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,p);while(0!==n.negative)h--,n.negative=0,n._ishlnsubmul(i,1,p),n.isZero()||(n.negative^=1);u&&(u.words[p]=h)}return u&&u._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var l=r.clone(),f=e.clone();while(!e.isZero()){for(var p=0,h=1;0===(e.words[0]&h)&&p<26;++p,h<<=1);if(p>0){e.iushrn(p);while(p-- >0)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1)}for(var d=0,g=1;0===(r.words[0]&g)&&d<26;++d,g<<=1);if(d>0){r.iushrn(d);while(d-- >0)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,a=new o(1),s=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,l=1;0===(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0){e.iushrn(c);while(c-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}for(var f=0,p=1;0===(r.words[0]&p)&&f<26;++f,p<<=1);if(f>0){r.iushrn(f);while(f-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return i=0===e.cmpn(1)?a:s,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};function I(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function C(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function O(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},I.prototype.split=function(t,e){t.iushrn(this.n,0,e)},I.prototype.imulK=function(t){return t.imul(this.k)},i(C,I),C.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},C.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,I),i(S,I),i(k,I),k.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(A[t])return A[t];var e;if("k256"===t)e=new C;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new k}return A[t]=e,e},x.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),a=0;while(!i.isZero()&&0===i.andln(1))a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new o(2*l*l).toRed(this);while(0!==this.pow(l,c).cmp(u))l.redIAdd(u);var f=this.pow(l,i),p=this.pow(t,i.addn(1).iushrn(1)),h=this.pow(t,i),d=a;while(0!==h.cmp(s)){for(var g=h,y=0;0!==g.cmp(s);y++)g=g.redSqr();n(y<d);var m=this.pow(f,new o(1).iushln(d-y-1));p=p.redMul(m),f=m.redSqr(),h=h.redMul(f),d=y}return p},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],s=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],f=c-1;f>=0;f--){var p=l>>f&1;a!==n[0]&&(a=this.sqr(a)),0!==p||0!==s?(s<<=1,s|=p,u++,(u===r||0===i&&0===f)&&(a=this.mul(a,n[s]),u=0,s=0)):u=0}c=26}return a},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new O(t)},i(O,x),O.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},O.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},O.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},O.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}})(t,this)}).call(this,r("62e4")(t))},"5ecc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("bfda"),i=a(r("ca1d"));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var s={localNodeInfo:{method:"local_node_info",paramsFormatters:[],resultFormatters:i.toLocalNodeInfo},getPeers:{method:"get_peers",paramsFormatters:[],resultFormatters:i.toPeers},getBannedAddresses:{method:"get_banned_addresses",paramsFormatters:[],resultFormatters:i.toBannedAddresses},clearBannedAddresses:{method:"clear_banned_addresses",paramsFormatters:[]},setBan:{method:"set_ban",paramsFormatters:[]},syncState:{method:"sync_state",paramsFormatters:[],resultFormatters:i.toSyncState},setNetworkActive:{method:"set_network_active",paramsFormatters:[n.formatter.toBoolean]},addNode:{method:"add_node",paramsFormatters:[]},removeNode:{method:"remove_node",paramsFormatters:[]},pingPeers:{method:"ping_peers",paramsFormatters:[]}};e.default=s},6344:function(t,e,r){"use strict";var n;r.r(e),r.d(e,"v1",(function(){return b})),r.d(e,"v3",(function(){return R})),r.d(e,"v4",(function(){return N})),r.d(e,"v5",(function(){return W})),r.d(e,"NIL",(function(){return Y})),r.d(e,"version",(function(){return $})),r.d(e,"validate",(function(){return u})),r.d(e,"stringify",(function(){return d})),r.d(e,"parse",(function(){return _}));var i=new Uint8Array(16);function o(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(t){return"string"===typeof t&&a.test(t)}for(var u=s,c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r}var p,h,d=f,g=0,y=0;function m(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var a=t.node||p,s=void 0!==t.clockseq?t.clockseq:h;if(null==a||null==s){var u=t.random||(t.rng||o)();null==a&&(a=p=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=h=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),l=void 0!==t.nsecs?t.nsecs:y+1,f=c-g+(l-y)/1e4;if(f<0&&void 0===t.clockseq&&(s=s+1&16383),(f<0||c>g)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,y=l,h=s,c+=122192928e5;var m=(1e4*(268435455&c)+l)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;var b=c/4294967296*1e4&268435455;i[n++]=b>>>8&255,i[n++]=255&b,i[n++]=b>>>24&15|16,i[n++]=b>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var v=0;v<6;++v)i[n+v]=a[v];return e||d(i)}var b=m;function v(t){if(!u(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}var _=v;function w(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var A="6ba7b810-9dad-11d1-80b4-00c04fd430c8",I="6ba7b811-9dad-11d1-80b4-00c04fd430c8",C=function(t,e,r){function n(t,n,i,o){if("string"===typeof t&&(t=w(t)),"string"===typeof n&&(n=_(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(n),a.set(t,n.length),a=r(a),a[6]=15&a[6]|e,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return d(a)}try{n.name=t}catch(i){}return n.DNS=A,n.URL=I,n};function E(t){if("string"===typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return S(x(O(t),8*t.length))}function S(t){for(var e=[],r=32*t.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=t[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);e.push(a)}return e}function k(t){return 14+(t+64>>>9<<4)+1}function x(t,e){t[e>>5]|=128<<e%32,t[k(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=r,u=n,c=i,l=o;r=T(r,n,i,o,t[a],7,-680876936),o=T(o,r,n,i,t[a+1],12,-389564586),i=T(i,o,r,n,t[a+2],17,606105819),n=T(n,i,o,r,t[a+3],22,-1044525330),r=T(r,n,i,o,t[a+4],7,-176418897),o=T(o,r,n,i,t[a+5],12,1200080426),i=T(i,o,r,n,t[a+6],17,-1473231341),n=T(n,i,o,r,t[a+7],22,-45705983),r=T(r,n,i,o,t[a+8],7,1770035416),o=T(o,r,n,i,t[a+9],12,-1958414417),i=T(i,o,r,n,t[a+10],17,-42063),n=T(n,i,o,r,t[a+11],22,-1990404162),r=T(r,n,i,o,t[a+12],7,1804603682),o=T(o,r,n,i,t[a+13],12,-40341101),i=T(i,o,r,n,t[a+14],17,-1502002290),n=T(n,i,o,r,t[a+15],22,1236535329),r=D(r,n,i,o,t[a+1],5,-165796510),o=D(o,r,n,i,t[a+6],9,-1069501632),i=D(i,o,r,n,t[a+11],14,643717713),n=D(n,i,o,r,t[a],20,-373897302),r=D(r,n,i,o,t[a+5],5,-701558691),o=D(o,r,n,i,t[a+10],9,38016083),i=D(i,o,r,n,t[a+15],14,-660478335),n=D(n,i,o,r,t[a+4],20,-405537848),r=D(r,n,i,o,t[a+9],5,568446438),o=D(o,r,n,i,t[a+14],9,-1019803690),i=D(i,o,r,n,t[a+3],14,-187363961),n=D(n,i,o,r,t[a+8],20,1163531501),r=D(r,n,i,o,t[a+13],5,-1444681467),o=D(o,r,n,i,t[a+2],9,-51403784),i=D(i,o,r,n,t[a+7],14,1735328473),n=D(n,i,o,r,t[a+12],20,-1926607734),r=j(r,n,i,o,t[a+5],4,-378558),o=j(o,r,n,i,t[a+8],11,-2022574463),i=j(i,o,r,n,t[a+11],16,1839030562),n=j(n,i,o,r,t[a+14],23,-35309556),r=j(r,n,i,o,t[a+1],4,-1530992060),o=j(o,r,n,i,t[a+4],11,1272893353),i=j(i,o,r,n,t[a+7],16,-155497632),n=j(n,i,o,r,t[a+10],23,-1094730640),r=j(r,n,i,o,t[a+13],4,681279174),o=j(o,r,n,i,t[a],11,-358537222),i=j(i,o,r,n,t[a+3],16,-722521979),n=j(n,i,o,r,t[a+6],23,76029189),r=j(r,n,i,o,t[a+9],4,-640364487),o=j(o,r,n,i,t[a+12],11,-421815835),i=j(i,o,r,n,t[a+15],16,530742520),n=j(n,i,o,r,t[a+2],23,-995338651),r=H(r,n,i,o,t[a],6,-198630844),o=H(o,r,n,i,t[a+7],10,1126891415),i=H(i,o,r,n,t[a+14],15,-1416354905),n=H(n,i,o,r,t[a+5],21,-57434055),r=H(r,n,i,o,t[a+12],6,1700485571),o=H(o,r,n,i,t[a+3],10,-1894986606),i=H(i,o,r,n,t[a+10],15,-1051523),n=H(n,i,o,r,t[a+1],21,-2054922799),r=H(r,n,i,o,t[a+8],6,1873313359),o=H(o,r,n,i,t[a+15],10,-30611744),i=H(i,o,r,n,t[a+6],15,-1560198380),n=H(n,i,o,r,t[a+13],21,1309151649),r=H(r,n,i,o,t[a+4],6,-145523070),o=H(o,r,n,i,t[a+11],10,-1120210379),i=H(i,o,r,n,t[a+2],15,718787259),n=H(n,i,o,r,t[a+9],21,-343485551),r=P(r,s),n=P(n,u),i=P(i,c),o=P(o,l)}return[r,n,i,o]}function O(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(k(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}function P(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function B(t,e){return t<<e|t>>>32-e}function M(t,e,r,n,i,o){return P(B(P(P(e,t),P(n,o)),i),r)}function T(t,e,r,n,i,o,a){return M(e&r|~e&n,t,e,i,o,a)}function D(t,e,r,n,i,o,a){return M(e&n|r&~n,t,e,i,o,a)}function j(t,e,r,n,i,o,a){return M(e^r^n,t,e,i,o,a)}function H(t,e,r,n,i,o,a){return M(r^(e|~n),t,e,i,o,a)}var L=E,U=C("v3",48,L),R=U;function F(t,e,r){t=t||{};var n=t.random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return d(n)}var N=F;function Q(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function K(t,e){return t<<e|t>>>32-e}function z(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=t[64*u+4*l]<<24|t[64*u+4*l+1]<<16|t[64*u+4*l+2]<<8|t[64*u+4*l+3];s[u]=c}s[a-1][14]=8*(t.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<a;++f){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[f][h];for(var d=16;d<80;++d)p[d]=K(p[d-3]^p[d-8]^p[d-14]^p[d-16],1);for(var g=r[0],y=r[1],m=r[2],b=r[3],v=r[4],_=0;_<80;++_){var w=Math.floor(_/20),A=K(g,5)+Q(w,y,m,b)+v+e[w]+p[_]>>>0;v=b,b=m,m=K(y,30)>>>0,y=g,g=A}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+b>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var q=z,V=C("v5",80,q),W=V,Y="00000000-0000-0000-0000-000000000000";function G(t){if(!u(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var $=G},6436:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("9612");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))},"64f2":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeAddress=u,e.signMessage=c;var n=r("4b0a"),i=r("cdc5"),o=a(r("0774"));function a(t){return t&&t.__esModule?t:{default:t}}const s="CKB (Bitcoin Layer) transaction: 0x";function u(t){try{if(t.startsWith("bc1q"))return i.bech32.fromWords(i.bech32.decode(t).words.slice(1));if(t.startsWith("1"))return o.default.decode(t).slice(1,21);if(t.startsWith("3"))return o.default.decode(t).slice(1,21)}catch{if(t.startsWith("bc1p"))throw new Error("Taproot address is not supported yet.")}throw new Error(`Unsupported bitcoin address ${t}, only 1...(P2PKH) 3...(P2SH), and bc1...(Bech32) are supported.`)}async function c(t,e,r){const i=(()=>{if(r)return r;if("undefined"!==typeof window){if("unisat"in window)return window.unisat;if("okxwallet"in window&&"bitcoin"in window.okxwallet)return window.okxwallet.bitcoin}throw new Error("No provider found, make sure you have installed UniSat Wallet")})(),o=await i.requestAccounts(),a=n.bytes.hexify(t).slice(2),u=await i.signMessage(`${s}${a}`,e),c=n.bytes.bytify(l(u)),f=o[0];if(f.startsWith("bc1q"))c[0]=39+(c[0]-27)%4;else if(f.startsWith("3"))c[0]=35+(c[0]-27)%4;else{if(!f.startsWith("1"))throw new Error(`Unsupported bitcoin address ${f}, only 1...(P2PKH) 3...(P2SH), and bc1...(Bech32) are supported.`);c[0]=31+(c[0]-27)%4}return n.bytes.hexify(c)}function l(t){const e=atob(t);let r="";for(let n=0;n<e.length;n++){const t=e.charCodeAt(n).toString(16);r+=2===t.length?t:"0"+t}return"0x"+r}},"6a49":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var n=r("1c35"),i=o(r("557c"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){var e=t.allowedSizes,r=t.defaultSize,o=t.padding;return function t(){var a=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;if(!this||this.constructor!==t)return new t(s);if(e&&!e.includes(s))throw new Error("Unsupported hash length");var u=new i["default"]({capacity:s});return this.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(n.Buffer.isBuffer(t))return u.absorb(t),a;if("string"===typeof t)return a.update(n.Buffer.from(t,e));throw new TypeError("Not a string or buffer")},this.digest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",e="string"===typeof t?{format:t}:t,r=u.squeeze({buffer:e.buffer,padding:e.padding||o});return e.format&&"binary"!==e.format?r.toString(e.format):r},this.reset=function(){return u.reset(),a},this}},s=a({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var u=a({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=u;var c=a({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=c;var l=s;e.SHA3Hash=l,u.SHA3Hash=l;var f=u;e["default"]=f},"6a9c":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createArrayCodec=s,e.createNullableCodec=o,e.createObjectCodec=a,e.enhancePack=u;var n=r("fa9b"),i=r("41da");function o(t){return{pack:e=>null==e?e:(0,n.trackCodeExecuteError)(i.CODEC_OPTIONAL_PATH,()=>t.pack(e)),unpack:e=>null==e?e:t.unpack(e)}}function a(t){const e=Object.entries(t);return{pack:t=>{const r={};return e.forEach(([e,i])=>{Object.assign(r,{[e]:(0,n.trackCodeExecuteError)(e,()=>i.pack(t[e]))})}),r},unpack:t=>{const r={};return e.forEach(([e,n])=>{Object.assign(r,{[e]:n.unpack(t[e])})}),r}}}function s(t){return{pack:e=>e.map((e,r)=>(0,n.trackCodeExecuteError)(r,()=>t.pack(e))),unpack:e=>e.map(e=>t.unpack(e))}}function u(t,e,r){return{pack:r=>e(t.pack(r)),unpack:e=>t.unpack(r(e))}}},"6cf0":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ckbDecimals=e.BI=void 0,e.formatUnit=h,e.isBIish=o,e.parseUnit=d,e.toJSBI=c;var n=i(r("ac1e"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return null!==t&&("number"===typeof t&&t%1===0||"string"===typeof t&&(!!t.match(/^0x(0|[0-9a-fA-F]+)$/)||!!t.match(/^-?[0-9]+$/))||"bigint"===typeof t||a.isBI(t))}class a{constructor(t){this.jsbi=t,this._isBI=!0}add(t){return u(n.default.add(this.jsbi,c(t)))}sub(t){return u(n.default.subtract(this.jsbi,c(t)))}div(t){return u(n.default.divide(this.jsbi,c(t)))}mul(t){return u(n.default.multiply(this.jsbi,c(t)))}mod(t){return u(n.default.remainder(this.jsbi,c(t)))}abs(){return n.default.greaterThanOrEqual(this.jsbi,c(0))?u(this.jsbi):u(n.default.unaryMinus(this.jsbi))}pow(t){return u(n.default.exponentiate(this.jsbi,c(t)))}and(t){return u(n.default.bitwiseAnd(this.jsbi,c(t)))}or(t){return u(n.default.bitwiseOr(this.jsbi,c(t)))}xor(t){return u(n.default.bitwiseXor(this.jsbi,c(t)))}not(){return u(n.default.bitwiseNot(this.jsbi))}mask(t){const e=c(t);if(n.default.lessThan(e,c(0))||n.default.lessThan(this.jsbi,c(0)))throw new Error("mask works only with positive numbers");const r=c(this.jsbi.toString(2).length);if(n.default.lessThanOrEqual(r,e))return u(this.jsbi);{const t=n.default.leftShift(n.default.signedRightShift(this.jsbi,e),e);return u(n.default.bitwiseXor(this.jsbi,t))}}shl(t){return u(n.default.leftShift(this.jsbi,c(t)))}shr(t){return u(n.default.signedRightShift(this.jsbi,c(t)))}eq(t){return n.default.equal(this.jsbi,c(t))}lt(t){return n.default.lessThan(this.jsbi,c(t))}lte(t){return n.default.lessThanOrEqual(this.jsbi,c(t))}gt(t){return n.default.greaterThan(this.jsbi,c(t))}gte(t){return n.default.greaterThanOrEqual(this.jsbi,c(t))}isNegative(){return n.default.lessThan(this.jsbi,c(0))}isZero(){return n.default.equal(this.jsbi,c(0))}toNumber(){return n.default.toNumber(this.jsbi)}toBigInt(){try{return BigInt(this.jsbi.toString(10))}catch(t){throw new Error("this platform does not support BigInt")}}toString(t){return t=t||10,this.jsbi.toString(t)}toHexString(){return n.default.lessThan(this.jsbi,c(0))?"-0x"+n.default.unaryMinus(this.jsbi).toString(16):"0x"+this.jsbi.toString(16)}static from(t){if(t instanceof a)return t;if(o(t))return u(c(t));if(t instanceof n.default)return u(c(t.toString()));throw new Error(`invalid type: ${t} can't be converted into BI`)}static isBI(t){return s(t)&&!!t._isBI}}function s(t){return null!=t&&"object"===typeof t}function u(t){return new a(t)}function c(t){return"number"===typeof t||"string"===typeof t?n.default.BigInt(t):n.default.BigInt(t.toString())}e.BI=a;const l=["shannon","ckb"],f=8;e.ckbDecimals=f;const p=a.from(-1);function h(t,e){const r=m(e);return g(t,r)}function d(t,e){const r=m(e);return y(t,r)}function g(t,e){if(!b(e))throw new Error("decimal size must be a non-negative integer");const r="1"+Array(e).fill("0").join("");t=a.from(t);const n=t.isNegative();n&&(t=t.mul(p));const i=t.div(r).toString();let o=i;if(r.length>1){let e=t.mod(r).toString();while(e.length<r.length-1)e="0"+e;e=e.match(/^([0-9]*[1-9]|0)(0*)/)[1],o+="."+e}return n&&(o="-"+o),o}function y(t,e){if(!b(e))throw new Error("decimal size must be a non-negative integer");if(!t.match(/^-?\d+(\.\d{1,})?$/))throw new Error("invalid decimal string");const r="1"+Array(e).fill("0").join(""),n="-"===t.substring(0,1);let i,o;n&&(t=t.substring(1));const s=t.split(".");if(1===s.length)i=s[0],o="0";else{if(2!==s.length)throw new Error("too many decimal points (should not happen)");i=s[0],o=s[1]}while(i.length>0&&"0"===i[0])i=i.substring(1);""===i&&(i="0");while(o.length>0&&"0"===o[o.length-1])o=o.substring(0,o.length-1);if(o.length>r.length-1)throw new Error("decimal part exceeds max decimals");""===o&&(o="0");while(o.length<r.length-1)o+="0";const u=a.from(i),c=a.from(o);let l=u.mul(r).add(c);return n&&(l=l.mul(p)),l}function m(t){let e=0;if("string"===typeof t){if(-1===l.indexOf(t))throw new Error("invalid unit name, supported names are "+l.join(", "));"ckb"===t&&(e=f)}else{if(!b(t))throw new Error("unit of integer must be a non-negative integer");e=t}return e}function b(t){return Number.isInteger(t)&&t>=0}},"6e6e":function(t,e,r){"use strict";var n=r("7037").default;r("2ca0"),r("fb6a"),Object.defineProperty(e,"__esModule",{value:!0}),e.isCellMatchQueryOptions=s,e.isScriptWrapper=a;var i=r("2b43"),o=r("6cf0");function a(t){return null!==t&&void 0!==t.script}function s(t,e){var r=e.lock,s=void 0===r?void 0:r,u=e.type,c=void 0===u?void 0:u,l=e.argsLen,f=void 0===l?-1:l,p=e.data,h=void 0===p?"any":p,d=e.fromBlock,g=void 0===d?void 0:d,y=e.toBlock,m=void 0===y?void 0:y,b=null,v=null;if(s&&!a(s)?b={script:s,argsLen:f}:s&&(b=s,s.argsLen||(b.argsLen=f)),c&&"empty"===c?v=c:c&&"object"===n(c)&&!a(c)?v={script:c,argsLen:f}:c&&"object"===n(c)&&a(c)&&(v=c,c.argsLen||(v.argsLen=f)),b&&b.script&&-1===b.argsLen&&!new i.ScriptValue(t.cellOutput.lock,{validate:!1}).equals(new i.ScriptValue(b.script,{validate:!1})))return!1;if(b&&b.script&&"any"===b.argsLen){var _=t.cellOutput.lock;if(_.codeHash!==b.script.codeHash||_.hashType!==b.script.hashType||!_.args.startsWith(b.script.args))return!1}if(b&&b.script&&"number"===typeof b.argsLen&&b.argsLen>=0){var w=2*b.argsLen+2,A=b.script.args.length,I=Math.min(w,A),C=t.cellOutput.lock;if(C.args.length!==w)return!1;if(C.codeHash!==b.script.codeHash||C.hashType!==b.script.hashType||C.args.slice(0,I)!==b.script.args.slice(0,I))return!1}return(!v||"empty"!==v||!t.cellOutput.type)&&(!!(!v||"object"!==n(v)||t.cellOutput.type&&new i.ScriptValue(t.cellOutput.type,{validate:!1}).equals(new i.ScriptValue(v.script,{validate:!1})))&&((!h||"any"===h||t.data===h)&&(!(g&&t.blockNumber&&o.BI.from(t.blockNumber).lt(o.BI.from(g)))&&!(m&&t.blockNumber&&o.BI.from(t.blockNumber).gt(o.BI.from(m))))))}},"76d4":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ErrorCode=void 0;let n=function(t){return t[t["ParameterInvalid"]=101]="ParameterInvalid",t[t["IdNotMatch"]=201]="IdNotMatch",t[t["MethodNotFound"]=202]="MethodNotFound",t[t["PayloadMessage"]=203]="PayloadMessage",t[t["ResponseMessage"]=204]="ResponseMessage",t}({});e.ErrorCode=n;var i=n;e.default=i},7736:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AccountExtendedPublicKey",{enumerable:!0,get:function(){return a.AccountExtendedPublicKey}}),Object.defineProperty(e,"AddressType",{enumerable:!0,get:function(){return a.AddressType}}),Object.defineProperty(e,"ExtendedPrivateKey",{enumerable:!0,get:function(){return a.ExtendedPrivateKey}}),Object.defineProperty(e,"ExtendedPublicKey",{enumerable:!0,get:function(){return a.ExtendedPublicKey}}),Object.defineProperty(e,"IncorrectPassword",{enumerable:!0,get:function(){return n.IncorrectPassword}}),Object.defineProperty(e,"InvalidKeystore",{enumerable:!0,get:function(){return n.InvalidKeystore}}),Object.defineProperty(e,"Keychain",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Keystore",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"UnsupportedCipher",{enumerable:!0,get:function(){return n.UnsupportedCipher}}),Object.defineProperty(e,"XPubStore",{enumerable:!0,get:function(){return i.XPubStore}}),e.default=void 0,Object.defineProperty(e,"key",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"mnemonic",{enumerable:!0,get:function(){return s.default}});var n=f(r("12cc")),i=r("562e"),o=c(r("a02f")),a=r("ddb4"),s=c(r("b113")),u=c(r("158e"));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(l=function(t){return t?r:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=l(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}var p={mnemonic:s.default,Keystore:n.default,UnsupportedCipher:n.UnsupportedCipher,IncorrectPassword:n.IncorrectPassword,InvalidKeystore:n.InvalidKeystore,Keychain:o.default,AddressType:a.AddressType,ExtendedPublicKey:a.ExtendedPublicKey,AccountExtendedPublicKey:a.AccountExtendedPublicKey,ExtendedPrivateKey:a.ExtendedPrivateKey,key:u.default,XPubStore:i.XPubStore};e.default=p},"79ea":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findConfigByScript=i,e.nameOfScript=o;var n=r("7b57");function i(t,e){const r=e||(0,n.getConfig)().SCRIPTS;return Object.values(r).find(e=>(null===e||void 0===e?void 0:e.CODE_HASH)===t.codeHash&&(null===e||void 0===e?void 0:e.HASH_TYPE)===t.hashType)}function o(t,e){const r=e||(0,n.getConfig)().SCRIPTS,i=Object.entries(r).find(([,e])=>(null===e||void 0===e?void 0:e.CODE_HASH)===t.codeHash&&(null===e||void 0===e?void 0:e.HASH_TYPE)===t.hashType);if(i)return i[0]}},"7b57":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.assertHashType=l,e.getConfig=d,e.initializeConfig=y,e.validateConfig=p;var n=a(r("9b3e")),i=r("0b92"),o=r("fbaaf");function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error(t+" must be a hex string!")}function u(t,e){if(s(t,e),66!=e.length)throw new Error(t+" must be a hex string of 66 characters long!")}function c(t,e){if("0x0"!==e&&!/^0x[1-9a-fA-F][0-9a-fA-F]*$/.test(e))throw new Error(t+" must be a hex integer!")}function l(t,e){if("type"!==e&&"data"!==e&&"data1"!==e&&"data2"!==e)throw new Error(t+" must one of type, data, data1, data2!")}function f(t,e="variable"){if(!t)throw new Error(e+" is not valid")}function p(t){f("object"===typeof t.SCRIPTS&&null!=t.SCRIPTS,"config.SCRIPT");for(const e of Object.keys(t.SCRIPTS)){const r=t.SCRIPTS[e];f(null===r||void 0===r?void 0:r.CODE_HASH),u(`SCRIPTS.${e}.CODE_HASH`,r.CODE_HASH),l(`SCRIPTS.${e}.HASH_TYPE`,r.HASH_TYPE),u(`SCRIPTS.${e}.TX_HASH`,r.TX_HASH),c(`SCRIPTS.${e}.INDEX`,r.INDEX);const n=r.DEP_TYPE;if("depGroup"!==n&&"code"!==n)throw new Error(`SCRIPTS.${e}.DEP_TYPE must either be depGroup or code!`);const i=r.SHORT_ID;if(void 0!=i&&"number"!==typeof i)throw new Error("SHORT_ID must be a number!")}}let h=o.predefined.LINA;function d(){return h}function g(){var e;const i=null===(e=t)||void 0===e?void 0:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"https://cdn.jsdelivr.net/gh/CoinTool-App/cdn@main/"}),a=null===i||void 0===i?void 0:i.LUMOS_CONFIG_NAME;if(("LINA"===a||"AGGRON4"===a)&&o.predefined[a])return void(h=o.predefined[a]);const s=null===i||void 0===i?void 0:i.LUMOS_CONFIG_FILE,u=s||"config.json";try{const t=r("3e8f").readFileSync(u),e=JSON.parse(t);p(e),h=(0,n.default)(e)}catch(c){throw new Error(`Error loading config from file ${u}: ${c}`)}}function y(t){t?(p(t),h=(0,n.default)(t)):(i.logger.deprecated("initializeConfig with env will be deprecated, please migrate to initializeConfig(...)"),g())}}).call(this,r("4362"))},"7e0f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ADDRESS_FORMAT_SHORT=e.ADDRESS_FORMAT_FULLTYPE=e.ADDRESS_FORMAT_FULLDATA=e.ADDRESS_FORMAT_FULL=void 0,e.parseDeprecatedCkb2019Address=h,e.parseFullFormatAddress=p;var n=r("0b92"),i=r("4b0a"),o=r("a2e8"),a=r("4c7f");const s=1023,u=0;e.ADDRESS_FORMAT_FULL=u;const c=1;e.ADDRESS_FORMAT_SHORT=c;const l=2;e.ADDRESS_FORMAT_FULLDATA=l;const f=4;function p(t,{config:e}){e=e||(0,o.getConfig)();const{words:r,prefix:c}=a.bech32m.decode(t,s);if(c!==e.PREFIX)throw Error(`Invalid prefix! Expected: ${e.PREFIX}, actual: ${c}`);const[l,...f]=a.bech32m.fromWords(r);if(l!==u)throw new Error("Invalid address format type");if(f.length<33)throw new Error("Invalid payload length, too short!");const p=i.bytes.hexify(f.slice(0,32)),h=n.blockchain.HashType.unpack(f.slice(32,33)),d=i.bytes.hexify(f.slice(33));return{codeHash:p,hashType:h,args:d}}function h(t,{config:e}){e=e||(0,o.getConfig)();const{prefix:r,words:n}=a.bech32.decode(t,s);if(r!==e.PREFIX)throw Error(`Invalid prefix! Expected: ${e.PREFIX}, actual: ${r}`);const[u,...p]=a.bech32.fromWords(n);switch(u){case c:{const[t,...r]=p;if(20!==r.length)throw Error("Invalid payload length!");const n=Object.values(e.SCRIPTS).find(e=>e&&e.SHORT_ID===t);if(!n)throw Error(`Invalid code hash index: ${t}!`);return{codeHash:n.CODE_HASH,hashType:n.HASH_TYPE,args:i.bytes.hexify(r)}}case l:if(p.length<32)throw Error("Invalid payload length!");return{codeHash:i.bytes.hexify(p.slice(0,32)),hashType:"data",args:i.bytes.hexify(p.slice(32))};case f:if(p.length<32)throw Error("Invalid payload length!");return{codeHash:i.bytes.hexify(p.slice(0,32)),hashType:"type",args:i.bytes.hexify(p.slice(32))}}throw Error("Invalid payload format type: "+u)}e.ADDRESS_FORMAT_FULLTYPE=f},"7f73b":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],i=n;e["default"]=i},8130:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResultFormatter=e.RPC=e.ParamsFormatter=e.CKBRPC=void 0;var n=r("34ba"),i=r("95e03"),o=r("bfda"),a=p(r("ca1d")),s=r("2a27"),u=l(r("84d0")),c=l(r("91d3"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(f=function(t){return t?r:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=f(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function h(t,e,r){return e=d(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=g(t,"string");return"symbol"===typeof e?e:String(e)}function g(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e,r){m(t,e),e.set(t,r)}function m(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(t,e,r){var n=w(t,e,"set");return v(t,n,r),r}function v(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function _(t,e){var r=w(t,e,"get");return A(t,r)}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function A(t,e){return e.get?e.get.call(t):e.value}const I=o.formatter;e.ParamsFormatter=I;const C=a;e.ResultFormatter=C;var E=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakMap;class O extends n.Base{get node(){return _(this,S)}get paramsFormatter(){return _(this,k)}get resultFormatter(){return _(this,x)}constructor(t,e={}){super(),y(this,E,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:{url:""}}),y(this,k,{writable:!0,value:o.formatter}),y(this,x,{writable:!0,value:a}),h(this,"addMethod",(t,e)=>{const r=new i.Method(this.node,t,e);Object.defineProperty(this,t.name,{value:r.call,enumerable:!0})}),h(this,"createBatchRequest",(t=[])=>{const e=this,r=new Proxy([],{set(...t){const r=Object.keys(e);if("length"!==t[1]){var n;const e=null===t||void 0===t||null===(n=t[2])||void 0===n?void 0:n[0];if(-1===r.indexOf(e))throw new s.MethodInBatchNotFoundException(e)}return Reflect.set(...t)}});return Object.defineProperties(r,{add:{value(...t){return this.push(t),this}},remove:{value(t){return this.splice(t,1),this}},exec:{async value(){const t=r.map(([t,...r],n)=>{try{const n=new i.Method(e.node,{...e.rpcProperties[t],name:t});return n.getPayload(...r)}catch(o){throw new s.PayloadInBatchException(n,o.message)}}),n=new c.default,o=n.signal,a=setTimeout(()=>n.abort(),_(e,E).timeout),u=await _(e,E).fetch(_(e,S).url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),signal:o}).then(t=>t.json());return clearTimeout(a),u.map((n,i)=>{var o,a,u;return n.id!==t[i].id?new s.IdNotMatchedInBatchException(i,t[i].id,n.id):null!==(o=null===(a=(u=e.rpcProperties[r[i][0]]).resultFormatters)||void 0===a?void 0:a.call(u,n.result))&&void 0!==o?o:n.result})}}}),t.forEach(t=>r.push(t)),r}),this.setNode({url:t});const{timeout:r=3e4,fetch:n=u.default}=e;b(this,E,{timeout:r,fetch:n}),Object.defineProperties(this,{addMethod:{value:this.addMethod,enumerable:!1,writable:!1,configurable:!1},setNode:{value:this.setNode,enumerable:!1,writable:!1,configurable:!1}}),Object.keys(this.rpcProperties).forEach(t=>{this.addMethod({name:t,...this.rpcProperties[t]},_(this,E))})}setNode(t){return Object.assign(this.node,t),this.node}}e.RPC=e.CKBRPC=O},"832d":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SECP_SIGNATURE_PLACEHOLDER=e.OMNILOCK_SIGNATURE_PLACEHOLDER=void 0,e.addCellDep=h,e.default=void 0,e.ensureScript=k,e.generateDaoScript=d,e.hashWitness=E,e.isAcpAddress=C,e.isAcpScript=I,e.isDaoScript=w,e.isOmnilockAddress=b,e.isOmnilockScript=m,e.isSecp256k1Blake160Address=y,e.isSecp256k1Blake160MultisigAddress=_,e.isSecp256k1Blake160MultisigScript=v,e.isSecp256k1Blake160Script=g,e.isSudtScript=A,e.prepareSigningEntries=S;var n=l(r("b9b7")),i=r("329b"),o=r("c1f3"),a=r("4b0a"),s=r("0b92"),u=r("6cf0");function c(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=c(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}const{CKBHasher:f,ckbHash:p}=s.utils;function h(t,e){const r=t.get("cellDeps").find(t=>t.depType===e.depType&&new s.values.OutPointValue(t.outPoint,{validate:!1}).equals(new s.values.OutPointValue(e.outPoint,{validate:!1})));return r||(t=t.update("cellDeps",t=>t.push({outPoint:e.outPoint,depType:e.depType}))),t}function d(t){const e=t.SCRIPTS.DAO;return{codeHash:e.CODE_HASH,hashType:e.HASH_TYPE,args:"0x"}}function g(t,e){const r=e.SCRIPTS.SECP256K1_BLAKE160;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function y(t,e){const r=(0,o.parseAddress)(t,{config:e});return g(r,e)}function m(t,e){const r=e.SCRIPTS.OMNILOCK;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function b(t,e){const r=(0,o.parseAddress)(t,{config:e});return m(r,e)}function v(t,e){const r=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function _(t,e){const r=(0,o.parseAddress)(t,{config:e});return v(r,e)}function w(t,e){const r=e.SCRIPTS.DAO;return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function A(t,e){const r=e.SCRIPTS.SUDT;if(!r)throw new Error("SUDT script not defined in config!");return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function I(t,e){const r=e.SCRIPTS.ANYONE_CAN_PAY;if(!r)throw new Error("ANYONE_CAN_PAY script not defined in config!");return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function C(t,e){const r=(0,o.parseAddress)(t,{config:e});return I(r,e)}function E(t,e){const r=new ArrayBuffer(8),n=new DataView(r),i=u.BI.from(a.bytes.bytify(e).length).toString(16);i.length<=8&&(n.setUint32(0,Number("0x"+i),!0),n.setUint32(4,Number("0x00000000"),!0)),i.length>8&&i.length<=16&&(n.setUint32(0,Number("0x"+i.slice(-8)),!0),n.setUint32(4,Number("0x"+i.slice(0,-8)),!0)),t.update(r),t.update(e)}function S(t,e,r){const n=e.SCRIPTS[r];if(!n)throw new Error(`Provided config does not have ${r} script setup!`);let a=(0,i.Set)();const u=(0,o.createTransactionFromSkeleton)(t),c=p(s.blockchain.RawTransaction.pack(u)),l=t.get("inputs"),h=t.get("witnesses");let d=t.get("signingEntries");for(let i=0;i<l.size;i++){const t=l.get(i);if(n.CODE_HASH===t.cellOutput.lock.codeHash&&n.HASH_TYPE===t.cellOutput.lock.hashType&&!a.has(t.cellOutput.lock.args)){a=a.add(t.cellOutput.lock.args);const e=new s.values.ScriptValue(t.cellOutput.lock,{validate:!1}),r=new f;if(r.update(c),i>=h.size)throw new Error(`The first witness in the script group starting at input index ${i} does not exist, maybe some other part has invalidly tampered the transaction?`);E(r,h.get(i));for(let t=i+1;t<l.size&&t<h.size;t++){const n=l.get(t);e.equals(new s.values.ScriptValue(n.cellOutput.lock,{validate:!1}))&&E(r,h.get(t))}for(let t=l.size;t<h.size;t++)E(r,h.get(t));const n={type:"witness_args_lock",index:i,message:r.digestHex()};d=d.push(n)}}return t=t.set("signingEntries",d),t}function k(t,e,r){const n=e.SCRIPTS[r];if(!n)throw new Error(`Provided config does not have ${r} script setup!`);if(n.CODE_HASH!==t.codeHash||n.HASH_TYPE!==t.hashType)throw new Error(`Provided script is not ${r} script!`)}const x="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";e.SECP_SIGNATURE_PLACEHOLDER=x;const O="0x"+"00".repeat(n.OmnilockWitnessLock.pack({signature:x}).byteLength);e.OMNILOCK_SIGNATURE_PLACEHOLDER=O;var P={addCellDep:h,generateDaoScript:d,isSecp256k1Blake160Script:g,isSecp256k1Blake160MultisigScript:v,isDaoScript:w,isSudtScript:A,prepareSigningEntries:S,isSecp256k1Blake160Address:y,isSecp256k1Blake160MultisigAddress:_,ensureScript:k,isAcpScript:I,isAcpAddress:C};e.default=P},"84d0":function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!==typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function p(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function h(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}function d(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=a(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype["delete"]=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=s(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function v(t,e){e=e||{};var r=e.body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function w(t){var e=new c,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function A(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var I=[301,302,303,307,308];A.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(E){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(t,n){return new Promise((function(i,o){var a=new v(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:w(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new A(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=c,t.Request=v,t.Response=A),e.Headers=c,e.Request=v,e.Response=A,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},"853d":function(t,e,r){"use strict";function n(t){const e=async e=>{const r=await t.createBatchRequest(e.map(t=>["getTransaction",t])).exec();return a(e,r,(t,e)=>{if(null===e||void 0===e||!e.transaction)throw new Error("Cannot find transaction "+t);return e.transaction})},r=async e=>{const r=await t.createBatchRequest(e.map(t=>["getCells",{script:t,scriptType:"type",scriptSearchMode:"exact",withData:!1},"asc","0x1"])).exec();return r.map(t=>t.objects[0])};return i(e,r)}function i(t,e){return async r=>{const n=await t(r.map(t=>t.txHash)),i=a(r,n,(t,e)=>(s(t),s(e,`Cannot find the OutPoint ${t.txHash}#${t.index}`),e.outputs[Number(t.index)].type)),o=await e(i.filter(Boolean));return a(r,i,(t,e)=>{if(s(t),!e)return t;const[r]=o.splice(0,1);return r.outPoint})}}async function o(t,{resolve:e,skip:r=["SECP256K1_BLAKE160","SECP256K1_BLAKE160_MULTISIG","DAO"]}){const n=Object.entries(t).filter(([t,e])=>!r.includes(t)&&"type"===(null===e||void 0===e?void 0:e.HASH_TYPE)),i=n.map(([t,e])=>({txHash:e.TX_HASH,index:e.INDEX})),o=await e(i),u=Object.fromEntries(a(n,o,(t,e)=>{s(t);const[r,n]=t;return s(e,`Refreshing failed, cannot load config of ${r}, please check whether the scriptConfig is correct`),[r,{...n,TX_HASH:e.txHash,INDEX:e.index}]}));return Object.assign({},t,u)}function a(t,e,r){return t.map((n,i)=>r(t[i],e[i]))}function s(t,e="Not nullable"){if(null==t)throw new Error(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createLatestTypeIdResolver=i,e.createRpcResolver=n,e.refreshScriptConfigs=o},"8b00":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],i=n;e["default"]=i},"8d64":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CKBCellCollector=void 0;var n=r("0b92"),i=r("a7ee"),o=r("142e"),a=u(r("9d96")),s=r("e4f07");function u(t){return t&&t.__esModule?t:{default:t}}class c{constructor(t,e,r){this.terminableCellFetcher=t,this.otherQueryOptions=r;const n={lock:void 0,type:void 0,argsLen:-1,data:"any",fromBlock:void 0,toBlock:void 0,order:"asc",skip:void 0,outputDataLenRange:void 0,outputCapacityRange:void 0,bufferSize:void 0};this.queries=(Array.isArray(e)?e:[e]).map(t=>({...n,...t})),this.queries.forEach(t=>{this.validateQueryOption(t)}),this.convertQueryOptionToSearchKey()}validateQueryOption(t){if(!t.lock&&(!t.type||"empty"===t.type))throw new Error("Either lock or type script must be provided!");if(t.lock&&((0,s.instanceOfScriptWrapper)(t.lock)?(0,s.instanceOfScriptWrapper)(t.lock)&&i.validators.ValidateScript(t.lock.script):i.validators.ValidateScript(t.lock)),t.type&&"empty"!==t.type&&("object"!==typeof t.type||(0,s.instanceOfScriptWrapper)(t.type)?"object"===typeof t.type&&(0,s.instanceOfScriptWrapper)(t.type)&&i.validators.ValidateScript(t.type.script):i.validators.ValidateScript(t.type)),t.fromBlock&&n.utils.assertHexadecimal("fromBlock",t.fromBlock),t.toBlock&&n.utils.assertHexadecimal("toBlock",t.toBlock),"asc"!==t.order&&"desc"!==t.order)throw new Error("Order must be either asc or desc!");if(t.outputCapacityRange&&(n.utils.assertHexadecimal("outputCapacityRange[0]",t.outputCapacityRange[0]),n.utils.assertHexadecimal("outputCapacityRange[1]",t.outputCapacityRange[1])),t.outputDataLenRange&&(n.utils.assertHexadecimal("outputDataLenRange[0]",t.outputDataLenRange[0]),n.utils.assertHexadecimal("outputDataLenRange[1]",t.outputDataLenRange[1])),t.scriptLenRange&&(n.utils.assertHexadecimal("scriptLenRange[0]",t.scriptLenRange[0]),n.utils.assertHexadecimal("scriptLenRange[1]",t.scriptLenRange[1])),t.outputDataLenRange&&t.data&&"any"!==t.data){const e=(0,o.getHexStringBytes)((0,s.unwrapDataWrapper)(t.data));if(e<Number(t.outputDataLenRange[0])||e>=Number(t.outputDataLenRange[1]))throw new Error("data length not match outputDataLenRange")}if(t.skip&&"number"!==typeof t.skip)throw new Error("skip must be a number!");if(t.bufferSize&&"number"!==typeof t.bufferSize)throw new Error("bufferSize must be a number!")}convertQueryOptionToSearchKey(){this.queries.forEach(t=>{const e=t.lock;if(e&&(0,s.instanceOfScriptWrapper)(e)&&(i.validators.ValidateScript(e.script),t.lock=e.script),t.type&&"empty"!==t.type&&"object"===typeof t.type&&(0,s.instanceOfScriptWrapper)(t.type)&&(i.validators.ValidateScript(t.type.script),t.type=t.type.script),!t.outputDataLenRange&&t.data&&"any"!==t.data){const e=(0,o.getHexStringBytes)((0,s.unwrapDataWrapper)(t.data));t.outputDataLenRange=["0x"+e.toString(16),"0x"+(e+1).toString(16)]}t.scriptLenRange||"empty"!==t.type||(t.scriptLenRange=["0x0","0x1"])})}async getLiveCell(t,e){const r={sizeLimit:t.bufferSize,order:t.order,lastCursor:e},n=await this.terminableCellFetcher.getCells((0,o.generateSearchKey)(t),void 0,r);return n}async count(){let t=0;for await(const e of this.collect())t++;return t}async request(t,e){const r=await(0,a.default)(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error("indexer request failed with HTTP code "+r.status);const n=await r.json();if(void 0!==n.error)throw new Error("indexer request rpc failed with error: "+JSON.stringify(n.error));return n}async getLiveCellWithBlockHash(t,e){if(!this.otherQueryOptions)throw new Error("CKB Rpc URL must provide");const r=await this.getLiveCell(t,e);if(0===r.objects.length)return r;const n=r.objects.map((t,e)=>({id:e,jsonrpc:"2.0",method:"get_block_hash",params:[t.blockNumber]})),i=await this.request(this.otherQueryOptions.ckbRpcUrl,n);return r.objects=r.objects.map((t,e)=>{const r=i.find(t=>t.id===e),n=r&&r.result;return{...t,blockHash:n}}),r}async*collect(){const t=new Set;for(const n of this.queries)for await(const i of this.collectBySingleQuery(n)){var e,r;const n=`${null===(e=i.outPoint)||void 0===e?void 0:e.txHash}-${null===(r=i.outPoint)||void 0===r?void 0:r.index}`;t.has(n)||(t.add(n),yield i)}}async*collectBySingleQuery(t){const e=this.otherQueryOptions&&"withBlockHash"in this.otherQueryOptions&&this.otherQueryOptions.withBlockHash;let r=void 0;const n=async()=>{const n=await(e?this.getLiveCellWithBlockHash(t,r):this.getLiveCell(t,r));return r=n.lastCursor,n.objects};let i=await n();if(i=(0,s.filterByLumosQueryOptions)(i,t),0===i.length)return;let o=n(),a=0,u=0;while(1)if(t.skip&&u<t.skip?u++:yield i[a],a++,a===i.length){if(a=0,i=await o,0===i.length)break;o=n()}}}e.CKBCellCollector=c},"8f9d":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RPC=void 0;var n=r("0b92"),i=a(r("9d96")),o=r("1f7a");function a(t){return t&&t.__esModule?t:{default:t}}class s{constructor(t){this.uri=t}async getTip(){return n.utils.deepCamel(await u(this.uri,"get_tip"))}async getCells(t,e,r,i){const a=[(0,o.toGetCellsSearchKey)(t),e,r,i];return n.utils.deepCamel(await u(this.uri,"get_cells",a))}async getTransactions(t,e,r,i){const a=[(0,o.toGetTransactionsSearchKey)(t),e,r,i];return n.utils.deepCamel(await u(this.uri,"get_transactions",a))}async getIndexerInfo(){return n.utils.deepCamel(await u(this.uri,"get_indexer_info"))}}e.RPC=s;const u=async(t,e,r)=>{const n=await(0,i.default)(t,{method:"POST",body:JSON.stringify({id:0,jsonrpc:"2.0",method:e,params:r}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error("indexer request failed with HTTP code "+n.status);const o=await n.json();if(void 0!==o.error)throw new Error("indexer request rpc failed with error: "+JSON.stringify(o.error));return o.result}},9178:function(t,e,r){"use strict";function n(t,e){if(!(e instanceof Object))throw new Error(t+" is not an object!")}function i(t,e,r,i=[]){n(t,e);const o=Object.keys(e).sort(),a=r.length,s=r.length+i.length,u=`${t} does not have correct keys! Required keys: [${r.sort().join(", ")}], optional keys: [${i.sort().join(", ")}], actual keys: [${o.join(", ")}]`;if(o.length<a||o.length>s)throw new Error(u);let c=o.filter(t=>!r.includes(t));if(o.length-c.length!==a)throw new Error(u);if(c.find(t=>!i.includes(t)))throw new Error(u)}function o(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error(t+" must be a hex string!")}function a(t,e){if(o(t,e),66!==e.length)throw new Error(t+" must be a hex string of 66 bytes long!")}function s(t,e){if("0x0"!==e&&!/^0x[1-9a-fA-F][0-9a-fA-F]*$/.test(e))throw new Error(t+" must be a hex integer!")}function u(t,{nestedValidation:e=!0,debugPath:r="script"}={}){if(i(r,t,["codeHash","hashType","args"],[]),a(r+".codeHash",t.codeHash),o(r+".args",t.args),"data"!==t.hashType&&"type"!==t.hashType&&"data1"!==t.hashType&&"data2"!==t.hashType)throw new Error(r+".hashType must be either data or type!")}function c(t,{nestedValidation:e=!0,debugPath:r="outPoint"}={}){i(r,t,["txHash","index"],[]),a(r+".txHash",t.txHash),s(r+".index",t.index)}function l(t,{nestedValidation:e=!0,debugPath:r="cellInput"}={}){i(r,t,["since","previousOutput"],[]),s(r+".since",t.since),e&&c(t.previousOutput,{debugPath:r+".previousOutput"})}function f(t,{nestedValidation:e=!0,debugPath:r="cellOutput"}={}){i(r,t,["capacity","lock"],["type"]),s(r+".capacity",t.capacity),e&&(u(t.lock,{debugPath:r+".lock"}),t.type&&u(t.type,{debugPath:r+".type"}))}function p(t,{nestedValidation:e=!0,debugPath:r="cellDep"}={}){if(i(r,t,["outPoint","depType"],[]),"code"!==t.depType&&"depGroup"!==t.depType)throw new Error(r+".depType must be either code or depGroup!");e&&c(t.outPoint,{debugPath:r+".outPoint"})}function h(t,e,r,n){if(!Array.isArray(e))throw new Error(t+" is not an array!");if(n)for(let i=0;i<e.length;i++)r(`${t}[${i}]`,e[i])}function d(t,e){return function(r,n){t(n,{nestedValidation:e,debugPath:r})}}function g(t,e,r){s(t+".version",e.version),h(t+".cellDeps",e.cellDeps,d(p,r),r),h(t+".headerDeps",e.headerDeps,a,r),h(t+".inputs",e.inputs,d(l,r),r),h(t+".outputs",e.outputs,d(f,r),r),h(t+".outputsData",e.outputsData,o,r)}function y(t,{nestedValidation:e=!0,debugPath:r="rawTransaction"}={}){i(r,t,["version","cellDeps","headerDeps","inputs","outputs","outputsData"],[]),g(r,t,e)}function m(t,{nestedValidation:e=!0,debugPath:r="transaction"}={}){i(r,t,["version","cellDeps","headerDeps","inputs","outputs","outputsData","witnesses"],[]),g(r,t,e),h(r+".witnesses",t.witnesses,o,e)}function b(t,e){s(t+".version",e.version),s(t+".compactTarget",e.compactTarget),s(t+".timestamp",e.timestamp),s(t+".number",e.number),s(t+".epoch",e.epoch),a(t+".parentHash",e.parentHash),a(t+".transactionsRoot",e.transactionsRoot),a(t+".proposalsHash",e.proposalsHash),a(t+".extraHash",e.extraHash),a(t+".dao",e.dao)}function v(t,{nestedValidation:e=!0,debugPath:r="rawHeader"}={}){i(r,t,["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao"],[]),b(r,t)}function _(t,{nestedValidation:e=!0,debugPath:r="header"}={}){if(i(r,t,["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao","nonce"],[]),o(r+".nonce",t.nonce),34!==t.nonce.length)throw new Error(r+".nonce must be a hex string of 34 bytes long!")}function w(t,e){if(o(t,e),22!==e.length)throw new Error(t+" must be a hex string of 22 bytes long!")}function A(t,{nestedValidation:e=!0,debugPath:r="uncleBlock"}={}){i(r,t,["header","proposals"],[]),e&&_(t.header,{debugPath:r+".header"}),h(r+".proposals",t.proposals,w,e)}function I(t,{nestedValidation:e=!0,debugPath:r="block"}={}){i(r,t,["header","uncles","transactions","proposals"],[]),e&&_(t.header,{debugPath:r+".header"}),h(r+".uncles",t.uncles,d(A,e),e),h(r+".transactions",t.transactions,d(m,e),e),h(r+".proposals",t.proposals,w,e)}function C(t,{nestedValidation:e=!0,debugPath:r="cellbaseWitness"}={}){i(r,t,["lock","message"],[]),o(r+".message",t.message),e&&u(t.lock,{debugPath:r+".lock"})}function E(t,{nestedValidation:e=!0,debugPath:r="witnessArgs"}={}){i(r,t,[],["lock","inputType","outputType"]),t.lock&&o(r+".lock",t.lock),t.inputType&&o(r+".inputType",t.inputType),t.outputType&&o(r+".outputType",t.outputType)}Object.defineProperty(e,"__esModule",{value:!0}),e.ValidateBlock=I,e.ValidateCellDep=p,e.ValidateCellInput=l,e.ValidateCellOutput=f,e.ValidateCellbaseWitness=C,e.ValidateHeader=_,e.ValidateOutPoint=c,e.ValidateRawHeader=v,e.ValidateRawTransaction=y,e.ValidateScript=u,e.ValidateTransaction=m,e.ValidateUncleBlock=A,e.ValidateWitnessArgs=E},"91d3":function(t,e,r){"use strict";const{AbortController:n,AbortSignal:i}="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0;t.exports=n,t.exports.AbortSignal=i,t.exports.default=n},9406:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(r("4923"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){var e=t.A,r=t.roundIndex,i=2*r;e[0]^=n["default"][i],e[1]^=n["default"][i+1]},a=o;e["default"]=a},9560:function(t,e,r){"use strict";(function(t){var n=r("970b").default,i=r("5bc3").default,o=r("7037").default;r("d3b7"),r("3ca3"),r("10d1"),r("ddb0"),r("e439"),r("ace4"),r("5cc6"),r("907a"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("986a"),r("1d02"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("6ce5"),r("2834"),r("72f7"),r("4ea1"),r("25f0"),r("fb6a"),r("d9e2"),r("2ca0"),r("ac1f"),r("00b4"),r("5319"),r("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.CKBHasher=void 0,e.assertHexString=T,e.assertHexadecimal=D,e.ckbHash=_,e.computeScriptHash=w,e.deepCamel=F,e.deepCamelizeTransaction=Q,e.generateTypeIdScript=U,e.hashCode=A,e.isDeepEqual=j,e.readBigUInt128LE=B,e.readBigUInt128LECompatible=M,e.readBigUInt64LE=E,e.readBigUInt64LECompatible=S,e.toBigUInt128LE=k,e.toBigUInt128LECompatible=P,e.toBigUInt64LE=I,e.toBigUInt64LECompatible=C;var a=d(r("e622")),s=d(r("5da1")),u=r("d699"),c=r("4b0a"),l=r("6cf0"),f=h(r("fbbb"));function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(p=function(t){return t?r:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!==typeof t)return{default:t};var r=p(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function d(t){return t&&t.__esModule?t:{default:t}}var g=c.bytes,y=g.bytify,m=g.hexify,b=g.bytifyRawString,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=e.outLength,i=void 0===r?32:r;this.outLength=i,this.hasher=(0,a.default)(i,void 0,void 0,b("ckb-default-hash"))}return i(t,[{key:"update",value:function(t){return this.hasher.update(y(t)),this}},{key:"digestHex",value:function(){var t=new Uint8Array(this.outLength);return this.hasher.digest(t),m(t.buffer)}}]),t}();function _(t){var e=new v;return e.update(c.bytes.bytify(t)),e.digestHex()}function w(t){return _(f.Script.pack(t))}function A(t){return(0,u.xxHash32)(t,0)}function I(t){return C(t)}function C(e){e=l.BI.from(e);var r=t.alloc(8);return r.writeUInt32LE(e.and("0xffffffff").toNumber(),0),e=e.shr(32),r.writeUInt32LE(e.and("0xffffffff").toNumber(),4),"0x".concat(r.toString("hex"))}function E(t){return S(t).toBigInt()}function S(e){var r=t.from(e.slice(2),"hex");return l.BI.from(r.readUInt32LE()).add(l.BI.from(r.readUInt32LE(4)).shl(32))}function k(t){return P(t)}e.CKBHasher=v;var x=l.BI.from(0),O=l.BI.from("340282366920938463463374607431768211455");function P(e){if(e=l.BI.from(e),e.lt(x))throw new Error("u128 ".concat(e," too small"));if(e.gt(O))throw new Error("u128 ".concat(e," too large"));var r=t.alloc(16);return r.writeUInt32LE(e.and(4294967295).toNumber(),0),e=e.shr(32),r.writeUInt32LE(e.and(4294967295).toNumber(),4),e=e.shr(32),r.writeUInt32LE(e.and(4294967295).toNumber(),8),e=e.shr(32),r.writeUInt32LE(e.and(4294967295).toNumber(),12),"0x".concat(r.toString("hex"))}function B(t){return M(t).toBigInt()}function M(e){if(e.length<34||!e.startsWith("0x"))throw new Error("leHex format error");var r=t.from(e.slice(2,34),"hex");return l.BI.from(r.readUInt32LE(0)).shl(0).add(l.BI.from(r.readUInt32LE(4)).shl(32)).add(l.BI.from(r.readUInt32LE(8)).shl(64)).add(l.BI.from(r.readUInt32LE(12)).shl(96))}function T(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error("".concat(t," must be a hex string!"))}function D(t,e){if(!/^0x(0|[0-9a-fA-F]+)$/.test(e))throw new Error("".concat(t," must be a hexadecimal!"))}function j(t,e){return(0,s.default)(t,e)}var H="0x00000000000000000000000000000000000000000000000000545950455f4944";function L(t,e){var r=f.CellInput.pack(t),n=c.bytes.hexify(c.number.Uint64LE.pack(e)),i=new v;return i.update(r),i.update(n),i.digestHex()}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x0";f.CellInput.pack(t),D("outputIndex",e);var r=L(t,e);return{codeHash:H,hashType:"type",args:r}}function R(t){return t.replace(/([-_][a-z])/gi,(function(t){return t.toUpperCase().replace("-","").replace("_","")}))}function F(t){if("[object Array]"===Object.prototype.toString.call(t))return 0===t.length?t:t.map((function(t){return F(t)}));var e={};if("[object Object]"===Object.prototype.toString.call(t)){for(var r in t){var n=t[r];"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?e[R(r)]=F(n):e[R(r)]=n}return e}return t}function N(t){if("[object Array]"===Object.prototype.toString.call(t))return 0===t.length?t:t.map((function(t){return N(t)}));var e={};if("[object Object]"===Object.prototype.toString.call(t)){for(var r in t){var n=t[r];"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?e[r]=N(n):e[r]="dep_group"===n?"depGroup":n}return e}return t}function Q(t){return N(F(t))}}).call(this,r("1c35").Buffer)},"95e03":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Method=void 0;var n=r("2a27"),i=a(r("91d3")),o=a(r("84d0"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,r){return e=u(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=c(t,"string");return"symbol"===typeof e?e:String(e)}function c(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e,r){f(t,e),e.set(t,r)}function f(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(t,e,r){var n=g(t,e,"set");return h(t,n,r),r}function h(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function d(t,e){var r=g(t,e,"get");return y(t,r)}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function y(t,e){return e.get?e.get.call(t):e.value}var m=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap;class w{get name(){return d(this,m)}constructor(t,e,r={}){l(this,m,{writable:!0,value:void 0}),l(this,b,{writable:!0,value:void 0}),l(this,v,{writable:!0,value:{name:"",method:"",paramsFormatters:[],resultFormatters:void 0}}),l(this,_,{writable:!0,value:void 0}),s(this,"call",async(...t)=>{const e=this.getPayload(...t),r=new i.default,o=r.signal,a=setTimeout(()=>r.abort(),d(this,b).timeout),s=await d(this,b).fetch(d(this,_).url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:o}).then(t=>t.json()).then(t=>{var r,i,o;if(t.id!==e.id)throw new n.IdNotMatchException(e.id,t.id);if(t.error)throw new n.ResponseException(JSON.stringify(t.error));return null!==(r=null===(i=(o=d(this,v)).resultFormatters)||void 0===i?void 0:i.call(o,t.result))&&void 0!==r?r:t.result});return clearTimeout(a),s}),s(this,"getPayload",(...t)=>{const e=t.map((t,e)=>d(this,v).paramsFormatters[e]&&d(this,v).paramsFormatters[e](t)||t),r=Math.round(1e4*Math.random()),n={id:r,method:d(this,v).method,params:e,jsonrpc:"2.0"};return n}),p(this,_,t),p(this,v,e),p(this,m,e.name);const{timeout:a=3e4,fetch:u=o.default}=r;p(this,b,{timeout:a,fetch:u}),Object.defineProperty(this.call,"name",{value:e.name,configurable:!1,writable:!1})}}e.Method=w},9612:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BI",{enumerable:!0,get:function(){return n.BI}}),Object.defineProperty(e,"BIish",{enumerable:!0,get:function(){return n.BIish}}),e.Uint8=e.Uint64LE=e.Uint64BE=e.Uint64=e.Uint512LE=e.Uint512BE=e.Uint512=e.Uint32LE=e.Uint32BE=e.Uint32=e.Uint256LE=e.Uint256BE=e.Uint256=e.Uint16LE=e.Uint16BE=e.Uint16=e.Uint128LE=e.Uint128BE=e.Uint128=void 0;var n=r("6cf0"),i=r("e3a3"),o=r("41da");function a(t,e,r,i){if(t=n.BI.from(t),t.lt(e)||t.gt(r))throw new o.CodecBaseParseError(`Value must be between ${e.toString()} and ${r.toString()}, but got ${t.toString()}`,i)}function s(t,e=!1){const r=u(t,e);return{__isFixedCodec__:!0,byteLength:t,pack:t=>r.pack(t),unpack:t=>r.unpack(t).toNumber()}}const u=(t,e=!1)=>{const r=n.BI.from(1).shl(8*t).sub(1);return(0,i.createFixedBytesCodec)({byteLength:t,pack(i){let s=e?"LE":"BE";t<=1&&(s="");const u=`Uint${8*t}${s}`;if("number"===typeof i&&!Number.isSafeInteger(i))throw new o.CodecBaseParseError(i+" is not a safe integer",u);let c=n.BI.from(i);a(c,0,r,u);const l=new DataView(new ArrayBuffer(t));for(let r=0;r<t;r++)e?l.setUint8(r,c.and(255).toNumber()):l.setUint8(t-r-1,c.and(255).toNumber()),c=c.shr(8);return new Uint8Array(l.buffer)},unpack:r=>{const i=new DataView(Uint8Array.from(r).buffer);let o=n.BI.from(0);for(let a=0;a<t;a++)o=e?o.or(n.BI.from(i.getUint8(a)).shl(8*a)):o.shl(8).or(i.getUint8(a));return o}})},c=s(1);e.Uint8=c;const l=s(2,!0);e.Uint16LE=l;const f=s(2);e.Uint16BE=f;const p=l;e.Uint16=p;const h=s(4,!0);e.Uint32LE=h;const d=s(4);e.Uint32BE=d;const g=h;e.Uint32=g;const y=u(8,!0);e.Uint64LE=y;const m=u(8);e.Uint64BE=m;const b=y;e.Uint64=b;const v=u(16,!0);e.Uint128LE=v;const _=u(16);e.Uint128BE=_;const w=v;e.Uint128=w;const A=u(32,!0);e.Uint256LE=A;const I=u(32);e.Uint256BE=I;const C=A;e.Uint256=C;const E=u(64,!0);e.Uint512LE=E;const S=u(64);e.Uint512BE=S;const k=E;e.Uint512=k},9869:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.StringHashTypeException=e.PageSizeTooSmallException=e.PageSizeTooLargeException=e.OutputsValidatorTypeException=e.HexStringWithout0xException=e.BigintOrHexStringTypeException=void 0;var n=i(r("76d4"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r){return e=a(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=s(t,"string");return"symbol"===typeof e?e:String(e)}function s(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}class u extends RangeError{constructor(t,e){super(`Expect page size to be at most ${e}, but ${t} received`),o(this,"code",n.default.ParameterInvalid)}}e.PageSizeTooLargeException=u;class c extends RangeError{constructor(t,e){super(`Expect page size to be at least ${e}, but ${t} received`),o(this,"code",n.default.ParameterInvalid)}}e.PageSizeTooSmallException=c;class l extends TypeError{constructor(){super("Expect outputs validator to be 'default' or 'passthrough'"),o(this,"code",n.default.ParameterInvalid)}}e.OutputsValidatorTypeException=l;class f extends TypeError{constructor(t){super(`Expect number to be bigint or hex string, but ${t} received`),o(this,"code",n.default.ParameterInvalid)}}e.BigintOrHexStringTypeException=f;class p extends TypeError{constructor(t){super(`Expect hash to be string, but ${t} received`),o(this,"code",n.default.ParameterInvalid)}}e.StringHashTypeException=p;class h extends Error{constructor(t){super(`Hex string ${t} should start with 0x`),o(this,"code",n.default.ParameterInvalid)}}e.HexStringWithout0xException=h;var d={PageSizeTooLargeException:u,PageSizeTooSmallException:c,OutputsValidatorTypeException:l,BigintOrHexStringTypeException:f,StringHashTypeException:p,HexStringWithout0xException:h};e.default=d},"986ef":function(t,e){function r(t){return t.length}function n(t){const e=t.byteLength;let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}function i(t,e,n=0,i=r(e)){const o=Math.min(i,t.byteLength-n);for(let r=0;r<o;r++)t[n+r]=e.charCodeAt(r);return o}t.exports={byteLength:r,toString:n,write:i}},"9a80":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=m,e.payFee=y,e.prepareSigningEntries=b,e.setupInputCell=h,e.transfer=d,e.transferCompatible=g;var n=r("329b"),i=r("c1f3"),o=r("4b0a"),a=r("0b92"),s=r("a2e8"),u=r("832d"),c=r("1c87"),l=r("6cf0");const{ScriptValue:f}=a.values,p=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,s.getConfig)(),this.fromScript=(0,c.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,u.isSecp256k1Blake160Script)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function h(t,e,r,{config:n,defaultWitness:i="0x",since:c}={}){n=n||(0,s.getConfig)();const l=e.cellOutput.lock;if(!(0,u.isSecp256k1Blake160Script)(l,n))throw new Error("Not SECP256K1_BLAKE160 input!");t=t.update("inputs",t=>t.push(e));const p={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",t=>t.push(p)),c&&(t=t.update("inputSinces",e=>e.set(t.get("inputs").size-1,c))),t=t.update("witnesses",t=>t.push(i));const h=n.SCRIPTS.SECP256K1_BLAKE160;if(!h)throw new Error("SECP256K1_BLAKE160 script not defined in config!");const d={txHash:h.TX_HASH,index:h.INDEX};t=(0,u.addCellDep)(t,{outPoint:d,depType:h.DEP_TYPE});const g=t.get("inputs").findIndex(t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(l,{validate:!1})));if(-1!==g){while(g>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));let e=t.get("witnesses").get(g);const r={lock:u.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=a.blockchain.WitnessArgs.unpack(o.bytes.bytify(e)),n=t.lock;if(n&&r.lock&&!o.bytes.equal(n,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const i=t.inputType;i&&(r.inputType=i);const s=t.outputType;s&&(r.outputType=s)}e=o.bytes.hexify(a.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",t=>t.set(g,e))}return t}async function d(t,e,r,n,{config:i,requireToAddress:o=!0,assertAmountEnough:a=!0}={}){const s=await g(t,e,r,n,{config:i,requireToAddress:o,assertAmountEnough:a});let u,c;return s instanceof Array?(u=s[0],c=BigInt(s[1].toString()),[u,c]):(u=s,u)}async function g(t,e,r,c,{config:p,requireToAddress:h=!0,assertAmountEnough:d=!0}={}){p=p||(0,s.getConfig)();const g=p.SCRIPTS.SECP256K1_BLAKE160;if(!g)throw new Error("Provided config does not have SECP256K1_BLAKE160 script setup!");const y={txHash:g.TX_HASH,index:g.INDEX};t=(0,u.addCellDep)(t,{outPoint:y,depType:g.DEP_TYPE});const m=(0,i.parseAddress)(e,{config:p});if((0,u.ensureScript)(m,p,"SECP256K1_BLAKE160"),h&&!r)throw new Error("You must provide a to address!");let b=l.BI.from(c);if(r){const e=(0,i.parseAddress)(r,{config:p});t=t.update("outputs",t=>t.push({cellOutput:{capacity:"0x"+b.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0}))}const v=t.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let _=v?v.index+1:0;for(;_<t.get("outputs").size&&b.gt(0);_++){const e=t.get("outputs").get(_);if(new f(e.cellOutput.lock,{validate:!1}).equals(new f(m,{validate:!1}))){const t=l.BI.from(e.cellOutput.capacity);let r;b.gte(t)?r=t:(r=t.sub((0,i.minimalCellCapacityCompatible)(e)),r.gt(b)&&(r=b)),b=b.sub(r),e.cellOutput.capacity="0x"+t.sub(r).toString(16)}}if(t=t.update("outputs",t=>t.filter(t=>!l.BI.from(t.cellOutput.capacity).eq(0))),b.gt(0)){const e=t.get("cellProvider");if(!e)throw new Error("Cell provider is missing!");const r=e.collector({lock:m}),o={cellOutput:{capacity:"0x0",lock:m,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let a=l.BI.from(0),s=(0,n.Set)();for(const n of t.get("inputs"))s=s.add(`${n.outPoint.txHash}_${n.outPoint.index}`);for await(const n of r.collect()){if(s.has(`${n.outPoint.txHash}_${n.outPoint.index}`))continue;t=t.update("inputs",t=>t.push(n)),t=t.update("witnesses",t=>t.push("0x"));const e=l.BI.from(n.cellOutput.capacity);let r=e;if(r.gt(b)&&(r=b),b=b.sub(r),a=a.add(e).sub(r),b.eq(0)&&(a.eq(0)||a.gt((0,i.minimalCellCapacityCompatible)(o))))break}a.gt(0)&&(o.cellOutput.capacity="0x"+a.toString(16),t=t.update("outputs",t=>t.push(o)))}if(b.gt(0)&&d)throw new Error("Not enough capacity in from address!");const w=t.get("inputs").findIndex(t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(m,{validate:!1})));if(-1!==w){while(w>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));let e=t.get("witnesses").get(w);const r={lock:u.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=a.blockchain.WitnessArgs.unpack(o.bytes.bytify(e)),n=t.lock;if(n&&r.lock&&!o.bytes.equal(n,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const i=t.inputType;i&&(r.inputType=i);const s=t.outputType;s&&(r.outputType=s)}e=o.bytes.hexify(a.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",t=>t.set(w,e))}return d?t:[t,l.BI.from(b)]}async function y(t,e,r,{config:n}={}){return n=n||(0,s.getConfig)(),await g(t,e,null,r,{config:n,requireToAddress:!1})}async function m(t,e,r,{config:n}={}){if(n=n||(0,s.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const i=l.BI.from(t.get("outputs").get(e).cellOutput.capacity);return await g(t,r,null,l.BI.from(i),{config:n,requireToAddress:!1})}function b(t,{config:e}={}){return e=e||(0,s.getConfig)(),(0,u.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160")}e.CellCollector=p;var v={transfer:d,transferCompatible:g,payFee:y,prepareSigningEntries:b,injectCapacity:m,setupInputCell:h,CellCollector:p};e.default=v},"9b3e":function(t,e){t.exports=function t(e){Object.freeze(e);var r="function"===typeof e,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach((function(i){!n.call(e,i)||r&&("caller"===i||"callee"===i||"arguments"===i)||null===e[i]||"object"!==typeof e[i]&&"function"!==typeof e[i]||Object.isFrozen(e[i])||t(e[i])})),e}},"9cd4":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertChainCode=s,e.assertPrivateKey=a,e.assertPublicKey=o;var n=r("0b92");const{assertHexString:i}=n.utils;function o(t,e){if(e=e||"publicKey",i(e,t),68!==t.length)throw new Error("publicKey must be length of 33 bytes!")}function a(t){if(i("privateKey",t),66!==t.length)throw new Error("privateKey must be length of 32 bytes!")}function s(t){if(i("chainCode",t),66!==t.length)throw new Error("chainCode must be length of 32 bytes!")}},"9d96":function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!==typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function p(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function h(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}function d(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=a(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype["delete"]=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=s(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function v(t,e){e=e||{};var r=e.body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function w(t){var e=new c,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function A(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var I=[301,302,303,307,308];A.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(E){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(t,n){return new Promise((function(i,o){var a=new v(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:w(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new A(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=c,t.Request=v,t.Response=A),e.Headers=c,e.Request=v,e.Response=A,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},"9dd8":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PayloadInBatchException=e.MethodInBatchNotFoundException=e.IdNotMatchedInBatchException=void 0;var n=o(r("76d4")),i=r("0be3");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r){return e=s(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=u(t,"string");return"symbol"===typeof e?e:String(e)}function u(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}const c="Batch Request";class l extends Error{constructor(t){super(`[${c}]: Method ${t} is not found`),a(this,"code",n.default.MethodNotFound)}}e.MethodInBatchNotFoundException=l;class f extends Error{constructor(t,e){super(`[${c} ${t}]: ${e}`),a(this,"code",n.default.PayloadMessage),this.index=t}}e.PayloadInBatchException=f;class p extends i.IdNotMatchException{constructor(t,e,r){super(e,r),this.message=`[${c} ${t}]: ${this.message}`,this.index=t}}e.IdNotMatchedInBatchException=p;var h={MethodInBatchNotFoundException:l,PayloadInBatchException:f,IdNotMatchedInBatchException:p};e.default=h},"9fa9":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(r("4778"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){for(var e=t.A,r=t.C,i=t.D,o=t.W,a=0,s=0,u=0;u<5;u++){var c=2*u,l=2*(u+5),f=2*(u+10),p=2*(u+15),h=2*(u+20);r[c]=e[c]^e[l]^e[f]^e[p]^e[h],r[c+1]=e[c+1]^e[l+1]^e[f+1]^e[p+1]^e[h+1]}for(var d=0;d<5;d++){(0,n["default"])(r,(d+1)%5)(o,0),a=o[0],s=o[1],o[0]=a<<1|s>>>31,o[1]=s<<1|a>>>31,i[2*d]=r[(d+4)%5*2]^o[0],i[2*d+1]=r[(d+4)%5*2+1]^o[1];for(var g=0;g<25;g+=5)e[2*(g+d)]^=i[2*d],e[2*(g+d)+1]^=i[2*d+1]}},a=o;e["default"]=a},a02f:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(r("1c46")),i=r("3337"),o=s(r("5daf")),a=r("158e");function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r){return e=c(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=l(t,"string");return"symbol"===typeof e?e:String(e)}function l(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}const f=new i.ec("secp256k1"),p=t.from("");class h{constructor(t,e){u(this,"privateKey",p),u(this,"publicKey",p),u(this,"chainCode",p),u(this,"index",0),u(this,"depth",0),u(this,"identifier",p),u(this,"fingerprint",0),u(this,"parentFingerprint",0),this.privateKey=t,this.chainCode=e,this.isNeutered()||(this.publicKey=(0,a.privateToPublic)(this.privateKey))}calculateFingerprint(){this.identifier=this.hash160(this.publicKey),this.fingerprint=this.identifier.slice(0,4).readUInt32BE(0)}static fromSeed(e){const r=n.default.createHmac("sha512",t.from("Bitcoin seed","utf8")).update(e).digest(),i=new h(r.slice(0,32),r.slice(32));return i.calculateFingerprint(),i}static fromPublicKey(t,e,r){const n=new h(p,e);n.publicKey=t,n.calculateFingerprint();const i=r.split("/");return n.depth=i.length-1,n.index=parseInt(i[i.length-1],10),n}deriveChild(e,r){let i;const o=t.allocUnsafe(4);if(r){const r=t.concat([t.alloc(1,0),this.privateKey]);o.writeUInt32BE(e+2147483648,0),i=t.concat([r,o])}else o.writeUInt32BE(e,0),i=t.concat([this.publicKey,o]);const a=n.default.createHmac("sha512",this.chainCode).update(i).digest(),s=a.slice(0,32),u=a.slice(32);let c;if(this.isNeutered())c=new h(p,u),c.publicKey=h.publicKeyAdd(this.publicKey,s),c.calculateFingerprint();else{const t=h.privateKeyAdd(this.privateKey,s);c=new h(t,u),c.calculateFingerprint()}return c.index=e,c.depth=this.depth+1,c.parentFingerprint=this.fingerprint,c}derivePath(t){const e=["m","/",""];if(e.includes(t))return this;let r=this,n=t.split("/");return"m"===n[0]&&(n=n.slice(1)),n.forEach(t=>{const e=parseInt(t,10),n=t.length>1&&"'"===t[t.length-1];r=r.deriveChild(e,n)}),r}isNeutered(){return this.privateKey===p}hash160(t){const e=n.default.createHash("sha256").update(t).digest();return n.default.createHash("ripemd160").update(e).digest()}static privateKeyAdd(e,r){const n=new o.default(r);return n.iadd(new o.default(e)),n.cmp(f.curve.n)>=0&&n.isub(f.curve.n),n.toArrayLike(t,"be",32)}static publicKeyAdd(e,r){const n=new o.default(e.slice(1)).toRed(f.curve.red);let i=n.redSqr().redIMul(n).redIAdd(f.curve.b).redSqrt();3===e[0]!==i.isOdd()&&(i=i.redNeg());const a=f.curve.g.mul(new o.default(r)).add({x:n,y:i});return t.from(a.encode(!0,!0))}}e.default=h}).call(this,r("1c35").Buffer)},a065:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIGHASH_OUTPUT_LOC=e.SIGHASH_GROUP_OUTPUT_LOC=e.MULTISIG_OUTPUT_LOC=e.MULTISIG_GROUP_OUTPUT_LOC=e.DAO_OUTPUT_LOC=void 0,e.generateGenesisScriptConfigs=c;var n=r("0b92");const i=[0,1];e.SIGHASH_OUTPUT_LOC=i;const o=[0,4];e.MULTISIG_OUTPUT_LOC=o;const a=[0,2];e.DAO_OUTPUT_LOC=a;const s=[1,0];e.SIGHASH_GROUP_OUTPUT_LOC=s;const u=[1,1];function c(t){if(!t||0!==Number(t.header.number))throw new Error("The block must be a genesis block");const e=t.transactions;return{SECP256K1_BLAKE160:{...l({transaction:e[i[0]],outputIndex:i[1],depGroupTransaction:e[s[0]],depGroupOutputIndex:s[1]}),SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{...l({transaction:e[o[0]],outputIndex:o[1],depGroupTransaction:e[u[0]],depGroupOutputIndex:u[1]}),SHORT_ID:1},DAO:l({transaction:e[a[0]],outputIndex:a[1]})}}function l(t){var e;const{transaction:r,outputIndex:i}=t,o=n.utils.computeScriptHash(f(null===(e=r.outputs[i])||void 0===e?void 0:e.type));if("depGroupTransaction"in t){const{depGroupOutputIndex:e,depGroupTransaction:r}=t;return{HASH_TYPE:"type",CODE_HASH:o,DEP_TYPE:"depGroup",TX_HASH:f(r.hash),INDEX:p(e)}}return{HASH_TYPE:"type",CODE_HASH:o,DEP_TYPE:"code",INDEX:p(i),TX_HASH:f(r.hash)}}function f(t){if(null==t)throw new Error("The block must be a genesis block");return t}function p(t){return"0x"+t.toString(16)}e.MULTISIG_GROUP_OUTPUT_LOC=u},a100:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createArrayCodec",{enumerable:!0,get:function(){return n.createArrayCodec}}),Object.defineProperty(e,"createNullableCodec",{enumerable:!0,get:function(){return n.createNullableCodec}}),Object.defineProperty(e,"createObjectCodec",{enumerable:!0,get:function(){return n.createObjectCodec}}),Object.defineProperty(e,"enhancePack",{enumerable:!0,get:function(){return n.enhancePack}});var n=r("6a9c")},a2e8:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={initializeConfig:!0,getConfig:!0,validateConfig:!0,nameOfScript:!0,findConfigByScript:!0,helpers:!0,predefined:!0,createConfig:!0,generateGenesisScriptConfigs:!0,refreshScriptConfigs:!0,createRpcResolver:!0,createLatestTypeIdResolver:!0};Object.defineProperty(e,"createConfig",{enumerable:!0,get:function(){return s.createConfig}}),Object.defineProperty(e,"createLatestTypeIdResolver",{enumerable:!0,get:function(){return c.createLatestTypeIdResolver}}),Object.defineProperty(e,"createRpcResolver",{enumerable:!0,get:function(){return c.createRpcResolver}}),Object.defineProperty(e,"findConfigByScript",{enumerable:!0,get:function(){return a.findConfigByScript}}),Object.defineProperty(e,"generateGenesisScriptConfigs",{enumerable:!0,get:function(){return u.generateGenesisScriptConfigs}}),Object.defineProperty(e,"getConfig",{enumerable:!0,get:function(){return o.getConfig}}),e.helpers=void 0,Object.defineProperty(e,"initializeConfig",{enumerable:!0,get:function(){return o.initializeConfig}}),Object.defineProperty(e,"nameOfScript",{enumerable:!0,get:function(){return a.nameOfScript}}),Object.defineProperty(e,"predefined",{enumerable:!0,get:function(){return s.predefined}}),Object.defineProperty(e,"refreshScriptConfigs",{enumerable:!0,get:function(){return c.refreshScriptConfigs}}),Object.defineProperty(e,"validateConfig",{enumerable:!0,get:function(){return o.validateConfig}});var i=r("28ac");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}));var o=r("7b57"),a=f(r("79ea"));e.helpers=a;var s=r("fbaaf"),u=r("a065"),c=r("853d");function l(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(l=function(t){return t?r:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=l(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}},a567:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(r("4778"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){for(var e=t.A,r=t.C,i=0;i<25;i+=5){for(var o=0;o<5;o++)(0,n["default"])(e,i+o)(r,o);for(var a=0;a<5;a++){var s=2*(i+a),u=(a+1)%5*2,c=(a+2)%5*2;e[s]^=~r[u]&r[c],e[s+1]^=~r[u+1]&r[c+1]}}},a=o;e["default"]=a},a7ee:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Reader",{enumerable:!0,get:function(){return n.Reader}}),e.validators=e.transformers=e.normalizers=e.VERSION=void 0;var n=r("ef55"),i=u(r("f84b"));e.normalizers=i;var o=u(r("2224"));e.transformers=o;var a=u(r("9178"));function s(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}e.validators=a;const c="__development_build__";e.VERSION=c},a94a:function(t,e,r){var n=r("ffc2"),i=r("ca1a"),o=null,a="undefined"!==typeof WebAssembly&&r("dff7")().then(t=>{o=t}),s=64,u=[];t.exports=g;var c=t.exports.BYTES_MIN=16,l=t.exports.BYTES_MAX=64,f=(t.exports.BYTES=32,t.exports.KEYBYTES_MIN=16),p=t.exports.KEYBYTES_MAX=64,h=(t.exports.KEYBYTES=32,t.exports.SALTBYTES=16),d=t.exports.PERSONALBYTES=16;function g(t,e,r,i,a){if(!(this instanceof g))return new g(t,e,r,i,a);if(!o)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),!0!==a&&(n(t>=c,"digestLength must be at least "+c+", was given "+t),n(t<=l,"digestLength must be at most "+l+", was given "+t),null!=e&&(n(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),n(e.length>=f,"key must be at least "+f+", was given "+e.length),n(e.length<=p,"key must be at least "+p+", was given "+e.length)),null!=r&&(n(r instanceof Uint8Array,"salt must be Uint8Array or Buffer"),n(r.length===h,"salt must be exactly "+h+", was given "+r.length)),null!=i&&(n(i instanceof Uint8Array,"personal must be Uint8Array or Buffer"),n(i.length===d,"personal must be exactly "+d+", was given "+i.length))),u.length||(u.push(s),s+=216),this.digestLength=t,this.finalized=!1,this.pointer=u.pop(),this._memory=new Uint8Array(o.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=e?e.length:0,this._memory[2]=1,this._memory[3]=1,r&&this._memory.set(r,32),i&&this._memory.set(i,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),o.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),this._memory.fill(0,s,s+e.length),this._memory[this.pointer+200]=128)}function y(){}g.prototype._realloc=function(t){o.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(o.memory.buffer)},g.prototype.update=function(t){return n(!1===this.finalized,"Hash instance finalized"),n(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),s+t.length>this._memory.length&&this._realloc(s+t.length),this._memory.set(t,s),o.blake2b_update(this.pointer,s,s+t.length),this},g.prototype.digest=function(t){if(n(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,u.push(this.pointer),o.blake2b_final(this.pointer),!t||"binary"===t)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"===typeof t)return i.toString(this._memory,t,this.pointer+128,this.pointer+128+this.digestLength);n(t instanceof Uint8Array&&t.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=this._memory[this.pointer+128+e];return t},g.prototype.final=g.prototype.digest,g.WASM=o,g.SUPPORTED="undefined"!==typeof WebAssembly,g.ready=function(t){return t||(t=y),a?a.then(()=>t(),t):t(new Error("WebAssembly not supported"))},g.prototype.ready=g.ready,g.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},g.prototype.setPartialHash=function(t){this._memory.set(t,this.pointer)}},ac1e:function(t,e,r){(function(e,r){t.exports=r()})(0,(function(){"use strict";var t=Math.imul,e=Math.clz32;function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r,n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(){return l=c()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=Function.bind.apply(t,n),o=new i;return r&&u(o,r.prototype),o},l.apply(null,arguments)}function f(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t){var e="function"==typeof Map?new Map:void 0;return p=function(t){function r(){return l(t,arguments,s(this).constructor)}if(null===t||!f(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof e){if(e.has(t))return e.get(t);e.set(t,r)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},p(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function g(t){var e=c();return function(){var r,n=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function y(t,e){return m(t)||b(t,e)||v(t,e)||w()}function m(t){if(Array.isArray(t))return t}function b(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r["return"]||r["return"]()}finally{if(s)throw i}}return o}}function v(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=v(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}var I=function(t){var e=Math.abs,i=Math.max,s=Math.floor;function u(t,e){var r;if(n(this,u),r=c.call(this,t),r.sign=e,Object.setPrototypeOf(h(r),u.prototype),t>u.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r}a(u,t);var c=g(u);return o(u,[{key:"toDebugString",value:function(){var t,e=["BigInt["],r=A(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push((n?(n>>>0).toString(16):n)+", ")}}catch(t){r.e(t)}finally{r.f()}return e.push("]"),e.join("")}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(t&t-1)?u.__toStringBasePowerOfTwo(this,t):u.__toStringGeneric(this,t,!1)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var t=new u(this.length,this.sign),e=0;e<this.length;e++)t[e]=this[e];return t}},{key:"__trim",value:function(){for(var t=this.length,e=this[t-1];0===e;)t--,e=this[t-1],this.pop();return 0===t&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var t=0;t<this.length;t++)this[t]=0}},{key:"__clzmsd",value:function(){return u.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(t,e,r){r>this.length&&(r=this.length);for(var n=32767&t,i=t>>>15,o=0,a=e,s=0;s<r;s++){var c=this.__digit(s),l=32767&c,f=c>>>15,p=u.__imul(l,n),h=u.__imul(l,i),d=u.__imul(f,n),g=u.__imul(f,i),y=a+p+o;o=y>>>30,y&=1073741823,y+=((32767&h)<<15)+((32767&d)<<15),o+=y>>>30,a=g+(h>>>15)+(d>>>15),this.__setDigit(s,1073741823&y)}if(0!==o||0!==a)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(t,e,r){for(var n,i=0,o=0;o<r;o++)n=this.__halfDigit(e+o)+t.__halfDigit(o)+i,i=n>>>15,this.__setHalfDigit(e+o,32767&n);return i}},{key:"__inplaceSub",value:function(t,e,r){var n=0;if(1&e){e>>=1;for(var i=this.__digit(e),o=32767&i,a=0;a<r-1>>>1;a++){var s=t.__digit(a),u=(i>>>15)-(32767&s)-n;n=1&u>>>15,this.__setDigit(e+a,(32767&u)<<15|32767&o),i=this.__digit(e+a+1),o=(32767&i)-(s>>>15)-n,n=1&o>>>15}var c=t.__digit(a),l=(i>>>15)-(32767&c)-n;if(n=1&l>>>15,this.__setDigit(e+a,(32767&l)<<15|32767&o),e+a+1>=this.length)throw new RangeError("out of bounds");0==(1&r)&&(i=this.__digit(e+a+1),o=(32767&i)-(c>>>15)-n,n=1&o>>>15,this.__setDigit(e+t.length,1073709056&i|32767&o))}else{e>>=1;for(var f=0;f<t.length-1;f++){var p=this.__digit(e+f),h=t.__digit(f),d=(32767&p)-(32767&h)-n;n=1&d>>>15;var g=(p>>>15)-(h>>>15)-n;n=1&g>>>15,this.__setDigit(e+f,(32767&g)<<15|32767&d)}var y=this.__digit(e+f),m=t.__digit(f),b=(32767&y)-(32767&m)-n;n=1&b>>>15;var v=0;0==(1&r)&&(v=(y>>>15)-(m>>>15)-n,n=1&v>>>15),this.__setDigit(e+f,(32767&v)<<15|32767&b)}return n}},{key:"__inplaceRightShift",value:function(t){if(0!==t){for(var e,r=this.__digit(0)>>>t,n=this.length-1,i=0;i<n;i++)e=this.__digit(i+1),this.__setDigit(i,1073741823&e<<30-t|r),r=e>>>t;this.__setDigit(n,r)}}},{key:"__digit",value:function(t){return this[t]}},{key:"__unsignedDigit",value:function(t){return this[t]>>>0}},{key:"__setDigit",value:function(t,e){this[t]=0|e}},{key:"__setDigitGrow",value:function(t,e){this[t]=0|e}},{key:"__halfDigitLength",value:function(){var t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}},{key:"__halfDigit",value:function(t){return 32767&this[t>>>1]>>>15*(1&t)}},{key:"__setHalfDigit",value:function(t,e){var r=t>>>1,n=this.__digit(r),i=1&t?32767&n|e<<15:1073709056&n|32767&e;this.__setDigit(r,i)}}],[{key:"BigInt",value:function(t){var e=Number.isFinite;if("number"==typeof t){if(0===t)return u.__zero();if(u.__isOneDigitInt(t))return 0>t?u.__oneDigit(-t,!0):u.__oneDigit(t,!1);if(!e(t)||s(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return u.__fromDouble(t)}if("string"==typeof t){var n=u.__fromString(t);if(null===n)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return n}if("boolean"==typeof t)return!0===t?u.__oneDigit(1,!1):u.__zero();if("object"===r(t)){if(t.constructor===u)return t;var i=u.__toPrimitive(t);return u.BigInt(i)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(t){var e=t.length;if(0===e)return 0;if(1===e){var r=t.__unsignedDigit(0);return t.sign?-r:r}var n=t.__digit(e-1),i=u.__clz30(n),o=30*e-i;if(1024<o)return t.sign?-1/0:1/0;var a=o-1,s=n,c=e-1,l=i+3,f=32===l?0:s<<l;f>>>=12;var p=l-12,h=12<=l?0:s<<20+l,d=20+l;for(0<p&&0<c&&(c--,s=t.__digit(c),f|=s>>>30-p,h=s<<p+2,d=p+2);0<d&&0<c;)c--,s=t.__digit(c),h|=30<=d?s<<d-30:s>>>30-d,d-=30;var g=u.__decideRounding(t,d,c,s);if((1===g||0===g&&1==(1&h))&&(h=h+1>>>0,0===h&&(f++,0!=f>>>20&&(f=0,a++,1023<a))))return t.sign?-1/0:1/0;var y=t.sign?-2147483648:0;return a=a+1023<<20,u.__kBitConversionInts[1]=y|a|f,u.__kBitConversionInts[0]=h,u.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(t){if(0===t.length)return t;var e=t.__copy();return e.sign=!t.sign,e}},{key:"bitwiseNot",value:function(t){return t.sign?u.__absoluteSubOne(t).__trim():u.__absoluteAddOne(t,!0)}},{key:"exponentiate",value:function(t,e){if(e.sign)throw new RangeError("Exponent must be positive");if(0===e.length)return u.__oneDigit(1,!1);if(0===t.length)return t;if(1===t.length&&1===t.__digit(0))return t.sign&&0==(1&e.__digit(0))?u.unaryMinus(t):t;if(1<e.length)throw new RangeError("BigInt too big");var r=e.__unsignedDigit(0);if(1===r)return t;if(r>=u.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===t.length&&2===t.__digit(0)){var n=1+(0|r/30),i=t.sign&&0!=(1&r),o=new u(n,i);o.__initializeDigits();var a=1<<r%30;return o.__setDigit(n-1,a),o}var s=null,c=t;for(0!=(1&r)&&(s=t),r>>=1;0!==r;r>>=1)c=u.multiply(c,c),0!=(1&r)&&(s=null===s?c:u.multiply(s,c));return s}},{key:"multiply",value:function(t,e){if(0===t.length)return t;if(0===e.length)return e;var r=t.length+e.length;30<=t.__clzmsd()+e.__clzmsd()&&r--;var n=new u(r,t.sign!==e.sign);n.__initializeDigits();for(var i=0;i<t.length;i++)u.__multiplyAccumulate(e,t.__digit(i),n,i);return n.__trim()}},{key:"divide",value:function(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(t,e))return u.__zero();var r,n=t.sign!==e.sign,i=e.__unsignedDigit(0);if(1===e.length&&32767>=i){if(1===i)return n===t.sign?t:u.unaryMinus(t);r=u.__absoluteDivSmall(t,i,null)}else r=u.__absoluteDivLarge(t,e,!0,!1);return r.sign=n,r.__trim()}},{key:"remainder",value:function(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(t,e))return t;var r=e.__unsignedDigit(0);if(1===e.length&&32767>=r){if(1===r)return u.__zero();var n=u.__absoluteModSmall(t,r);return 0===n?u.__zero():u.__oneDigit(n,t.sign)}var i=u.__absoluteDivLarge(t,e,!1,!0);return i.sign=t.sign,i.__trim()}},{key:"add",value:function(t,e){var r=t.sign;return r===e.sign?u.__absoluteAdd(t,e,r):0<=u.__absoluteCompare(t,e)?u.__absoluteSub(t,e,r):u.__absoluteSub(e,t,!r)}},{key:"subtract",value:function(t,e){var r=t.sign;return r===e.sign?0<=u.__absoluteCompare(t,e)?u.__absoluteSub(t,e,r):u.__absoluteSub(e,t,!r):u.__absoluteAdd(t,e,r)}},{key:"leftShift",value:function(t,e){return 0===e.length||0===t.length?t:e.sign?u.__rightShiftByAbsolute(t,e):u.__leftShiftByAbsolute(t,e)}},{key:"signedRightShift",value:function(t,e){return 0===e.length||0===t.length?t:e.sign?u.__leftShiftByAbsolute(t,e):u.__rightShiftByAbsolute(t,e)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(t,e){return 0>u.__compareToBigInt(t,e)}},{key:"lessThanOrEqual",value:function(t,e){return 0>=u.__compareToBigInt(t,e)}},{key:"greaterThan",value:function(t,e){return 0<u.__compareToBigInt(t,e)}},{key:"greaterThanOrEqual",value:function(t,e){return 0<=u.__compareToBigInt(t,e)}},{key:"equal",value:function(t,e){if(t.sign!==e.sign)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t.__digit(r)!==e.__digit(r))return!1;return!0}},{key:"notEqual",value:function(t,e){return!u.equal(t,e)}},{key:"bitwiseAnd",value:function(t,e){if(!t.sign&&!e.sign)return u.__absoluteAnd(t,e).__trim();if(t.sign&&e.sign){var r=i(t.length,e.length)+1,n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return n=u.__absoluteOr(n,o,n),u.__absoluteAddOne(n,!0,n).__trim()}if(t.sign){var a=[e,t];t=a[0],e=a[1]}return u.__absoluteAndNot(t,u.__absoluteSubOne(e)).__trim()}},{key:"bitwiseXor",value:function(t,e){if(!t.sign&&!e.sign)return u.__absoluteXor(t,e).__trim();if(t.sign&&e.sign){var r=i(t.length,e.length),n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return u.__absoluteXor(n,o,n).__trim()}var a=i(t.length,e.length)+1;if(t.sign){var s=[e,t];t=s[0],e=s[1]}var c=u.__absoluteSubOne(e,a);return c=u.__absoluteXor(c,t,c),u.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(t,e){var r=i(t.length,e.length);if(!t.sign&&!e.sign)return u.__absoluteOr(t,e).__trim();if(t.sign&&e.sign){var n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return n=u.__absoluteAnd(n,o,n),u.__absoluteAddOne(n,!0,n).__trim()}if(t.sign){var a=[e,t];t=a[0],e=a[1]}var s=u.__absoluteSubOne(e,r);return s=u.__absoluteAndNot(s,t,s),u.__absoluteAddOne(s,!0,s).__trim()}},{key:"asIntN",value:function(t,e){if(0===e.length)return e;if(t=s(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return u.__zero();if(t>=u.__kMaxLengthBits)return e;var r=0|(t+29)/30;if(e.length<r)return e;var n=e.__unsignedDigit(r-1),i=1<<(t-1)%30;if(e.length===r&&n<i)return e;if((n&i)!==i)return u.__truncateToNBits(t,e);if(!e.sign)return u.__truncateAndSubFromPowerOfTwo(t,e,!0);if(0==(n&i-1)){for(var o=r-2;0<=o;o--)if(0!==e.__digit(o))return u.__truncateAndSubFromPowerOfTwo(t,e,!1);return e.length===r&&n===i?e:u.__truncateToNBits(t,e)}return u.__truncateAndSubFromPowerOfTwo(t,e,!1)}},{key:"asUintN",value:function(t,e){if(0===e.length)return e;if(t=s(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return u.__zero();if(e.sign){if(t>u.__kMaxLengthBits)throw new RangeError("BigInt too big");return u.__truncateAndSubFromPowerOfTwo(t,e,!1)}if(t>=u.__kMaxLengthBits)return e;var r=0|(t+29)/30;if(e.length<r)return e;var n=t%30;if(e.length==r){if(0===n)return e;var i=e.__digit(r-1);if(0==i>>>n)return e}return u.__truncateToNBits(t,e)}},{key:"ADD",value:function(t,e){if(t=u.__toPrimitive(t),e=u.__toPrimitive(e),"string"==typeof t)return"string"!=typeof e&&(e=e.toString()),t+e;if("string"==typeof e)return t.toString()+e;if(t=u.__toNumeric(t),e=u.__toNumeric(e),u.__isBigInt(t)&&u.__isBigInt(e))return u.add(t,e);if("number"==typeof t&&"number"==typeof e)return t+e;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(t,e){return u.__compare(t,e,0)}},{key:"LE",value:function(t,e){return u.__compare(t,e,1)}},{key:"GT",value:function(t,e){return u.__compare(t,e,2)}},{key:"GE",value:function(t,e){return u.__compare(t,e,3)}},{key:"EQ",value:function(t,e){for(;;){if(u.__isBigInt(t))return u.__isBigInt(e)?u.equal(t,e):u.EQ(e,t);if("number"==typeof t){if(u.__isBigInt(e))return u.__equalToNumber(e,t);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("string"==typeof t){if(u.__isBigInt(e))return t=u.__fromString(t),null!==t&&u.equal(t,e);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("boolean"==typeof t){if(u.__isBigInt(e))return u.__equalToNumber(e,+t);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("symbol"===r(t)){if(u.__isBigInt(e))return!1;if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else{if("object"!==r(t))return t==e;if("object"===r(e)&&e.constructor!==u)return t==e;t=u.__toPrimitive(t)}}}},{key:"NE",value:function(t,e){return!u.EQ(t,e)}},{key:"DataViewGetBigInt64",value:function(t,e){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return u.asIntN(64,u.DataViewGetBigUint64(t,e,r))}},{key:"DataViewGetBigUint64",value:function(t,e){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=r?[4,0]:[0,4],i=y(n,2),o=i[0],a=i[1],s=t.getUint32(e+o,r),c=t.getUint32(e+a,r),l=new u(3,!1);return l.__setDigit(0,1073741823&c),l.__setDigit(1,(268435455&s)<<2|c>>>30),l.__setDigit(2,s>>>28),l.__trim()}},{key:"DataViewSetBigInt64",value:function(t,e,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];u.DataViewSetBigUint64(t,e,r,n)}},{key:"DataViewSetBigUint64",value:function(t,e,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];r=u.asUintN(64,r);var i=0,o=0;if(0<r.length&&(o=r.__digit(0),1<r.length)){var a=r.__digit(1);o|=a<<30,i=a>>>2,2<r.length&&(i|=r.__digit(2)<<28)}var s=n?[4,0]:[0,4],c=y(s,2),l=c[0],f=c[1];t.setUint32(e+l,i,n),t.setUint32(e+f,o,n)}},{key:"__zero",value:function(){return new u(0,!1)}},{key:"__oneDigit",value:function(t,e){var r=new u(1,e);return r.__setDigit(0,t),r}},{key:"__decideRounding",value:function(t,e,r,n){if(0<e)return-1;var i;if(0>e)i=-e-1;else{if(0===r)return-1;r--,n=t.__digit(r),i=29}var o=1<<i;if(0==(n&o))return-1;if(o-=1,0!=(n&o))return 1;for(;0<r;)if(r--,0!==t.__digit(r))return 1;return 0}},{key:"__fromDouble",value:function(t){u.__kBitConversionDouble[0]=t;var e,r=2047&u.__kBitConversionInts[1]>>>20,n=r-1023,i=1+(0|n/30),o=new u(i,0>t),a=1048575&u.__kBitConversionInts[1]|1048576,s=u.__kBitConversionInts[0],c=20,l=n%30,f=0;if(l<c){var p=c-l;f=p+32,e=a>>>p,a=a<<32-p|s>>>p,s<<=32-p}else if(l===c)f=32,e=a,a=s,s=0;else{var h=l-c;f=32-h,e=a<<h|s>>>32-h,a=s<<h,s=0}o.__setDigit(i-1,e);for(var d=i-2;0<=d;d--)0<f?(f-=30,e=a>>>2,a=a<<30|s>>>2,s<<=30):e=0,o.__setDigit(d,e);return o.__trim()}},{key:"__isWhitespace",value:function(t){return!!(13>=t&&9<=t)||(159>=t?32==t:131071>=t?160==t||5760==t:196607>=t?(t&=131071,10>=t||40==t||41==t||47==t||95==t||4096==t):65279==t)}},{key:"__fromString",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=0,n=t.length,i=0;if(i===n)return u.__zero();for(var o=t.charCodeAt(i);u.__isWhitespace(o);){if(++i===n)return u.__zero();o=t.charCodeAt(i)}if(43===o){if(++i===n)return null;o=t.charCodeAt(i),r=1}else if(45===o){if(++i===n)return null;o=t.charCodeAt(i),r=-1}if(0===e){if(e=10,48===o){if(++i===n)return u.__zero();if(o=t.charCodeAt(i),88===o||120===o){if(e=16,++i===n)return null;o=t.charCodeAt(i)}else if(79===o||111===o){if(e=8,++i===n)return null;o=t.charCodeAt(i)}else if(66===o||98===o){if(e=2,++i===n)return null;o=t.charCodeAt(i)}}}else if(16===e&&48===o){if(++i===n)return u.__zero();if(o=t.charCodeAt(i),88===o||120===o){if(++i===n)return null;o=t.charCodeAt(i)}}if(0!==r&&10!==e)return null;for(;48===o;){if(++i===n)return u.__zero();o=t.charCodeAt(i)}var a=n-i,s=u.__kMaxBitsPerChar[e],c=u.__kBitsPerCharTableMultiplier-1;if(a>1073741824/s)return null;var l=s*a+c>>>u.__kBitsPerCharTableShift,f=new u(0|(l+29)/30,!1),p=10>e?e:10,h=10<e?e-10:0;if(0==(e&e-1)){s>>=u.__kBitsPerCharTableShift;var d=[],g=[],y=!1;do{for(var m,b=0,v=0;;){if(m=void 0,o-48>>>0<p)m=o-48;else{if(!((32|o)-97>>>0<h)){y=!0;break}m=(32|o)-87}if(v+=s,b=b<<s|m,++i===n){y=!0;break}if(o=t.charCodeAt(i),30<v+s)break}d.push(b),g.push(v)}while(!y);u.__fillFromParts(f,d,g)}else{f.__initializeDigits();var _=!1,w=0;do{for(var A,I=0,C=1;;){if(A=void 0,o-48>>>0<p)A=o-48;else{if(!((32|o)-97>>>0<h)){_=!0;break}A=(32|o)-87}var E=C*e;if(1073741823<E)break;if(C=E,I=I*e+A,w++,++i===n){_=!0;break}o=t.charCodeAt(i)}c=30*u.__kBitsPerCharTableMultiplier-1;var S=0|(s*w+c>>>u.__kBitsPerCharTableShift)/30;f.__inplaceMultiplyAdd(C,I,S)}while(!_)}if(i!==n){if(!u.__isWhitespace(o))return null;for(i++;i<n;i++)if(o=t.charCodeAt(i),!u.__isWhitespace(o))return null}return f.sign=-1===r,f.__trim()}},{key:"__fillFromParts",value:function(t,e,r){for(var n=0,i=0,o=0,a=e.length-1;0<=a;a--){var s=e[a],u=r[a];i|=s<<o,o+=u,30===o?(t.__setDigit(n++,i),o=0,i=0):30<o&&(t.__setDigit(n++,1073741823&i),o-=30,i=s>>>u-o)}if(0!==i){if(n>=t.length)throw new Error("implementation bug");t.__setDigit(n++,i)}for(;n<t.length;n++)t.__setDigit(n,0)}},{key:"__toStringBasePowerOfTwo",value:function(t,e){var r=t.length,n=e-1;n=(85&n>>>1)+(85&n),n=(51&n>>>2)+(51&n),n=(15&n>>>4)+(15&n);var i=n,o=e-1,a=t.__digit(r-1),s=u.__clz30(a),c=0|(30*r-s+i-1)/i;if(t.sign&&c++,268435456<c)throw new Error("string too long");for(var l=Array(c),f=c-1,p=0,h=0,d=0;d<r-1;d++){var g=t.__digit(d),y=(p|g<<h)&o;l[f--]=u.__kConversionChars[y];var m=i-h;for(p=g>>>m,h=30-m;h>=i;)l[f--]=u.__kConversionChars[p&o],p>>>=i,h-=i}var b=(p|a<<h)&o;for(l[f--]=u.__kConversionChars[b],p=a>>>i-h;0!==p;)l[f--]=u.__kConversionChars[p&o],p>>>=i;if(t.sign&&(l[f--]="-"),-1!==f)throw new Error("implementation bug");return l.join("")}},{key:"__toStringGeneric",value:function(t,e,r){var n=t.length;if(0===n)return"";if(1===n){var i=t.__unsignedDigit(0).toString(e);return!1===r&&t.sign&&(i="-"+i),i}var o=30*n-u.__clz30(t.__digit(n-1)),a=u.__kMaxBitsPerChar[e],s=a-1,c=o*u.__kBitsPerCharTableMultiplier;c+=s-1,c=0|c/s;var l,f,p=c+1>>1,h=u.exponentiate(u.__oneDigit(e,!1),u.__oneDigit(p,!1)),d=h.__unsignedDigit(0);if(1===h.length&&32767>=d){l=new u(t.length,!1),l.__initializeDigits();for(var g,y=0,m=2*t.length-1;0<=m;m--)g=y<<15|t.__halfDigit(m),l.__setHalfDigit(m,0|g/d),y=0|g%d;f=y.toString(e)}else{var b=u.__absoluteDivLarge(t,h,!0,!0);l=b.quotient;var v=b.remainder.__trim();f=u.__toStringGeneric(v,e,!0)}l.__trim();for(var _=u.__toStringGeneric(l,e,!0);f.length<p;)f="0"+f;return!1===r&&t.sign&&(_="-"+_),_+f}},{key:"__unequalSign",value:function(t){return t?-1:1}},{key:"__absoluteGreater",value:function(t){return t?-1:1}},{key:"__absoluteLess",value:function(t){return t?1:-1}},{key:"__compareToBigInt",value:function(t,e){var r=t.sign;if(r!==e.sign)return u.__unequalSign(r);var n=u.__absoluteCompare(t,e);return 0<n?u.__absoluteGreater(r):0>n?u.__absoluteLess(r):0}},{key:"__compareToNumber",value:function(t,r){if(u.__isOneDigitInt(r)){var n=t.sign,i=0>r;if(n!==i)return u.__unequalSign(n);if(0===t.length){if(i)throw new Error("implementation bug");return 0===r?0:-1}if(1<t.length)return u.__absoluteGreater(n);var o=e(r),a=t.__unsignedDigit(0);return a>o?u.__absoluteGreater(n):a<o?u.__absoluteLess(n):0}return u.__compareToDouble(t,r)}},{key:"__compareToDouble",value:function(t,e){if(e!==e)return e;if(e===1/0)return-1;if(e===-1/0)return 1;var r=t.sign;if(r!==0>e)return u.__unequalSign(r);if(0===e)throw new Error("implementation bug: should be handled elsewhere");if(0===t.length)return-1;u.__kBitConversionDouble[0]=e;var n=2047&u.__kBitConversionInts[1]>>>20;if(2047==n)throw new Error("implementation bug: handled elsewhere");var i=n-1023;if(0>i)return u.__absoluteGreater(r);var o=t.length,a=t.__digit(o-1),s=u.__clz30(a),c=30*o-s,l=i+1;if(c<l)return u.__absoluteLess(r);if(c>l)return u.__absoluteGreater(r);var f=1048576|1048575&u.__kBitConversionInts[1],p=u.__kBitConversionInts[0],h=20,d=29-s;if(d!==(0|(c-1)%30))throw new Error("implementation bug");var g,y=0;if(d<h){var m=h-d;y=m+32,g=f>>>m,f=f<<32-m|p>>>m,p<<=32-m}else if(d===h)y=32,g=f,f=p,p=0;else{var b=d-h;y=32-b,g=f<<b|p>>>32-b,f=p<<b,p=0}if(a>>>=0,g>>>=0,a>g)return u.__absoluteGreater(r);if(a<g)return u.__absoluteLess(r);for(var v=o-2;0<=v;v--){0<y?(y-=30,g=f>>>2,f=f<<30|p>>>2,p<<=30):g=0;var _=t.__unsignedDigit(v);if(_>g)return u.__absoluteGreater(r);if(_<g)return u.__absoluteLess(r)}if(0!==f||0!==p){if(0===y)throw new Error("implementation bug");return u.__absoluteLess(r)}return 0}},{key:"__equalToNumber",value:function(t,r){return u.__isOneDigitInt(r)?0===r?0===t.length:1===t.length&&t.sign===0>r&&t.__unsignedDigit(0)===e(r):0===u.__compareToDouble(t,r)}},{key:"__comparisonResultToBool",value:function(t,e){return 0===e?0>t:1===e?0>=t:2===e?0<t:3===e?0<=t:void 0}},{key:"__compare",value:function(t,e,r){if(t=u.__toPrimitive(t),e=u.__toPrimitive(e),"string"==typeof t&&"string"==typeof e)switch(r){case 0:return t<e;case 1:return t<=e;case 2:return t>e;case 3:return t>=e}if(u.__isBigInt(t)&&"string"==typeof e)return e=u.__fromString(e),null!==e&&u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if("string"==typeof t&&u.__isBigInt(e))return t=u.__fromString(t),null!==t&&u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if(t=u.__toNumeric(t),e=u.__toNumeric(e),u.__isBigInt(t)){if(u.__isBigInt(e))return u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if("number"!=typeof e)throw new Error("implementation bug");return u.__comparisonResultToBool(u.__compareToNumber(t,e),r)}if("number"!=typeof t)throw new Error("implementation bug");if(u.__isBigInt(e))return u.__comparisonResultToBool(u.__compareToNumber(e,t),2^r);if("number"!=typeof e)throw new Error("implementation bug");return 0===r?t<e:1===r?t<=e:2===r?t>e:3===r?t>=e:void 0}},{key:"__absoluteAdd",value:function(t,e,r){if(t.length<e.length)return u.__absoluteAdd(e,t,r);if(0===t.length)return t;if(0===e.length)return t.sign===r?t:u.unaryMinus(t);var n=t.length;(0===t.__clzmsd()||e.length===t.length&&0===e.__clzmsd())&&n++;for(var i,o=new u(n,r),a=0,s=0;s<e.length;s++)i=t.__digit(s)+e.__digit(s)+a,a=i>>>30,o.__setDigit(s,1073741823&i);for(;s<t.length;s++){var c=t.__digit(s)+a;a=c>>>30,o.__setDigit(s,1073741823&c)}return s<o.length&&o.__setDigit(s,a),o.__trim()}},{key:"__absoluteSub",value:function(t,e,r){if(0===t.length)return t;if(0===e.length)return t.sign===r?t:u.unaryMinus(t);for(var n,i=new u(t.length,r),o=0,a=0;a<e.length;a++)n=t.__digit(a)-e.__digit(a)-o,o=1&n>>>30,i.__setDigit(a,1073741823&n);for(;a<t.length;a++){var s=t.__digit(a)-o;o=1&s>>>30,i.__setDigit(a,1073741823&s)}return i.__trim()}},{key:"__absoluteAddOne",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length;null===r?r=new u(n,e):r.sign=e;for(var i,o=1,a=0;a<n;a++)i=t.__digit(a)+o,o=i>>>30,r.__setDigit(a,1073741823&i);return 0!==o&&r.__setDigitGrow(n,1),r}},{key:"__absoluteSubOne",value:function(t,e){var r=t.length;e=e||r;for(var n,i=new u(e,!1),o=1,a=0;a<r;a++)n=t.__digit(a)-o,o=1&n>>>30,i.__setDigit(a,1073741823&n);if(0!==o)throw new Error("implementation bug");for(var s=r;s<e;s++)i.__setDigit(s,0);return i}},{key:"__absoluteAnd",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=o;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)&e.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteAndNot",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;n<i&&(o=n);var a=n;null===r?r=new u(a,!1):a=r.length;for(var s=0;s<o;s++)r.__setDigit(s,t.__digit(s)&~e.__digit(s));for(;s<n;s++)r.__setDigit(s,t.__digit(s));for(;s<a;s++)r.__setDigit(s,0);return r}},{key:"__absoluteOr",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=n;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)|e.__digit(l));for(;l<n;l++)r.__setDigit(l,t.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteXor",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=n;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)^e.__digit(l));for(;l<n;l++)r.__setDigit(l,t.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteCompare",value:function(t,e){var r=t.length-e.length;if(0!=r)return r;for(var n=t.length-1;0<=n&&t.__digit(n)===e.__digit(n);)n--;return 0>n?0:t.__unsignedDigit(n)>e.__unsignedDigit(n)?1:-1}},{key:"__multiplyAccumulate",value:function(t,e,r,n){if(0!==e){for(var i=32767&e,o=e>>>15,a=0,s=0,c=0;c<t.length;c++,n++){var l=r.__digit(n),f=t.__digit(c),p=32767&f,h=f>>>15,d=u.__imul(p,i),g=u.__imul(p,o),y=u.__imul(h,i),m=u.__imul(h,o);l+=s+d+a,a=l>>>30,l&=1073741823,l+=((32767&g)<<15)+((32767&y)<<15),a+=l>>>30,s=m+(g>>>15)+(y>>>15),r.__setDigit(n,1073741823&l)}for(;0!==a||0!==s;n++){var b=r.__digit(n);b+=a+s,s=0,a=b>>>30,r.__setDigit(n,1073741823&b)}}}},{key:"__internalMultiplyAdd",value:function(t,e,r,n,i){for(var o=r,a=0,s=0;s<n;s++){var c=t.__digit(s),l=u.__imul(32767&c,e),f=u.__imul(c>>>15,e),p=l+((32767&f)<<15)+a+o;o=p>>>30,a=f>>>15,i.__setDigit(s,1073741823&p)}if(i.length>n)for(i.__setDigit(n++,o+a);n<i.length;)i.__setDigit(n++,0);else if(0!==o+a)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=new u(t.length,!1));for(var n=0,i=2*t.length-1;0<=i;i-=2){var o=(n<<15|t.__halfDigit(i))>>>0,a=0|o/e;n=0|o%e,o=(n<<15|t.__halfDigit(i-1))>>>0;var s=0|o/e;n=0|o%e,r.__setDigit(i>>>1,a<<15|s)}return r}},{key:"__absoluteModSmall",value:function(t,e){for(var r,n=0,i=2*t.length-1;0<=i;i--)r=(n<<15|t.__halfDigit(i))>>>0,n=0|r%e;return n}},{key:"__absoluteDivLarge",value:function(t,e,r,n){var i=e.__halfDigitLength(),o=e.length,a=t.__halfDigitLength()-i,s=null;r&&(s=new u(a+2>>>1,!1),s.__initializeDigits());var c=new u(i+2>>>1,!1);c.__initializeDigits();var l=u.__clz15(e.__halfDigit(i-1));0<l&&(e=u.__specialLeftShift(e,l,0));for(var f=u.__specialLeftShift(t,l,1),p=e.__halfDigit(i-1),h=0,d=a;0<=d;d--){var g=32767,y=f.__halfDigit(d+i);if(y!==p){var m=(y<<15|f.__halfDigit(d+i-1))>>>0;g=0|m/p;for(var b=0|m%p,v=e.__halfDigit(i-2),_=f.__halfDigit(d+i-2);u.__imul(g,v)>>>0>(b<<16|_)>>>0&&(g--,b+=p,!(32767<b)););}u.__internalMultiplyAdd(e,g,0,o,c);var w=f.__inplaceSub(c,d,i+1);0!==w&&(w=f.__inplaceAdd(e,d,i),f.__setHalfDigit(d+i,32767&f.__halfDigit(d+i)+w),g--),r&&(1&d?h=g<<15:s.__setDigit(d>>>1,h|g))}if(n)return f.__inplaceRightShift(l),r?{quotient:s,remainder:f}:f;if(r)return s;throw new Error("unreachable")}},{key:"__clz15",value:function(t){return u.__clz30(t)-15}},{key:"__specialLeftShift",value:function(t,e,r){var n=t.length,i=new u(n+r,!1);if(0===e){for(var o=0;o<n;o++)i.__setDigit(o,t.__digit(o));return 0<r&&i.__setDigit(n,0),i}for(var a,s=0,c=0;c<n;c++)a=t.__digit(c),i.__setDigit(c,1073741823&a<<e|s),s=a>>>30-e;return 0<r&&i.__setDigit(n,s),i}},{key:"__leftShiftByAbsolute",value:function(t,e){var r=u.__toShiftAmount(e);if(0>r)throw new RangeError("BigInt too big");var n=0|r/30,i=r%30,o=t.length,a=0!==i&&0!=t.__digit(o-1)>>>30-i,s=o+n+(a?1:0),c=new u(s,t.sign);if(0===i){for(var l=0;l<n;l++)c.__setDigit(l,0);for(;l<s;l++)c.__setDigit(l,t.__digit(l-n))}else{for(var f=0,p=0;p<n;p++)c.__setDigit(p,0);for(var h,d=0;d<o;d++)h=t.__digit(d),c.__setDigit(d+n,1073741823&h<<i|f),f=h>>>30-i;if(a)c.__setDigit(o+n,f);else if(0!==f)throw new Error("implementation bug")}return c.__trim()}},{key:"__rightShiftByAbsolute",value:function(t,e){var r=t.length,n=t.sign,i=u.__toShiftAmount(e);if(0>i)return u.__rightShiftByMaximum(n);var o=0|i/30,a=i%30,s=r-o;if(0>=s)return u.__rightShiftByMaximum(n);var c=!1;if(n)if(0!=(t.__digit(o)&(1<<a)-1))c=!0;else for(var l=0;l<o;l++)if(0!==t.__digit(l)){c=!0;break}if(c&&0===a){var f=t.__digit(r-1);0==~f&&s++}var p=new u(s,n);if(0===a){p.__setDigit(s-1,0);for(var h=o;h<r;h++)p.__setDigit(h-o,t.__digit(h))}else{for(var d,g=t.__digit(o)>>>a,y=r-o-1,m=0;m<y;m++)d=t.__digit(m+o+1),p.__setDigit(m,1073741823&d<<30-a|g),g=d>>>a;p.__setDigit(y,g)}return c&&(p=u.__absoluteAddOne(p,!0,p)),p.__trim()}},{key:"__rightShiftByMaximum",value:function(t){return t?u.__oneDigit(1,!0):u.__zero()}},{key:"__toShiftAmount",value:function(t){if(1<t.length)return-1;var e=t.__unsignedDigit(0);return e>u.__kMaxLengthBits?-1:e}},{key:"__toPrimitive",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==r(t))return t;if(t.constructor===u)return t;if("undefined"!=typeof Symbol&&"symbol"===r(Symbol.toPrimitive)){var n=t[Symbol.toPrimitive];if(n){var i=n(e);if("object"!==r(i))return i;throw new TypeError("Cannot convert object to primitive value")}}var o=t.valueOf;if(o){var a=o.call(t);if("object"!==r(a))return a}var s=t.toString;if(s){var c=s.call(t);if("object"!==r(c))return c}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(t){return u.__isBigInt(t)?t:+t}},{key:"__isBigInt",value:function(t){return"object"===r(t)&&null!==t&&t.constructor===u}},{key:"__truncateToNBits",value:function(t,e){for(var r=0|(t+29)/30,n=new u(r,e.sign),i=r-1,o=0;o<i;o++)n.__setDigit(o,e.__digit(o));var a=e.__digit(i);if(0!=t%30){var s=32-t%30;a=a<<s>>>s}return n.__setDigit(i,a),n.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(t,e,r){for(var n,i=Math.min,o=0|(t+29)/30,a=new u(o,r),s=0,c=o-1,l=0,f=i(c,e.length);s<f;s++)n=0-e.__digit(s)-l,l=1&n>>>30,a.__setDigit(s,1073741823&n);for(;s<c;s++)a.__setDigit(s,0|1073741823&-l);var p,h=c<e.length?e.__digit(c):0,d=t%30;if(0===d)p=0-h-l,p&=1073741823;else{var g=32-d;h=h<<g>>>g;var y=1<<32-g;p=y-h-l,p&=y-1}return a.__setDigit(c,p),a.__trim()}},{key:"__digitPow",value:function(t,e){for(var r=1;0<e;)1&e&&(r*=t),e>>>=1,t*=t;return r}},{key:"__isOneDigitInt",value:function(t){return(1073741823&t)===t}}]),u}(p(Array));return I.__kMaxLength=33554432,I.__kMaxLengthBits=I.__kMaxLength<<5,I.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],I.__kBitsPerCharTableShift=5,I.__kBitsPerCharTableMultiplier=1<<I.__kBitsPerCharTableShift,I.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],I.__kBitConversionBuffer=new ArrayBuffer(8),I.__kBitConversionDouble=new Float64Array(I.__kBitConversionBuffer),I.__kBitConversionInts=new Int32Array(I.__kBitConversionBuffer),I.__clz30=e?function(t){return e(t)-2}:function(t){var e=Math.LN2,r=Math.log;return 0===t?30:0|29-(0|r(t>>>0)/e)},I.__imul=t||function(t,e){return 0|t*e},I}))},ad49:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=P,e.payFee=x,e.prepareSigningEntries=O,e.setupInputCell=M,e.transfer=I,e.transferCompatible=C;var n=r("c1f3"),i=r("4b0a"),o=r("1c87"),a=y(r("9a80")),s=r("4432"),u=r("0b92"),c=r("832d"),l=r("329b"),f=r("a2e8"),p=r("57b3"),h=r("03e3"),d=r("6cf0"),g=r("8130");function y(t){return t&&t.__esModule?t:{default:t}}const{ScriptValue:m}=u.values,{parseEpoch:b,maximumAbsoluteEpochSince:v,generateAbsoluteEpochSince:_,validateSince:w}=u.since,A=class{constructor(t,e,{config:r,queryOptions:n={},tipHeader:i,NodeRPC:a=g.RPC}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,f.getConfig)();const s=(0,o.parseFromInfo)(t,{config:r}),u=s.fromScript;this.multisigScript=s.multisigScript,this.fromScript=u,this.config=r,this.tipHeader=i,i&&(this.tipSinceValidationInfo={blockNumber:i.number,epoch:i.epoch,median_timestamp:""}),this.rpc=new a(e.uri),n={...n,lock:this.fromScript};let p=(0,l.List)([]);if((0,c.isSecp256k1Blake160MultisigScript)(u,r)){const t={codeHash:u.codeHash,hashType:u.hashType,args:u.args.slice(0,42)};p=p.push(e.collector({lock:t,argsLen:n.argsLen||28,type:n.type||"empty",data:n.data||"0x"})),n.type||n.data&&"any"!==n.data||(p=p.push(e.collector({lock:t,type:(0,c.generateDaoScript)(r),data:"any"})),p=p.push(e.collector({lock:t,argsLen:28,type:(0,c.generateDaoScript)(r),data:"any"})))}else(0,c.isSecp256k1Blake160Script)(u,r)&&(n.type||n.data&&"any"!==n.data||(p=p.push(e.collector({lock:u,type:(0,c.generateDaoScript)(r),data:"any"}))));this.cellCollectors=p}async*collect(){for(const t of this.cellCollectors)for await(const e of t.collect()){const t=e.cellOutput.lock;let r,n,i,o,a;if(58===t.args.length){const n=await this.rpc.getHeader(e.blockHash);r="0x"+T(t.args).toString(16),a={epoch:n.epoch,blockNumber:n.number,median_timestamp:""}}if((0,c.isDaoScript)(e.cellOutput.type,this.config)){if("0x0000000000000000"===e.data)continue;const t=await this.rpc.getTransaction(e.outPoint.txHash);o=t.txStatus.blockHash;const a=t.transaction,u=a.inputs[+e.outPoint.index].previousOutput;i=(await this.rpc.getTransaction(u.txHash)).txStatus.blockHash;const c=await this.rpc.getHeader(i),l=await this.rpc.getHeader(o);let f="0x"+(0,s.calculateDaoEarliestSinceCompatible)(c.epoch,l.epoch).toString(16);n=(0,s.calculateMaximumWithdrawCompatible)(e,c.dao,l.dao);const p=b(l.epoch),d={number:p.number+4,length:p.length,index:p.index};if(f=v(f,_(d)),r){const t=(0,h.parseSinceCompatible)(r);if(!1!==t.relative||"epochNumber"!==t.type)continue;try{r=v(f,r)}catch{r=f}}else r=f}if("blockTimestamp"===(0,h.parseSinceCompatible)(r).type||this.tipHeader&&!w(r,this.tipSinceValidationInfo,a))continue;const u={...e,since:r,depositBlockHash:i,withdrawBlockHash:o,sinceValidationInfo:a};u.cellOutput.capacity="0x"+(n||d.BI.from(e.cellOutput.capacity)).toString(16),yield u}}};async function I(t,e,r,n,i,{config:o,requireToAddress:a=!0,assertAmountEnough:s=!0,LocktimeCellCollector:u=A}={}){const c=await C(t,e,r,n,i,{config:o,requireToAddress:a,assertAmountEnough:s,LocktimeCellCollector:u});let l,f;return c instanceof Array?(l=c[0],f=BigInt(c[1].toString()),[l,f]):(l=c,l)}async function C(t,e,r,n,i,{config:o,requireToAddress:a=!0,assertAmountEnough:s=!0,LocktimeCellCollector:u=A}={}){let c=d.BI.from(n);for(const[l,f]of e.entries()){const e=await E(t,f,0===l?r:void 0,c,i,{config:o,requireToAddress:0===l&&a,assertAmountEnough:!1,LocktimeCellCollector:u});if(t=e[0],c=e[1],c.eq(0))return s?t:[t,d.BI.from(c)]}if(s)throw new Error("Not enough capacity in from addresses!");return[t,d.BI.from(c)]}async function E(t,e,r,a,s,{config:p,requireToAddress:h=!0,assertAmountEnough:g=!0,LocktimeCellCollector:y=A,changeAddress:b}){p=p||(0,f.getConfig)();const{fromScript:v}=(0,o.parseFromInfo)(e,{config:p});if(!(0,c.isSecp256k1Blake160MultisigScript)(v,p)&&!(0,c.isSecp256k1Blake160Script)(v,p))throw new Error("fromInfo not supported!");if(h&&!r)throw new Error("You must provide a to address!");let _=d.BI.from(a||0);if(r){const e=(0,n.parseAddress)(r,{config:p});t=t.update("outputs",t=>t.push({cellOutput:{capacity:"0x"+_.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0}))}const w=t.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let I=w?w.index+1:0;for(;I<t.get("outputs").size&&_.gt(0);++I){const e=t.get("outputs").get(I);if(new m(e.cellOutput.lock,{validate:!1}).equals(new m(v,{validate:!1}))){const r=d.BI.from(e.cellOutput.capacity);let i;_.gte(r)?i=r:(i=r.sub((0,n.minimalCellCapacityCompatible)(e)),i.gt(_)&&(i=_)),_=_.sub(i);const o=JSON.parse(JSON.stringify(e));o.cellOutput.capacity="0x"+r.sub(i).toString(16),t=t.update("outputs",t=>t.update(I,()=>o))}}if(t=t.update("outputs",t=>t.filter(t=>!d.BI.from(t.cellOutput.capacity).eq(0))),_.gt(0)){const r=t.get("cellProvider");if(!r)throw new Error("cell provider is missing!");const o=b?(0,n.parseAddress)(b,{config:p}):v,a={cellOutput:{capacity:"0x0",lock:o,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let f=d.BI.from(0),h=(0,l.Set)();for(const e of t.get("inputs"))h=h.add(`${e.outPoint.txHash}_${e.outPoint.index}`);const g=new y(e,r,{config:p,tipHeader:s});for await(const s of g.collect()){const r=s;if(h.has(`${r.outPoint.txHash}_${r.outPoint.index}`))continue;let o;if((0,c.isSecp256k1Blake160MultisigScript)(v,p)){const t=r.cellOutput.lock.args;o=58===t.length?d.BI.from(T(t)):void 0}let l="0x";if((0,c.isDaoScript)(r.cellOutput.type,p)){const e=p.SCRIPTS.DAO;t=(0,c.addCellDep)(t,{depType:e.DEP_TYPE,outPoint:{txHash:e.TX_HASH,index:e.INDEX}}),t=t.update("headerDeps",t=>t.push(r.depositBlockHash,r.withdrawBlockHash));const n=t.get("headerDeps").size-2,o={inputType:i.bytes.hexify(i.number.Uint64.pack(n))};l=i.bytes.hexify(u.blockchain.WitnessArgs.pack(o))}t=await B(t,r,(0,c.isSecp256k1Blake160MultisigScript)(v,p)?Object.assign({},e,{since:o}):e,{config:p,defaultWitness:l,since:r.since});const g=d.BI.from(r.cellOutput.capacity);let y=g;if(y.gt(_)&&(y=_),_=_.sub(y),f=f.add(g).sub(y),(0,c.isDaoScript)(r.cellOutput.type,p)&&(t=t.update("fixedEntries",e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2}))),_.eq(0)&&(f.eq(0)||f.gt((0,n.minimalCellCapacityCompatible)(a))))break}f.gt(0)&&(a.cellOutput.capacity="0x"+f.toString(16),t=t.update("outputs",t=>t.push(a)))}if(!g)return[t,_];if(_.gt(0))throw new Error("Not enough capacity in from address!");return t}async function S(t,e,r,a,s,{config:p,LocktimeCellCollector:h=A,enableDeductCapacity:g=!0}){p=p||(0,f.getConfig)();let y=d.BI.from(r);const b=d.BI.from(s);if(g)for(const i of e){const e=(0,o.parseFromInfo)(i,{config:p}).fromScript;if(!(0,c.isSecp256k1Blake160MultisigScript)(e,p)&&!(0,c.isSecp256k1Blake160Script)(e,p))continue;const r=t.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let a=r?r.index+1:0;for(;a<t.get("outputs").size&&y.gt(0);++a){const r=t.get("outputs").get(a);if(new m(r.cellOutput.lock,{validate:!1}).equals(new m(e,{validate:!1}))){const e=JSON.parse(JSON.stringify(r)),i=d.BI.from(e.cellOutput.capacity);let o;y.gte(i)?o=i:(o=i.sub((0,n.minimalCellCapacityCompatible)(e)),o.gt(y)&&(o=y)),y=y.sub(o),e.cellOutput.capacity="0x"+i.sub(o).toString(16),t=t.update("outputs",t=>t.update(a,()=>e))}}t=t.update("outputs",t=>t.filter(t=>!d.BI.from(t.cellOutput.capacity).eq(0)))}let v=d.BI.from(0);if(y.gt(0)){const r=t.get("cellProvider");if(!r)throw new Error("cell provider is missing!");const n=t=>`${t.outPoint.txHash}_${t.outPoint.index}`;let s=(0,l.Set)();for(const e of t.get("inputs"))s=s.add(n(e));for(const l of e){const e=(0,o.parseFromInfo)(l,{config:p}).fromScript,f=new h(l,r,{config:p,tipHeader:a});for await(const r of f.collect()){const o=r;if(s.has(n(o)))continue;let a,f="0x";if((0,c.isDaoScript)(o.cellOutput.type,p)){const e=p.SCRIPTS.DAO;t=(0,c.addCellDep)(t,{depType:e.DEP_TYPE,outPoint:{txHash:e.TX_HASH,index:e.INDEX}}),t=t.update("headerDeps",t=>t.push(o.depositBlockHash,o.withdrawBlockHash));const r=t.get("headerDeps").size-2,n={inputType:i.bytes.hexify(i.number.Uint64.pack(r))};f=i.bytes.hexify(u.blockchain.WitnessArgs.pack(n))}if((0,c.isSecp256k1Blake160MultisigScript)(e,p)){const t=o.cellOutput.lock.args;a=58===t.length?d.BI.from(T(t)):void 0}t=await B(t,o,Object.assign({},l,{since:a}),{config:p,defaultWitness:f,since:o.since});const h=d.BI.from(o.cellOutput.capacity);let g=h;if(g.gt(y)&&(g=y),y=y.sub(g),v=v.add(h).sub(g),(0,c.isDaoScript)(o.cellOutput.type,p)&&(t=t.update("fixedEntries",e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2}))),y.eq(0)&&(v.eq(0)||v.gt(b)))break}}}return{txSkeleton:t,capacity:d.BI.from(y.toString()),changeCapacity:d.BI.from(v.toString())}}async function k(t,e,r,n,i,{config:o,LocktimeCellCollector:a=A,enableDeductCapacity:s=!0}){const u=await S(t,e,r,n,i,{config:o,LocktimeCellCollector:a,enableDeductCapacity:s});return{txSkeleton:u.txSkeleton,capacity:u.capacity.toBigInt(),changeCapacity:u.changeCapacity.toBigInt()}}async function x(t,e,r,n,{config:i,LocktimeCellCollector:o=A}={}){return C(t,e,void 0,r,n,{config:i,requireToAddress:!1,LocktimeCellCollector:o})}function O(t,{config:e}={}){return e=e||(0,f.getConfig)(),t=(0,c.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160"),t=(0,c.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160_MULTISIG"),t}async function P(t,e,r,n,{config:i,LocktimeCellCollector:o=A}={}){if(i=i||(0,f.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const a=d.BI.from(t.get("outputs").get(e).cellOutput.capacity);return C(t,r,void 0,d.BI.from(a),n,{config:i,requireToAddress:!1,LocktimeCellCollector:o})}async function B(t,e,r,{config:n,since:i,defaultWitness:o="0x"}={}){return n=n||(0,f.getConfig)(),t=await M(t,e,r,{config:n,since:i,defaultWitness:o}),t=t.update("outputs",t=>t.remove(t.size-1)),t}async function M(t,e,r,{config:n,since:i,defaultWitness:o="0x"}={}){n=n||(0,f.getConfig)();const s=e.cellOutput.lock;if((0,c.isSecp256k1Blake160Script)(s,n))return a.default.setupInputCell(t,e,r,{config:n,defaultWitness:o,since:i});if((0,c.isSecp256k1Blake160MultisigScript)(s,n))return p.secp256k1Blake160Multisig.setupInputCell(t,e,r,{config:n,defaultWitness:o,since:i});throw new Error("Not supported input lock!")}function T(t){if(58!==t.length)throw new Error("Invalid multisig with since args!");return i.number.Uint64LE.unpack("0x"+t.slice(42))}e.CellCollector=A;var D={CellCollector:A,transfer:I,transferCompatible:C,payFee:x,prepareSigningEntries:O,injectCapacity:P,setupInputCell:M,injectCapacityWithoutChange:k,injectCapacityWithoutChangeCompatible:S};e.default=D},b0fd:function(t,e,r){r("d3b7"),r("a4d3"),r("e01a"),r("b636");var n=r("c8baa");function i(t){var e,r;function i(e,r){try{var a=t[e](r),s=a.value,u=s instanceof n;Promise.resolve(u?s.v:s).then((function(r){if(u){var n="return"===e?"return":"next";if(!s.k||r.done)return i(n,r);r=t[n](r).value}o(a.done?"return":"normal",r)}),(function(t){i("throw",t)}))}catch(t){o("throw",t)}}function o(t,n){switch(t){case"return":e.resolve({value:n,done:!0});break;case"throw":e.reject(n);break;default:e.resolve({value:n,done:!1})}(e=e.next)?i(e.key,e.arg):r=null}this._invoke=function(t,n){return new Promise((function(o,a){var s={key:t,arg:n,resolve:o,reject:a,next:null};r?r=r.next=s:(e=r=s,i(t,n))}))},"function"!=typeof t["return"]&&(this["return"]=void 0)}i.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},i.prototype.next=function(t){return this._invoke("next",t)},i.prototype["throw"]=function(t){return this._invoke("throw",t)},i.prototype["return"]=function(t){return this._invoke("return",t)},t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},b113:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.entropyToMnemonic=S,e.generateMnemonic=x,e.mnemonicToEntropy=E,e.mnemonicToSeed=C,e.mnemonicToSeedSync=I,e.validateMnemonic=k;var n=o(r("1c46")),i=o(r("d993"));function o(t){return t&&t.__esModule?t:{default:t}}const a=2048,s=2048,u=64,c=16,l=32,f=12,p=24,h="Invalid mnemonic",d="Invalid checksum",g="Entropy should be divisable by 4",y="Entropy should be shorter than "+(l+1),m="Entropy should be longer than "+(c-1),b="Words should be shorter than "+(p+1),v="Words should be longer than "+(f-1);if(i.default.length!==a)throw new Error(`Word list should have ${a} words, but ${i.default.length} received in fact`);function _(t){return t.reduce((t,e)=>t+e.toString(2).padStart(8,"0"),"")}function w(t){const e=8*t.length,r=e/32,i=n.default.createHash("sha256").update(t).digest();return _(i).slice(0,r)}function A(t=""){return"mnemonic"+t}function I(e="",r=""){const i=t.from(e.normalize("NFKD"),"utf8"),o=t.from(A(r.normalize("NFKD")),"utf8");return n.default.pbkdf2Sync(i,o,s,u,"sha512")}function C(e="",r=""){return new Promise((i,o)=>{try{const a=t.from(e.normalize("NFKD"),"utf8"),c=t.from(A(r.normalize("NFKD")),"utf8");n.default.pbkdf2(a,c,s,u,"sha512",(t,e)=>{t&&o(t),i(e)})}catch(a){o(a)}})}function E(e=""){const r=e.normalize("NFKD").split(" ");if(r.length<f)throw new Error(v);if(r.length>p)throw new Error(b);if(r.length%3!==0)throw new Error(h);const n=r.map(t=>{const e=i.default.indexOf(t);if(-1===e)throw new Error(h);return e.toString(2).padStart(11,"0")}).join(""),o=32*Math.floor(n.length/33),a=n.slice(0,o),s=n.slice(o),u=a.match(/(.{1,8})/g).map(t=>parseInt(t,2));if(u.length<c)throw new Error(m);if(u.length>l)throw new Error(y);if(u.length%4!==0)throw new Error(g);const _=t.from(u),A=w(_);if(A!==s)throw new Error(d);return"0x"+_.toString("hex")}function S(e){const r=t.from(e.slice(2),"hex");if(r.length<c)throw new TypeError(m);if(r.length>l)throw new TypeError(y);if(r.length%4!==0)throw new TypeError(g);const n=_(r),o=w(r),a=n+o,s=a.match(/(.{1,11})/g),u=s.map(t=>{const e=parseInt(t,2);return i.default[e]});return u.join(" ")}function k(t){try{E(t)}catch(e){return!1}return!0}function x(){const t=16,e="0x"+n.default.randomBytes(t).toString("hex");return S(e)}var O={entropyToMnemonic:S,mnemonicToEntropy:E,mnemonicToSeed:C,mnemonicToSeedSync:I,validateMnemonic:k,generateMnemonic:x};e.default=O}).call(this,r("1c35").Buffer)},b2eb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createP2PKHMessageGroup=f;var n=r("0b92"),i=r("c1f3"),o=r("4b0a"),a=r("6cf0");function s(t,e){const r=new Set;for(const o of e){const t=n.utils.ckbHash(n.blockchain.Script.pack(o));r.add(t)}const i=new Map;for(let o=0;o<t.length;o++){const e=n.utils.ckbHash(n.blockchain.Script.pack(t[o].cellOutput.lock));r.has(e)&&(void 0===i.get(e)&&i.set(e,[]),i.get(e).push(o))}return i}function u(t){const e=(0,i.createTransactionFromSkeleton)(t),r={cellDeps:e.cellDeps,headerDeps:e.headerDeps,inputs:e.inputs,outputs:e.outputs,outputsData:e.outputsData,version:e.version};return n.utils.ckbHash(n.blockchain.RawTransaction.pack(r))}const c=()=>{const t=new n.utils.CKBHasher;return{update:e=>t.update(e.buffer),digest:()=>o.bytes.bytify(t.digestHex())}};function l(t){return t instanceof Function?t():t}function f(t,e,{hasher:r=c}={}){const n=s(t.inputs.toArray(),e),i=u(t);if(e.length>1&&!(r instanceof Function))throw new Error("Must provide hasher producer when you have multiple locks to group.");const f=[];for(const s of n.keys()){const e=l(r),u=n.get(s),c=u[0],p=t.witnesses.get(c);if(void 0===p)throw new Error("Please fill witnesses with 0 first!");e.update(o.bytes.bytify(i));const h=new ArrayBuffer(8),d=new DataView(h),g=a.BI.from(o.bytes.bytify(p).length).toString(16);g.length<=8&&(d.setUint32(0,Number("0x"+g),!0),d.setUint32(4,Number("0x00000000"),!0)),g.length>8&&g.length<=16&&(d.setUint32(0,Number("0x"+g.slice(-8)),!0),d.setUint32(4,Number("0x"+g.slice(0,-8)),!0)),e.update(new Uint8Array(h)),e.update(o.bytes.bytify(p));for(let r=1;r<u.length;r++){const n=t.witnesses.get(u[r]);e.update(new Uint8Array(h)),e.update(o.bytes.bytify(n))}for(let r=t.inputs.toArray().length;r<t.witnesses.toArray().length;r++){const n=t.witnesses.get(r);e.update(new Uint8Array(h)),e.update(o.bytes.bytify(n))}const y=e.digest(),m={index:c,lock:t.inputs.get(c).cellOutput.lock,message:"0x"+Array.prototype.map.call(y,t=>("00"+t.toString(16)).slice(-2)).join("")};f.push(m)}return f}},b9b7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bitcoin=e.OmnilockWitnessLock=e.CellCollector=void 0,e.createOmnilockScript=y,e.default=void 0,e.prepareSigningEntries=k,e.setupInputCell=S;var n=r("4b0a"),i=r("0b92"),o=r("a2e8"),a=r("832d"),s=r("1c87"),u=r("3224"),c=r("be55"),l=r("c914"),f=h(r("64f2"));function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(p=function(t){return t?r:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=p(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}e.bitcoin=f;const{ScriptValue:d}=i.values;var g=function(t){return t[t["IdentityFlagsCkb"]=0]="IdentityFlagsCkb",t[t["IdentityFlagsEthereum"]=1]="IdentityFlagsEthereum",t[t["IdentityFlagsEos"]=2]="IdentityFlagsEos",t[t["IdentityFlagsTron"]=3]="IdentityFlagsTron",t[t["IdentityFlagsBitcoin"]=4]="IdentityFlagsBitcoin",t[t["IdentityFlagsDogecoin"]=5]="IdentityFlagsDogecoin",t[t["IdentityCkbMultisig"]=6]="IdentityCkbMultisig",t[t["IdentityFlagsEthereumDisplaying"]=18]="IdentityFlagsEthereumDisplaying",t[t["IdentityFlagsOwnerLock"]=252]="IdentityFlagsOwnerLock",t[t["IdentityFlagsExec"]=253]="IdentityFlagsExec",t[t["IdentityFlagsDl"]=254]="IdentityFlagsDl",t}(g||{});function y(t,e){const r=(null===e||void 0===e?void 0:e.config)||(0,o.getConfig)(),i=r.SCRIPTS.OMNILOCK;if(!i)throw new Error("OMNILOCK script config not found.");const a=[0],s=(()=>{const e=t.auth.flag;switch(e){case"ETHEREUM":return n.bytes.hexify(n.bytes.concat([g.IdentityFlagsEthereum],t.auth.content,a));case"SECP256K1_BLAKE160":return n.bytes.hexify(n.bytes.concat([g.IdentityFlagsCkb],t.auth.content,a));case"BITCOIN":return n.bytes.hexify(n.bytes.concat([g.IdentityFlagsBitcoin],f.decodeAddress(t.auth.content),a));default:throw new Error(`Not supported flag: ${e}.`)}})();return{codeHash:i.CODE_HASH,hashType:i.HASH_TYPE,args:s}}const m={pack:l.bytify,unpack:l.hexify},b=(0,c.createFixedHexBytesCodec)(21),v=(0,u.byteVecOf)(m),_=(0,u.table)({mask:(0,u.byteOf)(m),proof:v},["mask","proof"]),w=(0,u.vector)(_),A=(0,u.table)({identity:b,proofs:w},["identity","proofs"]),I=(0,u.option)(A),C=(0,u.table)({signature:c.BytesOpt,omni_identity:I,preimage:c.BytesOpt},["signature","omni_identity","preimage"]);e.OmnilockWitnessLock=C;const E=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,o.getConfig)(),this.fromScript=(0,s.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,a.isOmnilockScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function S(t,e,r,{config:s,defaultWitness:u="0x",since:c}={}){s=s||(0,o.getConfig)();const l=e.cellOutput.lock;if(!(0,a.isOmnilockScript)(l,s))throw new Error("Not OMNILOCK input!");t=t.update("inputs",t=>t.push(e));const f={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",t=>t.push(f)),c&&(t=t.update("inputSinces",e=>e.set(t.get("inputs").size-1,c))),t=t.update("witnesses",t=>t.push(u));const p=s.SCRIPTS.OMNILOCK,h=s.SCRIPTS.SECP256K1_BLAKE160;if(!p)throw new Error("OMNILOCK script not defined in config!");if(!h)throw new Error("SECP256K1_BLAKE160 script not defined in config!");const g={txHash:p.TX_HASH,index:p.INDEX},y={txHash:h.TX_HASH,index:h.INDEX};t=(0,a.addCellDep)(t,{outPoint:g,depType:p.DEP_TYPE}),t=(0,a.addCellDep)(t,{outPoint:y,depType:h.DEP_TYPE});const m=t.get("inputs").findIndex(t=>new d(t.cellOutput.lock,{validate:!1}).equals(new d(l,{validate:!1})));if(-1!==m){while(m>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));let e=t.get("witnesses").get(m);const r={lock:a.OMNILOCK_SIGNATURE_PLACEHOLDER};e=n.bytes.hexify(i.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",t=>t.set(m,e))}return t}function k(t,{config:e}={}){return e=e||(0,o.getConfig)(),(0,a.prepareSigningEntries)(t,e,"OMNILOCK")}e.CellCollector=E;var x={prepareSigningEntries:k,setupInputCell:S,CellCollector:E,OmnilockWitnessLock:C,createOmnilockScript:y};e.default=x},bc12:function(t,e,r){"use strict";function n(t){if(!/^(0x)?([0-9a-fA-F][0-9a-fA-F])*$/.test(t))throw new Error("Invalid hex string!");t.startsWith("0x")&&(t=t.slice(2));const e=[];while(t.length>=2)e.push(parseInt(t.slice(0,2),16)),t=t.slice(2);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.hexToByteArray=n},be1a:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CKBIndexerTransactionCollector=void 0;var n=r("0b92"),i=r("e4f07"),o=s(r("142e"));function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function u(t,e,r){return e=c(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=l(t,"string");return"symbol"===typeof e?e:String(e)}function l(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}class f extends n.indexer.TransactionCollector{constructor(t,e,r,n){super(t,e,n),u(this,"getTransactionListFromRpc",async t=>{const e=t.objects.map(t=>t.txHash),r=await o.requestBatchTransactionWithStatus(this.CKBRpcUrl,e).then(e=>e.map((e,r)=>{if(!this.filterOptions.skipMissing&&!e.transaction)throw new Error(`Transaction ${t.objects[r].txHash} is missing!`);return e}));return r}),u(this,"isLockArgsLenMatched",(t,e)=>!e||("any"===e||(-1===e||o.getHexStringBytes(t)===e))),u(this,"isCellScriptArgsValid",t=>{if(this.queries.lock){const e=(0,i.instanceOfScriptWrapper)(this.queries.lock)?this.queries.lock.argsLen:this.queries.argsLen;if(!this.isLockArgsLenMatched(t.lock.args,e))return!1}if(this.queries.type&&"empty"!==this.queries.type){var e;const r=(0,i.instanceOfScriptWrapper)(this.queries.type)?this.queries.type.argsLen:this.queries.argsLen;if(!this.isLockArgsLenMatched(null===(e=t.type)||void 0===e?void 0:e.args,r))return!1}return!this.queries.type||"empty"!==this.queries.type||!t.type}),u(this,"filterByIoType",(t,e)=>"both"===e?t:"input"===e||"output"===e?t.filter(t=>t.ioType===e||"both"===t.ioType):t),u(this,"filterByTypeIoTypeAndLockIoType",(t,e)=>{let r=t;return(0,i.instanceOfScriptWrapper)(e.lock)&&e.lock.ioType&&(r=this.filterByIoType(r,e.lock.ioType)),(0,i.instanceOfScriptWrapper)(e.type)&&e.type.ioType&&(r=this.filterByIoType(r,e.type.ioType)),r}),this.indexer=t,this.queries=e,this.CKBRpcUrl=r,this.options=n;const a={skipMissing:!1,includeStatus:!0};this.filterOptions={...a,...this.options}}static asBaseTransactionCollector(t){return class extends n.indexer.TransactionCollector{constructor(e,r,n){return super(e,r,n),new f(e,r,t,n)}}}async fetchIndexerTransaction(t,e){const r={sizeLimit:t.bufferSize,order:t.order};e&&(r.lastCursor=e);let n={objects:[],lastCursor:""};return(0,i.instanceOfScriptWrapper)(t.lock)&&(0,i.instanceOfScriptWrapper)(t.type)?(n=await this.getTransactionByLockAndTypeIndependent(r),e=n.lastCursor):(n=await this.indexer.getTransactions(o.generateSearchKey(t),r),e=n.lastCursor),n.objects=this.filterByTypeIoTypeAndLockIoType(n.objects,t),n}getResolvedTransactionRequestPayload(t,e){const r=[];return t.forEach((t,n)=>{const i=e.objects[n];if("input"===i.ioType){const e=t.transaction.inputs[Number(i.ioIndex)].previousOutput;r.push(e.txHash)}}),r}getResolvedCell(t,e,r){if("input"!==r.ioType)return t.transaction.outputs[Number(r.ioIndex)];{const n=t.transaction.inputs[Number(r.ioIndex)].previousOutput,i=e.find(t=>t.transaction.hash===n.txHash);if(!i)throw new Error("Impossible: can NOT find resolved transaction!");const o=i.transaction.outputs[Number(n.index)];return o}}filterTransaction(t,e,r){const n=t.filter((t,n)=>{const i=this.getResolvedCell(t,e,r.objects[n]);return this.isCellScriptArgsValid(i)}),i=n.map(t=>({transaction:t.transaction,txStatus:t.txStatus,cycles:t.cycles,timeAddedToPool:t.timeAddedToPool}));return i}async getTransactions(t){const e=await this.fetchIndexerTransaction(this.queries,t);if(t=e.lastCursor,0===e.objects.length)return{objects:[],lastCursor:t};const r=await this.getTransactionListFromRpc(e),n=this.getResolvedTransactionRequestPayload(r,e),i=await o.requestBatchTransactionWithStatus(this.CKBRpcUrl,n),a=this.filterTransaction(r,i,e);return{objects:a,lastCursor:t}}async getTransactionByLockAndTypeIndependent(t){const e={...t},r={...t};if(t.lastCursor){const[n,i]=t.lastCursor.split("-");r.lastCursor=n,e.lastCursor=i}const n={...this.queries,type:void 0},i=await this.indexer.getTransactions(o.generateSearchKey(n),e),a={...this.queries,lock:void 0},s=await this.indexer.getTransactions(o.generateSearchKey(a),r),u=(t,e)=>{const r=[];return t.forEach(t=>{const n=e.find(e=>e.txHash===t.txHash);if(n){const e="output"===t.ioType?t:n;r.push({...e,ioType:"both"})}}),r},c=u(s.objects,i.objects),l=i.lastCursor+"-"+s.lastCursor,f=c;return{objects:f,lastCursor:l}}async count(){let t=void 0;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects};let r=0,n=await e();if(0===n.length)return 0;let i=e(),o=0,a=0;while(1)if(this.queries.skip&&a<this.queries.skip?a++:r+=1,o++,o===n.length){if(o=0,n=await i,0===n.length)break;i=e()}return r}async getTransactionHashes(){let t=void 0;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects},r=[];let n=await e();if(0===n.length)return[];let i=e(),o=0,a=0;while(1)if(this.queries.skip&&a<this.queries.skip?a++:n[o].transaction.hash&&r.push(n[o].transaction.hash),o++,o===n.length){if(o=0,n=await i,0===n.length)break;i=e()}return r}async*collect(){let t=void 0;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects};let r=await e();if(0===r.length)return;let n=e(),i=0,o=0;while(1)if(this.queries.skip&&o<this.queries.skip?o++:this.filterOptions.includeStatus?yield r[i]:yield r[i].transaction,i++,i===r.length){if(i=0,r=await n,0===r.length)break;n=e()}}}e.CKBIndexerTransactionCollector=f},be55:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WitnessArgs=e.BytesVec=e.BytesOpt=e.Bytes=e.Byte32Vec=e.Byte32=void 0,e.WitnessArgsOf=p,e.createFixedHexBytesCodec=a;var n=r("e3a3"),i=r("c914"),o=r("3224");function a(t){return(0,n.createFixedBytesCodec)({byteLength:t,pack:t=>(0,i.bytify)(t),unpack:t=>(0,i.hexify)(t)})}const s=(0,o.byteVecOf)({pack:i.bytify,unpack:i.hexify});e.Bytes=s;const u=(0,o.option)(s);e.BytesOpt=u;const c=(0,o.vector)(s);e.BytesVec=c;const l=a(32);e.Byte32=l;const f=(0,o.vector)(l);function p(t){return(0,o.table)({lock:(0,o.option)((0,o.byteVecOf)(t.lock)),input_type:(0,o.option)((0,o.byteVecOf)(t.input_type)),output_type:(0,o.option)((0,o.byteVecOf)(t.output_type))},["lock","input_type","output_type"])}e.Byte32Vec=f;const h=(0,n.createBytesCodec)({pack:i.bytify,unpack:i.hexify}),d=p({lock:h,input_type:h,output_type:h});e.WitnessArgs=d},bfda:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatter=void 0;var n=r("2a27"),i=r("6cf0");const o={toOptional:t=>e=>t&&void 0!==e&&null!==e?t(e):e,toArray:t=>e=>"function"===typeof t&&Array.isArray(e)?e.map(t):e,toHash:t=>{if("string"!==typeof t)throw new n.StringHashTypeException(t);return t.startsWith("0x")?t:"0x"+t},toNumber:t=>{if("bigint"===typeof t)return"0x"+t.toString(16);if("string"!==typeof t)throw new n.BigintOrHexStringTypeException(t);if(!t.startsWith("0x"))throw new n.HexStringWithout0xException(t);return t},toScript:t=>{const{codeHash:e,hashType:r,...n}=t;return{code_hash:o.toHash(e),hash_type:r,...n}},toOutPoint:t=>{const{txHash:e,index:r,...n}=t;return{tx_hash:o.toHash(e),index:o.toNumber(r),...n}},toInput:t=>{if(!t)return t;const{previousOutput:e,since:r,...n}=t;return{previous_output:o.toOutPoint(e),since:o.toNumber(r),...n}},toOutput:t=>{if(!t)return t;const{capacity:e,lock:r,type:n,...i}=t;return{capacity:o.toNumber(e),lock:o.toScript(r),type:n?o.toScript(n):n,...i}},toDepType:t=>"depGroup"===t?"dep_group":t,toOrder:t=>t,toCellDep:t=>{if(!t)return t;const{outPoint:e,depType:r="code",...n}=t;return{out_point:o.toOutPoint(e),dep_type:o.toDepType(r),...n}},toRawTransaction:t=>{if(!t)return t;const{version:e,cellDeps:r=[],inputs:n=[],outputs:i=[],outputsData:a=[],headerDeps:s=[],...u}=t,c=n.map(t=>o.toInput(t)),l=i.map(t=>o.toOutput(t)),f=r.map(t=>o.toCellDep(t)),p={version:o.toNumber(e),cell_deps:f,inputs:c,outputs:l,outputs_data:a,header_deps:s,...u};return p},toPageNumber:(t="0x1")=>o.toNumber(t),toPageSize:(t="0x32")=>{const e=i.BI.from(t),r=50,a=0;if(i.BI.from(e).gt(r))throw new n.PageSizeTooLargeException(t,r);if(i.BI.from(e).lt(a))throw new n.PageSizeTooSmallException(t,a);return o.toNumber("0x"+e.toString(16))},toReverseOrder:(t=!1)=>!!t,toOutputsValidator:t=>{if(!t)return;const e=["default","passthrough"];if(e.indexOf(t)>-1)return t;throw new n.OutputsValidatorTypeException},toBoolean:t=>!!t,toTransactionProof:t=>{if(!t)return t;const{blockHash:e,witnessesRoot:r,...n}=t;return{block_hash:e,witnesses_root:r,...n}},toTransactionAndWitnessProof:t=>({block_hash:t.blockHash,witnesses_proof:t.witnessesProof,transactions_proof:t.transactionsProof}),toSearchFilter:t=>t?{script:t.script?o.toScript(t.script):t.script,output_data_len_range:t.outputDataLenRange,output_capacity_range:t.outputCapacityRange,block_range:t.blockRange,script_len_range:t.scriptLenRange}:t,toSearchKey:t=>t?{script:o.toScript(t.script),script_type:t.scriptType,filter:t.filter?o.toSearchFilter(t.filter):t.filter,script_search_mode:t.scriptSearchMode?t.scriptSearchMode:"prefix"}:t,toGetCellsSearchKey:t=>t?{...o.toSearchKey(t),with_data:t.withData}:t,toGetTransactionsSearchKey:t=>t?{...o.toSearchKey(t),group_by_transaction:t.groupByTransaction}:t};e.formatter=o},c06b:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareScriptBinaryWithOnChainData=M,e.default=void 0,e.generateDeployWithDataTx=O,e.generateDeployWithTypeIdTx=P,e.generateUpgradeTypeIdDataTx=B;var n=r("0b92"),i=r("4b0a"),o=r("a2e8"),a=r("c1f3"),s=r("329b"),u=r("1c87"),c=r("6cf0");const{ScriptValue:l}=n.values;function f(t){let e="0x";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}async function p(t,e){const r=e.collector({lock:t,type:"empty",data:"0x"}),n=[];for await(const i of r.collect())n.push(i);return n}function h(t,e){const r=(0,a.minimalCellCapacityCompatible)(e);return e.cellOutput.capacity="0x"+r.toString(16),t=t.update("outputs",t=>t.push(e)),t}function d(t,e){t=t.update("cellDeps",t=>t.clear()),e=e||(0,o.getConfig)();const r=e.SCRIPTS.SECP256K1_BLAKE160,n=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!r||!n)throw new Error("Provided config does not have SECP256K1_BLAKE160 or SECP256K1_BLAKE160_MULTISIG script setup!");return t=t.update("cellDeps",t=>t.push({outPoint:{txHash:r.TX_HASH,index:r.INDEX},depType:r.DEP_TYPE},{outPoint:{txHash:n.TX_HASH,index:n.INDEX},depType:n.DEP_TYPE})),t}async function g(t,e,r,n){const i=t.get("inputs").map(t=>c.BI.from(t.cellOutput.capacity)).reduce((t,e)=>t.add(e),c.BI.from(0)),o=t.get("outputs").map(t=>c.BI.from(t.cellOutput.capacity)).reduce((t,e)=>t.add(e),c.BI.from(0)),a=o.sub(i);return t=await y(t,e,c.BI.from(a),{config:r,feeRate:n}),t}async function y(t,e,r,{config:f,feeRate:p}){f=f||(0,o.getConfig)();const h=p||1e3;let d=c.BI.from(r);const{fromScript:g,multisigScript:y}=(0,u.parseFromInfo)(e,{config:f});d=d.add(c.BI.from(10).pow(8));let m=c.BI.from(10).pow(8);const b={cellOutput:{capacity:"0x0",lock:g,type:void 0},data:"0x"},v=c.BI.from((0,a.minimalCellCapacityCompatible)(b)).add(c.BI.from(10).pow(8));if(d.lt(0)&&(m=m.sub(d),d=c.BI.from(0)),d.gt(0)||m.lt(v)){const e=t.get("cellProvider");if(!e)throw new Error("Cell provider is missing!");const r=e.collector({lock:g,type:"empty",data:"0x"});let n=(0,s.Set)();for(const i of t.get("inputs"))n=n.add(`${i.outPoint.txHash}_${i.outPoint.index}`);for await(const i of r.collect()){if(n.has(`${i.outPoint.txHash}_${i.outPoint.index}`))continue;t=t.update("inputs",t=>t.push(i)),t=t.update("witnesses",t=>t.push("0x"));const e=c.BI.from(i.cellOutput.capacity);let r=e;if(r.gt(d)&&(r=d),d=d.sub(r),m=m.add(e).sub(r),d.eq(0)&&(m.eq(0)||m.gte(v)))break}}if(m.gt(0)&&(b.cellOutput.capacity="0x"+m.toString(16),t=t.update("outputs",t=>t.push(b))),d.gt(0)||m.lt(v))throw new Error("Not enough capacity in from address!");const w=t.get("inputs").findIndex(t=>new l(t.cellOutput.lock,{validate:!1}).equals(new l(g,{validate:!1})));if(-1!==w){while(w>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));let r,o=t.get("witnesses").get(w);const a="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";if(r="string"!==typeof e?{lock:"0x"+y.slice(2)+a.slice(2).repeat(e.M)}:{lock:a},"0x"!==o){const t=n.blockchain.WitnessArgs.unpack(i.bytes.bytify(o)),e=t.lock;if(e&&r.lock&&!i.bytes.equal(e,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(r.inputType=a);const s=t.outputType;s&&(r.outputType=s)}o=i.bytes.hexify(n.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",t=>t.set(w,o))}const A=_(t,h);return m=m.sub(A),t=t.update("outputs",t=>t.pop()),m.gt(0)&&(b.cellOutput.capacity="0x"+m.toString(16),t=t.update("outputs",t=>t.push(b))),t}function m(t){const e=(0,a.createTransactionFromSkeleton)(t);return b(e)}function b(t){const e=n.blockchain.Transaction.pack(t),r=e.byteLength+4;return r}function v(t,e){const r=c.BI.from(1e3),n=c.BI.from(t).mul(e),i=n.div(r);return i.mul(r).lt(n)?i.add(1):c.BI.from(i)}function _(t,e){const r=m(t);return c.BI.from(v(r,e))}function w(t){const e=t.valueOf();return(new n.utils.CKBHasher).update(e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)).digestHex()}async function A(t,e){const r=t.txHash,o=parseInt(t.index,10),a=await e.getTransaction(r);if(!a)throw new Error(`TxHash(${r}) is not found`);const s=a.transaction.outputsData[o];if(!s)throw new Error("cannot find output data");return(new n.utils.CKBHasher).update(i.bytes.bytify(s)).digestHex()}function I(t){const e=(0,a.createTransactionFromSkeleton)(t),r=n.utils.ckbHash(n.blockchain.RawTransaction.pack(e));return r}function C(t,e){const r=t.outputs.get(e).data,o=n.utils.ckbHash(i.bytes.bytify(r)),a=I(t),s={CODE_HASH:o,HASH_TYPE:"data2",TX_HASH:a,INDEX:"0x0",DEP_TYPE:"code"};return s}function E(t,e){const r=t.outputs.get(e).cellOutput.type,i=n.utils.computeScriptHash(r),o=I(t),a={CODE_HASH:i,HASH_TYPE:"type",TX_HASH:o,INDEX:"0x0",DEP_TYPE:"code"};return a}function S(t,e){const r=t.outputs.get(e);if(void 0==r)throw new Error("Invalid txSkeleton or outputIndex");const n=r.cellOutput.type;return void 0!==n?E(t,e):C(t,e)}function k(t){return"object"===typeof t&&("M"in t&&"R"in t&&Array.isArray(t.publicKeyHashes))}function x(t,{config:e}={}){if(e=e||(0,o.getConfig)(),"string"===typeof t){if("SECP256K1_BLAKE160"!==o.helpers.nameOfScript((0,a.parseAddress)(t,{config:e}),e.SCRIPTS))throw new Error("only SECP256K1_BLAKE160 or SECP256K1_MULTISIG is supported")}else if(!k(t))throw new Error("only SECP256K1_BLAKE160 or SECP256K1_MULTISIG is supported")}async function O(t){x(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config}),n={cellOutput:{capacity:"0x0",lock:r},data:f(t.scriptBinary)};e=h(e,n),e=d(e,t.config),e=await g(e,t.fromInfo,t.config,t.feeRate);const i=S(e,0);return{txSkeleton:e,scriptConfig:i}}async function P(t){x(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config}),[i]=await p(r,t.cellProvider);if(!i)throw new Error("fromAddress has no live ckb");const o=n.utils.generateTypeIdScript({previousOutput:i.outPoint,since:"0x0"},"0x0"),s={cellOutput:{capacity:"0x0",lock:r,type:o},data:f(t.scriptBinary)};e=h(e,s),e=d(e,t.config),e=await g(e,t.fromInfo,t.config,t.feeRate);const c=S(e,0);return{txSkeleton:e,scriptConfig:c,typeId:o}}async function B(t){x(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config}),n=t.cellProvider.collector({type:t.typeId}),i=[];for await(const a of n.collect())i.push(a);if(1!==i.length)throw new Error("the typeid maybe wrong");const o=i[0];e=e.update("inputs",t=>t.push(o));const s={cellOutput:{capacity:"0x0",lock:r,type:t.typeId},data:f(t.scriptBinary)};e=h(e,s),e=d(e,t.config),e=await g(e,t.fromInfo,t.config,t.feeRate);const c=S(e,0);return{txSkeleton:e,scriptConfig:c}}async function M(t,e,r){const n=w(t),i=await A(e,r);return n===i}var T={generateDeployWithDataTx:O,generateDeployWithTypeIdTx:P,generateUpgradeTypeIdDataTx:B,compareScriptBinaryWithOnChainData:M,__tests__:{calculateTxFee:_}};e.default=T},c1f3:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addressToScript=e.TransactionSkeleton=void 0,e.createTransactionFromSkeleton=M,e.createTransactionSkeleton=T,e.encodeToAddress=O,e.encodeToConfigAddress=P,e.generateAddress=A,e.generateSecp256k1Blake160Address=E,e.generateSecp256k1Blake160MultisigAddress=S,e.locateCellDep=_,e.minimalCellCapacity=b,e.minimalCellCapacityCompatible=v,e.minimalScriptCapacity=y,e.minimalScriptCapacityCompatible=m,e.objectToTransactionSkeleton=H,e.parseAddress=k,e.scriptToAddress=void 0,e.sealTransaction=D,e.transactionSkeletonToObject=j;var n=r("4b0a"),i=r("0b92"),o=r("4c7f"),a=r("329b"),s=r("a2e8"),u=r("6cf0"),c=r("7e0f"),l=r("bc12"),f=r("a7ee"),p=r("fbbb");const{bytify:h,hexify:d}=n.bytes,g=1023;function y(t,{validate:e=!0}={}){const r=m(t,{validate:e});return BigInt(r.toString())}function m(t,{validate:e=!0}={}){e&&f.validators.ValidateScript(t);let r=0;return r+=h(t.codeHash).length,r+=h(t.args).length,r+=1,u.BI.from(r).mul(1e8)}function b(t,{validate:e=!0}={}){const r=v(t,{validate:e});return BigInt(r.toString())}function v(t,{validate:e=!0}={}){e&&i.blockchain.CellOutput.pack(t.cellOutput);let r=8;return r+=h(t.cellOutput.lock.codeHash).length,r+=h(t.cellOutput.lock.args).length,r+=1,t.cellOutput.type&&(r+=h(t.cellOutput.type.codeHash).length,r+=h(t.cellOutput.type.args).length,r+=1),t.data&&(r+=h(t.data).length),u.BI.from(r).mul(1e8)}function _(t,{config:e}={}){e=e||(0,s.getConfig)();const r=Object.values(e.SCRIPTS).find(e=>e&&e.CODE_HASH===t.codeHash&&e.HASH_TYPE===t.hashType);return r?{depType:r.DEP_TYPE,outPoint:{txHash:r.TX_HASH,index:r.INDEX}}:null}let w=!1;function A(t,{config:e}={}){e=e||(0,s.getConfig)(),w||(console.warn("The address format generated by generateAddress or scriptToAddress will be deprecated, please migrate to encodeToAddress to generate the new ckb2021 full format address as soon as possible"),w=!0),f.validators.ValidateScript(t);const r=Object.values(e.SCRIPTS).find(e=>e&&e.CODE_HASH===t.codeHash&&e.HASH_TYPE===t.hashType),n=[];if(r&&void 0!==r.SHORT_ID)n.push(1,r.SHORT_ID),n.push(...(0,l.hexToByteArray)(t.args));else{if("type"===t.hashType)n.push(4);else{if("data"!==t.hashType)throw new Error("Invalid hashType "+t.hashType);n.push(2)}n.push(...(0,l.hexToByteArray)(t.codeHash)),n.push(...(0,l.hexToByteArray)(t.args))}const i=o.bech32.toWords(n);return o.bech32.encode(e.PREFIX,i,g)}const I=A;function C(t,e,{config:r}={}){r=r||(0,s.getConfig)();const n=r.SCRIPTS[e];if(!n){const t=Object.keys(r.SCRIPTS);throw new Error(`Invalid script type: ${e}, only support: ${t}`)}const i={codeHash:n.CODE_HASH,hashType:n.HASH_TYPE,args:t};return A(i,{config:r})}function E(t,{config:e}={}){return C(t,"SECP256K1_BLAKE160",{config:e})}function S(t,{config:e}={}){return C(t,"SECP256K1_BLAKE160_MULTISIG",{config:e})}function k(t,{config:e}={}){e=e||(0,s.getConfig)();try{return(0,c.parseFullFormatAddress)(t,{config:e})}catch{return(0,c.parseDeprecatedCkb2019Address)(t,{config:e})}}e.scriptToAddress=I;const x=k;function O(t,{config:e}={}){f.validators.ValidateScript(t),e=e||(0,s.getConfig)();const r=n.bytes.concat([0],t.codeHash,p.HashType.pack(t.hashType),t.args);return o.bech32m.encode(e.PREFIX,o.bech32m.toWords(r),g)}function P(t,e,r){const n=(null===r||void 0===r?void 0:r.config)||(0,s.getConfig)(),i=n.SCRIPTS[e];if(!i){const t=Object.keys(n.SCRIPTS);throw new Error(`Invalid script type: ${String(e)}, only support: ${t}`)}const o={codeHash:i.CODE_HASH,hashType:i.HASH_TYPE,args:t};return O(o,{config:n})}e.addressToScript=x;const B=(0,a.Record)({cellProvider:null,cellDeps:(0,a.List)(),headerDeps:(0,a.List)(),inputs:(0,a.List)(),outputs:(0,a.List)(),witnesses:(0,a.List)(),fixedEntries:(0,a.List)(),signingEntries:(0,a.List)(),inputSinces:(0,a.Map)()});function M(t,{validate:e=!0}={}){const r={version:"0x0",cellDeps:t.get("cellDeps").toArray(),headerDeps:t.get("headerDeps").toArray(),inputs:t.get("inputs").map((e,r)=>{if(!e.outPoint)throw new Error(`cannot find OutPoint in Inputs[${r}] when createTransactionFromSkeleton`);return{since:t.get("inputSinces").get(r,"0x0"),previousOutput:e.outPoint}}).toArray(),outputs:t.get("outputs").map(t=>t.cellOutput).toArray(),outputsData:t.get("outputs").map(t=>t.data||"0x0").toArray(),witnesses:t.get("witnesses").toArray()};return e&&f.validators.ValidateTransaction(r),r}async function T(t,e){let r=B();r=r.update("cellDeps",e=>e.push(...t.cellDeps)),r=r.update("headerDeps",e=>e.push(...t.headerDeps));const n=await Promise.all(t.inputs.map(t=>e(t.previousOutput)));r=r.update("inputs",t=>t.push(...n)),r=r.update("inputSinces",e=>t.inputs.reduce((t,e,r)=>t.set(r,e.since),e));const i=t.outputs.map((e,r)=>{var n;return{cellOutput:e,data:null!==(n=t.outputsData[r])&&void 0!==n?n:"0x"}});return r=r.update("outputs",t=>t.push(...i)),r=r.update("witnesses",e=>e.push(...t.witnesses)),r}function D(t,e){const r=M(t);if(e.length!==t.get("signingEntries").size)throw new Error(`Requiring ${t.get("signingEntries").size} sealing contents but provided ${e.length}!`);return t.get("signingEntries").forEach((t,n)=>{switch(t.type){case"witness_args_lock":{const o=r.witnesses[t.index],a=i.blockchain.WitnessArgs.unpack(h(o)),s={lock:e[n]},u=a.inputType;u&&(s.inputType=u);const c=a.outputType;c&&(s.outputType=c),r.witnesses[t.index]=d(i.blockchain.WitnessArgs.pack(s));break}default:throw new Error("Invalid signing entry type: "+t.type)}}),r}function j(t){return t.toJS()}function H(t){let e=(0,a.Map)();for(const[n,i]of Object.entries(t.inputSinces))e=e.set(+n,i);const r=B({cellProvider:t.cellProvider,cellDeps:(0,a.List)(t.cellDeps),headerDeps:(0,a.List)(t.headerDeps),inputs:(0,a.List)(t.inputs),outputs:(0,a.List)(t.outputs),witnesses:(0,a.List)(t.witnesses),fixedEntries:(0,a.List)(t.fixedEntries),signingEntries:(0,a.List)(t.signingEntries),inputSinces:e});return r}e.TransactionSkeleton=B},c239:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("bfda"),i={dryRunTransaction:{method:"dry_run_transaction",paramsFormatters:[n.formatter.toRawTransaction]},calculateDaoMaximumWithdraw:{method:"calculate_dao_maximum_withdraw",paramsFormatters:[n.formatter.toOutPoint,n.formatter.toHash]}};e.default=i},c4c7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=u,e.dynvec=h,e.fixvec=p,e.option=m,e.struct=f,e.table=g,e.union=y,e.vector=d;var n=r("e3a3"),i=r("6436"),o=r("c914"),a=r("41da"),s=r("a100");function u(t,e){const r=(0,s.createArrayCodec)(t);return(0,n.createFixedBytesCodec)({byteLength:t.byteLength*e,pack(t){const e=r.pack(t);return(0,o.concat)(...e)},unpack(e){const r=[],n=t.byteLength;for(let i=0;i<e.byteLength;i+=n)r.push(t.unpack(e.slice(i,i+n)));return r}})}function c(t,e){return t.filter(t=>!e.includes(t))}function l(t,e){const r=Object.keys(t),n=c(r,e),i=c(e,r);if(n.length>0||i.length>0)throw new Error(`Invalid shape: missing fields ${n.join(", ")} or shape ${i.join(", ")}`)}function f(t,e){l(t,e);const r=(0,s.createObjectCodec)(t);return(0,n.createFixedBytesCodec)({byteLength:e.reduce((e,r)=>e+t[r].byteLength,0),pack(t){const n=r.pack(t);return e.reduce((t,e)=>(0,o.concat)(t,n[e]),Uint8Array.from([]))},unpack(r){const n={};let i=0;return e.forEach(e=>{const o=t[e],a=r.slice(i,i+o.byteLength);Object.assign(n,{[e]:o.unpack(a)}),i+=o.byteLength}),n}})}function p(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createArrayCodec)(t);return(0,o.concat)(i.Uint32LE.pack(e.length),r.pack(e).reduce((t,e)=>(0,o.concat)(t,e),new ArrayBuffer(0)))},unpack(e){if(e.byteLength<4)throw new Error("fixvec: buffer is too short, expected at least 4 bytes, got "+e.byteLength);const r=i.Uint32LE.unpack(e.slice(0,4));return u(t,r).unpack(e.slice(4))}})}function h(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createArrayCodec)(t),n=r.pack(e).reduce((t,e)=>{const r=i.Uint32LE.pack(t.offset);return{header:(0,o.concat)(t.header,r),body:(0,o.concat)(t.body,e),offset:t.offset+e.byteLength}},{header:new ArrayBuffer(0),body:new ArrayBuffer(0),offset:4+4*e.length}),a=i.Uint32LE.pack(n.header.byteLength+n.body.byteLength+4);return(0,o.concat)(a,n.header,n.body)},unpack(e){const r=i.Uint32LE.unpack(e.slice(0,4));if(r!==e.byteLength)throw new Error(`Invalid buffer size, read from header: ${r}, actual: ${e.byteLength}`);const n=[];if(r<=4)return n;{const n=i.Uint32LE.unpack(e.slice(4,8)),o=(n-4)/4,a=new Array(o).fill(1).map((t,r)=>i.Uint32LE.unpack(e.slice(4+4*r,8+4*r)));a.push(r);const s=[];for(let r=0;r<a.length-1;r++){const n=a[r],i=a[r+1],o=e.slice(n,i);s.push(t.unpack(o))}return s}}})}function d(t){return(0,n.isFixedCodec)(t)?p(t):h(t)}function g(t,e){return l(t,e),(0,n.createBytesCodec)({pack(r){const n=4+4*e.length,a=(0,s.createObjectCodec)(t),u=a.pack(r),c=e.reduce((t,e)=>{const r=u[e],n=i.Uint32LE.pack(t.offset);return{header:(0,o.concat)(t.header,n),body:(0,o.concat)(t.body,r),offset:t.offset+r.byteLength}},{header:new ArrayBuffer(0),body:new ArrayBuffer(0),offset:n}),l=i.Uint32LE.pack(c.header.byteLength+c.body.byteLength+4);return(0,o.concat)(l,c.header,c.body)},unpack(r){const n=i.Uint32LE.unpack(r.slice(0,4));if(n!==r.byteLength)throw new Error(`Invalid buffer size, read from header: ${n}, actual: ${r.byteLength}`);if(n<=4||0===e.length)return{};{const o=e.map((t,e)=>i.Uint32LE.unpack(r.slice(4+4*e,8+4*e)));o.push(n);const a={};for(let n=0;n<o.length-1;n++){const i=o[n],s=o[n+1],u=e[n],c=t[u],l=r.slice(i,s);Object.assign(a,{[u]:c.unpack(l)})}return a}}})}function y(t,e){if(l(t,Array.isArray(e)?e:Object.keys(e)),!Array.isArray(e)){const t=Object.values(e);if(t.length!==new Set(t).size)throw new Error("Duplicated id in union: "+t.join(", "))}return(0,n.createBytesCodec)({pack(r){const n=Object.keys(t),s=r.type,u=`Union(${n.join(" | ")})`;if("string"!==typeof s)throw new a.CodecBaseParseError("Invalid type in union, type must be a string",u);const c=Array.isArray(e)?e.indexOf(s):e[s];if(c<0)throw new a.CodecBaseParseError("Unknown union type: "+String(r.type),u);const l=i.Uint32LE.pack(c),f=t[s].pack(r.value);return(0,o.concat)(l,f)},unpack(r){const n=i.Uint32LE.unpack(r.slice(0,4)),o=(()=>{if(Array.isArray(e))return e[n];const t=Object.entries(e).find(([,t])=>t===n);return null===t||void 0===t?void 0:t[0]})();if(!o)throw new Error(`Unknown union field id: ${n}, only ${e} are allowed`);return{type:o,value:t[o].unpack(r.slice(4))}}})}function m(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createNullableCodec)(t);return void 0!==e&&null!==e?r.pack(e):Uint8Array.from([])},unpack(e){if(0!==e.byteLength)return t.unpack(e)}})}},c63a:function(t,e){function r(t){return t.length>>>1}function n(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let r="",n=0;for(let i=e-e%4;n<i;n+=4)r+=t.getUint32(n).toString(16).padStart(8,"0");for(;n<e;n++)r+=t.getUint8(n).toString(16).padStart(2,"0");return r}function i(t,e,n=0,i=r(e)){const a=Math.min(i,t.byteLength-n);for(let r=0;r<a;r++){const i=o(e.charCodeAt(2*r)),a=o(e.charCodeAt(2*r+1));if(void 0===i||void 0===a)return t.subarray(0,r);t[n+r]=i<<4|a}return a}function o(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}t.exports={byteLength:r,toString:n,write:i}},c8baa:function(t,e){function r(t,e){this.v=t,this.k=e}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},c8ec:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("bfda"),i=a(r("ca1d"));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var s={getTipBlockNumber:{method:"get_tip_block_number",paramsFormatters:[],resultFormatters:i.toNumber},getTipHeader:{method:"get_tip_header",paramsFormatters:[],resultFormatters:i.toHeader},getCurrentEpoch:{method:"get_current_epoch",paramsFormatters:[],resultFormatters:i.toEpoch},getEpochByNumber:{method:"get_epoch_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toEpoch},getBlockHash:{method:"get_block_hash",paramsFormatters:[n.formatter.toNumber]},getBlock:{method:"get_block",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toBlock},getBlockByNumber:{method:"get_block_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toBlock},getHeader:{method:"get_header",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toHeader},getHeaderByNumber:{method:"get_header_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toHeader},getLiveCell:{method:"get_live_cell",paramsFormatters:[n.formatter.toOutPoint],resultFormatters:i.toLiveCellWithStatus},getTransaction:{method:"get_transaction",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toTransactionWithStatus},getCellbaseOutputCapacityDetails:{method:"get_cellbase_output_capacity_details",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toCellbaseOutputCapacityDetails},getBlockEconomicState:{method:"get_block_economic_state",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toBlockEconomicState},getTransactionProof:{method:"get_transaction_proof",paramsFormatters:[n.formatter.toArray(n.formatter.toHash),n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toTransactionProof},verifyTransactionProof:{method:"verify_transaction_proof",paramsFormatters:[n.formatter.toTransactionProof]},getConsensus:{method:"get_consensus",paramsFormatters:[],resultFormatters:i.toConsensus}};e.default=s},c914:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytify=p,e.bytifyRawString=i,e.concat=m,e.equal=h,e.hexify=y;var n=r("fa9b");function i(t){(0,n.assertUtf8String)(t);const e=new ArrayBuffer(t.length),r=new DataView(e);for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);r.setUint8(n,e)}return new Uint8Array(e)}const o="0".charCodeAt(0),a="9".charCodeAt(0),s="A".charCodeAt(0),u="F".charCodeAt(0),c="a".charCodeAt(0);function l(t){(0,n.assertHexString)(t);const e=Uint8Array.from({length:t.length/2-1});for(let r=2,n=0;r<t.length;r+=2,n++){const i=t.charCodeAt(r),l=t.charCodeAt(r+1),f=i<=a?i-o:i<=u?i-s+10:i-c+10,p=l<=a?l-o:l<=u?l-s+10:l-c+10;e[n]=f<<4|p}return e}function f(t){for(let e=0;e<t.length;e++){const r=t[e];if(r<0||r>255||!Number.isInteger(r))throw new Error("invalid ArrayLike, all elements must be 0-255")}return Uint8Array.from(t)}function p(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return Uint8Array.from(t);if("string"===typeof t)return l(t);if(Array.isArray(t))return f(t);throw new Error("Cannot convert "+t)}function h(t,e){const r=p(t),n=p(e);return d(r,n)}function d(t,e){if(t.length!==e.length)return!1;for(let r=t.length;-1<r;r-=1)if(t[r]!==e[r])return!1;return!0}const g=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));function y(t){let e="";const r=p(t);for(let n=0;n<r.length;n++)e+=g[r[n]];return"0x"+e}function m(...t){const e=t.map(p),r=e.reduce((t,e)=>t+e.length,0),n=new Uint8Array(r);let i=0;return e.forEach(t=>{n.set(t,i),i+=t.length}),n}},ca1a:function(t,e,r){const n=r("986ef"),i=r("56f7"),o=r("c63a"),a=r("2edd"),s=r("064e"),u=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function c(t){switch(t){case"ascii":return n;case"base64":return i;case"hex":return o;case"utf8":case"utf-8":case void 0:return a;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s;default:throw new Error("Unknown encoding: "+t)}}function l(t){return t instanceof Uint8Array}function f(t){try{return c(t),!0}catch{return!1}}function p(t,r,n){const i=new Uint8Array(t);return void 0!==r&&e.fill(i,r,0,i.byteLength,n),i}function h(t){return new Uint8Array(t)}function d(t){return new Uint8Array(t)}function g(t,e){return c(e).byteLength(t)}function y(t,e){if(t===e)return 0;const r=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4){const r=t.getUint32(n,u),i=e.getUint32(n,u);if(r!==i)break}for(;n<r;n++){const r=t.getUint8(n),i=e.getUint8(n);if(r<i)return-1;if(r>i)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}function m(t,e){void 0===e&&(e=t.reduce((t,e)=>t+e.byteLength,0));const r=new Uint8Array(e);let n=0;for(const i of t){if(n+i.byteLength>r.byteLength){const t=i.subarray(0,r.byteLength-n);return r.set(t,n),r}r.set(i,n),n+=i.byteLength}return r}function b(t,e,r=0,n=0,i=t.byteLength){if(i>0&&i<n)return 0;if(i===n)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(r<0)throw new RangeError("targetStart is out of range");if(n<0||n>=t.byteLength)throw new RangeError("sourceStart is out of range");if(i<0)throw new RangeError("sourceEnd is out of range");r>=e.byteLength&&(r=e.byteLength),i>t.byteLength&&(i=t.byteLength),e.byteLength-r<i-n&&(i=e.length-r+n);const o=i-n;return t===e?e.copyWithin(r,n,i):e.set(t.subarray(n,i),r),o}function v(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const r=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4)if(t.getUint32(n,u)!==e.getUint32(n,u))return!1;for(;n<r;n++)if(t.getUint8(n)!==e.getUint8(n))return!1;return!0}function _(t,e,r,n,i){if("string"===typeof e?"string"===typeof r?(i=r,r=0,n=t.byteLength):"string"===typeof n&&(i=n,n=t.byteLength):"number"===typeof e?e&=255:"boolean"===typeof e&&(e=+e),r<0||t.byteLength<r||t.byteLength<n)throw new RangeError("Out of range index");if(void 0===r&&(r=0),void 0===n&&(n=t.byteLength),n<=r)return t;if(e||(e=0),"number"===typeof e)for(let o=r;o<n;++o)t[o]=e;else{e=l(e)?e:w(e,i);const o=e.byteLength;for(let i=0;i<n-r;++i)t[i+r]=e[i%o]}return t}function w(t,e,r){return"string"===typeof t?A(t,e):Array.isArray(t)?I(t):ArrayBuffer.isView(t)?C(t):E(t,e,r)}function A(t,e){const r=c(e),n=new Uint8Array(r.byteLength(t));return r.write(n,t,0,n.byteLength),n}function I(t){const e=new Uint8Array(t.length);return e.set(t),e}function C(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}function E(t,e,r){return new Uint8Array(t,e,r)}function S(t,e,r,n){return-1!==x(t,e,r,n)}function k(t,e,r,n,i){if(0===t.byteLength)return-1;if("string"===typeof r?(n=r,r=0):void 0===r?r=i?0:t.length-1:r<0&&(r+=t.byteLength),r>=t.byteLength){if(i)return-1;r=t.byteLength-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e)e=w(e,n);else if("number"===typeof e)return e&=255,i?t.indexOf(e,r):t.lastIndexOf(e,r);if(0===e.byteLength)return-1;if(i){let n=-1;for(let i=r;i<t.byteLength;i++)if(t[i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.byteLength)return n}else-1!==n&&(i-=i-n),n=-1}else{r+e.byteLength>t.byteLength&&(r=t.byteLength-e.byteLength);for(let n=r;n>=0;n--){let r=!0;for(let i=0;i<e.byteLength;i++)if(t[n+i]!==e[i]){r=!1;break}if(r)return n}}return-1}function x(t,e,r,n){return k(t,e,r,n,!0)}function O(t,e,r,n){return k(t,e,r,n,!1)}function P(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function B(t){const e=t.byteLength;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)P(t,r,r+1);return t}function M(t){const e=t.byteLength;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)P(t,r,r+3),P(t,r+1,r+2);return t}function T(t){const e=t.byteLength;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)P(t,r,r+7),P(t,r+1,r+6),P(t,r+2,r+5),P(t,r+3,r+4);return t}function D(t){return t}function j(t,e,r=0,n=t.byteLength){const i=t.byteLength;return r>=i||n<=r?"":(r<0&&(r=0),n>i&&(n=i),(0!==r||n<i)&&(t=t.subarray(r,n)),c(e).toString(t))}function H(t,e,r,n,i){return void 0===r?i="utf8":void 0===n&&"string"===typeof r?(i=r,r=void 0):void 0===i&&"string"===typeof n&&(i=n,n=void 0),c(i).write(t,e,r,n)}function L(t,e,r){void 0===r&&(r=0);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),r+8}function U(t,e,r){void 0===r&&(r=0);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),r+4}function R(t,e,r){void 0===r&&(r=0);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint32(r,e,!0),r+4}function F(t,e,r){void 0===r&&(r=0);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setInt32(r,e,!0),r+4}function N(t,e){void 0===e&&(e=0);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}function Q(t,e){void 0===e&&(e=0);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}function K(t,e){void 0===e&&(e=0);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getUint32(e,!0)}function z(t,e){void 0===e&&(e=0);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getInt32(e,!0)}t.exports=e={isBuffer:l,isEncoding:f,alloc:p,allocUnsafe:h,allocUnsafeSlow:d,byteLength:g,compare:y,concat:m,copy:b,equals:v,fill:_,from:w,includes:S,indexOf:x,lastIndexOf:O,swap16:B,swap32:M,swap64:T,toBuffer:D,toString:j,write:H,writeDoubleLE:L,writeFloatLE:U,writeUInt32LE:R,writeInt32LE:F,readDoubleLE:N,readFloatLE:Q,readUInt32LE:K,readInt32LE:z}},ca1d:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toBannedAddresses=e.toBannedAddress=e.toArray=e.toAlertMessage=void 0,e.toBlock=b,e.toHash=e.toGetTransactionsResult=e.toGetCellsResult=e.toForkBlockResult=e.toFeeRateStatistics=e.toFeeRate=e.toEstimateCycles=e.toEpoch=e.toDeploymentsInfo=e.toDeploymentInfo=e.toDeployment=e.toDeployState=e.toDepType=e.toConsensus=e.toCellsIncludingOutPoint=e.toCellsCapacity=e.toCells=e.toCellbaseOutputCapacityDetails=e.toCellIncludingOutPoint=e.toCellDep=e.toCell=e.toCapacityByLockHash=e.toBlockchainInfo=e.toBlockFilter=e.toBlockEconomicState=void 0,e.toHeader=u,e.toTip=e.toSyncState=e.toScript=e.toRemoteNodeInfo=e.toRawTxPool=e.toPeers=e.toOutput=e.toOutPoint=e.toNumber=e.toNullable=e.toLockHashIndexStates=e.toLockHashIndexState=e.toLocalNodeInfo=e.toLiveCellsByLockHash=e.toLiveCellWithStatus=e.toLiveCell=e.toInput=void 0,e.toTransaction=g,e.toUncleBlock=e.toTxPoolInfo=e.toTransactionsByLockHash=e.toTransactionWithStatus=e.toTransactionProof=e.toTransactionPoint=e.toTransactionAndWitnessProof=void 0;const n=t=>Array.isArray(t.pending),i=t=>e=>"function"===typeof t&&Array.isArray(e)?e.map(t):e;e.toArray=i;const o=t=>e=>t&&null!==e?t(e):e;e.toNullable=o;const a=t=>t.toString();e.toNumber=a;const s=t=>t;function u(t){if("string"===typeof t)return t;if(!t)return t;const{compact_target:e,transactions_root:r,proposals_hash:n,extra_hash:i,parent_hash:o,...a}=t;return{compactTarget:e,parentHash:o,transactionsRoot:r,proposalsHash:n,extraHash:i,...a}}e.toHash=s;const c=t=>{if(!t)return t;const{code_hash:e,hash_type:r,...n}=t;return{codeHash:e,hashType:r,...n}};e.toScript=c;const l=t=>{if(!t)return t;const{previous_output:e,...r}=t;return{previousOutput:e?p(e):e,...r}};e.toInput=l;const f=t=>{if(!t)return t;const{lock:e,type:r,...n}=t;return{lock:c(e),type:r?c(r):r,...n}};e.toOutput=f;const p=t=>{const{tx_hash:e,...r}=t;return{txHash:e,...r}};e.toOutPoint=p;const h=t=>"dep_group"===t?"depGroup":t;e.toDepType=h;const d=t=>{if(!t)return t;const{out_point:e,dep_type:r="code",...n}=t;return{outPoint:p(e),depType:h(r),...n}};function g(t){if(!t||"object"!==typeof t)return t;const{cell_deps:e=[],inputs:r=[],outputs:n=[],outputs_data:i=[],header_deps:o=[],...a}=t;return{cellDeps:e.map(d),inputs:r.map(l),outputs:n.map(f),outputsData:i,headerDeps:o,...a}}e.toCellDep=d;const y=t=>{if(!t)return t;const{header:e,...r}=t;return{header:u(e),...r}};e.toUncleBlock=y;const m=t=>({blockHash:t.block_hash,blockNumber:t.block_number});function b(t){if(!t)return t;if("string"===typeof t)return t;if("block"in t&&"cycles"in t)return{cycles:t.cycles,block:b(t.block)};const{header:e,uncles:r=[],transactions:n=[],...i}=t;return{header:u(e),uncles:r.map(y),transactions:n.map(g),...i}}e.toTip=m;const v=t=>{if(!t)return t;const{notice_until:e,...r}=t;return{noticeUntil:e,...r}};e.toAlertMessage=v;const _=t=>{if(!t)return t;const{is_initial_block_download:e,median_time:r,alerts:n,...i}=t;return{isInitialBlockDownload:e,medianTime:r,alerts:n.map(v),...i}};e.toBlockchainInfo=_;const w=t=>{if(!t)return t;const{node_id:e,protocols:r,...n}=t;return{nodeId:e,protocols:r.map(({id:t,name:e,support_versions:r})=>({id:t,name:e,supportVersions:r})),...n}};e.toLocalNodeInfo=w;const A=t=>{if(!t)return t;const{node_id:e,connected_duration:r,is_outbound:n,last_ping_duration:i,sync_state:o,...a}=t;return{nodeId:e,connectedDuration:r,isOutbound:n,lastPingDuration:i,syncState:{bestKnownHeaderHash:o.best_known_header_hash,bestKnownHeaderNumber:o.best_known_header_number,canFetchCount:o.can_fetch_count,inflightCount:o.inflight_count,lastCommonHeaderHash:o.last_common_header_hash,lastCommonHeaderNumber:o.last_common_header_number,unknownHeaderListSize:o.unknown_header_list_size},...a}};e.toRemoteNodeInfo=A;const I=t=>{if(!t)return t;const{last_txs_updated_at:e,tip_hash:r,tip_number:n,total_tx_cycles:i,total_tx_size:o,min_fee_rate:a,...s}=t;return{lastTxsUpdatedAt:e,tipHash:r,tipNumber:n,totalTxCycles:i,totalTxSize:o,minFeeRate:a,...s}};e.toTxPoolInfo=I;const C=t=>Array.isArray(t)?t.map(A):[];e.toPeers=C;const E=t=>{if(!t)return t;const{lock:e,type:r,...n}=t;return{lock:c(e),type:r?c(r):void 0,...n}};e.toCell=E;const S=t=>{if(!t)return t;const{data:e,output:r,...n}=t;return{data:e,output:f(r),...n}};e.toLiveCell=S;const k=t=>{if(!t)return t;const{cell:e,...r}=t;return{cell:S(e),...r}};e.toLiveCellWithStatus=k;const x=t=>Array.isArray(t)?t.map(E):[];e.toCells=x;const O=t=>{if(!t)return t;const{lock:e,block_hash:r,out_point:n,output_data_len:i,...o}=t;return{blockHash:r,lock:c(e),outPoint:p(n),outputDataLen:i,...o}};e.toCellIncludingOutPoint=O;const P=t=>Array.isArray(t)?t.map(O):[];e.toCellsIncludingOutPoint=P;const B=t=>{if(!t)return t;const{transaction:e,tx_status:{block_hash:r,status:n},time_added_to_pool:i,...o}=t;return{transaction:g(e),txStatus:{blockHash:r,status:n,..."reason"in t.tx_status?{reason:t.tx_status.reason}:{}},timeAddedToPool:i,...o}};e.toTransactionWithStatus=B;const M=t=>{if(!t)return t;const{start_number:e,compact_target:r,...n}=t;return{compactTarget:r,startNumber:e,...n}};e.toEpoch=M;const T=t=>{if(!t)return t;const{block_number:e,tx_hash:r,...n}=t;return{blockNumber:e,txHash:r,...n}};e.toTransactionPoint=T;const D=t=>t?t.map(t=>({consumedBy:t.consumed_by?T(t.consumed_by):t.consumed_by,createdBy:T(t.created_by)})):t;e.toTransactionsByLockHash=D;const j=t=>t?t.map(t=>({cellOutput:E(t.cell_output),createdBy:T(t.created_by),cellbase:t.cellbase,outputDataLen:t.output_data_len})):t;e.toLiveCellsByLockHash=j;const H=t=>{if(!t)return t;const{block_hash:e,block_number:r,lock_hash:n,...i}=t;return{blockHash:e,blockNumber:r,lockHash:n,...i}};e.toLockHashIndexState=H;const L=t=>t?t.map(H):t;e.toLockHashIndexStates=L;const U=t=>{if(!t)return t;const{ban_reason:e,ban_until:r,created_at:n,...i}=t;return{banReason:e,banUntil:r,createdAt:n,...i}};e.toBannedAddress=U;const R=t=>t?t.map(t=>U(t)):t;e.toBannedAddresses=R;const F=t=>{if(!t)return t;const{proposal_reward:e,tx_fee:r,...n}=t;return{proposalReward:e,txFee:r,...n}};e.toCellbaseOutputCapacityDetails=F;const N=t=>{if(!t)return t;const{fee_rate:e,...r}=t;return{feeRate:e,...r}};e.toFeeRate=N;const Q=t=>{if(!t)return t;const{cells_count:e,block_number:r,capacity:n,...i}=t;return{blockNumber:r,capacity:n,cellsCount:e,...i}};e.toCapacityByLockHash=Q;const K=t=>{if(!t)return t;const{finalized_at:e,miner_reward:r,txs_fee:n,...i}=t;return{finalizedAt:e,minerReward:r,txsFee:n,...i}};e.toBlockEconomicState=K;const z=t=>t?{bestKnownBlockNumber:t.best_known_block_number,bestKnownBlockTimestamp:t.best_known_block_timestamp,fastTime:t.fast_time,ibd:t.ibd,inflightBlocksCount:t.inflight_blocks_count,lowTime:t.low_time,normalTime:t.normal_time,orphanBlocksCount:t.orphan_blocks_count}:t;e.toSyncState=z;const q=t=>{if(!t)return t;const{block_hash:e,witnesses_root:r,...n}=t;return{blockHash:e,witnessesRoot:r,...n}};e.toTransactionProof=q;const V=t=>({rfc:t.rfc,epochNumber:t.epoch_number}),W=t=>({bit:t.bit,start:t.start,timeout:t.timeout,minActivationEpoch:t.min_activation_epoch,period:t.period,threshold:t.threshold});e.toDeployment=W;const Y=t=>"rfc0043"in t?{status:t.status,rfc0043:W(t.rfc0043)}:t,G=t=>{if(!t)return t;const e=t.hardfork_features,r=t.softforks,n=r.light_client&&Y(r.light_client),i=r.testdummy&&Y(r.testdummy);return{blockVersion:t.block_version,cellbaseMaturity:t.cellbase_maturity,daoTypeHash:t.dao_type_hash,epochDurationTarget:t.epoch_duration_target,genesisHash:t.genesis_hash,id:t.id,initialPrimaryEpochReward:t.initial_primary_epoch_reward,maxBlockBytes:t.max_block_bytes,maxBlockCycles:t.max_block_cycles,maxBlockProposalsLimit:t.max_block_proposals_limit,maxUnclesNum:t.max_uncles_num,medianTimeBlockCount:t.median_time_block_count,orphanRateTarget:t.orphan_rate_target,permanentDifficultyInDummy:t.permanent_difficulty_in_dummy,primaryEpochRewardHalvingInterval:t.primary_epoch_reward_halving_interval,proposerRewardRatio:t.proposer_reward_ratio,secondaryEpochReward:t.secondary_epoch_reward,secp256k1Blake160MultisigAllTypeHash:t.secp256k1_blake160_multisig_all_type_hash,secp256k1Blake160SighashAllTypeHash:t.secp256k1_blake160_sighash_all_type_hash,txProposalWindow:t.tx_proposal_window,txVersion:t.tx_version,typeIdCodeHash:t.type_id_code_hash,hardforkFeatures:e.map(V),softforks:{...n&&{lightClient:n},...i&&{testdummy:i}}}};e.toConsensus=G;const $=t=>{if(!t)return t;if(n(t))return t;const e=({ancestors_count:t,ancestors_cycles:e,ancestors_size:r,...n})=>({ancestorsCount:t,ancestorsCycles:e,ancestorsSize:r,...n}),r={},i={};return Object.keys(t.proposed).forEach(n=>{r[n]=e(t.proposed[n])}),Object.keys(t.pending).forEach(r=>{i[r]=e(t.pending[r])}),{proposed:r,pending:i}};e.toRawTxPool=$;const X=t=>t?{blockNumber:t.block_number,outPoint:p(t.out_point),output:f(t.output),outputData:t.output_data,txIndex:t.tx_index}:t,J=t=>({lastCursor:t.last_cursor,objects:t.objects.map(t=>X(t))});e.toGetCellsResult=J;const Z=t=>!t.cells,tt=t=>t?Z(t)?{txHash:t.tx_hash,blockNumber:t.block_number,ioIndex:t.io_index,ioType:t.io_type,txIndex:t.tx_index}:{txHash:t.tx_hash,txIndex:t.tx_index,blockNumber:t.block_number,cells:t.cells}:t,et=t=>t?{lastCursor:t.last_cursor,objects:t.objects.map(t=>tt(t))}:t;e.toGetTransactionsResult=et;const rt=t=>t?{capacity:t.capacity,blockHash:t.block_hash,blockNumber:t.block_number}:t;e.toCellsCapacity=rt;const nt=t=>({hash:t.hash,data:t.data});e.toBlockFilter=nt;const it=t=>({blockHash:t.block_hash,transactionsProof:t.transactions_proof,witnessesProof:t.witnesses_proof});e.toTransactionAndWitnessProof=it;const ot=t=>({mean:t.mean,median:t.median});e.toFeeRateStatistics=ot;const at=t=>"string"===typeof t?t:{header:u(t.header),uncles:t.uncles.map(y),transactions:t.transactions.map(g),proposals:t.proposals,extension:t.extension};e.toForkBlockResult=at;const st=t=>({cycles:t.cycles});e.toEstimateCycles=st;const ut=t=>"locked_in"===t?"lockedIn":t;e.toDeployState=ut;const ct=t=>({bit:t.bit,start:t.start,timeout:t.timeout,minActivationEpoch:t.min_activation_epoch,period:t.period,threshold:t.threshold,since:t.since,state:ut(t.state)});e.toDeploymentInfo=ct;const lt=t=>{const{light_client:e,testdummy:r}=t.deployments;return{hash:t.hash,epoch:t.epoch,deployments:{...e?{lightClient:ct(e)}:{},...r?{testdummy:ct(r)}:{}}}};e.toDeploymentsInfo=lt},caac:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LightClientRPC=e.FetchFlag=void 0;let n,i=function(t){return t["Fetched"]="fetched",t["Fetching"]="fetching",t["Added"]="added",t["NotFound"]="not_found",t}({});e.FetchFlag=i,e.LightClientRPC=n,n||(e.LightClientRPC=n={})},cd46:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.byteArrayOf=s,e.byteOf=u,e.byteVecOf=c;var n=r("fa9b"),i=r("c914"),o=r("e3a3"),a=r("6436");function s(t){const e=t.byteLength;return(0,o.createFixedBytesCodec)({byteLength:e,pack:e=>t.pack(e),unpack:e=>t.unpack(e)})}function u(t){return s({...t,byteLength:1})}function c(t){return(0,o.createBytesCodec)({pack(e){const r=t.pack(e),n=a.Uint32LE.pack(r.byteLength);return(0,i.concat)(n,r)},unpack(e){(0,n.assertMinBufferLength)(e,4);const r=a.Uint32LE.unpack(e.slice(0,4));return(0,n.assertBufferLength)(e.slice(4),r),t.unpack(e.slice(4))}})}},cdc5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bech32m=e.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let p=0;p<n.length;p++){const t=n.charAt(p);i[t]=p}function o(t){const e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function a(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=o(e)^n>>5}e=o(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=o(e)^31&n}return e}function s(t,e,r,n){let i=0,o=0;const a=(1<<r)-1,s=[];for(let u=0;u<t.length;++u){i=i<<e|t[u],o+=e;while(o>=r)o-=r,s.push(i>>o&a)}if(n)o>0&&s.push(i<<r-o&a);else{if(o>=e)return"Excess padding";if(i<<r-o&a)return"Non-zero padding"}return s}function u(t){return s(t,8,5,!0)}function c(t){const e=s(t,5,8,!1);if(Array.isArray(e))return e}function l(t){const e=s(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function f(t){let e;function r(t,r,i){if(i=i||90,t.length+7+r.length>i)throw new TypeError("Exceeds length limit");t=t.toLowerCase();let s=a(t);if("string"===typeof s)throw new Error(s);let u=t+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5!==0)throw new Error("Non 5-bit word");s=o(s)^t,u+=n.charAt(t)}for(let e=0;e<6;++e)s=o(s);s^=e;for(let e=0;e<6;++e){const t=s>>5*(5-e)&31;u+=n.charAt(t)}return u}function s(t,r){if(r=r||90,t.length<8)return t+" too short";if(t.length>r)return"Exceeds length limit";const n=t.toLowerCase(),s=t.toUpperCase();if(t!==n&&t!==s)return"Mixed-case string "+t;t=n;const u=t.lastIndexOf("1");if(-1===u)return"No separator character for "+t;if(0===u)return"Missing prefix for "+t;const c=t.slice(0,u),l=t.slice(u+1);if(l.length<6)return"Data too short";let f=a(c);if("string"===typeof f)return f;const p=[];for(let e=0;e<l.length;++e){const t=l.charAt(e),r=i[t];if(void 0===r)return"Unknown character "+t;f=o(f)^r,e+6>=l.length||p.push(r)}return f!==e?"Invalid checksum for "+t:{prefix:c,words:p}}function f(t,e){const r=s(t,e);if("object"===typeof r)return r}function p(t,e){const r=s(t,e);if("object"===typeof r)return r;throw new Error(r)}return e="bech32"===t?1:734539939,{decodeUnsafe:f,decode:p,encode:r,toWords:u,fromWordsUnsafe:c,fromWords:l}}e.bech32=f("bech32"),e.bech32m=f("bech32m")},ce84:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BI",{enumerable:!0,get:function(){return f.BI}}),Object.defineProperty(e,"BIish",{enumerable:!0,get:function(){return f.BIish}}),Object.defineProperty(e,"CellCollector",{enumerable:!0,get:function(){return u.CellCollector}}),Object.defineProperty(e,"Indexer",{enumerable:!0,get:function(){return u.Indexer}}),Object.defineProperty(e,"LightClientRPC",{enumerable:!0,get:function(){return p.LightClientRPC}}),Object.defineProperty(e,"RPC",{enumerable:!0,get:function(){return a.RPC}}),e.helpers=e.hd=e.config=e.commons=void 0,Object.defineProperty(e,"since",{enumerable:!0,get:function(){return n.since}}),e.utils=void 0;var n=r("0b92"),i=d(r("28dd"));e.utils=i;var o=d(r("363c"));e.config=o;var a=r("8130"),s=d(r("7736"));e.hd=s;var u=r("f8a23"),c=d(r("0092"));e.helpers=c;var l=d(r("57b3"));e.commons=l;var f=r("6cf0"),p=r("34c7");function h(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(h=function(t){return t?r:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=h(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}},cf8e:function(t,e,r){var n;(function(i){"use strict";var o,a=20,s=1,u=1e6,c=1e6,l=-7,f=21,p={},h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(){function t(e){var r=this;if(!(r instanceof t))return void 0===e?d():new t(e);e instanceof t?(r.s=e.s,r.e=e.e,r.c=e.c.slice()):y(r,e),r.constructor=t}return t.prototype=p,t.DP=a,t.RM=s,t.E_NEG=l,t.E_POS=f,t}function g(t,e,r){var n=t.constructor,i=e-(t=new n(t)).e,o=t.c;for(o.length>++e&&m(t,i,n.RM),o[0]?r?i=e:(o=t.c,i=t.e+i+1):++i;o.length<i;o.push(0));return i=t.e,1===r||r&&(e<=i||i<=n.E_NEG)?(t.s<0&&o[0]?"-":"")+(o.length>1?o[0]+"."+o.join("").slice(1):o[0])+(i<0?"e":"e+")+i:t.toString()}function y(t,e){var r,n,i;for(0===e&&1/e<0?e="-0":h.test(e+="")||b(NaN),t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&"0"==e.charAt(n);n++);if(n==i)t.c=[t.e=0];else{for(;i>0&&"0"==e.charAt(--i););for(t.e=r-n-1,t.c=[];n<=i;t.c.push(+e.charAt(n++)));}return t}function m(t,e,r,n){var i,o=t.c,a=t.e+e+1;if(1===r?n=o[a]>=5:2===r?n=o[a]>5||5==o[a]&&(n||a<0||o[a+1]!==i||1&o[a-1]):3===r?n=n||o[a]!==i||a<0:(n=!1,0!==r&&b("!Big.RM!")),a<1||!o[0])n?(t.e=-e,t.c=[1]):t.c=[t.e=0];else{if(o.length=a--,n)for(;++o[a]>9;)o[a]=0,a--||(++t.e,o.unshift(1));for(a=o.length;!o[--a];o.pop());}return t}function b(t){var e=new Error(t);throw e.name="BigError",e}p.abs=function(){var t=new this.constructor(this);return t.s=1,t},p.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,o=r.s,a=t.s,s=r.e,u=t.e;if(!n[0]||!i[0])return n[0]?o:i[0]?-a:0;if(o!=a)return o;if(e=o<0,s!=u)return s>u^e?1:-1;for(o=-1,a=(s=n.length)<(u=i.length)?s:u;++o<a;)if(n[o]!=i[o])return n[o]>i[o]^e?1:-1;return s==u?0:s>u^e?1:-1},p.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,o=e.s==t.s?1:-1,a=r.DP;if((a!==~~a||a<0||a>u)&&b("!Big.DP!"),!n[0]||!i[0])return n[0]==i[0]&&b(NaN),i[0]||b(o/0),new r(0*o);var s,c,l,f,p,h,d=i.slice(),g=s=i.length,y=n.length,v=n.slice(0,s),_=v.length,w=t,A=w.c=[],I=0,C=a+(w.e=e.e-t.e)+1;for(w.s=o,o=C<0?0:C,d.unshift(0);_++<s;v.push(0));do{for(l=0;l<10;l++){if(s!=(_=v.length))f=s>_?1:-1;else for(p=-1,f=0;++p<s;)if(i[p]!=v[p]){f=i[p]>v[p]?1:-1;break}if(!(f<0))break;for(c=_==s?i:d;_;){if(v[--_]<c[_]){for(p=_;p&&!v[--p];v[p]=9);--v[p],v[_]+=10}v[_]-=c[_]}for(;!v[0];v.shift());}A[I++]=f?l:++l,v[0]&&f?v[_]=n[g]||0:v=[n[g]]}while((g++<y||v[0]!==h)&&o--);return A[0]||1==I||(A.shift(),w.e--),I>C&&m(w,a,r.RM,v[0]!==h),w},p.eq=function(t){return!this.cmp(t)},p.gt=function(t){return this.cmp(t)>0},p.gte=function(t){return this.cmp(t)>-1},p.lt=function(t){return this.cmp(t)<0},p.lte=function(t){return this.cmp(t)<1},p.sub=p.minus=function(t){var e,r,n,i,o=this,a=o.constructor,s=o.s,u=(t=new a(t)).s;if(s!=u)return t.s=-u,o.plus(t);var c=o.c.slice(),l=o.e,f=t.c,p=t.e;if(!c[0]||!f[0])return f[0]?(t.s=-u,t):new a(c[0]?o:0);if(s=l-p){for((i=s<0)?(s=-s,n=c):(p=l,n=f),n.reverse(),u=s;u--;n.push(0));n.reverse()}else for(r=((i=c.length<f.length)?c:f).length,s=u=0;u<r;u++)if(c[u]!=f[u]){i=c[u]<f[u];break}if(i&&(n=c,c=f,f=n,t.s=-t.s),(u=(r=f.length)-(e=c.length))>0)for(;u--;c[e++]=0);for(u=e;r>s;){if(c[--r]<f[r]){for(e=r;e&&!c[--e];c[e]=9);--c[e],c[r]+=10}c[r]-=f[r]}for(;0===c[--u];c.pop());for(;0===c[0];)c.shift(),--p;return c[0]||(t.s=1,c=[p=0]),t.c=c,t.e=p,t},p.mod=function(t){var e,r=this,n=r.constructor,i=r.s,o=(t=new n(t)).s;return t.c[0]||b(NaN),r.s=t.s=1,e=1==t.cmp(r),r.s=i,t.s=o,e?new n(r):(i=n.DP,o=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=o,this.minus(r.times(t)))},p.add=p.plus=function(t){var e,r=this,n=r.constructor,i=r.s,o=(t=new n(t)).s;if(i!=o)return t.s=-o,r.minus(t);var a=r.e,s=r.c,u=t.e,c=t.c;if(!s[0]||!c[0])return c[0]?t:new n(s[0]?r:0*i);if(s=s.slice(),i=a-u){for(i>0?(u=a,e=c):(i=-i,e=s),e.reverse();i--;e.push(0));e.reverse()}for(s.length-c.length<0&&(e=c,c=s,s=e),i=c.length,o=0;i;)o=(s[--i]=s[i]+c[i]+o)/10|0,s[i]%=10;for(o&&(s.unshift(o),++u),i=s.length;0===s[--i];s.pop());return t.c=s,t.e=u,t},p.pow=function(t){var e=this,r=new e.constructor(1),n=r,i=t<0;for((t!==~~t||t<-c||t>c)&&b("!pow!"),t=i?-t:t;;){if(1&t&&(n=n.times(e)),t>>=1,!t)break;e=e.times(e)}return i?r.div(n):n},p.round=function(t,e){var r=this,n=r.constructor;return null==t?t=0:(t!==~~t||t<0||t>u)&&b("!round!"),m(r=new n(r),t,null==e?n.RM:e),r},p.sqrt=function(){var t,e,r,n=this,i=n.constructor,o=n.c,a=n.s,s=n.e,u=new i("0.5");if(!o[0])return new i(n);a<0&&b(NaN),a=Math.sqrt(n.toString()),0===a||a===1/0?(t=o.join(""),t.length+s&1||(t+="0"),e=new i(Math.sqrt(t).toString()),e.e=((s+1)/2|0)-(s<0||1&s)):e=new i(a.toString()),a=e.e+(i.DP+=4);do{r=e,e=u.times(r.plus(n.div(r)))}while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return m(e,i.DP-=4,i.RM),e},p.mul=p.times=function(t){var e,r=this,n=r.constructor,i=r.c,o=(t=new n(t)).c,a=i.length,s=o.length,u=r.e,c=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!o[0])return new n(0*t.s);for(t.e=u+c,a<s&&(e=i,i=o,o=e,c=a,a=s,s=c),e=new Array(c=a+s);c--;e[c]=0);for(u=s;u--;){for(s=0,c=a+u;c>u;)s=e[c]+o[u]*i[c-u-1]+s,e[c--]=s%10,s=s/10|0;e[c]=(e[c]+s)%10}for(s&&++t.e,e[0]||e.shift(),u=e.length;!e[--u];e.pop());return t.c=e,t},p.toString=p.valueOf=p.toJSON=function(){var t=this,e=t.constructor,r=t.e,n=t.c.join(""),i=n.length;if(r<=e.E_NEG||r>=e.E_POS)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;n="0"+n);n="0."+n}else if(r>0)if(++r>i)for(r-=i;r--;n+="0");else r<i&&(n=n.slice(0,r)+"."+n.slice(r));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return t.s<0&&t.c[0]?"-"+n:n},p.toExponential=function(t){return null==t?t=this.c.length-1:(t!==~~t||t<0||t>u)&&b("!toExp!"),g(this,t,1)},p.toFixed=function(t){var e,r=this,n=r.constructor,i=n.E_NEG,o=n.E_POS;return n.E_NEG=-(n.E_POS=1/0),null==t?e=r.toString():t===~~t&&t>=0&&t<=u&&(e=g(r,r.e+t),r.s<0&&r.c[0]&&e.indexOf("-")<0&&(e="-"+e)),n.E_NEG=i,n.E_POS=o,e||b("!toFix!"),e},p.toPrecision=function(t){return null==t?this.toString():((t!==~~t||t<1||t>u)&&b("!toPre!"),g(this,t-1,2))},o=d(),n=function(){return o}.call(e,r,e,t),void 0===n||(t.exports=n)})()},d29a:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CellCollector=void 0,e.checkLimit=m,e.default=void 0,e.injectCapacity=v,e.prepareSigningEntries=_,e.setupInputCell=y,e.setupOutputCell=b,e.withdraw=w;var n=r("0b92"),i=r("4b0a"),o=r("a2e8"),a=r("c1f3"),s=r("329b"),u=r("6cf0"),c=r("1c87"),l=r("832d"),f=r("01d4");const{ScriptValue:p}=n.values,{CKBHasher:h,ckbHash:d}=n.utils,g=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,o.getConfig)(),this.fromScript=(0,c.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,l.isAcpScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function y(t,e,r,{config:a,defaultWitness:s="0x",since:u}={}){a=a||(0,o.getConfig)();const c=e.cellOutput.lock;if(!(0,l.isAcpScript)(c,a))throw new Error("Not anyone-can-pay input!");t=t.update("inputs",t=>t.push(e)),u&&(t=t.update("inputSinces",e=>e.set(t.get("inputs").size-1,u))),t=t.update("witnesses",t=>t.push(s));const f={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",t=>t.push(f)),t=t.update("fixedEntries",e=>e.push({field:"outputs",index:t.get("outputs").size-1}));const h=a.SCRIPTS.ANYONE_CAN_PAY;if(!h)throw new Error("ANYONE_CAN_PAY script not defined in config!");const d={txHash:h.TX_HASH,index:h.INDEX};t=(0,l.addCellDep)(t,{outPoint:d,depType:h.DEP_TYPE});const g=t.get("inputs").findIndex(t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(c,{validate:!1})));if(-1!==g){while(g>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));let e=t.get("witnesses").get(g);const r={lock:l.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=n.blockchain.WitnessArgs.unpack(i.bytes.bytify(e)),o=t.lock;if(o&&r.lock&&!i.bytes.equal(o,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(r.inputType=a);const s=t.outputType;s&&(r.outputType=s)}e=i.bytes.hexify(n.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",t=>t.set(g,e))}return t}function m(t,e){const r=u.BI.from(e);let n,i;if(t.length>=46&&(n=u.BI.from(10).pow("0x"+t.slice(44,46))),t.length>=44){const e=u.BI.from(10).pow("0x"+t.slice(42,44)),r=u.BI.from(10).pow(8);i=e.mul(r)}if(i&&n){if(r.lt(i))throw new Error(`capacity(${e}) less than toAddress minimal capacity limit(${i}), and amount less then toAddress minimal amount limit(${n})! If you want to transfer sudt, maybe sudt.transfer can help you.`)}else if(i&&r.lt(i))throw new Error(`capacity(${e}) less than toAddress minimal capacity limit(${i})!`)}async function b(t,e,{config:r}={}){r=r||(0,o.getConfig)();const n=e.cellOutput.lock,i=u.BI.from(e.cellOutput.capacity);m(n.args,i.toString());const s=t.get("cellProvider");if(!s)throw new Error("Cell Provider is missing!");const c=(0,a.generateAddress)(n,{config:r}),f=new g(c,s,{config:r}),p=(await f.collect().next()).value;let h=i;if(p&&(h=i.add(p.cellOutput.capacity),t=t.update("inputs",t=>t.push(p)),t=t.update("witnesses",t=>t.push("0x"))),e.cellOutput.capacity="0x"+h.toString(16),t=t.update("outputs",t=>t.push(e)),p){const e=r.SCRIPTS.ANYONE_CAN_PAY;if(!e)throw new Error("ANYONE_CAN_PAY script not defined in config!");const n={txHash:e.TX_HASH,index:e.INDEX};t=(0,l.addCellDep)(t,{outPoint:n,depType:e.DEP_TYPE})}return t}async function v(t,e,r,n,{config:i}={}){if(i=i||(0,o.getConfig)(),r>=e.get("outputs").size)throw new Error("Invalid output index!");let c=u.BI.from(n);const l=i.SCRIPTS.ANYONE_CAN_PAY;if(!l)throw new Error("Provided config does not have ANYONE_CAN_PAY script setup!");const f=t.fromScript,h=e.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let d=h?h.index+1:0;for(;d<e.get("outputs").size&&c.gt(0);d++){const t=e.get("outputs").get(d);if(new p(t.cellOutput.lock,{validate:!1}).equals(new p(f,{validate:!1}))){const e=u.BI.from(t.cellOutput.capacity),r=e.sub((0,a.minimalCellCapacityCompatible)(t)),n=c.gte(r)?r:c;c=c.sub(n),t.cellOutput.capacity="0x"+e.sub(n).toString(16)}}e=e.update("outputs",t=>t.filter(t=>!u.BI.from(t.cellOutput.capacity).eq(0)));const g=t=>`${t.outPoint.txHash}_${t.outPoint.index}`;if(c.gt(0)){const r={cellOutput:{capacity:"0x0",lock:f,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let n=u.BI.from(0);const o=u.BI.from((0,a.minimalCellCapacityCompatible)(r));let l=(0,s.Set)();for(const t of e.get("inputs"))l=l.add(g(t));for await(const a of t.collect()){if(l.has(g(a)))continue;e=await y(e,a,void 0,{config:i});const t=e.get("outputs").size-1;e=e.update("outputs",e=>e.remove(t));const s=e.get("fixedEntries").findIndex(e=>"outputs"===e.field&&e.index===t);s>=0&&(e=e.update("fixedEntries",t=>t.remove(s)));const f=u.BI.from(a.cellOutput.capacity);let p=f;if(p.gt(c)&&(p=c),c=c.sub(p),n=n.add(f.sub(p)),c.eq(0)&&n.gte(o))break;r.cellOutput.capacity="0x"+n.toString(16),e=e.update("outputs",t=>t.push(r))}if(c.gt(0)||n<o)throw new Error("Not enough capacity in from address!");r.cellOutput.capacity="0x"+n.toString(16),e=e.update("outputs",t=>t.push(r))}return e}function _(t,{config:e}={}){e=e||(0,o.getConfig)();const r="ANYONE_CAN_PAY",i=e.SCRIPTS[r];if(!i)throw new Error(`Provided config does not have ${r} script setup!`);let c=(0,s.Set)();const g=(0,a.createTransactionFromSkeleton)(t),y=d(n.blockchain.RawTransaction.pack(g)),m=t.get("inputs"),b=t.get("witnesses");let v=t.get("signingEntries");for(let o=0;o<m.size;o++){const e=m.get(o);if(i.CODE_HASH===e.cellOutput.lock.codeHash&&i.HASH_TYPE===e.cellOutput.lock.hashType&&!c.has(e.cellOutput.lock.args)){c=c.add(e.cellOutput.lock.args);const r=t.get("outputs").filter(t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(e.cellOutput.lock,{validate:!1}))),i=r.map(t=>u.BI.from(t.cellOutput.capacity)).reduce((t,e)=>t.add(e),u.BI.from(0)),a=r.filter(t=>"0x"!==t.data).map(t=>(0,f.unpackAmount)(t.data)).reduce((t,e)=>t.add(e),u.BI.from(0)),s=m.filter(t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(e.cellOutput.lock,{validate:!1}))),d=s.map(t=>u.BI.from(t.cellOutput.capacity)).reduce((t,e)=>t.add(e),u.BI.from(0)),g=s.filter(t=>"0x"!==t.data).map(t=>u.BI.from((0,f.unpackAmount)(t.data))).reduce((t,e)=>t.add(e),u.BI.from(0));if(d.lte(i)&&g.lte(a))continue;const _=new n.values.ScriptValue(e.cellOutput.lock,{validate:!1}),w=new h;if(w.update(y),o>=b.size)throw new Error(`The first witness in the script group starting at input index ${o} does not exist, maybe some other part has invalidly tampered the transaction?`);(0,l.hashWitness)(w,b.get(o));for(let t=o+1;t<m.size&&t<b.size;t++){const e=m.get(t);_.equals(new n.values.ScriptValue(e.cellOutput.lock,{validate:!1}))&&(0,l.hashWitness)(w,b.get(t))}for(let t=m.size;t<b.size;t++)(0,l.hashWitness)(w,b.get(t));const A={type:"witness_args_lock",index:o,message:w.digestHex()};v=v.push(A)}}return t=t.set("signingEntries",v),t}async function w(t,e,r,n,{config:i}={}){if(i=i||(0,o.getConfig)(),!(0,l.isAcpScript)(e.cellOutput.lock,i))throw new Error("fromInput is not a ANYONE_CAN_PAY cell!");const s=u.BI.from(n),c=u.BI.from(e.cellOutput.capacity),f=u.BI.from((0,a.minimalCellCapacityCompatible)(e));if(!(s.gte(0)&&s.lte(c.sub(f))||s.eq(c)))throw new Error(`capacity must be in [0, ${c.sub(f)}] or ${c} !`);const p=(0,a.parseAddress)(r,{config:i}),h={cellOutput:{capacity:"0x"+n.toString(16),lock:p,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};if((0,l.isAcpScript)(p,i)){m(p.args,n);const e=t.get("cellProvider");if(!e)throw new Error("Cell Provider is missing!");const o=new g(r,e,{config:i}),a=(await o.collect().next()).value;if(!a)throw new Error("toAddress ANYONE_CAN_PAY input not found!");const u=s.add(a.cellOutput.capacity);h.cellOutput.capacity="0x"+u.toString(16),t=t.update("inputs",t=>t.push(a)),t=t.update("witnesses",t=>t.push("0x"))}t=t.update("outputs",t=>t.push(h)),t=await y(t,e,(0,a.generateAddress)(e.cellOutput.lock,{config:i}),{config:i});const d=t.get("outputs").size-1;t=t.update("outputs",t=>t.remove(d));const b=t.get("fixedEntries").findIndex(t=>"outputs"===t.field&&t.index===d);return b>=0&&(t=t.update("fixedEntries",t=>t.remove(b))),s.eq(c)||(t=t.update("outputs",t=>t.push({cellOutput:{capacity:"0x"+c.sub(n).toString(16),lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data}))),t}e.CellCollector=g;var A={CellCollector:g,setupInputCell:y,setupOutputCell:b,injectCapacity:v,prepareSigningEntries:_,withdraw:w};e.default=A},d30e:function(t,e,r){"use strict";function n(t,e){var r="[".concat(t,"] ").concat(e);return"error"===t||"warn"===t?console.warn(r):void console.log("[".concat(t,"] ").concat(e))}function i(t){n("deprecated",t)}r("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.defaultLogger=n,e.deprecated=i},d4f1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=m,Object.defineProperty(e,"multisigArgs",{enumerable:!0,get:function(){return c.multisigArgs}}),e.payFee=y,e.prepareSigningEntries=b,Object.defineProperty(e,"serializeMultisigScript",{enumerable:!0,get:function(){return c.serializeMultisigScript}}),e.setupInputCell=h,e.transfer=d,e.transferCompatible=g;var n=r("c1f3"),i=r("4b0a"),o=r("0b92"),a=r("a2e8"),s=r("329b"),u=r("832d"),c=r("1c87"),l=r("6cf0");const{ScriptValue:f}=o.values,p=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,a.getConfig)();const i=(0,c.parseFromInfo)(t,{config:r});this.fromScript=i.fromScript,this.multisigScript=i.multisigScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,u.isSecp256k1Blake160MultisigScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function h(t,e,r,{config:n,defaultWitness:s="0x",since:l,requireMultisigScript:p=!0}={}){if(n=n||(0,a.getConfig)(),p&&"object"!==typeof r)throw new Error("`fromInfo` must be MultisigScript format!");const h=e.cellOutput.lock;if(r){const t=(0,c.parseFromInfo)(r,{config:n}).fromScript;if(!new f(t,{validate:!1}).equals(new f(h,{validate:!1})))throw new Error("`fromInfo` not match to input lock!")}if(!(0,u.isSecp256k1Blake160MultisigScript)(h,n))throw new Error("Not SECP256K1_BLAKE160_MULTISIG input!");t=t.update("inputs",t=>t.push(e)),l&&(t=t.update("inputSinces",e=>e.set(t.get("inputs").size-1,l))),t=t.update("witnesses",t=>t.push(s));const d={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",t=>t.push(d));const g=n.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!g)throw new Error("SECP256K1_BLAKE160_MULTISIG script not defined in config!");const y={txHash:g.TX_HASH,index:g.INDEX};t=(0,u.addCellDep)(t,{outPoint:y,depType:g.DEP_TYPE});const m=t.get("inputs").findIndex(t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(h,{validate:!1})));if(-1!==m){while(m>=t.get("witnesses").size)t=t.update("witnesses",t=>t.push("0x"));const e=t.get("witnesses").get(m);if("0x"===e&&"object"!==typeof r)throw new Error("`fromInfo` must be MultisigScript format!");if("object"===typeof r){const e=(0,c.parseFromInfo)(r,{config:n}).multisigScript;let a=t.get("witnesses").get(m);const s={lock:"0x"+e.slice(2)+u.SECP_SIGNATURE_PLACEHOLDER.slice(2).repeat(r.M)};if("0x"!==a){const t=o.blockchain.WitnessArgs.unpack(i.bytes.bytify(a)),e=t.lock;if(e&&s.lock&&!i.bytes.equal(e,s.lock))throw new Error("Lock field in first witness is set aside for signature!");const r=t.inputType;r&&(s.inputType=r);const n=t.outputType;n&&(s.outputType=n)}a=i.bytes.hexify(o.blockchain.WitnessArgs.pack(s)),t=t.update("witnesses",t=>t.set(m,a))}}return t}async function d(t,e,r,n,{config:i,requireToAddress:o=!0,assertAmountEnough:a=!0}={}){const s=await g(t,e,r,n,{config:i,requireToAddress:o,assertAmountEnough:a});let u,c;return s instanceof Array?(u=s[0],c=BigInt(s[1].toString()),[u,c]):(u=s,u)}async function g(t,e,r,p,{config:h,requireToAddress:d=!0,assertAmountEnough:g=!0}={}){h=h||(0,a.getConfig)();const y=h.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!y)throw new Error("Provided config does not have SECP256K1_BLAKE16_MULTISIG script setup!");const m={txHash:y.TX_HASH,index:y.INDEX};t=(0,u.addCellDep)(t,{outPoint:m,depType:y.DEP_TYPE});const{fromScript:b,multisigScript:v}=(0,c.parseFromInfo)(e,{config:h});(0,u.ensureScript)(b,h,"SECP256K1_BLAKE160_MULTISIG");const _=!t.get("inputs").find(t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(b,{validate:!1})));if(_&&"string"===e)throw new Error("MultisigScript is required for witness!");if(d&&!r)throw new Error("You must provide a to address!");let w=p?l.BI.from(p):l.BI.from(0);if(r){const e=(0,n.parseAddress)(r,{config:h});t=t.update("outputs",t=>t.push({cellOutput:{capacity:"0x"+w.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0}))}const A=t.get("fixedEntries").filter(({field:t})=>"outputs"===t).maxBy(({index:t})=>t);let I=A?A.index+1:0;for(;I<t.get("outputs").size&&w.gt(0);++I){const e=t.get("outputs").get(I);if(new f(e.cellOutput.lock,{validate:!1}).equals(new f(b,{validate:!1}))){const t=l.BI.from(e.cellOutput.capacity);let r;w.gte(t)?r=t:(r=t.sub((0,n.minimalCellCapacityCompatible)(e)),r.gt(w)&&(r=w)),w=w.sub(r),e.cellOutput.capacity="0x"+t.sub(r).toString(16)}}if(t=t.update("outputs",t=>t.filter(t=>!l.BI.from(t.cellOutput.capacity).eq(0))),w.gt(0)){const e=t.get("cellProvider");if(!e)throw new Error("cell provider is missing!");const r=e.collector({lock:b}),i={cellOutput:{capacity:"0x0",lock:b,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let o=l.BI.from(0),a=(0,s.Set)();for(const n of t.get("inputs"))a=a.add(`${n.outPoint.txHash}_${n.outPoint.index}`);for await(const s of r.collect()){if(a.has(`${s.outPoint.txHash}_${s.outPoint.index}`))continue;t=t.update("inputs",t=>t.push(s)),t=t.update("witnesses",t=>t.push("0x"));const e=l.BI.from(s.cellOutput.capacity);let r=e;if(r.gt(w)&&(r=w),w=w.sub(r),o=o.add(e.sub(r)),w.eq(0)&&(o.eq(0)||o.gt((0,n.minimalCellCapacityCompatible)(i))))break}o.gt(0)&&(i.cellOutput.capacity="0x"+o.toString(16),t=t.update("outputs",t=>t.push(i)))}if(w.gt(0)&&g)throw new Error("Not enough capacity in from address!");const C=t.get("inputs").findIndex(t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(b,{validate:!1})));if(-1!==C){while(l.BI.from(C).gte(t.get("witnesses").size))t=t.update("witnesses",t=>t.push("0x"));if(_||"string"!==typeof e){let r=t.get("witnesses").get(C);const n={lock:"0x"+v.slice(2)+u.SECP_SIGNATURE_PLACEHOLDER.slice(2).repeat(e.M)};if("0x"!==r){const t=o.blockchain.WitnessArgs.unpack(i.bytes.bytify(r)),e=t.lock;if(e&&n.lock&&!i.bytes.equal(e,n.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(n.inputType=a);const s=t.outputType;s&&(n.outputType=s)}r=i.bytes.hexify(o.blockchain.WitnessArgs.pack(n)),t=t.update("witnesses",t=>t.set(C,r))}}return g?t:[t,l.BI.from(w)]}async function y(t,e,r,{config:n}={}){return n=n||(0,a.getConfig)(),g(t,e,void 0,r,{config:n,requireToAddress:!1})}async function m(t,e,r,{config:n}={}){if(n=n||(0,a.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const i=l.BI.from(t.get("outputs").get(e).cellOutput.capacity);return g(t,r,void 0,i,{config:n,requireToAddress:!1})}function b(t,{config:e}={}){return e=e||(0,a.getConfig)(),(0,u.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160_MULTISIG")}e.CellCollector=p;var v={transfer:d,transferCompatible:g,payFee:y,prepareSigningEntries:b,serializeMultisigScript:c.serializeMultisigScript,multisigArgs:c.multisigArgs,injectCapacity:m,setupInputCell:h,CellCollector:p};e.default=v},d699:function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r("5bf9"))},d8d3:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toTip=e.toSearchKey=e.toSearchFilter=e.toScript=e.toOutPoint=e.toCellOutPut=void 0;const n=t=>({blockHash:t.block_hash,blockNumber:t.block_number});e.toTip=n;const i=t=>({codeHash:t.code_hash,hashType:t.hash_type,args:t.args});e.toScript=i;const o=t=>({txHash:t.tx_hash,index:t.index});e.toOutPoint=o;const a=t=>({...t,lock:i(t.lock),type:t.type?i(t.type):void 0});e.toCellOutPut=a;const s=t=>({script:t.script?i(t.script):t.script,outputDataLenRange:t.output_data_len_range,outputCapacityRange:t.output_capacity_range,scriptLenRange:t.script_len_range,blockRange:t.block_range});e.toSearchFilter=s;const u=t=>({script:i(t.script),scriptType:t.script_type,filter:t.filter?s(t.filter):t.filter,scriptSearchMode:t.script_search_mode});e.toSearchKey=u},d993:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];e.default=n},dbd54:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("bfda"),i=a(r("ca1d"));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}const s={getIndexerTip:{method:"get_indexer_tip",paramsFormatters:[],resultFormatters:i.toTip},getCells:{method:"get_cells",paramsFormatters:[n.formatter.toGetCellsSearchKey,n.formatter.toOrder,n.formatter.toNumber,n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toGetCellsResult},getTransactions:{method:"get_transactions",paramsFormatters:[n.formatter.toGetTransactionsSearchKey,n.formatter.toOrder,n.formatter.toNumber,n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toGetTransactionsResult},getCellsCapacity:{method:"get_cells_capacity",paramsFormatters:[n.formatter.toSearchKey],resultFormatters:i.toCellsCapacity},getBlockFilter:{method:"get_block_filter",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toNullable(i.toBlockFilter)},getTransactionAndWitnessProof:{method:"get_transaction_and_witness_proof",paramsFormatters:[n.formatter.toArray(n.formatter.toHash),n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toTransactionAndWitnessProof},verifyTransactionAndWitnessProof:{method:"verify_transaction_and_witness_proof",paramsFormatters:[n.formatter.toTransactionAndWitnessProof],resultFormatters:i.toArray(i.toHash)},getForkBlock:{method:"get_fork_block",paramsFormatters:[n.formatter.toHash,n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toForkBlockResult)},getBlockMedianTime:{method:"get_block_median_time",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toNullable(i.toNumber)},estimateCycles:{method:"estimate_cycles",paramsFormatters:[n.formatter.toRawTransaction],resultFormatters:i.toEstimateCycles},getFeeRateStatistics:{method:"get_fee_rate_statistics",paramsFormatters:[n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toFeeRateStatistics)},getFeeRateStatics:{method:"get_fee_rate_statics",paramsFormatters:[n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toFeeRateStatistics)}};var u=s;e.default=u},ddb4:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedPublicKey=e.ExtendedPrivateKey=e.AddressType=e.AccountExtendedPublicKey=void 0;var n=c(r("a02f")),i=u(r("158e")),o=r("0b92"),a=r("9cd4");function s(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e,r){return e=f(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=p(t,"string");return"symbol"===typeof e?e:String(e)}function p(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}let h=function(t){return t[t["Receiving"]=0]="Receiving",t[t["Change"]=1]="Change",t}({});e.AddressType=h;class d{constructor(t,e){(0,a.assertPublicKey)(t),(0,a.assertChainCode)(e),this.publicKey=t,this.chainCode=e}serialize(){return this.publicKey+this.chainCode.slice(2)}static parse(t){return o.utils.assertHexString("serialized",t),new d(t.slice(0,68),"0x"+t.slice(68))}}e.ExtendedPublicKey=d;class g extends d{static parse(t){return o.utils.assertHexString("serialized",t),new g(t.slice(0,68),"0x"+t.slice(68))}publicKeyInfo(t,e){const r=this.getPublicKey(t,e),n=i.default.publicKeyToBlake160(r);return{publicKey:r,blake160:n,path:g.pathFor(t,e)}}static pathForReceiving(t){return g.pathFor(h.Receiving,t)}static pathForChange(t){return g.pathFor(h.Change,t)}static pathFor(t,e){return`${g.ckbAccountPath}/${t}/${e}`}getPublicKey(e=h.Receiving,r){const i=n.default.fromPublicKey(t.from(this.publicKey.slice(2),"hex"),t.from(this.chainCode.slice(2),"hex"),g.ckbAccountPath).deriveChild(e,!1).deriveChild(r,!1);return"0x"+i.publicKey.toString("hex")}}e.AccountExtendedPublicKey=g,l(g,"ckbAccountPath","m/44'/309'/0'");class y{constructor(t,e){(0,a.assertPrivateKey)(t),(0,a.assertChainCode)(e),this.privateKey=t,this.chainCode=e}serialize(){return this.privateKey+this.chainCode.slice(2)}toExtendedPublicKey(){const t=(0,i.privateToPublic)(this.privateKey);return new d(t,this.chainCode)}toAccountExtendedPublicKey(){const e=new n.default(t.from(this.privateKey.slice(2),"hex"),t.from(this.chainCode.slice(2),"hex")),r=e.derivePath(g.ckbAccountPath);return new g("0x"+r.publicKey.toString("hex"),"0x"+r.chainCode.toString("hex"))}static fromSeed(t){const e=n.default.fromSeed(t);return new y("0x"+e.privateKey.toString("hex"),"0x"+e.chainCode.toString("hex"))}privateKeyInfo(t,e){const r=g.pathFor(t,e);return this.privateKeyInfoByPath(r)}privateKeyInfoByPath(e){const r=new n.default(t.from(this.privateKey.slice(2),"hex"),t.from(this.chainCode.slice(2),"hex")).derivePath(e);return this.privateKeyInfoFromKeychain(r,e)}privateKeyInfoFromKeychain(t,e){return{privateKey:"0x"+t.privateKey.toString("hex"),publicKey:"0x"+t.publicKey.toString("hex"),path:e}}static parse(t){return o.utils.assertHexString("serialized",t),new y(t.slice(0,66),"0x"+t.slice(66))}}e.ExtendedPrivateKey=y}).call(this,r("1c35").Buffer)},dff7:function(t,e){var r=(t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports},n=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),i=0,o=0;i<r;){var a=t[e.charCodeAt(i++)],s=t[e.charCodeAt(i++)],u=t[e.charCodeAt(i++)],c=t[e.charCodeAt(i++)];n[o++]=a<<2|s>>4,n[o++]=s<<4|u>>2,n[o++]=u<<6|c}return n}})(),i=r({"wasm-binary:./blake2b.wat"(t,e){e.exports=n("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),o=i(),a=WebAssembly.compile(o);t.exports=async t=>{const e=await WebAssembly.instantiate(await a,t);return e.exports}},e3a3:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBytesCodec=o,e.createFixedBytesCodec=s,e.isFixedCodec=a;var n=r("fa9b"),i=r("c914");function o(t){return{pack:e=>t.pack(e),unpack:e=>t.unpack((0,i.bytify)(e))}}function a(t){return(0,n.isObjectLike)(t)&&!!t.__isFixedCodec__}function s(t){const e=t.byteLength;return{__isFixedCodec__:!0,byteLength:e,...o({pack:r=>{const i=t.pack(r);return(0,n.assertBufferLength)(i,e),i},unpack:r=>((0,n.assertBufferLength)(r,e),t.unpack(r))})}}},e4f07:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertQueryOptionToLumosSearchKey=a,e.filterByLumosQueryOptions=s,e.filterByLumosSearchKey=u,e.instanceOfDataWithSearchMode=p,e.instanceOfScriptWrapper=f,e.unwrapScriptWrapper=e.unwrapDataWrapper=void 0;var n=r("0b92"),i=r("4b0a"),o=r("6cf0");function a(t){let e,r,n;const i=t.lock,o=t.type;if(i&&(e=f(i)?i.script:i),o&&"empty"!==o&&(r=f(o)?o.script:o),e)n={script:e,scriptType:"lock",scriptSearchMode:f(i)&&i.searchMode||"prefix",filter:{}},r&&(n.filter.script=r);else{if(!r)throw new Error("query.lock and query.type can't be both empty");n={script:r,scriptType:"type",scriptSearchMode:f(o)&&o.searchMode||"prefix",filter:{}}}const{outputDataLenRange:a,outputCapacityRange:s,scriptLenRange:u}=t;return n.filter.outputDataLenRange=a,n.filter.outputCapacityRange=s,n.filter.scriptLenRange=u,"empty"===o&&(n.filter.scriptLenRange=["0x0","0x1"]),n}function s(t,e){const r=a(e);let n=t.filter(t=>u(t,r));if(e.argsLen&&"any"!==e.argsLen&&-1!==e.argsLen&&(n=n.filter(t=>i.bytes.bytify(t.cellOutput.lock.args).length===e.argsLen)),e.data&&"any"!==e.data)if(p(e.data)&&"exact"===e.data.searchMode){const t=e.data;n=n.filter(e=>i.bytes.equal(i.bytes.bytify(e.data),i.bytes.bytify(t.data)))}else if(p(e.data)&&"prefix"===e.data.searchMode){const t=e.data;n=n.filter(e=>{const r=i.bytes.bytify(t.data),n=i.bytes.bytify(e.data).slice(0,r.length);return i.bytes.equal(r,n)})}else n=n.filter(t=>{const r=i.bytes.bytify(e.data),n=i.bytes.bytify(t.data).slice(0,r.length);return i.bytes.equal(r,n)});return n}function u(t,e){const r="exact"===e.scriptSearchMode,{cellOutput:a}=t,{scriptType:s,script:u,filter:f}=e;if(r){if("lock"===s){if(!i.bytes.equal(n.blockchain.Script.pack(a.lock),n.blockchain.Script.pack(u)))return!1}else if(!a.type||!i.bytes.equal(n.blockchain.Script.pack(a.type),n.blockchain.Script.pack(u)))return!1}else if("lock"===s){if(!c(a.lock,u))return!1}else if(!c(a.type,u))return!1;if(!f)return!0;if("lock"===s){if(f.script&&!c(a.type,f.script))return!1;if(f.scriptLenRange&&!l(a.type,f.scriptLenRange))return!1}else{if(f.script&&!c(a.lock,f.script))return!1;if(f.scriptLenRange&&!l(a.lock,f.scriptLenRange))return!1}const{outputCapacityRange:p,outputDataLenRange:h}=f;if(p){const t=o.BI.from(a.capacity),e=o.BI.from(p[0]),r=o.BI.from(p[1]);if(t.lt(e)||t.gte(r))return!1}if(h){const e=o.BI.from(i.bytes.bytify(t.data).length),r=o.BI.from(h[0]),n=o.BI.from(h[1]);if(e.lt(r)||e.gte(n))return!1}return!0}function c(t,e){if(!t)return!1;if(!i.bytes.equal(e.codeHash,t.codeHash))return!1;const r=i.bytes.bytify(e.args),n=i.bytes.bytify(t.args).slice(0,r.length);return!!i.bytes.equal(r,n)&&t.hashType===e.hashType}function l(t,e){const r=t?o.BI.from(i.bytes.concat(t.codeHash,t.args).length+1):o.BI.from(0),n=o.BI.from(e[0]),a=o.BI.from(e[1]);return!r.lt(n)&&!r.gte(a)}function f(t){return"object"===typeof t&&null!=t&&"script"in t}function p(t){return"object"===typeof t&&null!=t&&"data"in t}const h=t=>f(t)?t.script:t;e.unwrapScriptWrapper=h;const d=t=>p(t)?t.data:t;e.unwrapDataWrapper=d},e622:function(t,e,r){var n=r("ffc2"),i=r("a94a");function o(t,e,r){var n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function a(t,e,r,n){var i=t[e]+r;r<0&&(i+=4294967296);var o=t[e+1]+n;i>=4294967296&&o++,t[e]=i,t[e+1]=o}function s(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function u(t,e,r,n,i,s){var u=h[i],c=h[i+1],l=h[s],f=h[s+1];o(p,t,e),a(p,t,u,c);var d=p[n]^p[t],g=p[n+1]^p[t+1];p[n]=g,p[n+1]=d,o(p,r,n),d=p[e]^p[r],g=p[e+1]^p[r+1],p[e]=d>>>24^g<<8,p[e+1]=g>>>24^d<<8,o(p,t,e),a(p,t,l,f),d=p[n]^p[t],g=p[n+1]^p[t+1],p[n]=d>>>16^g<<16,p[n+1]=g>>>16^d<<16,o(p,r,n),d=p[e]^p[r],g=p[e+1]^p[r+1],p[e]=g>>>31^d<<1,p[e+1]=d>>>31^g<<1}var c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],f=new Uint8Array(l.map((function(t){return 2*t}))),p=new Uint32Array(32),h=new Uint32Array(32);function d(t,e){var r=0;for(r=0;r<16;r++)p[r]=t.h[r],p[r+16]=c[r];for(p[24]=p[24]^t.t,p[25]=p[25]^t.t/4294967296,e&&(p[28]=~p[28],p[29]=~p[29]),r=0;r<32;r++)h[r]=s(t.b,4*r);for(r=0;r<12;r++)u(0,8,16,24,f[16*r+0],f[16*r+1]),u(2,10,18,26,f[16*r+2],f[16*r+3]),u(4,12,20,28,f[16*r+4],f[16*r+5]),u(6,14,22,30,f[16*r+6],f[16*r+7]),u(0,10,20,30,f[16*r+8],f[16*r+9]),u(2,12,22,24,f[16*r+10],f[16*r+11]),u(4,14,16,26,f[16*r+12],f[16*r+13]),u(6,8,18,28,f[16*r+14],f[16*r+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^p[r]^p[r+16]}var g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function y(t,e,r,n){g.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,g[0]=t,e&&(g[1]=e.length),g[2]=1,g[3]=1,r&&g.set(r,32),n&&g.set(n,48);for(var i=0;i<16;i++)this.h[i]=c[i]^s(g,4*i);e&&(m(this,e),this.c=128)}function m(t,e){for(var r=0;r<e.length;r++)128===t.c&&(t.t+=t.c,d(t,!1),t.c=0),t.b[t.c++]=e[r]}function b(t,e){t.t+=t.c;while(t.c<128)t.b[t.c++]=0;d(t,!0);for(var r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(3&r);return e}function v(t){for(var e="",r=0;r<t.length;r++)e+=_(t[r]);return e}function _(t){return t<16?"0"+t.toString(16):t.toString(16)}y.prototype.update=function(t){return n(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),m(this,t),this},y.prototype.digest=function(t){var e=t&&"binary"!==t&&"hex"!==t?t:new Uint8Array(this.outlen);return n(e instanceof Uint8Array,'out must be "binary", "hex", Uint8Array, or Buffer'),n(e.length>=this.outlen,"out must have at least outlen bytes of space"),b(this,e),"hex"===t?v(e):e},y.prototype.final=y.prototype.digest,y.ready=function(t){i.ready((function(){t()}))};var w=y;t.exports=function(t,e,r,i,o){return!0!==o&&(n(t>=A,"outlen must be at least "+A+", was given "+t),n(t<=I,"outlen must be at most "+I+", was given "+t),null!=e&&(n(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),n(e.length>=C,"key must be at least "+C+", was given "+e.length),n(e.length<=E,"key must be at most "+E+", was given "+e.length)),null!=r&&(n(r instanceof Uint8Array,"salt must be Uint8Array or Buffer"),n(r.length===S,"salt must be exactly "+S+", was given "+r.length)),null!=i&&(n(i instanceof Uint8Array,"personal must be Uint8Array or Buffer"),n(i.length===k,"personal must be exactly "+k+", was given "+i.length))),new w(t,e,r,i)},t.exports.ready=function(t){i.ready((function(){t()}))},t.exports.WASM_SUPPORTED=i.SUPPORTED,t.exports.WASM_LOADED=!1;var A=t.exports.BYTES_MIN=16,I=t.exports.BYTES_MAX=64,C=(t.exports.BYTES=32,t.exports.KEYBYTES_MIN=16),E=t.exports.KEYBYTES_MAX=64,S=(t.exports.KEYBYTES=32,t.exports.SALTBYTES=16),k=t.exports.PERSONALBYTES=16;i.ready((function(e){e||(t.exports.WASM_LOADED=!0,t.exports=i)}))},e63c:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},eb1c:function(t,e,r){var n,i,o,a=r("4082").default,s=r("7ec2").default,u=r("c973").default,c=r("970b").default,l=r("5bc3").default,f=r("3c96").default,p=r("ed6d").default,h=r("2d0d").default,d=r("a128").default,g=r("448a").default,y=r("ded3").default,m=r("7037").default,b=["joyidAppURL","joyidServerURL"],v=["popup","timeoutInSeconds"],_=["popup","timeoutInSeconds"],w=["popup","timeoutInSeconds"];r("6c57"),r("c73d"),r("99af"),r("d3b7"),r("159b"),r("b64b"),r("d81d"),r("25f0"),r("e9c4"),r("a15b"),r("ace4"),r("5cc6"),r("907a"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("986a"),r("1d02"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("6ce5"),r("2834"),r("72f7"),r("4ea1"),r("4d90"),r("2ca0"),r("fb6a"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("88a7"),r("271a"),r("5494"),r("131a"),r("d9e2"),r("944a"),r("0c47"),r("23dc"),r("a4d3"),r("e01a"),function(r,a){"object"===m(e)&&"undefined"!==typeof t?a(e):(i=[e],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o))}(0,(function(t){"use strict";function e(t,e){var r,n,i,o="";for(r in t)if(void 0!==(i=t[r]))if(Array.isArray(i))for(n=0;n<i.length;n++)o&&(o+="&"),o+="".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(i[n]));else o&&(o+="&"),o+="".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(i));return(e||"")+o}function r(t,r){function n(e){if("object"===m(e)&&null!==e)try{return t(e)}catch(n){}else if("string"===typeof e&&"function"===typeof r)try{return r(e),t(e)}catch(n){}return e}return function(t){t=y({},t),t&&Object.keys(t).forEach((function(e){var r=t[e];"undefined"===typeof r||void 0===r?delete t[e]:Array.isArray(r)?t[e]=r.map(n):t[e]=n(r)}));var r=e(t).toString();return r?"?".concat(r):""}}var n=r(JSON.stringify,JSON.parse);function i(t){return g(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")}function o(t){return t.startsWith("0x")?t.slice(2):t}function A(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone}var I=function(t){return t["Auth"]="Auth",t["SignMessage"]="SignMessage",t["SignEvm"]="SignEvm",t["SignCkbTx"]="SignCkbTx",t["SignCotaNFT"]="SignCotaNFT",t["SignCkbRawTx"]="SignCkbRawTx",t["SignNostrEvent"]="SignNostrEvent",t["EncryptNostrMessage"]="EncryptNostrMessage",t["EvmWeb2Login"]="EvmWeb2Login",t["DecryptNostrMessage"]="DecryptNostrMessage",t["AuthMiniApp"]="AuthMiniApp",t["SignMiniAppMessage"]="SignMiniAppMessage",t["SignMiniAppEvm"]="SignMiniAppEvm",t}(I||{}),C=function(t){return t["Popup"]="popup",t["Redirect"]="redirect",t}(C||{}),E={joyidAppURL:"https://testnet.joyid.dev"},S=function(){return E},k="joyid-redirect",x=function(t,e,r){var i,o=null!==(i=t.joyidAppURL)&&void 0!==i?i:S().joyidAppURL,a=new URL("".concat(o));a.pathname=r;var s=t.redirectURL;if("redirect"===e){var u=new URL(s);u.searchParams.set(k,"true"),s=u.href}a.searchParams.set("type",e);var c=n(y(y({},t),{},{redirectURL:s}));return a.searchParams.set("_data_",c),a.href},O=function(t){p(r,t);var e=h(r);function r(t,n){var i;return c(this,r),i=e.call(this,n),i.error=t,i.error_description=n,Object.setPrototypeOf(f(i),r.prototype),i}return l(r,null,[{key:"fromPayload",value:function(t){var e=t.error,n=t.error_description;return new r(e,n)}}]),r}(d(Error)),P=function(t){p(r,t);var e=h(r);function r(){var t;return c(this,r),t=e.call(this,"timeout","Timeout"),Object.setPrototypeOf(f(t),r.prototype),t}return l(r)}(O),B=function(t){p(r,t);var e=h(r);function r(t){var n;return c(this,r),n=e.call(this),n.popup=t,Object.setPrototypeOf(f(n),r.prototype),n}return l(r)}(P),M=function(t){p(r,t);var e=h(r);function r(t){var n;return c(this,r),n=e.call(this,"cancelled","Popup closed"),n.popup=t,Object.setPrototypeOf(f(n),r.prototype),n}return l(r)}(O),T=function(t){p(r,t);var e=h(r);function r(t){var n;return c(this,r),n=e.call(this,"NotSupported","Popup window is blocked by browser. see: https://docs.joy.id/guide/best-practice#popup-window-blocked"),n.popup=t,Object.setPrototypeOf(f(n),M.prototype),n}return l(r)}(O),D=3e3,j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=400,r=600,n=window.screenX+(window.innerWidth-e)/2,i=window.screenY+(window.innerHeight-r)/2;return window.open(t,"joyid:authorize:popup","left=".concat(n,",top=").concat(i,",width=").concat(e,",height=").concat(r,",resizable,scrollbars=yes,status=1"))},H=function(t){return new Promise((function(e,r){var n,i;A()&&r(new T(t.popup));var o=setInterval((function(){t.popup&&t.popup.closed&&(clearInterval(o),clearTimeout(i),window.removeEventListener("message",n,!1),r(new M(t.popup)))}),1e3);i=setTimeout((function(){clearInterval(o),r(new B(t.popup)),window.removeEventListener("message",n,!1)}),1e3*(t.timeoutInSeconds||D)),n=function(a){var s,u=new URL(S().joyidAppURL);a.origin===u.origin&&a.data&&(null==(s=a.data)?void 0:s.type)===t.type&&(clearTimeout(i),clearInterval(o),window.removeEventListener("message",n,!1),t.popup.close(),a.data.error&&r(new Error(a.data.error)),e(a.data.data))},window.addEventListener("message",n)}))},L="joyid-block-dialog-style",U="joyid-block-dialog-approve",R="joyid-block-dialog-reject",F="\n.joyid-block-dialog {\n  position: fixed;\n  top: 32px;\n  left: 50%;\n  width: 340px;\n  margin-left: -170px;\n  background: white;\n  color: #333;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 110px;\n  z-index: 100002;\n  box-sizing: border-box;\n  border: 1px solid #ffffff;\n  border-radius: 8px;\n  padding: 16px 20px;\n}\n.joyid-block-dialog-bg {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: none;\n  z-index: 100001;\n  display: block;\n}\n.joyid-block-dialog-title {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n.joyid-block-dialog-tip {\n  font-size: 12px;\n  color: #777;\n}\n.joyid-block-dialog-btn {\n  width: 90px;\n  height: 35px;\n  font-size: 12px;\n  text-align: center;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.joyid-block-dialog-action {\n  text-align: right;\n}\n#".concat(U," {\n  border: 1px solid #333;\n  color: #333;\n  background: #D2FF00;\n  margin-bottom: 8px;\n}\n\n#").concat(R," {\n  background: transparent;\n}\n"),N='\n<div class="joyid-block-dialog">\n  <div class="joyid-block-dialog-content">\n    <div class="joyid-block-dialog-title">\n      Request Pop-up\n    </div>\n    <div class="joyid-block-dialog-tip">\n      Click Approve to complete creating or using wallet\n    </div>\n  </div>\n  <div class="joyid-block-dialog-action">\n    <button class="joyid-block-dialog-btn" id="'.concat(U,'">Approve</button>\n    <button class="joyid-block-dialog-btn" id="').concat(R,'">Reject</button>\n  </div>\n</div>\n'),Q=function(){var t=document.getElementById(L);if(!t){var e=document.createElement("style");e.appendChild(document.createTextNode(F));var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}},K=function(t){Q();var e=document.createElement("div");e.innerHTML=N,document.body.appendChild(e);var r=document.createElement("div");r.className="joyid-block-dialog-bg",document.body.appendChild(r);var n=document.getElementById(U),i=document.getElementById(R),o=function(){document.body.removeChild(e),document.body.removeChild(r)};return new Promise((function(e,r){null==n||n.addEventListener("click",u(s().mark((function n(){var i;return s().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t();case 3:i=n.sent,o(),e(i),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),o(),r(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))),null==i||i.addEventListener("click",(function(){o(),r(new Error("User Rejected"))}))}))},z=function(t,e){return x(t,e,"/sign-message")},q=function(){var t=u(s().mark((function t(e,r){return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=r||{},r.popup){t.next=5;break}if(r.popup=j(""),r.popup){t.next=5;break}return t.abrupt("return",K((function(){return q(e,r)})));case 5:return r.popup.location.href=z(e,"popup"),t.abrupt("return",H(y(y({},r),{},{type:I.SignMessage})));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),V=function(t,e){return x(t,e,"/auth")},W=function(){var t=u(s().mark((function t(e,r){return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=r||{},r.popup){t.next=5;break}if(r.popup=j(""),r.popup){t.next=5;break}return t.abrupt("return",K((function(){return W(e,r)})));case 5:return r.popup.location.href=V(e,C.Popup),t.abrupt("return",H(y(y({},r),{},{type:I.Auth})));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Y=function(){return Date.now()},G=function(){function t(e){c(this,t),this.url=e}return l(t,[{key:"baseRPC",value:function(){var t=u(s().mark((function t(e,r){var n,i,o,a,u=arguments;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:this.url,i={id:Y(),jsonrpc:"2.0",method:e,params:null!==r&&void 0!==r?r:null},o=JSON.stringify(i,null,""),t.next=5,fetch(n,{method:"post",headers:{"Content-Type":"application/json"},body:o}).then((function(t){return t.json()}));case 5:if(a=t.sent,!a.error){t.next=8;break}throw new Error("RPC error: ".concat(JSON.stringify(a.error)));case 8:return t.abrupt("return",a.result);case 9:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"generateSubkeyUnlockSmt",value:function(){var t=u(s().mark((function t(e){return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.baseRPC("generate_subkey_unlock_smt",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),$={JoyIDLockScript:{codeHash:"0xd23761b364210735c19c60561d213fb3beae2fd6172743719eff6920e020baac",hashType:"type",args:""},JoyIDLockDep:{outPoint:{txHash:"0x4dcf3f3b09efac8995d6cbee87c5345e812d310094651e0c3d9a730f32dc9263",index:"0x0"},depType:"depGroup"}},X={JoyIDLockScript:{codeHash:"0xd00c84f0ec8fd441c38bc3f87a371f547190f2fcff88e642bc5bf54b9e318323",hashType:"type",args:""},JoyIDLockDep:{outPoint:{txHash:"0xf05188e5f3a6767fc4687faf45ba5f1a6e25d3ada6129dae8722cb282f262493",index:"0x0"},depType:"depGroup"}},J=function(t){return t?X.JoyIDLockScript:$.JoyIDLockScript},Z=function(t){return t?X.JoyIDLockDep:$.JoyIDLockDep},tt=function(t){if(!t)return t;var e=o(t);return 48===e.length?"ffffffff".concat(e):e},et=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(t.joyidAppURL,t.joyidServerURL,a(t,b)),n=e?"/sign-ckb":"/sign-cota-nft",i=r;if(!e){var o=i.tx;o.tokenKey=tt(o.tokenKey),i.tx=o}return x(i,"popup",n)},rt=function(t){return Object.assign(E,t),E},nt=function(){return E},it=function(){var t=u(s().mark((function t(e){var r;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=y(y({},E),e),t.next=3,W(y({redirectURL:location.href},e));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ot=function(){var t=u(s().mark((function t(e,r,n){var o,a;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o="string"!==typeof e,n=y(y({},E),n),t.next=4,q(y({challenge:"string"!==typeof e?i(e):e,isData:o,address:r,redirectURL:location.href},n));case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),at=function(){var t=u(s().mark((function t(e,r){var n,i,o,u,c;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=y(y({},E),r),r.popup){t.next=5;break}if(r.popup=j(""),r.popup){t.next=5;break}throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");case 5:return n=r,i=n.popup,o=n.timeoutInSeconds,u=a(n,v),r.popup.location.href=et(y(y({},u),{},{tx:e,signerAddress:e.from,redirectURL:location.href})),t.next=9,H({timeoutInSeconds:o||5e3,popup:i,type:I.SignCkbTx});case 9:return c=t.sent,t.abrupt("return",c.tx);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),st=function(){var t=u(s().mark((function t(e,r){var n,i,o,u,c;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=y(y({},E),r),r.popup){t.next=5;break}if(r.popup=j(""),r.popup){t.next=5;break}throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");case 5:return n=r,i=n.popup,o=n.timeoutInSeconds,u=a(n,_),r.popup.location.href=et(y(y({},u),{},{tx:e,signerAddress:e.from,redirectURL:location.href}),!1),t.next=9,H({timeoutInSeconds:o||5e3,popup:i,type:I.SignCotaNFT});case 9:return c=t.sent,t.abrupt("return",c.tx);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),ut=function(){var t=u(s().mark((function t(e,r,n){var i,o,u,c,l;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=y(y(y({},e),E),n),n.popup){t.next=5;break}if(n.popup=j(""),n.popup){t.next=5;break}throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");case 5:return i=n,o=i.popup,u=i.timeoutInSeconds,c=a(i,w),n.popup.location.href=x(y(y({},c),{},{tx:e,signerAddress:r,redirectURL:location.href}),"popup","/sign-ckb-raw-tx"),t.next=9,H({timeoutInSeconds:u||5e3,popup:o,type:I.SignCkbRawTx});case 9:return l=t.sent,t.abrupt("return",l.tx);case 11:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();t.Aggregator=G,t.connect=it,t.getConfig=nt,t.getJoyIDCellDep=Z,t.getJoyIDLockScript=J,t.initConfig=rt,t.openPopup=j,t.signChallenge=ot,t.signCotaNFTTx=st,t.signRawTransaction=ut,t.signTransaction=at,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},ef55:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Reader=void 0;class n{constructor(){this.__isByteLikeReader__=!0}static isReader(t){return null!=t&&(t instanceof n||!0===t.__isByteLikeReader__)}}class i extends n{constructor(t){super(),this.view=new DataView(t)}length(){return this.view.byteLength}indexAt(t){return this.view.getUint8(t)}toArrayBuffer(){return this.view.buffer}serializeJson(){return"0x"+Array.prototype.map.call(new Uint8Array(this.view.buffer),t=>("00"+t.toString(16)).slice(-2)).join("")}}class o extends n{constructor(t){super(),this.string=t}length(){return this.string.length/2-1}indexAt(t){return parseInt(this.string.substr(2+2*t,2),16)}toArrayBuffer(){const t=new ArrayBuffer(this.length()),e=new DataView(t);for(let r=0;r<this.length();r++)e.setUint8(r,this.indexAt(r));return t}serializeJson(){return this.string}}class a extends n{constructor(t){if(super(),t instanceof o||t instanceof i)return t;if("string"===typeof t){if(!t.startsWith("0x")||t.length%2!==0)throw new Error("Hex string must start with 0x, and has even numbered length!");return new o(t)}if(t instanceof ArrayBuffer)return new i(t);if(t instanceof Uint8Array)return new i(Uint8Array.from(t).buffer);throw new Error("Reader can only accept hex string or ArrayBuffer!")}static from(t){return new a(t)}static fromRawString(t){const e=new ArrayBuffer(t.length),r=new DataView(e);for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);if(e>255)throw new Error("fromRawString can only accept UTF-8 raw string!");r.setUint8(n,e)}return new i(e)}}e.Reader=a},f84b:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NormalizeBlock=_,e.NormalizeCellDep=h,e.NormalizeCellInput=f,e.NormalizeCellOutput=p,e.NormalizeCellbaseWitness=w,e.NormalizeHeader=b,e.NormalizeOutPoint=c,e.NormalizeRawHeader=m,e.NormalizeRawTransaction=g,e.NormalizeScript=u,e.NormalizeTransaction=y,e.NormalizeUncleBlock=v,e.NormalizeWitnessArgs=A;var n=r("6cf0"),i=r("ef55");function o(t){return function(e,r){if(!(r instanceof ArrayBuffer)){let i=n.BI.from(r).toString(16);if(i.length%2!==0&&(i="0"+i),i.length/2>t)throw new Error(`${e} is ${i.length/2} bytes long, expected length is ${t}!`);const o=new DataView(new ArrayBuffer(t));for(let t=0;t<i.length/2;t++){const e=i.length-2*(t+1);o.setUint8(t,parseInt(i.substr(e,2),16))}r=o.buffer}if(r.byteLength<t){const e=new Uint8Array(t);e.set(new Uint8Array(r),0),r=e.buffer}return r}}function a(t){return function(e,r){if(r=new i.Reader(r).toArrayBuffer(),t>0&&r.byteLength!==t)throw new Error(`${e} has invalid length ${r.byteLength}, required: ${t}`);return r}}function s(t,e,r){const n={};for(const[i,o]of Object.entries(r)){const r=e[i];if(null==r)throw new Error(`${t} is missing ${i}!`);n[i]=o(`${t}.${i}`,r)}return n}function u(t,{debugPath:e="script"}={}){return s(e,t,{codeHash:a(32),hashType:function(t,e){switch(e){case"data":return 0;case"type":return 1;case"data1":return 2;case"data2":return 4;case 0:return e;case 1:return e;case 2:return e;case 4:return e;default:throw new Error(`${t}.hashType has invalid value: ${e}`)}},args:a(-1)})}function c(t,{debugPath:e="outPoint"}={}){return s(e,t,{txHash:a(32),index:o(4)})}function l(t){return function(e,r){return t(r,{debugPath:e})}}function f(t,{debugPath:e="cell_input"}={}){return s(e,t,{since:o(8),previousOutput:l(c)})}function p(t,{debugPath:e="cellOutput"}={}){const r=s(e,t,{capacity:o(8),lock:l(u)});return t.type&&(r.type_=u(t.type,{debugPath:e+".type"})),r}function h(t,{debugPath:e="cell_dep"}={}){return s(e,t,{outPoint:l(c),depType:function(t,e){switch(e){case"code":return 0;case"depGroup":return 1;case 0:return e;case 1:return e;default:throw new Error(`${t}.depType has invalid value: ${e}`)}}})}function d(t){return function(e,r){return r.map((r,n)=>t(`${e}[${n}]`,r))}}function g(t,{debugPath:e="raw_transaction"}={}){return s(e,t,{version:o(4),cellDeps:d(l(h)),headerDeps:d(a(32)),inputs:d(l(f)),outputs:d(l(p)),outputsData:d(a(-1))})}function y(t,{debugPath:e="transaction"}={}){const r=g(t,{debugPath:"(raw)"+e}),n=s(e,t,{witnesses:d(a(-1))});return n.raw=r,n}function m(t,{debugPath:e="raw_header"}={}){return s(e,t,{version:o(4),compactTarget:o(4),timestamp:o(8),number:o(8),epoch:o(8),parentHash:a(32),transactionsRoot:a(32),proposalsHash:a(32),extraHash:a(32),dao:a(32)})}function b(t,{debugPath:e="header"}={}){const r=m(t,{debugPath:"(raw)"+e}),n=s(e,t,{nonce:o(16)});return n.raw=r,n}function v(t,{debugPath:e="uncle_block"}={}){return s(e,t,{header:l(b),proposals:d(a(10))})}function _(t,{debugPath:e="block"}={}){return s(e,t,{header:l(b),uncles:d(l(v)),transactions:d(l(y)),proposals:d(a(10))})}function w(t,{debugPath:e="cellbase_witness"}={}){return s(e,t,{lock:l(u),message:a(-1)})}function A(t,{debugPath:e="witness_args"}={}){const r={};return t.lock&&(r.lock=a(-1)(e+".lock",t.lock)),t.inputType&&(r.inputType=a(-1)(e+".inputType",t.inputType)),t.outputType&&(r.outputType=a(-1)(e+".outputType",t.outputType)),r}},f8a23:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CellCollector",{enumerable:!0,get:function(){return n.CKBCellCollector}}),Object.defineProperty(e,"Indexer",{enumerable:!0,get:function(){return i.CkbIndexer}}),Object.defineProperty(e,"RPC",{enumerable:!0,get:function(){return a.RPC}}),Object.defineProperty(e,"TerminableCellAdapter",{enumerable:!0,get:function(){return i.TerminableCellAdapter}}),Object.defineProperty(e,"TransactionCollector",{enumerable:!0,get:function(){return o.CKBIndexerTransactionCollector}});var n=r("8d64"),i=r("1db6"),o=r("be1a"),a=r("8f9d")},fa9b:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertBufferLength=g,e.assertHexDecimal=p,e.assertHexString=h,e.assertMinBufferLength=y,e.assertUtf8String=d,e.isObjectLike=m,e.trackCodeExecuteError=b;var n=r("41da");const i="0".charCodeAt(0),o="9".charCodeAt(0),a="A".charCodeAt(0),s="F".charCodeAt(0),u="a".charCodeAt(0),c="f".charCodeAt(0);function l(t){if(!t||!t.startsWith("0x"))throw new Error("Invalid hex string")}function f(t){const e=t.length;for(let r=2;r<e;r++){const e=t[r].charCodeAt(0);if(!(e>=i&&e<=o||e>=u&&e<=c||e>=a&&e<=s))throw new Error(`Invalid hex character ${t[r]} in the string ${t}`)}}function p(t,e){if(l(t),2===t.length)throw new Error("Invalid hex decimal length, should be at least 1 character, the '0x' is incorrect, should be '0x0'");const r=t.length;if("number"===typeof e&&r>2*e+2)throw new Error(`Invalid hex decimal length, should be less than ${e} bytes, got ${r/2-1} bytes`);f(t)}function h(t,e){l(t);const r=t.length;if(r%2)throw new Error("Invalid hex string length, must be even!");if("number"===typeof e&&r!==2*e+2)throw new Error("Invalid hex string length, not match with byteLength!");f(t)}function d(t){for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);if(r>255)throw new Error("Invalid UTF-8 raw string!")}}function g(t,e){if(t.byteLength!==e)throw new Error(`Invalid buffer length: ${t.byteLength}, should be ${e}`)}function y(t,e){if(t.byteLength<e)throw new Error(`Invalid buffer length: ${t.byteLength}, should be at least ${e}`)}function m(t){return!!t&&"object"===typeof t}function b(t,e){try{return e()}catch(r){const e=(0,n.isCodecExecuteError)(r)?r:new n.CodecExecuteError(r);throw e.updateKey(t),e}}},fbaaf:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createConfig=o,e.predefined=void 0;var n=i(r("9b3e"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(0,n.default)(t)}const a=o({PREFIX:"ckb",SCRIPTS:{SECP256K1_BLAKE160:{CODE_HASH:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",HASH_TYPE:"type",TX_HASH:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{CODE_HASH:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",HASH_TYPE:"type",TX_HASH:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",INDEX:"0x1",DEP_TYPE:"depGroup",SHORT_ID:1},DAO:{CODE_HASH:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",HASH_TYPE:"type",TX_HASH:"0xe2fb199810d49a4d8beec56718ba2593b665db9d52299a0f9e6e75416d73ff5c",INDEX:"0x2",DEP_TYPE:"code"},SUDT:{CODE_HASH:"0x5e7a36a77e68eecc013dfa2fe6a23f3b6c344b04005808694ae6dd45eea4cfd5",HASH_TYPE:"type",TX_HASH:"0xc7813f6a415144643970c2e88e0bb6ca6a8edc5dd7c1022746f628284a9936d5",INDEX:"0x0",DEP_TYPE:"code"},ANYONE_CAN_PAY:{CODE_HASH:"0xd369597ff47f29fbc0d47d2e3775370d1250b85140c670e4718af712983a2354",HASH_TYPE:"type",TX_HASH:"0x4153a2014952d7cac45f285ce9a7c5c0c0e1b21f2d378b82ac1433cb11c25c4d",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:2},OMNILOCK:{CODE_HASH:"0x9b819793a64463aed77c615d6cb226eea5487ccfc0783043a587254cda2b6f26",HASH_TYPE:"type",TX_HASH:"0xc76edf469816aa22f416503c38d0b533d2a018e253e379f134c3985b3472c842",INDEX:"0x0",DEP_TYPE:"code"}}}),s=o({PREFIX:"ckt",SCRIPTS:{SECP256K1_BLAKE160:{CODE_HASH:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",HASH_TYPE:"type",TX_HASH:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{CODE_HASH:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",HASH_TYPE:"type",TX_HASH:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",INDEX:"0x1",DEP_TYPE:"depGroup",SHORT_ID:1},DAO:{CODE_HASH:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",HASH_TYPE:"type",TX_HASH:"0x8f8c79eb6671709633fe6a46de93c0fedc9c1b8a6527a18d3983879542635c9f",INDEX:"0x2",DEP_TYPE:"code"},SUDT:{CODE_HASH:"0xc5e5dcf215925f7ef4dfaf5f4b4f105bc321c02776d6e7d52a1db3fcd9d011a4",HASH_TYPE:"type",TX_HASH:"0xe12877ebd2c3c364dc46c5c992bcfaf4fee33fa13eebdf82c591fc9825aab769",INDEX:"0x0",DEP_TYPE:"code"},ANYONE_CAN_PAY:{CODE_HASH:"0x3419a1c09eb2567f6552ee7a8ecffd64155cffe0f1796e6e61ec088d740c1356",HASH_TYPE:"type",TX_HASH:"0xec26b0f85ed839ece5f11c4c4e837ec359f5adc4420410f6453b1f6b60fb96a6",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:2},OMNILOCK:{CODE_HASH:"0xf329effd1c475a2978453c8600e1eaf0bc2087ee093c3ee64cc96ec6847752cb",HASH_TYPE:"type",TX_HASH:"0x3d4296df1bd2cc2bd3f483f61ab7ebeac462a2f336f2b944168fe6ba5d81c014",INDEX:"0x0",DEP_TYPE:"code"}}}),u={LINA:a,AGGRON4:s};e.predefined=u},fbbb:function(t,e,r){"use strict";var n=r("ded3").default;r("d9e2"),r("d81d"),r("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.WitnessArgs=e.UncleBlockVec=e.UncleBlock=e.TransactionVec=e.Transaction=e.ScriptOpt=e.Script=e.RawTransaction=e.RawHeader=e.ProposalShortIdVec=e.ProposalShortId=e.OutPoint=e.Header=e.HashType=e.DepType=e.CellbaseWitness=e.CellOutputVec=e.CellOutput=e.CellInputVec=e.CellInput=e.CellDepVec=e.CellDep=e.BytesVec=e.BytesOptVec=e.BytesOpt=e.Bytes=e.Byte32Vec=e.Byte32=e.BlockV1=e.Block=e.BaseHeader=void 0,e.WitnessArgsOf=k,e.createFixedHexBytesCodec=_,e.deTransformHeaderCodecType=it,e.deTransformTransactionCodecType=rt,e.transformHeaderCodecType=nt,e.transformTransactionCodecType=et;var i=r("4b0a"),o=r("6cf0");function a(t){return n(n({},t),{},{unpack:function(e){return o.BI.from(t.unpack(e)).toHexString()}})}var s=a(i.number.Uint8),u=a(i.number.Uint32LE),c=a(i.number.Uint64LE),l=a(i.number.Uint128LE),f=i.molecule,p=f.byteVecOf,h=f.option,d=f.table,g=f.vector,y=f.struct,m=i.bytes,b=m.bytify,v=m.hexify;function _(t){return(0,i.createFixedBytesCodec)({byteLength:t,pack:function(t){return b(t)},unpack:function(t){return v(t)}})}var w=p({pack:b,unpack:v});e.Bytes=w;var A=h(w);e.BytesOpt=A;var I=g(w);e.BytesVec=I;var C=g(A);e.BytesOptVec=C;var E=_(32);e.Byte32=E;var S=g(E);function k(t){return d({lock:h(p(t.lock)),inputType:h(p(t.inputType)),outputType:h(p(t.outputType))},["lock","inputType","outputType"])}e.Byte32Vec=S;var x=(0,i.createBytesCodec)({pack:b,unpack:v}),O=k({lock:x,inputType:x,outputType:x});e.WitnessArgs=O;var P=(0,i.createFixedBytesCodec)({byteLength:1,pack:function(t){if("type"===t)return i.number.Uint8.pack(1);if("data"===t)return i.number.Uint8.pack(0);if("data1"===t)return i.number.Uint8.pack(2);if("data2"===t)return i.number.Uint8.pack(4);throw new Error("Invalid hash type: ".concat(t))},unpack:function(t){var e=i.number.Uint8.unpack(t);if(1===e)return"type";if(0===e)return"data";if(2===e)return"data1";if(4===e)return"data2";throw new Error("Invalid hash type: ".concat(e))}});e.HashType=P;var B=(0,i.createFixedBytesCodec)({byteLength:1,pack:function(t){if("code"===t)return s.pack(0);if("depGroup"===t)return s.pack(1);throw new Error("Invalid dep type: ".concat(t))},unpack:function(t){var e=i.number.Uint8.unpack(t);if(0===e)return"code";if(1===e)return"depGroup";throw new Error("Invalid dep type: ".concat(e))}});e.DepType=B;var M=d({codeHash:E,hashType:P,args:w},["codeHash","hashType","args"]);e.Script=M;var T=h(M);e.ScriptOpt=T;var D=y({txHash:E,index:u},["txHash","index"]);e.OutPoint=D;var j=y({since:c,previousOutput:D},["since","previousOutput"]);e.CellInput=j;var H=g(j);e.CellInputVec=H;var L=d({capacity:c,lock:M,type:T},["capacity","lock","type"]);e.CellOutput=L;var U=g(L);e.CellOutputVec=U;var R=y({outPoint:D,depType:B},["outPoint","depType"]);e.CellDep=R;var F=g(R);e.CellDepVec=F;var N=d({version:u,cellDeps:F,headerDeps:S,inputs:H,outputs:U,outputsData:I},["version","cellDeps","headerDeps","inputs","outputs","outputsData"]);e.RawTransaction=N;var Q=d({raw:N,witnesses:I},["raw","witnesses"]),K=(0,i.createBytesCodec)({pack:function(t){return Q.pack(et(t))},unpack:function(t){return rt(Q.unpack(t))}});e.Transaction=K;var z=g(K);e.TransactionVec=z;var q=y({version:u,compactTarget:u,timestamp:c,number:c,epoch:c,parentHash:E,transactionsRoot:E,proposalsHash:E,extraHash:E,dao:E},["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao"]);e.RawHeader=q;var V=y({raw:q,nonce:l},["raw","nonce"]);e.BaseHeader=V;var W=(0,i.createBytesCodec)({pack:function(t){return V.pack(nt(t))},unpack:function(t){return it(V.unpack(t))}});e.Header=W;var Y=_(10);e.ProposalShortId=Y;var G=g(Y);e.ProposalShortIdVec=G;var $=d({header:W,proposals:G},["header","proposals"]);e.UncleBlock=$;var X=g($);e.UncleBlockVec=X;var J=d({header:W,uncles:X,transactions:z,proposals:G},["header","uncles","transactions","proposals"]);e.Block=J;var Z=d({header:W,uncles:X,transactions:z,proposals:G,extension:w},["header","uncles","transactions","proposals","extension"]);e.BlockV1=Z;var tt=d({lock:M,message:w},["lock","message"]);function et(t){return{raw:{version:t.version,cellDeps:t.cellDeps,headerDeps:t.headerDeps,inputs:t.inputs,outputs:t.outputs,outputsData:t.outputsData},witnesses:t.witnesses}}function rt(t){return{cellDeps:t.raw.cellDeps.map((function(t){return{outPoint:{txHash:t.outPoint.txHash,index:t.outPoint.index},depType:t.depType}})),headerDeps:t.raw.headerDeps,inputs:t.raw.inputs.map((function(t){return{previousOutput:{txHash:t.previousOutput.txHash,index:t.previousOutput.index},since:t.since}})),outputs:t.raw.outputs.map((function(t){return{capacity:t.capacity,lock:t.lock,type:t.type}})),outputsData:t.raw.outputsData,version:t.raw.version,witnesses:t.witnesses}}function nt(t){return{raw:{timestamp:t.timestamp,number:t.number,epoch:t.epoch,compactTarget:Number(t.compactTarget),dao:t.dao,parentHash:t.parentHash,proposalsHash:t.proposalsHash,transactionsRoot:t.transactionsRoot,extraHash:t.extraHash,version:t.version},nonce:t.nonce}}function it(t){return{timestamp:t.raw.timestamp,number:t.raw.number,epoch:t.raw.epoch,compactTarget:t.raw.compactTarget,dao:t.raw.dao,parentHash:t.raw.parentHash,proposalsHash:t.raw.proposalsHash,transactionsRoot:t.raw.transactionsRoot,extraHash:t.raw.extraHash,version:t.raw.version,nonce:t.nonce,hash:""}}e.CellbaseWitness=tt},fc55:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLightClientScript=e.toFetchTransactionResult=e.toFetchHeaderResult=void 0;var n=r("caac"),i=r("8130");const o=t=>t&&t.status===n.FetchFlag.Fetched?{status:t.status,data:i.ResultFormatter.toHeader(t.data)}:t;e.toFetchHeaderResult=o;const a=t=>t&&t.status===n.FetchFlag.Fetched?{status:t.status,data:i.ResultFormatter.toTransactionWithStatus(t.data)}:t;e.toFetchTransactionResult=a;const s=t=>t?{script:i.ResultFormatter.toScript(t.script),blockNumber:t.block_number,scriptType:t.script_type}:t;e.toLightClientScript=s},ffc2:function(t,e){t.exports=n;class r extends Error{}function n(t,e){if(!t){var i=new r(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,n),i}}r.prototype.name="AssertionError"}}]);