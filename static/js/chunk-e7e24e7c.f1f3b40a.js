(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7e24e7c"],{"04f0":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleSumTree=e.ProofStep=e.Leaf=e.Bucket=void 0;const r=i("13ca");class s{constructor(t,e){this.size=BigInt(t),this.hashed=e,this.parent=null,this.left=null,this.right=null}}e.Bucket=s;class n{constructor(t,e,i){this.hashFn=t,this.rng=e.map(t=>BigInt(t)),this.data=i}getBucket(){let e;return e=this.data?this.hashFn(this.data):t.alloc(32),new s(BigInt(this.rng[1])-BigInt(this.rng[0]),e)}}e.Leaf=n;class h{constructor(t,e){this.bucket=t,this.right=e}}e.ProofStep=h;class o extends r.Base{constructor(e,i){super(),this.leaves=e,this.hashFn=i,o.checkConsecutive(e),this.buckets=[];for(const t of e)this.buckets.push(t.getBucket());let r=[];for(const t of this.buckets)r.push(t);while(1!==r.length){const e=[];while(r.length)if(r.length>=2){const i=r.shift(),n=r.shift(),h=i.size+n.size,o=this.hashFn(t.concat([this.sizeToBuffer(i.size),this.bufferify(i.hashed),this.sizeToBuffer(n.size),this.bufferify(n.hashed)])),a=new s(h,o);n.parent=a,i.parent=n.parent,i.right=n,n.left=i,e.push(a)}else e.push(r.shift());r=e}this.root=r[0]}sizeToBuffer(e){const i=t.alloc(8),r=new DataView(i.buffer);return r.setBigInt64(0,BigInt(e),!1),i}static checkConsecutive(t){let e=BigInt(0);for(const i of t){if(i.rng[0]!==e)throw new Error("leaf ranges are invalid");e=BigInt(i.rng[1])}}getProof(t){let e=this.buckets[Number(t)];const i=[];while(e&&e.parent){const t=!!e.right,r=e.right?e.right:e.left;e=e.parent,i.push(new h(r,t))}return i}sum(t){let e=BigInt(0);for(const i of t)e+=BigInt(i);return e}verifyProof(e,i,r){const n=[this.sum(r.filter(t=>!t.right).map(t=>t.bucket.size)),BigInt(e.size)-this.sum(r.filter(t=>t.right).map(t=>t.bucket.size))];if(n[0]!==i.rng[0]||n[1]!==i.rng[1])return!1;let h,o=i.getBucket();for(const a of r)h=a.right?this.hashFn(t.concat([this.sizeToBuffer(o.size),this.bufferify(o.hashed),this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed)])):this.hashFn(t.concat([this.sizeToBuffer(a.bucket.size),this.bufferify(a.bucket.hashed),this.sizeToBuffer(o.size),this.bufferify(o.hashed)])),o=new s(BigInt(o.size)+BigInt(a.bucket.size),h);return o.size===e.size&&o.hashed.toString("hex")===e.hashed.toString("hex")}}e.MerkleSumTree=o,"undefined"!==typeof window&&(window.MerkleSumTree=o),e.default=o}).call(this,i("1c35").Buffer)},"0ebb":function(t,e,i){"use strict";i("dbfa")},"13ca":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;const s=i("1c35"),n=r(i("3452"));class h{print(){h.print(this)}bufferIndexOf(t,e,i=!1){if(i)return this.binarySearch(t,e,s.Buffer.compare);const r=(t,e)=>t.equals(e);return this.linearSearch(t,e,r)}static binarySearch(t,e,i){let r=0,s=t.length-1;while(r<=s){const n=Math.floor((r+s)/2),h=i(t[n],e);if(0===h){for(let r=n-1;r>=0;r--)if(0!==i(t[r],e))return r+1;return 0}h<0?r=n+1:s=n-1}return-1}binarySearch(t,e,i){return h.binarySearch(t,e,i)}static linearSearch(t,e,i){for(let r=0;r<t.length;r++)if(i(t[r],e))return r;return-1}linearSearch(t,e,i){return h.linearSearch(t,e,i)}static bufferify(t){if(!s.Buffer.isBuffer(t)){if("object"===typeof t&&t.words)return s.Buffer.from(t.toString(n.default.enc.Hex),"hex");if(h.isHexString(t))return s.Buffer.from(t.replace(/^0x/,""),"hex");if("string"===typeof t)return s.Buffer.from(t);if("bigint"===typeof t)return s.Buffer.from(t.toString(16),"hex");if(t instanceof Uint8Array)return s.Buffer.from(t.buffer);if("number"===typeof t){let e=t.toString();return e.length%2&&(e="0"+e),s.Buffer.from(e,"hex")}if(ArrayBuffer.isView(t))return s.Buffer.from(t.buffer,t.byteOffset,t.byteLength)}return t}bigNumberify(t){return h.bigNumberify(t)}static bigNumberify(t){if("bigint"===typeof t)return t;if("string"===typeof t)return t.startsWith("0x")&&h.isHexString(t)?BigInt("0x"+t.replace("0x","").toString()):BigInt(t);if(s.Buffer.isBuffer(t))return BigInt("0x"+t.toString("hex"));if(t instanceof Uint8Array)return BigInt(t);if("number"===typeof t)return BigInt(t);throw new Error("cannot bigNumberify")}static isHexString(t){return"string"===typeof t&&/^(0x)?[0-9A-Fa-f]*$/.test(t)}static print(t){console.log(t.toString())}bufferToHex(t,e=!0){return h.bufferToHex(t,e)}static bufferToHex(t,e=!0){return`${e?"0x":""}${(t||s.Buffer.alloc(0)).toString("hex")}`}bufferify(t){return h.bufferify(t)}bufferifyFn(t){return e=>{const i=t(e);return s.Buffer.isBuffer(i)?i:this.isHexString(i)?s.Buffer.from(i.replace("0x",""),"hex"):"string"===typeof i?s.Buffer.from(i):"bigint"===typeof i?s.Buffer.from(e.toString(16),"hex"):ArrayBuffer.isView(i)?s.Buffer.from(i.buffer,i.byteOffset,i.byteLength):s.Buffer.from(t(n.default.enc.Hex.parse(e.toString("hex"))).toString(n.default.enc.Hex),"hex")}}isHexString(t){return h.isHexString(t)}log2(t){return 1===t?0:1+this.log2(t/2|0)}zip(t,e){return t.map((t,i)=>[t,e[i]])}static hexZeroPad(t,e){return"0x"+t.replace("0x","").padStart(e,"0")}}e.Base=h,e.default=h},"26bf":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){function t(t,e){var i=e?"└":"├";return i+=t?"─ ":"──┐",i}function e(t,e){var i=[];for(var r in t)t.hasOwnProperty(r)&&(e&&"function"===typeof t[r]||i.push(r));return i}function i(r,s,n,h,o,a,u){var l,f,c="",d=0,m=h.slice(0);if(m.push([s,n])&&h.length>0&&(h.forEach((function(t,e){e>0&&(c+=(t[1]?" ":"│")+"  "),f||t[0]!==s||(f=!0)})),c+=t(r,n)+r,o&&("object"!==typeof s||s instanceof Date)&&(c+=": "+s),f&&(c+=" (circular ref.)"),u(c)),!f&&"object"===typeof s){var p=e(s,a);p.forEach((function(t){l=++d===p.length,i(t,s[t],l,m,o,a,u)}))}}var r={asLines:function(t,e,r,s){var n="function"!==typeof r&&r;i(".",t,!1,[],e,n,s||r)},asTree:function(t,e,r){var s="";return i(".",t,!1,[],e,r,(function(t){s+=t+"\n"})),s}};return r}))},6249:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const s=r(i("a43f")),n=r(i("1c35")),h=r(i("6983")),o=n.default.Buffer;function a(t){return t=u(t),(0,h.default)("keccak256").update(t).digest()}function u(t){if(!o.isBuffer(t))if(Array.isArray(t))t=o.from(t);else if("string"===typeof t)t=l(t)?o.from(f(c(t)),"hex"):o.from(t);else if("number"===typeof t)t=m(t);else if(null===t||void 0===t)t=o.allocUnsafe(0);else if(s.default.isBN(t))t=t.toArrayLike(o);else{if(!t.toArray)throw new Error("invalid type");t=o.from(t.toArray())}return t}function l(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}function f(t){if("string"!==typeof t)throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t="0"+t),t}function c(t){return"string"!==typeof t?t:d(t)?t.slice(2):t}function d(t){if("string"!==typeof t)throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}function m(t){const e=p(t);return o.from(f(e.slice(2)),"hex")}function p(t){const e=t.toString(16);return"0x"+e}"undefined"!==typeof window&&(window.keccak256=a),t.exports=a},"655a":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.IncrementalMerkleTree=void 0;const s=r(i("13ca")),n=r(i("26bf"));class h extends s.default{constructor(t,e){if(super(),this.hashFn=t,e.depth&&(this.depth=e.depth),e.arity&&(this.arity=e.arity),this.depth<1)throw new Error("depth must be greater than 0");if(this.arity<1)throw new Error("arity must be greater than 0");const i=[];let r=e.zeroValue;if(this.zeroValue=r,this.zeroes=[],this.depth)for(let s=0;s<this.depth;s++)this.zeroes.push(r),i[s]=[],r=this.hashFn(Array(this.arity).fill(r));this.nodes=i,this.root=r}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.bufferify(this.getRoot()))}insert(t){if(this.depth&&this.arity&&this.nodes[0].length>=this.getMaxLeaves())throw new Error("tree is full");let e=t,i=this.nodes[0].length;for(let r=0;r<this.depth;r+=1){const t=i%this.arity,s=i-t,n=s+this.arity,h=[];this.nodes[r][i]=e;for(let e=s;e<n;e+=1)e<this.nodes[r].length?h.push(this.nodes[r][e]):h.push(this.zeroes[r]);e=this.hashFn(h),i=Math.floor(i/this.arity)}this.root=e}delete(t){this.update(t,this.zeroValue)}update(t,e){if(t<0||t>=this.nodes[0].length)throw new Error("out of bounds");let i=e;for(let r=0;r<this.depth;r+=1){const e=t%this.arity,s=t-e,n=s+this.arity,h=[];this.nodes[r][t]=i;for(let t=s;t<n;t+=1)t<this.nodes[r].length?h.push(this.nodes[r][t]):h.push(this.zeroes[r]);i=this.hashFn(h),t=Math.floor(t/this.arity)}this.root=i}getDepth(){return this.depth}getArity(){return this.arity}getMaxLeaves(){return Math.pow(this.depth,this.arity)}indexOf(t){return this.nodes[0].indexOf(t)}getLeaves(){const t=this.copyList(this.nodes[0]),e=this.nodes[0].length;for(let i=e;i<this.getMaxLeaves();i++)t[i]=this.zeroValue;return t}copyList(t){return t.map(t=>BigInt(t))}getLayers(){const t=[];for(const e of this.nodes)t.push(this.copyList(e));if(t[0].length<this.getMaxLeaves()){let e=t[0].length;for(let i=e;i<this.getMaxLeaves();i++)t[0][i]=this.zeroValue;for(let i=0;i<this.depth;i++){const r=e%this.arity,s=e-r,n=s+this.arity;for(let e=s;e<n;e++)e>=t[i].length&&(t[i][e]=this.zeroes[i]);e=Math.floor(e/this.arity)}}return t.push([this.root]),t}getHexLayers(){return this.getLayers().reduce((t,e)=>(Array.isArray(e)?t.push(e.map(t=>this.bufferToHex(this.bufferify(t)))):t.push(e),t),[])}getLayersAsObject(){const t=this.getLayers().map(t=>t.map(t=>this.bufferToHex(this.bufferify(t),!1))),e=[];for(let i=0;i<t.length;i++){const r=[];for(let s=0;s<t[i].length;s++){const n={[t[i][s]]:null};if(e.length){n[t[i][s]]={};const r=e.shift(),h=Object.keys(r)[0];if(n[t[i][s]][h]=r[h],e.length){const r=e.shift(),h=Object.keys(r)[0];n[t[i][s]][h]=r[h]}}r.push(n)}e.push(...r)}return e[0]}computeRoot(){let t,e=this.nodes[0].length;for(let i=0;i<this.depth;i+=1){const r=e%this.arity,s=e-r,n=s+this.arity,h=[];for(let t=s;t<n;t+=1)t<this.nodes[i].length?h.push(this.nodes[i][t]):h.push(this.zeroes[i]);t=this.hashFn(h),e=Math.floor(e/this.arity)}return t}getProof(t){if(t<0||t>=this.nodes[0].length)throw new Error("The leaf does not exist in this tree");const e=[],i=[],r=t;for(let s=0;s<this.depth;s+=1){const r=t%this.arity,n=t-r,h=n+this.arity;i[s]=r,e[s]=[];for(let i=n;i<h;i+=1)i!==t&&(i<this.nodes[s].length?e[s].push(this.nodes[s][i]):e[s].push(this.zeroes[s]));t=Math.floor(t/this.arity)}return{root:this.root,leaf:this.nodes[0][r],pathIndices:i,siblings:e}}verify(t){let e=t.leaf;for(let i=0;i<t.siblings.length;i+=1){const r=t.siblings[i].slice();r.splice(t.pathIndices[i],0,e),e=this.hashFn(r)}return t.root===e}toString(){return this.toTreeString()}toTreeString(){const t=this.getLayersAsObject();return n.default.asTree(t,!0)}}e.IncrementalMerkleTree=h,"undefined"!==typeof window&&(window.IncrementalMerkleTree=h),e.default=h},"6d46":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleTree=void 0;const s=i("1c35"),n=r(i("feaa")),h=r(i("94f8")),o=r(i("26bf")),a=r(i("13ca"));class u extends a.default{constructor(t,e=h.default,i={}){if(super(),this.duplicateOdd=!1,this.concatenator=s.Buffer.concat,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.complete=!1,i.complete){if(i.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(i.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}if(this.isBitcoinTree=!!i.isBitcoinTree,this.hashLeaves=!!i.hashLeaves,this.sortLeaves=!!i.sortLeaves,this.sortPairs=!!i.sortPairs,this.complete=!!i.complete,i.fillDefaultHash)if("function"===typeof i.fillDefaultHash)this.fillDefaultHash=i.fillDefaultHash;else{if(!s.Buffer.isBuffer(i.fillDefaultHash)&&"string"!==typeof i.fillDefaultHash)throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');this.fillDefaultHash=(t,e)=>i.fillDefaultHash}this.sort=!!i.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!i.duplicateOdd,i.concatenator&&(this.concatenator=i.concatenator),this.hashFn=this.bufferifyFn(e),this.processLeaves(t)}getOptions(){var t,e;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:null!==(e=null===(t=this.fillDefaultHash)||void 0===t?void 0:t.toString())&&void 0!==e?e:null,duplicateOdd:this.duplicateOdd}}processLeaves(t){if(this.hashLeaves&&(t=t.map(this.hashFn)),this.leaves=t.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(s.Buffer.compare)),this.fillDefaultHash)for(let e=this.leaves.length;e<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));e++)this.leaves.push(this.bufferify(this.fillDefaultHash(e,this.hashFn)));this.createHashes(this.leaves)}createHashes(t){this.layers=[t];while(t.length>1){const e=this.layers.length;this.layers.push([]);const i=this.complete&&1===e&&!Number.isInteger(Math.log2(t.length))?2*t.length-Math.pow(2,Math.ceil(Math.log2(t.length))):t.length;for(let r=0;r<t.length;r+=2){if(r>=i){this.layers[e].push(...t.slice(i));break}if(r+1===t.length&&t.length%2===1){const i=t[t.length-1];let s=i;if(this.isBitcoinTree){s=this.hashFn(this.concatenator([n.default(i),n.default(i)])),s=n.default(this.hashFn(s)),this.layers[e].push(s);continue}if(!this.duplicateOdd){this.layers[e].push(t[r]);continue}}const h=t[r],o=r+1===t.length?h:t[r+1];let a=null;a=this.isBitcoinTree?[n.default(h),n.default(o)]:[h,o],this.sortPairs&&a.sort(s.Buffer.compare);let u=this.hashFn(this.concatenator(a));this.isBitcoinTree&&(u=n.default(this.hashFn(u))),this.layers[e].push(u)}t=this.layers[e]}}addLeaf(t,e=!1){e&&(t=this.hashFn(t)),this.processLeaves(this.leaves.concat(t))}addLeaves(t,e=!1){e&&(t=t.map(this.hashFn)),this.processLeaves(this.leaves.concat(t))}getLeaves(t){return Array.isArray(t)?(this.hashLeaves&&(t=t.map(this.hashFn),this.sortLeaves&&(t=t.sort(s.Buffer.compare))),this.leaves.filter(e=>-1!==this.bufferIndexOf(t,e,this.sortLeaves))):this.leaves}getLeaf(t){return t<0||t>this.leaves.length-1?s.Buffer.from([]):this.leaves[t]}getLeafIndex(t){t=this.bufferify(t);const e=this.getLeaves();for(let i=0;i<e.length;i++){const r=e[i];if(r.equals(t))return i}return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(t=>this.bufferToHex(t))}static marshalLeaves(t){return JSON.stringify(t.map(t=>u.bufferToHex(t)),null,2)}static unmarshalLeaves(t){let e=null;if("string"===typeof t)e=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");e=t}if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(u.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((t,e)=>(Array.isArray(e)?t.push(e.map(t=>this.bufferToHex(t))):t.push(e),t),[])}getLayersFlat(){const t=this.layers.reduce((t,e)=>(Array.isArray(e)?t.unshift(...e):t.unshift(e),t),[]);return t.unshift(s.Buffer.from([0])),t}getHexLayersFlat(){return this.getLayersFlat().map(t=>this.bufferToHex(t))}getLayerCount(){return this.getLayers().length}getRoot(){return 0===this.layers.length?s.Buffer.from([]):this.layers[this.layers.length-1][0]||s.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(t,e){if("undefined"===typeof t)throw new Error("leaf is required");t=this.bufferify(t);const i=[];if(!Number.isInteger(e)){e=-1;for(let i=0;i<this.leaves.length;i++)0===s.Buffer.compare(t,this.leaves[i])&&(e=i)}if(e<=-1)return[];for(let r=0;r<this.layers.length;r++){const t=this.layers[r],s=e%2,n=s?e-1:this.isBitcoinTree&&e===t.length-1&&r<this.layers.length-1?e:e+1;n<t.length&&i.push({position:s?"left":"right",data:t[n]}),e=e/2|0}return i}getHexProof(t,e){return this.getProof(t,e).map(t=>this.bufferToHex(t.data))}getProofs(){const t=[],e=[];return this.getProofsDFS(this.layers.length-1,0,t,e),e}getProofsDFS(t,e,i,r){const s=e%2;if(-1===t)return void(s||r.push([...i].reverse()));if(e>=this.layers[t].length)return;const n=this.layers[t],h=s?e-1:e+1;let o=!1;h<n.length&&(o=!0,i.push({position:s?"left":"right",data:n[h]}));const a=2*e,u=2*e+1;this.getProofsDFS(t-1,a,i,r),this.getProofsDFS(t-1,u,i,r),o&&i.splice(i.length-1,1)}getHexProofs(){return this.getProofs().map(t=>this.bufferToHex(t.data))}getPositionalHexProof(t,e){return this.getProof(t,e).map(t=>["left"===t.position?0:1,this.bufferToHex(t.data)])}static marshalProof(t){const e=t.map(t=>"string"===typeof t?t:s.Buffer.isBuffer(t)?u.bufferToHex(t):{position:t.position,data:u.bufferToHex(t.data)});return JSON.stringify(e,null,2)}static unmarshalProof(t){let e=null;if("string"===typeof t)e=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");e=t}if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(t=>{if("string"===typeof t)return u.bufferify(t);if(t instanceof Object)return{position:t.position,data:u.bufferify(t.data)};throw new Error("Expected item to be of type string or object")})}static marshalTree(t){const e=t.getHexRoot(),i=t.leaves.map(t=>u.bufferToHex(t)),r=t.getHexLayers(),s=t.getOptions();return JSON.stringify({options:s,root:e,layers:r,leaves:i},null,2)}static unmarshalTree(t,e=h.default,i={}){let r=null;if("string"===typeof t)r=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");r=t}if(!r)throw new Error("could not parse json");return i=Object.assign({},r.options||{},i),new u(r.leaves,e,i)}getProofIndices(t,e){const i=Math.pow(2,e);let r=new Set;for(const a of t){let t=i+a;while(t>1)r.add(1^t),t=t/2|0}const s=t.map(t=>i+t),n=Array.from(r).sort((t,e)=>t-e).reverse();r=s.concat(n);const h=new Set,o=[];for(let a of r)if(!h.has(a)){o.push(a);while(a>1){if(h.add(a),!h.has(1^a))break;a=a/2|0}}return o.filter(e=>!t.includes(e-i))}getProofIndicesForUnevenTree(t,e){const i=Math.ceil(Math.log2(e)),r=[];for(let h=0;h<i;h++){const t=e%2!==0;t&&r.push({index:h,leavesCount:e}),e=Math.ceil(e/2)}const s=[];let n=t;for(let h=0;h<i;h++){const t=n.map(t=>t%2===0?t+1:t-1);let e=t.filter(t=>!n.includes(t));const i=r.find(({index:t})=>t===h);i&&n.includes(i.leavesCount-1)&&(e=e.slice(0,-1)),s.push(e),n=[...new Set(n.map(t=>t%2===0?t/2:t%2===0?(t+1)/2:(t-1)/2))]}return s}getMultiProof(t,e){this.complete||console.warn("Warning: For correct multiProofs it's strongly recommended to set complete: true"),e||(e=t,t=this.getLayersFlat());const i=this.isUnevenTree();if(i&&e.every(Number.isInteger))return this.getMultiProofForUnevenTree(e);if(!e.every(Number.isInteger)){let t=e;this.sortPairs&&(t=t.sort(s.Buffer.compare));let i=t.map(t=>this.bufferIndexOf(this.leaves,t,this.sortLeaves)).sort((t,e)=>t===e?0:t>e?1:-1);if(!i.every(t=>-1!==t))throw new Error("Element does not exist in Merkle tree");const r=[],n=[];let h=[];for(let e=0;e<this.layers.length;e++){const t=this.layers[e];for(let e=0;e<i.length;e++){const s=i[e],o=this.getPairNode(t,s);r.push(t[s]),o&&n.push(o),h.push(s/2|0)}i=h.filter((t,e,i)=>i.indexOf(t)===e),h=[]}return n.filter(t=>!r.includes(t))}return this.getProofIndices(e,Math.log2(t.length/2|0)).map(e=>t[e])}getMultiProofForUnevenTree(t,e){e||(e=t,t=this.getLayers());let i=[],r=e;for(const s of t){const t=[];for(const i of r){if(i%2===0){const e=i+1;if(!r.includes(e)&&s[e]){t.push(s[e]);continue}}const e=i-1;r.includes(e)||!s[e]||t.push(s[e])}i=i.concat(t);const e=new Set;for(const i of r)i%2!==0?i%2!==0?e.add((i-1)/2):e.add((i+1)/2):e.add(i/2);r=Array.from(e)}return i}getHexMultiProof(t,e){return this.getMultiProof(t,e).map(t=>this.bufferToHex(t))}getProofFlags(t,e){if(!Array.isArray(t)||t.length<=0)throw new Error("Invalid Inputs!");let i;if(i=t.every(Number.isInteger)?[...t].sort((t,e)=>t===e?0:t>e?1:-1):t.map(t=>this.bufferIndexOf(this.leaves,t,this.sortLeaves)).sort((t,e)=>t===e?0:t>e?1:-1),!i.every(t=>-1!==t))throw new Error("Element does not exist in Merkle tree");const r=e.map(t=>this.bufferify(t)),s=[],n=[];for(let h=0;h<this.layers.length;h++){const t=this.layers[h];i=i.reduce((e,i)=>{const h=s.includes(t[i]);if(!h){const e=this.getPairNode(t,i),h=r.includes(t[i])||r.includes(e);e&&n.push(!h),s.push(t[i]),s.push(e)}return e.push(i/2|0),e},[])}return n}verify(t,e,i){let r=this.bufferify(e);if(i=this.bufferify(i),!Array.isArray(t)||!e||!i)return!1;for(let h=0;h<t.length;h++){const e=t[h];let i=null,o=null;if("string"===typeof e)i=this.bufferify(e),o=!0;else if(Array.isArray(e))o=0===e[0],i=this.bufferify(e[1]);else if(s.Buffer.isBuffer(e))i=e,o=!0;else{if(!(e instanceof Object))throw new Error("Expected node to be of type string or object");i=this.bufferify(e.data),o="left"===e.position}const a=[];this.isBitcoinTree?(a.push(n.default(r)),a[o?"unshift":"push"](n.default(i)),r=this.hashFn(this.concatenator(a)),r=n.default(this.hashFn(r))):this.sortPairs?-1===s.Buffer.compare(r,i)?(a.push(r,i),r=this.hashFn(this.concatenator(a))):(a.push(i,r),r=this.hashFn(this.concatenator(a))):(a.push(r),a[o?"unshift":"push"](i),r=this.hashFn(this.concatenator(a)))}return 0===s.Buffer.compare(r,i)}verifyMultiProof(t,e,i,r,n){const h=this.isUnevenTree();if(h)return this.verifyMultiProofForUnevenTree(t,e,i,r,n);const o=Math.ceil(Math.log2(r));t=this.bufferify(t),i=i.map(t=>this.bufferify(t)),n=n.map(t=>this.bufferify(t));const a={};for(const[s,f]of this.zip(e,i))a[Math.pow(2,o)+s]=f;for(const[s,f]of this.zip(this.getProofIndices(e,o),n))a[s]=f;let u=Object.keys(a).map(t=>+t).sort((t,e)=>t-e);u=u.slice(0,u.length-1);let l=0;while(l<u.length){const t=u[l];if(t>=2&&{}.hasOwnProperty.call(a,1^t)){let e=[a[t-t%2],a[t-t%2+1]];this.sortPairs&&(e=e.sort(s.Buffer.compare));const i=e[1]?this.hashFn(this.concatenator(e)):e[0];a[t/2|0]=i,u.push(t/2|0)}l+=1}return!e.length||{}.hasOwnProperty.call(a,1)&&a[1].equals(t)}verifyMultiProofWithFlags(t,e,i,r){t=this.bufferify(t),e=e.map(this.bufferify),i=i.map(this.bufferify);const n=e.length,h=r.length,o=[];let a=0,u=0,l=0;for(let f=0;f<h;f++){const t=r[f]?a<n?e[a++]:o[u++]:i[l++],h=a<n?e[a++]:o[u++],c=[t,h].sort(s.Buffer.compare);o[f]=this.hashFn(this.concatenator(c))}return 0===s.Buffer.compare(o[h-1],t)}verifyMultiProofForUnevenTree(t,e,i,r,s){t=this.bufferify(t),i=i.map(t=>this.bufferify(t)),s=s.map(t=>this.bufferify(t));const n=this.calculateRootForUnevenTree(e,i,r,s);return t.equals(n)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const t=this.getLayers().map(t=>t.map(t=>this.bufferToHex(t,!1))),e=[];for(let i=0;i<t.length;i++){const r=[];for(let s=0;s<t[i].length;s++){const n={[t[i][s]]:null};if(e.length){n[t[i][s]]={};const r=e.shift(),h=Object.keys(r)[0];if(n[t[i][s]][h]=r[h],e.length){const r=e.shift(),h=Object.keys(r)[0];n[t[i][s]][h]=r[h]}}r.push(n)}e.push(...r)}return e[0]}static verify(t,e,i,r=h.default,s={}){const n=new u([],r,s);return n.verify(t,e,i)}static getMultiProof(t,e){const i=new u([]);return i.getMultiProof(t,e)}resetTree(){this.leaves=[],this.layers=[]}getPairNode(t,e){const i=e%2===0?e+1:e-1;return i<t.length?t[i]:null}toTreeString(){const t=this.getLayersAsObject();return o.default.asTree(t,!0)}toString(){return this.toTreeString()}isUnevenTree(t){const e=(null===t||void 0===t?void 0:t.length)||this.getDepth();return!this.isPowOf2(e)}isPowOf2(t){return t&&!(t&t-1)}calculateRootForUnevenTree(t,e,i,r){const s=this.zip(t,e).sort(([t],[e])=>t-e),n=s.map(([t])=>t),h=this.getProofIndicesForUnevenTree(n,i);let o=0;const a=[];for(let l=0;l<h.length;l++){const t=h[l],e=o;o+=t.length,a[l]=this.zip(t,r.slice(e,o))}const u=[s];for(let l=0;l<a.length;l++){const t=a[l].concat(u[l]).sort(([t],[e])=>t-e).map(([,t])=>t),e=u[l].map(([t])=>t),i=[...new Set(e.map(t=>t%2===0?t/2:t%2===0?(t+1)/2:(t-1)/2))],r=[];for(let s=0;s<i.length;s++){const e=i[s],n=t[2*s],h=t[2*s+1],o=h?this.hashFn(this.concatenator([n,h])):n;r.push([e,o])}u.push(r)}return u[u.length-1][0][1]}}e.MerkleTree=u,"undefined"!==typeof window&&(window.MerkleTree=u),e.default=u},"967a":function(t,e,i){"use strict";i("bb56")},a43f:function(t,e,i){(function(t){(function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var h;"object"===typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{h="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:i(30).Buffer}catch(P){}function o(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function u(t,e,i,s){for(var n=0,h=0,o=Math.min(t.length,i),a=e;a<o;a++){var u=t.charCodeAt(a)-48;n*=s,h=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&h<s,"Invalid character"),n+=h}return n}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"===typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return t.cmp(e)<0?t:e},n.prototype._init=function(t,e,i){if("number"===typeof t)return this._initNumber(t,e,i);if("object"===typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var s=0;"-"===t[0]&&(s++,this.negative=1),s<t.length&&(16===e?this._parseHex(t,s,i):(this._parseBase(t,e,s),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var n,h,o=0;if("be"===i)for(s=t.length-1,n=0;s>=0;s-=3)h=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,o+=24,o>=26&&(o-=26,n++);else if("le"===i)for(s=0,n=0;s<t.length;s+=3)h=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[n]|=h<<o&67108863,this.words[n+1]=h>>>26-o&67108863,o+=24,o>=26&&(o-=26,n++);return this._strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,h=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[h]|=67108863&s,n>=18?(n-=18,h+=1,this.words[h]|=s>>>26):n+=8;else{var o=t.length-e;for(r=o%2===0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[h]|=67108863&s,n>=18?(n-=18,h+=1,this.words[h]|=s>>>26):n+=8}this._strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,h=n%r,o=Math.min(n,n-h)+i,a=0,l=i;l<o;l+=r)a=u(t,l,l+r,e),this.imuln(s),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==h){var f=1;for(a=u(t,l,t.length,e),l=0;l<h;l++)f*=e;this.imuln(f),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){l(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},n.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(P){n.prototype.inspect=f}else n.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var s=0,n=0,h=0;h<this.length;h++){var o=this.words[h],a=(16777215&(o<<s|n)).toString(16);n=o>>>24-s&16777215,s+=2,s>=26&&(s-=26,h--),i=0!==n||h!==this.length-1?c[6-a.length]+a+i:a+i}0!==n&&(i=n.toString(16)+i);while(i.length%e!==0)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var u=d[t],l=m[t];i="";var f=this.clone();f.negative=0;while(!f.isZero()){var p=f.modrn(l).toString(t);f=f.idivn(l),i=f.isZero()?p+i:c[u-p.length]+p+i}this.isZero()&&(i="0"+i);while(i.length%e!==0)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},h&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var p=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function g(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=t.words[r]>>>s&1}return e}function v(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],h=s*n,o=67108863&h,a=h/67108864|0;i.words[0]=o;for(var u=1;u<r;u++){for(var l=a>>>26,f=67108863&a,c=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=c;d++){var m=u-d|0;s=0|t.words[m],n=0|e.words[d],h=s*n+f,l+=h/67108864|0,f=67108863&h}i.words[u]=0|f,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i._strip()}n.prototype.toArrayLike=function(t,e,i){this._strip();var s=this.byteLength(),n=i||Math.max(1,s);r(s<=n,"byte array longer than desired length"),r(n>0,"Requested array length <= 0");var h=p(t,n),o="le"===e?"LE":"BE";return this["_toArrayLike"+o](h,s),h},n.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var h=this.words[s]<<n|r;t[i++]=255&h,i<t.length&&(t[i++]=h>>8&255),i<t.length&&(t[i++]=h>>16&255),6===n?(i<t.length&&(t[i++]=h>>24&255),r=0,n=0):(r=h>>>24,n+=2)}if(i<t.length){t[i++]=r;while(i<t.length)t[i++]=0}},n.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,s=0,n=0;s<this.length;s++){var h=this.words[s]<<n|r;t[i--]=255&h,i>=0&&(t[i--]=h>>8&255),i>=0&&(t[i--]=h>>16&255),6===n?(i>=0&&(t[i--]=h>>24&255),r=0,n=0):(r=h>>>24,n+=2)}if(i>=0){t[i--]=r;while(i>=0)t[i--]=0}},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0===(8191&e)&&(i+=13,e>>>=13),0===(127&e)&&(i+=7,e>>>=7),0===(15&e)&&(i+=4,e>>>=4),0===(3&e)&&(i+=2,e>>>=2),0===(1&e)&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var s=0;s<e;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"===typeof t&&t>=0);var i=t/26|0,s=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<s:this.words[i]&~(1<<s),this._strip()},n.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,h=0;h<r.length;h++)e=(0|i.words[h])-(0|r.words[h])+n,n=e>>26,this.words[h]=67108863&e;for(;0!==n&&h<i.length;h++)e=(0|i.words[h])+n,n=e>>26,this.words[h]=67108863&e;if(0===n&&h<i.length&&i!==this)for(;h<i.length;h++)this.words[h]=i.words[h];return this.length=Math.max(this.length,h),i!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var r,s,n,h=t.words,o=e.words,a=i.words,u=0,l=0|h[0],f=8191&l,c=l>>>13,d=0|h[1],m=8191&d,p=d>>>13,g=0|h[2],v=8191&g,y=g>>>13,M=0|h[3],w=8191&M,b=M>>>13,_=0|h[4],x=8191&_,B=_>>>13,k=0|h[5],S=8191&k,L=k>>>13,T=0|h[6],A=8191&T,P=T>>>13,F=0|h[7],O=8191&F,E=F>>>13,H=0|h[8],I=8191&H,z=H>>>13,N=0|h[9],R=8191&N,j=N>>>13,q=0|o[0],D=8191&q,Z=q>>>13,U=0|o[1],C=8191&U,J=U>>>13,V=0|o[2],$=8191&V,K=V>>>13,W=0|o[3],G=8191&W,Q=W>>>13,X=0|o[4],Y=8191&X,tt=X>>>13,et=0|o[5],it=8191&et,rt=et>>>13,st=0|o[6],nt=8191&st,ht=st>>>13,ot=0|o[7],at=8191&ot,ut=ot>>>13,lt=0|o[8],ft=8191&lt,ct=lt>>>13,dt=0|o[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19,r=Math.imul(f,D),s=Math.imul(f,Z),s=s+Math.imul(c,D)|0,n=Math.imul(c,Z);var gt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(m,D),s=Math.imul(m,Z),s=s+Math.imul(p,D)|0,n=Math.imul(p,Z),r=r+Math.imul(f,C)|0,s=s+Math.imul(f,J)|0,s=s+Math.imul(c,C)|0,n=n+Math.imul(c,J)|0;var vt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,D),s=Math.imul(v,Z),s=s+Math.imul(y,D)|0,n=Math.imul(y,Z),r=r+Math.imul(m,C)|0,s=s+Math.imul(m,J)|0,s=s+Math.imul(p,C)|0,n=n+Math.imul(p,J)|0,r=r+Math.imul(f,$)|0,s=s+Math.imul(f,K)|0,s=s+Math.imul(c,$)|0,n=n+Math.imul(c,K)|0;var yt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,D),s=Math.imul(w,Z),s=s+Math.imul(b,D)|0,n=Math.imul(b,Z),r=r+Math.imul(v,C)|0,s=s+Math.imul(v,J)|0,s=s+Math.imul(y,C)|0,n=n+Math.imul(y,J)|0,r=r+Math.imul(m,$)|0,s=s+Math.imul(m,K)|0,s=s+Math.imul(p,$)|0,n=n+Math.imul(p,K)|0,r=r+Math.imul(f,G)|0,s=s+Math.imul(f,Q)|0,s=s+Math.imul(c,G)|0,n=n+Math.imul(c,Q)|0;var Mt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,D),s=Math.imul(x,Z),s=s+Math.imul(B,D)|0,n=Math.imul(B,Z),r=r+Math.imul(w,C)|0,s=s+Math.imul(w,J)|0,s=s+Math.imul(b,C)|0,n=n+Math.imul(b,J)|0,r=r+Math.imul(v,$)|0,s=s+Math.imul(v,K)|0,s=s+Math.imul(y,$)|0,n=n+Math.imul(y,K)|0,r=r+Math.imul(m,G)|0,s=s+Math.imul(m,Q)|0,s=s+Math.imul(p,G)|0,n=n+Math.imul(p,Q)|0,r=r+Math.imul(f,Y)|0,s=s+Math.imul(f,tt)|0,s=s+Math.imul(c,Y)|0,n=n+Math.imul(c,tt)|0;var wt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(S,D),s=Math.imul(S,Z),s=s+Math.imul(L,D)|0,n=Math.imul(L,Z),r=r+Math.imul(x,C)|0,s=s+Math.imul(x,J)|0,s=s+Math.imul(B,C)|0,n=n+Math.imul(B,J)|0,r=r+Math.imul(w,$)|0,s=s+Math.imul(w,K)|0,s=s+Math.imul(b,$)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(v,G)|0,s=s+Math.imul(v,Q)|0,s=s+Math.imul(y,G)|0,n=n+Math.imul(y,Q)|0,r=r+Math.imul(m,Y)|0,s=s+Math.imul(m,tt)|0,s=s+Math.imul(p,Y)|0,n=n+Math.imul(p,tt)|0,r=r+Math.imul(f,it)|0,s=s+Math.imul(f,rt)|0,s=s+Math.imul(c,it)|0,n=n+Math.imul(c,rt)|0;var bt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(A,D),s=Math.imul(A,Z),s=s+Math.imul(P,D)|0,n=Math.imul(P,Z),r=r+Math.imul(S,C)|0,s=s+Math.imul(S,J)|0,s=s+Math.imul(L,C)|0,n=n+Math.imul(L,J)|0,r=r+Math.imul(x,$)|0,s=s+Math.imul(x,K)|0,s=s+Math.imul(B,$)|0,n=n+Math.imul(B,K)|0,r=r+Math.imul(w,G)|0,s=s+Math.imul(w,Q)|0,s=s+Math.imul(b,G)|0,n=n+Math.imul(b,Q)|0,r=r+Math.imul(v,Y)|0,s=s+Math.imul(v,tt)|0,s=s+Math.imul(y,Y)|0,n=n+Math.imul(y,tt)|0,r=r+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0,s=s+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0,r=r+Math.imul(f,nt)|0,s=s+Math.imul(f,ht)|0,s=s+Math.imul(c,nt)|0,n=n+Math.imul(c,ht)|0;var _t=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,D),s=Math.imul(O,Z),s=s+Math.imul(E,D)|0,n=Math.imul(E,Z),r=r+Math.imul(A,C)|0,s=s+Math.imul(A,J)|0,s=s+Math.imul(P,C)|0,n=n+Math.imul(P,J)|0,r=r+Math.imul(S,$)|0,s=s+Math.imul(S,K)|0,s=s+Math.imul(L,$)|0,n=n+Math.imul(L,K)|0,r=r+Math.imul(x,G)|0,s=s+Math.imul(x,Q)|0,s=s+Math.imul(B,G)|0,n=n+Math.imul(B,Q)|0,r=r+Math.imul(w,Y)|0,s=s+Math.imul(w,tt)|0,s=s+Math.imul(b,Y)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(v,it)|0,s=s+Math.imul(v,rt)|0,s=s+Math.imul(y,it)|0,n=n+Math.imul(y,rt)|0,r=r+Math.imul(m,nt)|0,s=s+Math.imul(m,ht)|0,s=s+Math.imul(p,nt)|0,n=n+Math.imul(p,ht)|0,r=r+Math.imul(f,at)|0,s=s+Math.imul(f,ut)|0,s=s+Math.imul(c,at)|0,n=n+Math.imul(c,ut)|0;var xt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(I,D),s=Math.imul(I,Z),s=s+Math.imul(z,D)|0,n=Math.imul(z,Z),r=r+Math.imul(O,C)|0,s=s+Math.imul(O,J)|0,s=s+Math.imul(E,C)|0,n=n+Math.imul(E,J)|0,r=r+Math.imul(A,$)|0,s=s+Math.imul(A,K)|0,s=s+Math.imul(P,$)|0,n=n+Math.imul(P,K)|0,r=r+Math.imul(S,G)|0,s=s+Math.imul(S,Q)|0,s=s+Math.imul(L,G)|0,n=n+Math.imul(L,Q)|0,r=r+Math.imul(x,Y)|0,s=s+Math.imul(x,tt)|0,s=s+Math.imul(B,Y)|0,n=n+Math.imul(B,tt)|0,r=r+Math.imul(w,it)|0,s=s+Math.imul(w,rt)|0,s=s+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(v,nt)|0,s=s+Math.imul(v,ht)|0,s=s+Math.imul(y,nt)|0,n=n+Math.imul(y,ht)|0,r=r+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0,s=s+Math.imul(p,at)|0,n=n+Math.imul(p,ut)|0,r=r+Math.imul(f,ft)|0,s=s+Math.imul(f,ct)|0,s=s+Math.imul(c,ft)|0,n=n+Math.imul(c,ct)|0;var Bt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(R,D),s=Math.imul(R,Z),s=s+Math.imul(j,D)|0,n=Math.imul(j,Z),r=r+Math.imul(I,C)|0,s=s+Math.imul(I,J)|0,s=s+Math.imul(z,C)|0,n=n+Math.imul(z,J)|0,r=r+Math.imul(O,$)|0,s=s+Math.imul(O,K)|0,s=s+Math.imul(E,$)|0,n=n+Math.imul(E,K)|0,r=r+Math.imul(A,G)|0,s=s+Math.imul(A,Q)|0,s=s+Math.imul(P,G)|0,n=n+Math.imul(P,Q)|0,r=r+Math.imul(S,Y)|0,s=s+Math.imul(S,tt)|0,s=s+Math.imul(L,Y)|0,n=n+Math.imul(L,tt)|0,r=r+Math.imul(x,it)|0,s=s+Math.imul(x,rt)|0,s=s+Math.imul(B,it)|0,n=n+Math.imul(B,rt)|0,r=r+Math.imul(w,nt)|0,s=s+Math.imul(w,ht)|0,s=s+Math.imul(b,nt)|0,n=n+Math.imul(b,ht)|0,r=r+Math.imul(v,at)|0,s=s+Math.imul(v,ut)|0,s=s+Math.imul(y,at)|0,n=n+Math.imul(y,ut)|0,r=r+Math.imul(m,ft)|0,s=s+Math.imul(m,ct)|0,s=s+Math.imul(p,ft)|0,n=n+Math.imul(p,ct)|0,r=r+Math.imul(f,mt)|0,s=s+Math.imul(f,pt)|0,s=s+Math.imul(c,mt)|0,n=n+Math.imul(c,pt)|0;var kt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(R,C),s=Math.imul(R,J),s=s+Math.imul(j,C)|0,n=Math.imul(j,J),r=r+Math.imul(I,$)|0,s=s+Math.imul(I,K)|0,s=s+Math.imul(z,$)|0,n=n+Math.imul(z,K)|0,r=r+Math.imul(O,G)|0,s=s+Math.imul(O,Q)|0,s=s+Math.imul(E,G)|0,n=n+Math.imul(E,Q)|0,r=r+Math.imul(A,Y)|0,s=s+Math.imul(A,tt)|0,s=s+Math.imul(P,Y)|0,n=n+Math.imul(P,tt)|0,r=r+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,s=s+Math.imul(L,it)|0,n=n+Math.imul(L,rt)|0,r=r+Math.imul(x,nt)|0,s=s+Math.imul(x,ht)|0,s=s+Math.imul(B,nt)|0,n=n+Math.imul(B,ht)|0,r=r+Math.imul(w,at)|0,s=s+Math.imul(w,ut)|0,s=s+Math.imul(b,at)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(v,ft)|0,s=s+Math.imul(v,ct)|0,s=s+Math.imul(y,ft)|0,n=n+Math.imul(y,ct)|0,r=r+Math.imul(m,mt)|0,s=s+Math.imul(m,pt)|0,s=s+Math.imul(p,mt)|0,n=n+Math.imul(p,pt)|0;var St=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(R,$),s=Math.imul(R,K),s=s+Math.imul(j,$)|0,n=Math.imul(j,K),r=r+Math.imul(I,G)|0,s=s+Math.imul(I,Q)|0,s=s+Math.imul(z,G)|0,n=n+Math.imul(z,Q)|0,r=r+Math.imul(O,Y)|0,s=s+Math.imul(O,tt)|0,s=s+Math.imul(E,Y)|0,n=n+Math.imul(E,tt)|0,r=r+Math.imul(A,it)|0,s=s+Math.imul(A,rt)|0,s=s+Math.imul(P,it)|0,n=n+Math.imul(P,rt)|0,r=r+Math.imul(S,nt)|0,s=s+Math.imul(S,ht)|0,s=s+Math.imul(L,nt)|0,n=n+Math.imul(L,ht)|0,r=r+Math.imul(x,at)|0,s=s+Math.imul(x,ut)|0,s=s+Math.imul(B,at)|0,n=n+Math.imul(B,ut)|0,r=r+Math.imul(w,ft)|0,s=s+Math.imul(w,ct)|0,s=s+Math.imul(b,ft)|0,n=n+Math.imul(b,ct)|0,r=r+Math.imul(v,mt)|0,s=s+Math.imul(v,pt)|0,s=s+Math.imul(y,mt)|0,n=n+Math.imul(y,pt)|0;var Lt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(R,G),s=Math.imul(R,Q),s=s+Math.imul(j,G)|0,n=Math.imul(j,Q),r=r+Math.imul(I,Y)|0,s=s+Math.imul(I,tt)|0,s=s+Math.imul(z,Y)|0,n=n+Math.imul(z,tt)|0,r=r+Math.imul(O,it)|0,s=s+Math.imul(O,rt)|0,s=s+Math.imul(E,it)|0,n=n+Math.imul(E,rt)|0,r=r+Math.imul(A,nt)|0,s=s+Math.imul(A,ht)|0,s=s+Math.imul(P,nt)|0,n=n+Math.imul(P,ht)|0,r=r+Math.imul(S,at)|0,s=s+Math.imul(S,ut)|0,s=s+Math.imul(L,at)|0,n=n+Math.imul(L,ut)|0,r=r+Math.imul(x,ft)|0,s=s+Math.imul(x,ct)|0,s=s+Math.imul(B,ft)|0,n=n+Math.imul(B,ct)|0,r=r+Math.imul(w,mt)|0,s=s+Math.imul(w,pt)|0,s=s+Math.imul(b,mt)|0,n=n+Math.imul(b,pt)|0;var Tt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(R,Y),s=Math.imul(R,tt),s=s+Math.imul(j,Y)|0,n=Math.imul(j,tt),r=r+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,s=s+Math.imul(z,it)|0,n=n+Math.imul(z,rt)|0,r=r+Math.imul(O,nt)|0,s=s+Math.imul(O,ht)|0,s=s+Math.imul(E,nt)|0,n=n+Math.imul(E,ht)|0,r=r+Math.imul(A,at)|0,s=s+Math.imul(A,ut)|0,s=s+Math.imul(P,at)|0,n=n+Math.imul(P,ut)|0,r=r+Math.imul(S,ft)|0,s=s+Math.imul(S,ct)|0,s=s+Math.imul(L,ft)|0,n=n+Math.imul(L,ct)|0,r=r+Math.imul(x,mt)|0,s=s+Math.imul(x,pt)|0,s=s+Math.imul(B,mt)|0,n=n+Math.imul(B,pt)|0;var At=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(R,it),s=Math.imul(R,rt),s=s+Math.imul(j,it)|0,n=Math.imul(j,rt),r=r+Math.imul(I,nt)|0,s=s+Math.imul(I,ht)|0,s=s+Math.imul(z,nt)|0,n=n+Math.imul(z,ht)|0,r=r+Math.imul(O,at)|0,s=s+Math.imul(O,ut)|0,s=s+Math.imul(E,at)|0,n=n+Math.imul(E,ut)|0,r=r+Math.imul(A,ft)|0,s=s+Math.imul(A,ct)|0,s=s+Math.imul(P,ft)|0,n=n+Math.imul(P,ct)|0,r=r+Math.imul(S,mt)|0,s=s+Math.imul(S,pt)|0,s=s+Math.imul(L,mt)|0,n=n+Math.imul(L,pt)|0;var Pt=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(R,nt),s=Math.imul(R,ht),s=s+Math.imul(j,nt)|0,n=Math.imul(j,ht),r=r+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,s=s+Math.imul(z,at)|0,n=n+Math.imul(z,ut)|0,r=r+Math.imul(O,ft)|0,s=s+Math.imul(O,ct)|0,s=s+Math.imul(E,ft)|0,n=n+Math.imul(E,ct)|0,r=r+Math.imul(A,mt)|0,s=s+Math.imul(A,pt)|0,s=s+Math.imul(P,mt)|0,n=n+Math.imul(P,pt)|0;var Ft=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(R,at),s=Math.imul(R,ut),s=s+Math.imul(j,at)|0,n=Math.imul(j,ut),r=r+Math.imul(I,ft)|0,s=s+Math.imul(I,ct)|0,s=s+Math.imul(z,ft)|0,n=n+Math.imul(z,ct)|0,r=r+Math.imul(O,mt)|0,s=s+Math.imul(O,pt)|0,s=s+Math.imul(E,mt)|0,n=n+Math.imul(E,pt)|0;var Ot=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(R,ft),s=Math.imul(R,ct),s=s+Math.imul(j,ft)|0,n=Math.imul(j,ct),r=r+Math.imul(I,mt)|0,s=s+Math.imul(I,pt)|0,s=s+Math.imul(z,mt)|0,n=n+Math.imul(z,pt)|0;var Et=(u+r|0)+((8191&s)<<13)|0;u=(n+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(R,mt),s=Math.imul(R,pt),s=s+Math.imul(j,mt)|0,n=Math.imul(j,pt);var Ht=(u+r|0)+((8191&s)<<13)|0;return u=(n+(s>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,a[0]=gt,a[1]=vt,a[2]=yt,a[3]=Mt,a[4]=wt,a[5]=bt,a[6]=_t,a[7]=xt,a[8]=Bt,a[9]=kt,a[10]=St,a[11]=Lt,a[12]=Tt,a[13]=At,a[14]=Pt,a[15]=Ft,a[16]=Ot,a[17]=Et,a[18]=Ht,0!==u&&(a[19]=u,i.length++),i};function M(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var h=s;s=0;for(var o=67108863&r,a=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=a;u++){var l=n-u,f=0|t.words[l],c=0|e.words[u],d=f*c,m=67108863&d;h=h+(d/67108864|0)|0,m=m+o|0,o=67108863&m,h=h+(m>>>26)|0,s+=h>>>26,h&=67108863}i.words[n]=o,r=h,h=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function w(t,e,i){return M(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=v),n.prototype.mulTo=function(t,e){var i,r=this.length+t.length;return i=10===this.length&&10===t.length?y(this,t,e):r<63?v(this,t,e):r<1024?M(this,t,e):w(this,t,e),i},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,s,n){for(var h=0;h<n;h++)r[h]=e[t[h]],s[h]=i[t[h]]},b.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var h=1;h<s;h<<=1)for(var o=h<<1,a=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),l=0;l<s;l+=o)for(var f=a,c=u,d=0;d<h;d++){var m=i[l+d],p=r[l+d],g=i[l+d+h],v=r[l+d+h],y=f*g-c*v;v=f*v+c*g,g=y,i[l+d]=m+g,r[l+d]=p+v,i[l+d+h]=m-g,r[l+d+h]=p-v,d!==o&&(y=a*f-u*c,c=a*c+u*f,f=y)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},b.prototype.convert13b=function(t,e,i,s){for(var n=0,h=0;h<e;h++)n+=0|t[h],i[2*h]=8191&n,n>>>=13,i[2*h+1]=8191&n,n>>>=13;for(h=2*e;h<s;++h)i[h]=0;r(0===n),r(0===(-8192&n))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),h=new Array(r),o=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),f=new Array(r),c=i.words;c.length=r,this.convert13b(t.words,t.length,h,r),this.convert13b(e.words,e.length,u,r),this.transform(h,n,o,a,r,s),this.transform(u,n,l,f,r,s);for(var d=0;d<r;d++){var m=o[d]*l[d]-a[d]*f[d];a[d]=o[d]*f[d]+a[d]*l[d],o[d]=m}return this.conjugate(o,a,r),this.transform(o,a,c,n,r,s),this.conjugate(c,n,r),this.normalize13b(c,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=new Array(this.length+t.length),w(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"===typeof t),r(t<67108864);for(var i=0,s=0;s<this.length;s++){var n=(0|this.words[s])*t,h=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=h>>>26,this.words[s]=67108863&h}return 0!==i&&(this.words[s]=i,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=g(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length;r++,i=i.sqr())if(0!==e[r])break;if(++r<e.length)for(var s=i.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(t){r("number"===typeof t&&t>=0);var e,i=t%26,s=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var h=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,a=(0|this.words[e])-o<<i;this.words[e]=a|h,h=o>>>26-i}h&&(this.words[e]=h,this.length++)}if(0!==s){for(e=this.length-1;e>=0;e--)this.words[e+s]=this.words[e];for(e=0;e<s;e++)this.words[e]=0;this.length+=s}return this._strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){var s;r("number"===typeof t&&t>=0),s=e?(e-e%26)/26:0;var n=t%26,h=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=i;if(s-=h,s=Math.max(0,s),a){for(var u=0;u<h;u++)a.words[u]=this.words[u];a.length=h}if(0===h);else if(this.length>h)for(this.length-=h,u=0;u<this.length;u++)this.words[u]=this.words[u+h];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=s);u--){var f=0|this.words[u];this.words[u]=l<<26-n|f>>>n,l=f&o}return a&&0!==l&&(a.words[a.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"===typeof t&&t>=0);var e=t%26,i=(t-e)/26,s=1<<e;if(this.length<=i)return!1;var n=this.words[i];return!!(n&s)},n.prototype.imaskn=function(t){r("number"===typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var s=67108863^67108863>>>e<<e;this.words[this.length-1]&=s}return this._strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"===typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"===typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){var s,n,h=t.length+i;this._expand(h);var o=0;for(s=0;s<t.length;s++){n=(0|this.words[s+i])+o;var a=(0|t.words[s])*e;n-=67108863&a,o=(n>>26)-(a/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)n=(0|this.words[s+i])+o,o=n>>26,this.words[s+i]=67108863&n;if(0===o)return this._strip();for(r(-1===o),o=0,s=0;s<this.length;s++)n=-(0|this.words[s])+o,o=n>>26,this.words[s]=67108863&n;return this.negative=1,this._strip()},n.prototype._wordDiv=function(t,e){var i=this.length-t.length,r=this.clone(),s=t,h=0|s.words[s.length-1],o=this._countBits(h);i=26-o,0!==i&&(s=s.ushln(i),r.iushln(i),h=0|s.words[s.length-1]);var a,u=r.length-s.length;if("mod"!==e){a=new n(null),a.length=u+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var f=r.clone()._ishlnsubmul(s,1,u);0===f.negative&&(r=f,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var d=67108864*(0|r.words[s.length+c])+(0|r.words[s.length+c-1]);d=Math.min(d/h|0,67108863),r._ishlnsubmul(s,d,c);while(0!==r.negative)d--,r.negative=0,r._ishlnsubmul(s,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},n.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(s=o.div.neg()),"div"!==e&&(h=o.mod.neg(),i&&0!==h.negative&&h.iadd(t)),{div:s,mod:h}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(s=o.div.neg()),{div:s,mod:o.mod}):0!==(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(h=o.mod.neg(),i&&0!==h.negative&&h.isub(t)),{div:o.div,mod:h}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e);var s,h,o},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,s=0,n=this.length-1;n>=0;n--)s=(i*s+(0|this.words[n]))%t;return e?-s:s},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,s=this.length-1;s>=0;s--){var n=(0|this.words[s])+67108864*i;this.words[s]=n/t|0,i=n%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();var s=new n(1),h=new n(0),o=new n(0),a=new n(1),u=0;while(e.isEven()&&i.isEven())e.iushrn(1),i.iushrn(1),++u;var l=i.clone(),f=e.clone();while(!e.isZero()){for(var c=0,d=1;0===(e.words[0]&d)&&c<26;++c,d<<=1);if(c>0){e.iushrn(c);while(c-- >0)(s.isOdd()||h.isOdd())&&(s.iadd(l),h.isub(f)),s.iushrn(1),h.iushrn(1)}for(var m=0,p=1;0===(i.words[0]&p)&&m<26;++m,p<<=1);if(m>0){i.iushrn(m);while(m-- >0)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(f)),o.iushrn(1),a.iushrn(1)}e.cmp(i)>=0?(e.isub(i),s.isub(o),h.isub(a)):(i.isub(e),o.isub(s),a.isub(h))}return{a:o,b:a,gcd:i.iushln(u)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();var s,h=new n(1),o=new n(0),a=i.clone();while(e.cmpn(1)>0&&i.cmpn(1)>0){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0){e.iushrn(u);while(u-- >0)h.isOdd()&&h.iadd(a),h.iushrn(1)}for(var f=0,c=1;0===(i.words[0]&c)&&f<26;++f,c<<=1);if(f>0){i.iushrn(f);while(f-- >0)o.isOdd()&&o.iadd(a),o.iushrn(1)}e.cmp(i)>=0?(e.isub(i),h.isub(o)):(i.isub(e),o.isub(h))}return s=0===e.cmpn(1)?h:o,s.cmpn(0)<0&&s.iadd(t),s},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);do{while(e.isEven())e.iushrn(1);while(i.isEven())i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}while(1);return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0===(1&this.words[0])},n.prototype.isOdd=function(){return 1===(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"===typeof t);var e=t%26,i=(t-e)/26,s=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,h=i;0!==n&&h<this.length;h++){var o=0|this.words[h];o+=n,n=o>>>26,o&=67108863,this.words[h]=o}return 0!==n&&(this.words[h]=n,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var s=0|this.words[0];e=s===t?0:s<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new T(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function L(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"===typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),i=this.imulK(i),i=i.iadd(this.tmp),e=i.bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},s(B,x),B.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),s=0;s<r;s++)e.words[s]=t.words[s];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=n&i,s=10;s<t.length;s++){var h=0|t.words[s];t.words[s-10]=(h&i)<<4|n>>>22,n=h}n>>>=22,t.words[s-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},B.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},s(k,x),s(S,x),s(L,x),L.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new B;else if("p224"===t)e=new k;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new L}return _[t]=e,e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},T.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var i=this.m.add(new n(1)).iushrn(2);return this.pow(t,i)}var s=this.m.subn(1),h=0;while(!s.isZero()&&0===s.andln(1))h++,s.iushrn(1);r(!s.isZero());var o=new n(1).toRed(this),a=o.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new n(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(a))l.redIAdd(a);var f=this.pow(l,s),c=this.pow(t,s.addn(1).iushrn(1)),d=this.pow(t,s),m=h;while(0!==d.cmp(o)){for(var p=d,g=0;0!==p.cmp(o);g++)p=p.redSqr();r(g<m);var v=this.pow(f,new n(1).iushln(m-g-1));c=c.redMul(v),f=v.redSqr(),d=d.redMul(f),m=g}return c},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=new Array(1<<i);r[0]=new n(1).toRed(this),r[1]=t;for(var s=2;s<r.length;s++)r[s]=this.mul(r[s-1],t);var h=r[0],o=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),s=e.length-1;s>=0;s--){for(var l=e.words[s],f=u-1;f>=0;f--){var c=l>>f&1;h!==r[0]&&(h=this.sqr(h)),0!==c||0!==o?(o<<=1,o|=c,a++,(a===i||0===s&&0===f)&&(h=this.mul(h,r[o]),a=0,o=0)):a=0}u=26}return h},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new A(t)},s(A,T),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),h=s;return s.cmp(this.m)>=0?h=s.isub(this.m):s.cmpn(0)<0&&(h=s.iadd(this.m)),h._forceRed(this)},A.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}})(t,this)}).call(this,i("62e4")(t))},b2ed:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleMountainRange=void 0;const s=i("1c35"),n=r(i("94f8")),h=r(i("13ca"));class o extends h.default{constructor(t=n.default,e=[],i,r,h){super(),this.root=s.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},e=e.map(this.bufferify),this.hashFn=this.bufferifyFn(t),this.hashLeafFn=i,this.peakBaggingFn=r,this.hashBranchFn=h;for(const s of e)this.append(s)}append(t){t=this.bufferify(t);const e=this.hashFn(t),i=this.bufferToHex(e);this.data[i]&&this.bufferToHex(this.hashFn(this.data[i]))===i||(this.data[i]=t);const r=this.hashLeaf(this.size+1,e);this.hashes[this.size+1]=r,this.width+=1;const s=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const n=[];for(let h=0;h<s.length;h++)n[h]=this._getOrCreateNode(s[h]);this.root=this.peakBagging(this.width,n)}hashLeaf(t,e){return e=this.bufferify(e),this.hashLeafFn?this.bufferify(this.hashLeafFn(t,e)):this.hashFn(s.Buffer.concat([this.bufferify(t),e]))}hashBranch(t,e,i){return this.hashBranchFn?this.bufferify(this.hashBranchFn(t,e,i)):this.hashFn(s.Buffer.concat([this.bufferify(t),this.bufferify(e),this.bufferify(i)]))}getPeaks(){const t=this.getPeakIndexes(this.width),e=[];for(let i=0;i<t.length;i++)e[i]=this.hashes[t[i]];return e}getLeafIndex(t){return t%2===1?this.getSize(t):this.getSize(t-1)+1}getPeakIndexes(t){const e=this.numOfPeaks(t),i=[];let r=0,s=0;for(let n=255;n>0;n--)if(0!==(t&1<<n-1)&&(s=s+(1<<n)-1,i[r++]=s,i.length>=e))break;if(r!==i.length)throw new Error("invalid bit calculation");return i}numOfPeaks(t){let e=t,i=0;while(e>0)e%2===1&&i++,e>>=1;return i}peakBagging(t,e){const i=this.getSize(t);if(this.numOfPeaks(t)!==e.length)throw new Error("received invalid number of peaks");return 0!==t||e.length?this.peakBaggingFn?this.bufferify(this.peakBaggingFn(i,e)):this.hashFn(s.Buffer.concat([this.bufferify(i),...e.map(this.bufferify)])):s.Buffer.alloc(0)}getSize(t){return(t<<1)-this.numOfPeaks(t)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(t){return this.hashes[t]}mountainHeight(t){let e=1;while(1<<e<=t+e)e++;return e-1}heightAt(t){let e=t,i=0,r=0;while(e>i)e-=(1<<r)-1,r=this.mountainHeight(e),i=(1<<r)-1;return r-(i-e)}isLeaf(t){return 1===this.heightAt(t)}getChildren(t){const e=t-(1<<this.heightAt(t)-1),i=t-1;if(e===i)throw new Error("not a parent");return[e,i]}getMerkleProof(t){if(t>this.size)throw new Error("out of range");if(!this.isLeaf(t))throw new Error("not a leaf");const e=this.root,i=this.width,r=this.getPeakIndexes(this.width),s=[];let n=0;for(let l=0;l<r.length;l++)s[l]=this.hashes[r[l]],r[l]>=t&&0===n&&(n=r[l]);let h=0,o=0,a=this.heightAt(n);const u=[];while(n!==t)a--,[h,o]=this.getChildren(n),n=t<=h?h:o,u[a-1]=this.hashes[t<=h?o:h];return{root:e,width:i,peakBagging:s,siblings:u}}verify(t,e,i,r,s,n){r=this.bufferify(r);const h=this.getSize(e);if(h<i)throw new Error("index is out of range");if(!t.equals(this.peakBagging(e,s)))throw new Error("invalid root hash from the peaks");let o,a=0;const u=this.getPeakIndexes(e);for(let p=0;p<u.length;p++)if(u[p]>=i){o=s[p],a=u[p];break}if(!o)throw new Error("target not found");let l=n.length+1;const f=new Array(l);let c,d=0,m=0;while(l>0){if(f[--l]=a,a===i)break;[d,m]=this.getChildren(a),a=i>d?m:d}while(l<f.length)a=f[l],c=0===l?this.hashLeaf(a,this.hashFn(r)):a-1===f[l-1]?this.hashBranch(a,n[l-1],c):this.hashBranch(a,c,n[l-1]),l++;if(!c.equals(o))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(t,e){const i={};let r=0,s=0,n=e.length;for(let h=1;h<=32;h++)r=32-h,s=1<<h-1,i[r]=0!==(t&s)?e[--n]:0;if(0!==n)throw new Error("invalid number of peaks");return i}peakMapToPeaks(t,e){const i=this.numOfPeaks(t),r=new Array(i);let s=0;for(let n=0;n<32;n++)0!==e[n]&&(r[s++]=e[n]);if(s!==i)throw new Error("invalid number of peaks");return r}peakUpdate(t,e,i){const r={},s=t+1;let n=this.getLeafIndex(s),h=this.hashLeaf(n,i),o=0,a=0,u=!1,l=!1,f=!1;for(let c=1;c<=32;c++)o=32-c,f?r[o]=e[o]:(a=1<<c-1,u=0!==(t&a),l=0!==(s&a),n++,u&&(h=this.hashBranch(n,e[o],h)),l?(r[o]=u?e[o]:h,f=!0):r[o]=0);return r}rollUp(t,e,i,r){if(!t.equals(this.peakBagging(e,i)))throw new Error("invalid root hash from the peaks");let s=e,n=this.peaksToPeakMap(e,i);for(let h=0;h<r.length;h++)n=this.peakUpdate(s,n,r[h]),s++;return this.peakBagging(s,this.peakMapToPeaks(s,n))}_getOrCreateNode(t){if(t>this.size)throw new Error("out of range");if(!this.hashes[t]){const[e,i]=this.getChildren(t),r=this._getOrCreateNode(e),s=this._getOrCreateNode(i);this.hashes[t]=this.hashBranch(t,r,s)}return this.hashes[t]}}e.MerkleMountainRange=o,"undefined"!==typeof window&&(window.MerkleMountainRange=o),e.default=o},bb56:function(t,e,i){"use strict";var r=i("23e7"),s=i("3a9b"),n=i("e163"),h=i("d2bb"),o=i("e893"),a=i("7c73"),u=i("9112"),l=i("5c6c"),f=i("ab36"),c=i("6f19"),d=i("2266"),m=i("e391"),p=i("b622"),g=p("toStringTag"),v=Error,y=[].push,M=function(t,e){var i,r=s(w,this);h?i=h(new v,r?n(this):w):(i=r?this:a(w),u(i,g,"Error")),void 0!==e&&u(i,"message",m(e)),c(i,M,i.stack,1),arguments.length>2&&f(i,arguments[2]);var o=[];return d(t,y,{that:o}),u(i,"errors",o),i};h?h(M,v):o(M,v,{name:!0});var w=M.prototype=a(v.prototype,{constructor:l(1,M),message:l(1,""),name:l(1,"AggregateError")});r({global:!0,constructor:!0,arity:2},{AggregateError:M})},db6e:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MerkleTree=void 0;const s=r(i("6d46"));e.MerkleTree=s.default;var n=i("b2ed");Object.defineProperty(e,"MerkleMountainRange",{enumerable:!0,get:function(){return n.MerkleMountainRange}});var h=i("655a");Object.defineProperty(e,"IncrementalMerkleTree",{enumerable:!0,get:function(){return h.IncrementalMerkleTree}});var o=i("04f0");Object.defineProperty(e,"MerkleSumTree",{enumerable:!0,get:function(){return o.MerkleSumTree}}),e.default=s.default},feaa:function(t,e,i){(function(e){t.exports=function(t){for(var i=new e(t.length),r=0,s=t.length-1;r<=s;++r,--s)i[r]=t[s],i[s]=t[r];return i}}).call(this,i("1c35").Buffer)}}]);