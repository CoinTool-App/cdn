var Fe=Object.defineProperty,$e=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ye=(e,t,o)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,M=(e,t)=>{for(var o in t||(t={}))Be.call(t,o)&&ye(e,o,t[o]);if(ge)for(var o of ge(t))Ne.call(t,o)&&ye(e,o,t[o]);return e},J=(e,t)=>$e(e,xe(t));import{c as ze,u as qe,d as R,a as Z,b as K,o as m,e as y,F as te,r as oe,f as _,n as H,g as c,h as P,i as ae,P as Me,j as de,k as ne,w as we,C as He,l as _e,m as U,t as G,p as O,q as be,s as pe,T as Ue,v as Ge,x as se,y as We,z as Ae,A as De,B as Je,D as Ye}from"./vendor.45b0d8f6.js";const Ze=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};Ze();var k;(function(e){e.ZH="zh",e.EN="en"})(k||(k={}));var F;(function(e){e.Undo="undo",e.Redo="redo",e.Flip="flip",e.Code="code"})(F||(F={}));var re;(function(e){e.Male="male",e.Female="female",e.NotSet="notSet"})(re||(re={}));var a;(function(e){e.Face="face",e.Tops="tops",e.Ear="ear",e.Earrings="earrings",e.Eyebrows="eyebrows",e.Eyes="eyes",e.Nose="nose",e.Glasses="glasses",e.Mouth="mouth",e.Beard="beard",e.Clothes="clothes"})(a||(a={}));var $;(function(e){e.Circle="circle",e.Square="square",e.Squircle="squircle"})($||($={}));var B;(function(e){e.Base="base",e.Monkey="monkey"})(B||(B={}));var E;(function(e){e.Fonze="fonze",e.Funny="funny",e.Clean="clean",e.Punk="punk",e.Danny="danny",e.Wave="wave",e.Turban="turban",e.Pixie="pixie",e.Beanie="beanie",e.None="none"})(E||(E={}));var N;(function(e){e.Attached="attached",e.Detached="detached",e.None="none"})(N||(N={}));var W;(function(e){e.Hoop="hoop",e.Stud="stud",e.None="none"})(W||(W={}));var L;(function(e){e.Up="up",e.Down="down",e.Eyelashesup="eyelashesup",e.Eyelashesdown="eyelashesdown",e.None="none"})(L||(L={}));var S;(function(e){e.Ellipse="ellipse",e.Smiling="smiling",e.Eyeshadow="eyeshadow",e.Round="round"})(S||(S={}));var j;(function(e){e.Curve="curve",e.Round="round",e.Pointed="pointed",e.None="none"})(j||(j={}));var A;(function(e){e.Frown="frown",e.Laughing="laughing",e.Nervous="nervous",e.Pucker="pucker",e.Sad="sad",e.Smile="smile",e.Smirk="smirk",e.Surprised="surprised",e.None="none"})(A||(A={}));var X;(function(e){e.Scruff="scruff",e.None="none"})(X||(X={}));var Y;(function(e){e.Round="round",e.Square="square",e.None="none"})(Y||(Y={}));var V;(function(e){e.Crew="crew",e.Collared="collared",e.Open="open",e.None="none"})(V||(V={}));const Ke="modulepreload",Ce={},Xe="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/",s=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${Xe}${n}`,n in Ce)return;Ce[n]=!0;const r=n.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":Ke,r||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),r)return new Promise((g,h)=>{u.addEventListener("load",g),u.addEventListener("error",h)})})).then(()=>t())},Oe={[a.Face]:{zIndex:10},[a.Ear]:{zIndex:102},[a.Earrings]:{zIndex:103},[a.Eyebrows]:{zIndex:70},[a.Eyes]:{zIndex:50},[a.Nose]:{zIndex:60},[a.Glasses]:{zIndex:90},[a.Mouth]:{zIndex:100},[a.Beard]:{zIndex:105},[a.Tops]:{zIndex:80},[a.Clothes]:{zIndex:110}},D={gender:[re.Male,re.Female],wrapperShape:Object.values($),faceShape:Object.values(B),topsShape:Object.values(E),earShape:Object.values(N),earringsShape:Object.values(W),eyebrowsShape:Object.values(L),eyesShape:Object.values(S),noseShape:Object.values(j),glassesShape:Object.values(Y),mouthShape:Object.values(A),beardShape:Object.values(X),clothesShape:Object.values(V),backgroundColor:["#6BD9E9","#FC909F","#F4D150","#E0DDFF","#D2EFF3","#FFEDEF","#FFEBA4","#506AF4","#F48150","#48A99A","#C09FFF","#FD6F5D","linear-gradient(45deg, #E3648C, #D97567)","linear-gradient(62deg, #8EC5FC, #E0C3FC)","linear-gradient(90deg, #ffecd2, #fcb69f)","linear-gradient(120deg, #a1c4fd, #c2e9fb)","linear-gradient(-135deg, #fccb90, #d57eeb)","#000000","#ffffff","transparent"],skinColor:["#F9C9B6","#AC6651"],clothesColor:["#9287FF","#6BD9E9","#FC909F","#F4D150","#77311D"]},Re={lg:976},z="none",Qe=.1,Ie=[{wrapperShape:"squircle",background:{color:"#E0DDFF"},widgets:{face:{shape:B.Base},tops:{shape:E.Pixie},ear:{shape:N.Attached},earrings:{shape:W.Stud},eyebrows:{shape:L.Up},eyes:{shape:S.Eyeshadow},nose:{shape:j.Pointed},glasses:{shape:z},mouth:{shape:A.Laughing},beard:{shape:z},clothes:{shape:V.Crew}}},{wrapperShape:"squircle",background:{color:"#F4D150"},widgets:{face:{shape:B.Base},tops:{shape:E.Clean},ear:{shape:N.Attached},earrings:{shape:z},eyebrows:{shape:L.Eyelashesdown},eyes:{shape:S.Round},nose:{shape:j.Round},glasses:{shape:z},mouth:{shape:A.Surprised},beard:{shape:z},clothes:{shape:V.Crew}}}],et=["quark","micromessenger","weibo","douban"],tt=800;function I(e,{avoid:t=[],usually:o=[]}={}){const n=t.filter(Boolean),r=e.filter(p=>!n.includes(p)),i=o.filter(Boolean).reduce((p,d)=>p.concat(new Array(15).fill(d)),[]),u=r.concat(i),g=Math.floor(Math.random()*u.length);return u[g]}function ve(e={},t={}){var u,g,h,p,d,v,l,w,f,b,C,x,q,ue,Q;const o=I(D.gender),n=[];let r=[E.Danny,E.Wave,E.Pixie];return o===re.Male&&(n.push(X.Scruff),r=D.topsShape.filter(ee=>!r.includes(ee))),{gender:o,wrapperShape:(e==null?void 0:e.wrapperShape)||I(D.wrapperShape),background:{color:I(D.backgroundColor,{avoid:[(u=t.background)==null?void 0:u.color]})},widgets:{face:{shape:I(D.faceShape)},tops:{shape:I(r,{avoid:[(h=(g=t.widgets)==null?void 0:g.tops)==null?void 0:h.shape]})},ear:{shape:I(D.earShape,{avoid:[(d=(p=t.widgets)==null?void 0:p.ear)==null?void 0:d.shape]})},earrings:{shape:I(D.earringsShape,{usually:[z]})},eyebrows:{shape:I(D.eyebrowsShape,{avoid:[(l=(v=t.widgets)==null?void 0:v.eyebrows)==null?void 0:l.shape]})},eyes:{shape:I(D.eyesShape,{avoid:[(f=(w=t.widgets)==null?void 0:w.eyes)==null?void 0:f.shape]})},nose:{shape:I(D.noseShape,{avoid:[(C=(b=t.widgets)==null?void 0:b.nose)==null?void 0:C.shape]})},glasses:{shape:I(D.glassesShape,{usually:[z]})},mouth:{shape:I(D.mouthShape,{avoid:[(q=(x=t.widgets)==null?void 0:x.mouth)==null?void 0:q.shape]})},beard:{shape:I(n,{usually:[z]})},clothes:{shape:I(D.clothesShape,{avoid:[(Q=(ue=t.widgets)==null?void 0:ue.clothes)==null?void 0:Q.shape]})}}}}function Le(){return Ie[Math.floor(Math.random()*Ie.length)]}function ot(){s(()=>import("./confetti.module.0762cd04.js"),[]).then(e=>{const t=document.querySelector("#confetti");if(!t)return;const o=e.create(t,{resize:!0,useWorker:!0,disableForReducedMotion:!0}),n=performance.now()+1*1e3,r=["#6967fe","#85e9f4","#e16984"];(function i(){o({particleCount:r.length,angle:60,spread:55,origin:{x:0},colors:r}),o({particleCount:r.length,angle:120,spread:55,origin:{x:1},colors:r}),performance.now()<n&&requestAnimationFrame(i)})()})}function st(e){return e?(typeof e!="string"&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,t=>{let o="";return/^"/.test(t)?/:$/.test(t)?o="key":o="string":/true|false/.test(t)?o="boolean":/null/.test(t)?o="null":o="number",`<span class="token ${o}">${t}</span>`})):""}const Se="SET_AVATAR_OPTION",Te="UNDO",Pe="REDO",fe="SET_SIDER_STATUS";var rt=ze({strict:!0,state:{history:{past:[],present:ve({wrapperShape:$.Squircle}),future:[]},isSiderCollapsed:window.innerWidth<=Re.lg},mutations:{[Se](e,t){e.history={past:[...e.history.past,e.history.present],present:t,future:[]}},[Te](e){if(e.history.past.length>0){const t=e.history.past[e.history.past.length-1],o=e.history.past.slice(0,e.history.past.length-1);e.history={past:o,present:t,future:[e.history.present,...e.history.future]}}},[Pe](e){if(e.history.future.length>0){const t=e.history.future[0],o=e.history.future.slice(1);e.history={past:[...e.history.past,e.history.present],present:t,future:o}}},[fe](e,t){t!==e.isSiderCollapsed&&(e.isSiderCollapsed=t)}}});const je=Symbol();function ie(){return qe(je)}var at="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-back.88612e3f.svg",nt="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-code.ed069616.svg",it="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-flip.5d6b1bc4.svg",lt="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-next.a3453347.svg";var T=(e,t)=>{for(const[o,n]of t)e[o]=n;return e};const ct={class:"action-menu"},ut=["title","onClick"],dt=["src","alt"],_t=R({emits:["actionHandler"],setup(e,{emit:t}){const{t:o}=Z(),n=ie(),r=K(()=>n.state.history.past.length>0),i=K(()=>n.state.history.future.length>0),u=K(()=>[{type:F.Undo,icon:at,tip:o("action.undo"),disabled:!r.value},{type:F.Redo,icon:lt,tip:o("action.redo"),disabled:!i.value},{type:F.Flip,icon:it,tip:o("action.flip")},{type:F.Code,icon:nt,tip:o("action.code")}]);return(g,h)=>(m(),y("div",ct,[(m(!0),y(te,null,oe(_(u),p=>(m(),y("div",{key:p.type,class:H(["menu-item",{disabled:p.disabled}]),title:p.tip,onClick:d=>t("actionHandler",p.type)},[c("img",{src:p.icon,alt:p.tip},null,8,dt)],10,ut))),128))]))}});var pt=T(_t,[["__scopeId","data-v-44856914"]]),vt="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-close.093e6e68.svg";const Ve=R({props:{options:{type:null,required:!1}},setup(e){const t=e,o=P();let n;return ae(()=>{if(!o.value){console.warn("No valid 'PerfectScrollbar' container found");return}n=new Me(o.value,M({minScrollbarLength:20,maxScrollbarLength:160},t.options))}),de(()=>{n.destroy()}),(r,i)=>(m(),y("div",{ref:(u,g)=>{g.scrollWrapper=u,o.value=u},style:{position:"relative",overflow:"hidden"}},[ne(r.$slots,"default")],512))}});function he(){const e=ie();return[K(()=>e.state.history.present),n=>{e.commit(Se,n)}]}function ke(){const e=ie();return{isCollapsed:K(()=>e.state.isSiderCollapsed),openSider:()=>{e.commit(fe,!1)},closeSider:()=>{e.commit(fe,!0)}}}const ft={class:"code-box"},ht={class:"code-header"},mt={class:"title"},Et=["src","alt"],gt={class:"code-content-box"},yt=["innerHTML"],wt=["data-clipboard-text"],bt=R({props:{visible:{type:Boolean,required:!1}},emits:["close"],setup(e,{emit:t}){const o=e,{t:n}=Z(),[r]=he(),i=K(()=>JSON.stringify(r.value,null,4)),u=P("");we(()=>{i.value&&(u.value=st(i.value))});const g=P(!1);let h;return ae(()=>{h=new He("#copy-code-btn"),h.on("success",p=>{g.value=!0,setTimeout(()=>{g.value=!1},800),p.clearSelection()})}),de(()=>{h.destroy()}),(p,d)=>(m(),_e(Ue,{name:"fade"},{default:U(()=>[o.visible?(m(),y("div",{key:0,class:"code-modal",onClick:d[1]||(d[1]=be(v=>t("close"),["self"]))},[c("div",ft,[c("div",ht,[c("div",mt,G(_(n)("text.codeModalTitle")),1),c("div",{class:"close-btn",onClick:d[0]||(d[0]=v=>t("close"))},[c("img",{src:_(vt),class:"icon-close",alt:_(n)("action.close")},null,8,Et)])]),c("div",gt,[O(Ve,{class:"code-scroll-wrapper",options:{suppressScrollX:!1}},{default:U(()=>[c("pre",null,[c("code",{class:"code-content",innerHTML:u.value},null,8,yt)])]),_:1}),c("button",{id:"copy-code-btn",class:H(["copy-btn",{copied:g.value}]),"data-clipboard-text":_(i)},G(g.value?_(n)("action.copied"):_(n)("action.copyCode")),11,wt)])])])):pe("",!0)]),_:1}))}});var At=T(bt,[["__scopeId","data-v-165a0ab4"]]);const Dt={class:"setting-section"},Ct={class:"section-title"},Ot=R({props:{title:{type:String,required:!1}},setup(e){const t=e;return(o,n)=>(m(),y("div",Dt,[c("div",Ct,G(t.title),1),c("div",null,[ne(o.$slots,"default",{},void 0,!0)])]))}});var me=T(Ot,[["__scopeId","data-v-0a042232"]]);const le={[a.Face]:{[B.Base]:()=>s(()=>import("./base.4513d367.js"),[]),[B.Monkey]:()=>s(()=>import("./monkey.e1258707.js"),[])},[a.Ear]:{[N.Attached]:()=>s(()=>import("./attached.d5a509e9.js"),[]),[N.Detached]:()=>s(()=>import("./detached.cd5c0883.js"),[])},[a.Eyes]:{[S.Ellipse]:()=>s(()=>import("./ellipse.4dd13248.js"),[]),[S.Eyeshadow]:()=>s(()=>import("./eyeshadow.ee5505a9.js"),[]),[S.Round]:()=>s(()=>import("./round.53811b8f.js"),[]),[S.Smiling]:()=>s(()=>import("./smiling.6213728a.js"),[])},[a.Beard]:{[X.Scruff]:()=>s(()=>import("./scruff.0d474b9d.js"),[])},[a.Clothes]:{[V.Collared]:()=>s(()=>import("./collared.851a9f8c.js"),[]),[V.Crew]:()=>s(()=>import("./crew.f37ae6b7.js"),[]),[V.Open]:()=>s(()=>import("./open.1f183d62.js"),[])},[a.Earrings]:{[W.Hoop]:()=>s(()=>import("./hoop.99b38c8d.js"),[]),[W.Stud]:()=>s(()=>import("./stud.736f2a3a.js"),[])},[a.Eyebrows]:{[L.Down]:()=>s(()=>import("./down.caab3e66.js"),[]),[L.Eyelashesdown]:()=>s(()=>import("./eyelashesdown.68c94734.js"),[]),[L.Eyelashesup]:()=>s(()=>import("./eyelashesup.75d72440.js"),[]),[L.Up]:()=>s(()=>import("./up.571f52b7.js"),[])},[a.Glasses]:{[Y.Round]:()=>s(()=>import("./round.934cf884.js"),[]),[Y.Square]:()=>s(()=>import("./square.5c3898cc.js"),[])},[a.Mouth]:{[A.Frown]:()=>s(()=>import("./frown.b826704b.js"),[]),[A.Laughing]:()=>s(()=>import("./laughing.0e9c4472.js"),[]),[A.Nervous]:()=>s(()=>import("./nervous.9a08f217.js"),[]),[A.Pucker]:()=>s(()=>import("./pucker.909c210d.js"),[]),[A.Sad]:()=>s(()=>import("./sad.6402e6ab.js"),[]),[A.Smile]:()=>s(()=>import("./smile.49a9ae94.js"),[]),[A.Smirk]:()=>s(()=>import("./smirk.2f70da95.js"),[]),[A.Surprised]:()=>s(()=>import("./surprised.6574eb42.js"),[])},[a.Nose]:{[j.Curve]:()=>s(()=>import("./curve.b1680b44.js"),[]),[j.Pointed]:()=>s(()=>import("./pointed.9d9a810c.js"),[]),[j.Round]:()=>s(()=>import("./round.f5932b17.js"),[])},[a.Tops]:{[E.Beanie]:()=>s(()=>import("./beanie.d28ca1af.js"),[]),[E.Clean]:()=>s(()=>import("./clean.1ea659e6.js"),[]),[E.Danny]:()=>s(()=>import("./danny.0c19d968.js"),[]),[E.Fonze]:()=>s(()=>import("./fonze.f855fa3e.js"),[]),[E.Funny]:()=>s(()=>import("./funny.ffc2c94c.js"),[]),[E.Pixie]:()=>s(()=>import("./pixie.832b1a28.js"),[]),[E.Punk]:()=>s(()=>import("./punk.5772bc1f.js"),[]),[E.Turban]:()=>s(()=>import("./turban.029b07b7.js"),[]),[E.Wave]:()=>s(()=>import("./wave.948486fe.js"),[])}},ce={[a.Face]:{[B.Base]:()=>s(()=>import("./base.d88a270a.js"),[]),[B.Monkey]:()=>s(()=>import("./monkey.9e76f9db.js"),[])},[a.Ear]:{[N.Attached]:()=>s(()=>import("./attached.04632675.js"),[]),[N.Detached]:()=>s(()=>import("./detached.05f1ed8c.js"),[])},[a.Eyes]:{[S.Ellipse]:()=>s(()=>import("./ellipse.e17c0112.js"),[]),[S.Eyeshadow]:()=>s(()=>import("./eyeshadow.e952b02b.js"),[]),[S.Round]:()=>s(()=>import("./round.0e7c03f1.js"),[]),[S.Smiling]:()=>s(()=>import("./smiling.1b7c47a4.js"),[])},[a.Beard]:{[X.Scruff]:()=>s(()=>import("./scruff.9fff0b98.js"),[])},[a.Clothes]:{[V.Collared]:()=>s(()=>import("./collared.534fe35b.js"),[]),[V.Crew]:()=>s(()=>import("./crew.0d8fb0c6.js"),[]),[V.Open]:()=>s(()=>import("./open.43353202.js"),[])},[a.Earrings]:{[W.Hoop]:()=>s(()=>import("./hoop.08ec4532.js"),[]),[W.Stud]:()=>s(()=>import("./stud.2f888642.js"),[])},[a.Eyebrows]:{[L.Down]:()=>s(()=>import("./down.4a71f911.js"),[]),[L.Eyelashesdown]:()=>s(()=>import("./eyelashesdown.54878f1c.js"),[]),[L.Eyelashesup]:()=>s(()=>import("./eyelashesup.824704b4.js"),[]),[L.Up]:()=>s(()=>import("./up.251891a5.js"),[])},[a.Glasses]:{[Y.Round]:()=>s(()=>import("./round.64817114.js"),[]),[Y.Square]:()=>s(()=>import("./square.32f26cf0.js"),[])},[a.Mouth]:{[A.Frown]:()=>s(()=>import("./frown.d56d8487.js"),[]),[A.Laughing]:()=>s(()=>import("./laughing.00bb9e02.js"),[]),[A.Nervous]:()=>s(()=>import("./nervous.e5b20b14.js"),[]),[A.Pucker]:()=>s(()=>import("./pucker.4175d388.js"),[]),[A.Sad]:()=>s(()=>import("./sad.b2f40925.js"),[]),[A.Smile]:()=>s(()=>import("./smile.a51fc949.js"),[]),[A.Smirk]:()=>s(()=>import("./smirk.bcd1ce10.js"),[]),[A.Surprised]:()=>s(()=>import("./surprised.165d4852.js"),[])},[a.Nose]:{[j.Curve]:()=>s(()=>import("./curve.07b09785.js"),[]),[j.Pointed]:()=>s(()=>import("./pointed.530a8d46.js"),[]),[j.Round]:()=>s(()=>import("./round.acb35e17.js"),[])},[a.Tops]:{[E.Beanie]:()=>s(()=>import("./beanie.ba4230be.js"),[]),[E.Clean]:()=>s(()=>import("./clean.e228de68.js"),[]),[E.Danny]:()=>s(()=>import("./danny.3969d15b.js"),[]),[E.Fonze]:()=>s(()=>import("./fonze.82adb1ce.js"),[]),[E.Funny]:()=>s(()=>import("./funny.78babb5a.js"),[]),[E.Pixie]:()=>s(()=>import("./pixie.641bae09.js"),[]),[E.Punk]:()=>s(()=>import("./punk.03f85ac7.js"),[]),[E.Turban]:()=>s(()=>import("./turban.0309ef68.js"),[]),[E.Wave]:()=>s(()=>import("./wave.e02ee196.js"),[])}};const Rt={class:"configurator"},It={class:"wrapper-shape"},Lt=["title","onClick"],St={class:"bg-color-list"},Tt=["onClick"],Pt={class:"widget-list"},jt=["onClick","innerHTML"],Vt=R({setup(e){const{t}=Z(),[o,n]=he(),r=Ge(Object.values(a)),i=P([]);ae(()=>{(async()=>{const d=await Promise.all(r.map(v=>u(v)));i.value=r.map((v,l)=>({widgetType:v,widgetList:d[l]}))})()});async function u(d){const v=D[`${d}Shape`],l=v.map(async f=>{var b;return f!=="none"&&((b=ce==null?void 0:ce[d])==null?void 0:b[f])?(await ce[d][f]()).default:"X"});return await Promise.all(l).then(f=>f.map((b,C)=>({widgetType:d,widgetShape:v[C],svgRaw:b})))}function g(d){d!==o.value.wrapperShape&&n(J(M({},o.value),{wrapperShape:d}))}function h(d){d!==o.value.background.color&&n(J(M({},o.value),{background:J(M({},o.value.background),{color:d})}))}function p(d,v){var l,w;v&&((l=o.value.widgets)==null?void 0:l[d])&&n(J(M({},o.value),{widgets:J(M({},o.value.widgets),{[d]:J(M({},(w=o.value.widgets)==null?void 0:w[d]),{shape:v})})}))}return(d,v)=>(m(),_e(Ve,{class:"configurator-scroll"},{default:U(()=>[c("div",Rt,[O(me,{title:_(t)("label.wrapperShape")},{default:U(()=>[c("ul",It,[(m(!0),y(te,null,oe(_(D).wrapperShape,l=>(m(),y("li",{key:l,class:"wrapper-shape__item",title:_(t)(`wrapperShape.${l}`),onClick:w=>g(l)},[c("i",{class:H(["shape",[l,{active:l===_(o).wrapperShape}]])},null,2)],8,Lt))),128))])]),_:1},8,["title"]),O(me,{title:_(t)("label.backgroundColor")},{default:U(()=>[c("ul",St,[(m(!0),y(te,null,oe(_(D).backgroundColor,l=>(m(),y("li",{key:l,class:"bg-color-list__item",onClick:w=>h(l)},[c("div",{style:se({background:l}),class:H(["bg-color",{active:l===_(o).background.color,transparent:l==="transparent"}])},null,6)],8,Tt))),128))])]),_:1},8,["title"]),(m(!0),y(te,null,oe(i.value,l=>(m(),_e(me,{key:l.widgetType,title:_(t)(`widgetType.${l.widgetType}`)},{default:U(()=>[c("ul",Pt,[(m(!0),y(te,null,oe(l.widgetList,w=>{var f,b;return m(),y("li",{key:w.widgetShape,class:H(["list-item",{selected:w.widgetShape===((b=(f=_(o).widgets)==null?void 0:f[l.widgetType])==null?void 0:b.shape)}]),onClick:C=>p(l.widgetType,w.widgetShape),innerHTML:w.svgRaw},null,10,jt)}),128))])]),_:2},1032,["title"]))),128))])]),_:1}))}});var kt=T(Vt,[["__scopeId","data-v-460982b6"]]);const Ft={class:"modal-body"},$t={class:"avatar-preview"},xt=["src"],Bt={class:"tip"},Nt=R({props:{visible:{type:Boolean,required:!1},imageUrl:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const o=e,{t:n}=Z();return(r,i)=>o.visible?(m(),y("div",{key:0,class:"download-modal-wrapper",onClick:i[2]||(i[2]=u=>t("close"))},[c("div",{class:"download-modal",onClick:i[1]||(i[1]=be(()=>{},["stop"]))},[c("div",Ft,[c("div",$t,[c("img",{alt:"vue-color-avatar",src:o.imageUrl,class:"avatar-img"},null,8,xt)]),c("p",Bt,G(_(n)("text.downloadTip"))+" \u{1F973}",1)]),c("button",{class:"close-btn",onClick:i[0]||(i[0]=u=>t("close"))},G(_(n)("action.close")),1)])])):pe("",!0)}});var zt=T(Nt,[["__scopeId","data-v-dfae65bc"]]);const qt=R({props:{color:{type:null,required:!0}},setup(e){const t=e;return(o,n)=>(m(),y("div",{class:"avatar-background",style:se({background:t.color})},null,4))}});var Mt=T(qt,[["__scopeId","data-v-90fc29f2"]]);const Ht=["innerHTML"],Ut=R({props:{option:{type:null,required:!0,default:()=>ve()},size:{type:Number,required:!1,default:280}},setup(e,{expose:t}){const o=e,{option:n,size:r}=We(o),i=P();t({avatarRef:i});function u(){return{[$.Circle]:n.value.wrapperShape===$.Circle,[$.Square]:n.value.wrapperShape===$.Square,[$.Squircle]:n.value.wrapperShape===$.Squircle}}const g=P("");return we(async()=>{const h=Object.entries(n.value.widgets).sort((v,l)=>{var b,C,x,q;const w=(C=(b=Oe[v[0]])==null?void 0:b.zIndex)!=null?C:0,f=(q=(x=Oe[l[0]])==null?void 0:x.zIndex)!=null?q:0;return w-f}),p=h.map(async([v,l])=>{var w;return l.shape!==z&&((w=le==null?void 0:le[v])==null?void 0:w[l.shape])?(await le[v][l.shape]()).default:""}),d=await Promise.all(p).then(v=>v.map((l,w)=>{const f=l.slice(l.indexOf(">",l.indexOf("<svg"))+1).replace("</svg>","");return`
        <g id="vue-color-avatar-${h[w][0]}">
          ${f}
        </g>
      `}));g.value=`
    <svg
      width="${r.value}"
      height="${r.value}"
      viewBox="0 0 ${r.value/.7} ${r.value/.7}"
      preserveAspectRatio="xMidYMax meet"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g transform="translate(100, 65)">
        ${d.join("")}
      </g>
    </svg>
  `}),(h,p)=>(m(),y("div",{ref:(d,v)=>{v.avatarRef=d,i.value=d},class:H(["vue-color-avatar",u()]),style:se({width:`${_(r)}px`,height:`${_(r)}px`})},[O(Mt,{color:_(n).background.color},null,8,["color"]),c("div",{class:"avatar-payload",innerHTML:g.value},null,8,Ht)],6))}});var Gt=T(Ut,[["__scopeId","data-v-071a3fc6"]]);const Wt=R({setup(e){const{isCollapsed:t,openSider:o,closeSider:n}=ke();function r(){window.innerWidth<=Re.lg?n():o()}return ae(()=>{(function(){(function(u,g,h){h=h||window;let p=!1;const d=()=>{p||(p=!0,requestAnimationFrame(()=>{h.dispatchEvent(new CustomEvent(g)),p=!1}))};h.addEventListener(u,d)})("resize","optimizedResize",window)})(),window.addEventListener("optimizedResize",r)}),de(()=>{window.removeEventListener("optimizedResize",r)}),(i,u)=>(m(),y("section",{class:H(["container",{full:_(t)}])},[ne(i.$slots,"default",{},void 0,!0)],2))}});var Jt=T(Wt,[["__scopeId","data-v-8ab22368"]]);const Yt={class:"footer"},Zt=R({setup(e){const{locale:t}=Z();function o(){t.value=t.value===k.EN?k.ZH:k.EN}return(n,r)=>(m(),y("footer",Yt,[c("div",{class:"locale",onClick:o},G(_(t)===_(k).EN?"\u7B80\u4F53\u4E2D\u6587":"English"),1)]))}});var Kt=T(Zt,[["__scopeId","data-v-0c46dd98"]]);const Xt=R({props:{size:{type:Number,required:!1,default:2.5}},setup(e){const t=e;return(o,n)=>(m(),y("img",{style:se([{width:"40px",height:"40px"},{width:`${t.size}rem`,height:`${t.size}rem`}]),src:"https://cdn.jsdelivr.net/gh/c0deCn/wiki@master/logo.png",alt:"logo"},null,4))}});function Qt(e,t){}const eo=e=>(Ae("data-v-10330562"),e=e(),De(),e),to={class:"header"},oo=eo(()=>c("h2",{class:"site-title"},"CoinTool",-1)),so=R({setup(e){return(t,o)=>(m(),y("header",to,[O(Xt),oo,pe("",!0)]))}});var ro=T(so,[["__scopeId","data-v-10330562"]]),ao="https://cdn.jsdelivr.net/gh/CoinTool-App/cdn/iframe/avatar/assets/icon-right.8e89d2c1.svg";const no=["src"],io=R({setup(e){const{isCollapsed:t,openSider:o,closeSider:n}=ke();return(r,i)=>(m(),y("aside",{class:H(["sider",{collapsed:_(t)}])},[ne(r.$slots,"default",{},void 0,!0),c("div",{class:"trigger",onClick:i[0]||(i[0]=u=>_(t)?_(o)():_(n)())},[c("img",{src:_(ao),class:"icon-right",alt:"arrow"},null,8,no)])],2))}});var lo=T(io,[["__scopeId","data-v-43955191"]]);const co={},uo={id:"confetti",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}};function _o(e,t){return m(),y("canvas",uo)}var po=T(co,[["render",_o]]);const vo=e=>(Ae("data-v-466dca81"),e=e(),De(),e),fo={class:"main"},ho={class:"content-warpper"},mo={class:"content-view"},Eo={class:"playground"},go={class:"avatar-wrapper"},yo={class:"action-group"},wo=["disabled"],bo=vo(()=>c("div",{class:"gradient-bg"},[c("div",{class:"gradient-top"}),c("div",{class:"gradient-bottom"})],-1)),Ao=R({setup(e){const t=ie(),[o,n]=he(),{t:r}=Z(),i=P();function u(){if(Math.random()<=Qe){let f=Le();for(;JSON.stringify(f)===JSON.stringify(o.value);)f=Le();f.wrapperShape=o.value.wrapperShape,n(f),ot()}else{const f=ve(o.value);n(f)}}const g=P(!1),h=P(!1),p=P("");async function d(){var f;try{h.value=!0;const b=(f=i.value)==null?void 0:f.avatarRef,C=window.navigator.userAgent.toLowerCase(),x=et.some(q=>C.indexOf(q)!==-1);if(b){const Q=(await(await s(()=>import("./html2canvas.esm.0488f9f9.js"),[])).default(b,{backgroundColor:null})).toDataURL();if(x)p.value=Q,g.value=!0;else{const ee=document.createElement("a");ee.href=Q,ee.download="vue-color-avatar.png",ee.click()}}Qt("click_download",{event_category:"click"})}finally{setTimeout(()=>{h.value=!1},tt)}}const v=P(!1),l=P(!1);function w(f){switch(f){case F.Undo:t.commit(Te);break;case F.Redo:t.commit(Pe);break;case F.Flip:v.value=!v.value;break;case F.Code:l.value=!l.value;break}}return(f,b)=>(m(),y("main",fo,[O(Jt,null,{default:U(()=>[c("div",ho,[c("div",mo,[O(ro),c("div",Eo,[c("div",go,[O(Gt,{ref:(C,x)=>{x.colorAvatarRef=C,i.value=C},option:_(o),size:280,style:se({transform:`rotateY(${v.value?-180:0}deg)`})},null,8,["option","style"])]),O(pt,{onActionHandler:w}),c("div",yo,[c("button",{class:"action-randomize",onClick:u},G(_(r)("action.randomize")),1),c("button",{class:"action-download",disabled:h.value,onClick:d},G(h.value?`${_(r)("action.downloading")}...`:_(r)("action.download")),9,wo)])]),O(Kt),O(At,{visible:l.value,onClose:b[0]||(b[0]=C=>l.value=!1)},null,8,["visible"]),O(zt,{visible:g.value,"image-url":p.value,onClose:b[1]||(b[1]=C=>{g.value=!1,p.value=""})},null,8,["visible","image-url"])]),O(po),bo])]),_:1}),O(lo,null,{default:U(()=>[O(kt)]),_:1})]))}});var Do=T(Ao,[["__scopeId","data-v-466dca81"]]),Co={action:{undo:"undo",redo:"redo",flip:"flip",code:"code",randomize:"Randomize",download:"Download",copyCode:"Copy",copied:"Copied",downloading:"Downloading",close:"Close"},label:{wrapperShape:"Avatar Shape",backgroundColor:"Background Color"},widgetType:{[a.Face]:"Face",[a.Tops]:"Tops",[a.Ear]:"Ear",[a.Earrings]:"Earrings",[a.Eyebrows]:"Eyebrows",[a.Eyes]:"Eyes",[a.Nose]:"Nose",[a.Glasses]:"Glasses",[a.Mouth]:"Mouth",[a.Beard]:"Beard",[a.Clothes]:"Clothes"},wrapperShape:{circle:"Circle",square:"Square",squircle:"Squircle"},text:{codeModalTitle:"Code",downloadTip:"LONG PRESS or RIGHT CLICK to save"}},Oo={action:{undo:"\u64A4\u9500",redo:"\u8FD8\u539F",flip:"\u6C34\u5E73\u7FFB\u8F6C",code:"\u914D\u7F6E\u4EE3\u7801",randomize:"\u968F\u673A\u751F\u6210",download:"\u4E0B\u8F7D\u5934\u50CF",copyCode:"\u590D\u5236\u4EE3\u7801",copied:"\u5DF2\u590D\u5236",downloading:"\u51C6\u5907\u4E0B\u8F7D",close:"\u5173\u95ED"},label:{wrapperShape:"\u5934\u50CF\u5F62\u72B6",backgroundColor:"\u80CC\u666F\u989C\u8272"},widgetType:{[a.Face]:"\u8138\u86CB",[a.Tops]:"\u5934\u53D1 / \u5934\u9970",[a.Ear]:"\u8033\u6735",[a.Earrings]:"\u8033\u73AF",[a.Eyebrows]:"\u7709\u6BDB",[a.Eyes]:"\u773C\u775B",[a.Nose]:"\u9F3B\u5B50",[a.Glasses]:"\u773C\u955C",[a.Mouth]:"\u5634\u5DF4",[a.Beard]:"\u80E1\u5B50",[a.Clothes]:"\u8863\u7740"},wrapperShape:{circle:"\u5706\u5F62",square:"\u65B9\u5F62",squircle:"\u65B9\u5706\u5F62"},text:{codeModalTitle:"\u914D\u7F6E\u4EE3\u7801",downloadTip:"\u957F\u6309\u56FE\u7247\u6216\u53F3\u952E\u70B9\u51FB\u4E0B\u8F7D\u81F3\u672C\u5730\u76F8\u518C"}};const Ro={en:Co,zh:Oo},[Io,Lo]=/^zh\b/.test(window.navigator.language)?[k.ZH,k.EN]:[k.EN,k.ZH];var So=Je({locale:Io,fallbackLocale:Lo,messages:Ro});const Ee=Ye(Do);Ee.use(rt,je);Ee.use(So);Ee.mount("#app");
